(function(){var r={version:"0.9.0",name:"PluginDetect",addPlugin:function(c,a){if(c&&r.isString(c)&&a&&r.isFunc(a.getVersion)){c=c.replace(/\s/g,"").toLowerCase();r.Plugins[c]=a;if(!r.isDefined(a.getVersionDone)){a.installed=null;a.version=null;a.version0=null;a.getVersionDone=null;a.pluginName=c}}},uniqueName:function(){return r.name+"998"},openTag:"<",hasOwnPROP:({}).constructor.prototype.hasOwnProperty,hasOwn:function(c,a){var f;try{f=r.hasOwnPROP.call(c,a)}catch(e){}return !!f},rgx:{str:/string/i,num:/number/i,fun:/function/i,arr:/array/i},toString:({}).constructor.prototype.toString,isDefined:function(a){return typeof a!="undefined"},isArray:function(a){return r.rgx.arr.test(r.toString.call(a))},isString:function(a){return r.rgx.str.test(r.toString.call(a))},isNum:function(a){return r.rgx.num.test(r.toString.call(a))},isStrNum:function(a){return r.isString(a)&&(/\d/).test(a)},isFunc:function(a){return r.rgx.fun.test(r.toString.call(a))},getNumRegx:/[\d][\d\.\_,\-]*/,splitNumRegx:/[\.\_,\-]/g,getNum:function(c,a){var e=r.isStrNum(c)?(r.isDefined(a)?new RegExp(a):r.getNumRegx).exec(c):null;return e?e[0]:null},compareNums:function(a,e,f){var h,j,k,c=parseInt;if(r.isStrNum(a)&&r.isStrNum(e)){if(r.isDefined(f)&&f.compareNums){return f.compareNums(a,e)}h=a.split(r.splitNumRegx);j=e.split(r.splitNumRegx);for(k=0;k<Math.min(h.length,j.length);k++){if(c(h[k],10)>c(j[k],10)){return 1}if(c(h[k],10)<c(j[k],10)){return -1}}}return 0},formatNum:function(e,c){var f,a;if(!r.isStrNum(e)){return null}if(!r.isNum(c)){c=4}c--;a=e.replace(/\s/g,"").split(r.splitNumRegx).concat(["0","0","0","0"]);for(f=0;f<4;f++){if(/^(0+)(.+)$/.test(a[f])){a[f]=RegExp.$2}if(f>c||!(/\d/).test(a[f])){a[f]="0"}}return a.slice(0,4).join(",")},pd:{getPROP:function(a,e,f){try{if(a){f=a[e]}}catch(c){}return f},findNavPlugin:function(n){if(n.dbug){return n.dbug}var f=null;if(window.navigator){var h={Find:r.isString(n.find)?new RegExp(n.find,"i"):n.find,Find2:r.isString(n.find2)?new RegExp(n.find2,"i"):n.find2,Avoid:n.avoid?(r.isString(n.avoid)?new RegExp(n.avoid,"i"):n.avoid):0,Num:n.num?/\d/:0},B,a,o,j,k,c,e=navigator.mimeTypes,l=navigator.plugins;if(n.mimes&&e){j=r.isArray(n.mimes)?[].concat(n.mimes):(r.isString(n.mimes)?[n.mimes]:[]);for(B=0;B<j.length;B++){a=0;try{if(r.isString(j[B])&&/[^\s]/.test(j[B])){a=e[j[B]].enabledPlugin}}catch(m){}if(a){o=this.findNavPlugin_(a,h);if(o.obj){f=o.obj}if(f&&!r.dbug){return f}}}}if(n.plugins&&l){k=r.isArray(n.plugins)?[].concat(n.plugins):(r.isString(n.plugins)?[n.plugins]:[]);for(B=0;B<k.length;B++){a=0;try{if(k[B]&&r.isString(k[B])){a=l[k[B]]}}catch(m){}if(a){o=this.findNavPlugin_(a,h);if(o.obj){f=o.obj}if(f&&!r.dbug){return f}}}c=l.length;if(r.isNum(c)){for(B=0;B<c;B++){a=0;try{a=l[B]}catch(m){}if(a){o=this.findNavPlugin_(a,h);if(o.obj){f=o.obj}if(f&&!r.dbug){return f}}}}}}return f},findNavPlugin_:function(a,c){var e=a.description||"",f=a.name||"",h={};if((c.Find.test(e)&&(!c.Find2||c.Find2.test(f))&&(!c.Num||c.Num.test(RegExp.leftContext+RegExp.rightContext)))||(c.Find.test(f)&&(!c.Find2||c.Find2.test(e))&&(!c.Num||c.Num.test(RegExp.leftContext+RegExp.rightContext)))){if(!c.Avoid||!(c.Avoid.test(e)||c.Avoid.test(f))){h.obj=a}}return h},getVersionDelimiter:",",findPlugin:function(a){var c,e={status:-3,plugin:0};if(!r.isString(a)){return e}if(a.length==1){this.getVersionDelimiter=a;return e}a=a.toLowerCase().replace(/\s/g,"");c=r.Plugins[a];if(!c||!c.getVersion){return e}e.plugin=c;e.status=1;return e}},getPluginFileVersion:function(c,j){var e,f,a,k,h=-1;if(!c){return j}if(c.version){e=r.getNum(c.version+"")}if(!e||!j){return j||e||null}f=(r.formatNum(j)).split(r.splitNumRegx);a=(r.formatNum(e)).split(r.splitNumRegx);for(k=0;k<f.length;k++){if(h>-1&&k>h&&f[k]!="0"){return j}if(a[k]!=f[k]){if(h==-1){h=k}if(f[k]!="0"){return j}}}return e},AXO:(function(){var a;try{a=new window.ActiveXObject()}catch(c){}return a?null:window.ActiveXObject})(),getAXO:function(e){var a=null;try{a=new r.AXO(e)}catch(c){r.errObj=c}if(a){r.browser.ActiveXEnabled=!0}return a},browser:{detectPlatform:function(){var c=this,e,f=window.navigator?navigator.platform||"":"";r.OS=100;if(f){var a=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(e=a.length-2;e>=0;e=e-2){if(a[e]&&new RegExp(a[e],"i").test(f)){r.OS=a[e+1];break}}}},detectIE:function(){var a=this,k=document,l,c,j=window.navigator?navigator.userAgent||"":"",h,e,f;a.ActiveXFilteringEnabled=!1;a.ActiveXEnabled=!1;try{a.ActiveXFilteringEnabled=!!window.external.msActiveXFilteringEnabled()}catch(m){}e=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","TDCCtl.TDCCtl","Shell.UIHelper","HtmlDlgSafeHelper.HtmlDlgSafeHelper","Scripting.Dictionary"];f=["WMPlayer.OCX","ShockwaveFlash.ShockwaveFlash","AgControl.AgControl"];h=e.concat(f);for(l=0;l<h.length;l++){if(r.getAXO(h[l])&&!r.dbug){break}}if(a.ActiveXEnabled&&a.ActiveXFilteringEnabled){for(l=0;l<f.length;l++){if(r.getAXO(f[l])){a.ActiveXFilteringEnabled=!1;break}}}c=k.documentMode;try{k.documentMode=""}catch(m){}a.isIE=a.ActiveXEnabled;a.isIE=a.isIE||r.isNum(k.documentMode)||new Function("return/*@cc_on!@*/!1")();try{k.documentMode=c}catch(m){}a.verIE=null;if(a.isIE){a.verIE=(r.isNum(k.documentMode)&&k.documentMode>=7?k.documentMode:0)||((/^(?:.*?[^a-zA-Z])??(?:MSIE|rv\s*\:)\s*(\d+\.?\d*)/i).test(j)?parseFloat(RegExp.$1,10):7)}},detectNonIE:function(){var h=this,c=window.navigator?navigator:{},e=h.isIE?"":c.userAgent||"",a=c.vendor||"",f=c.product||"";h.isGecko=(/Gecko/i).test(f)&&(/Gecko\s*\/\s*\d/i).test(e);h.verGecko=h.isGecko?r.formatNum((/rv\s*\:\s*([\.\,\d]+)/i).test(e)?RegExp.$1:"0.9"):null;h.isOpera=(/(OPR\s*\/|Opera\s*\/\s*\d.*\s*Version\s*\/|Opera\s*[\/]?)\s*(\d+[\.,\d]*)/i).test(e);h.verOpera=h.isOpera?r.formatNum(RegExp.$2):null;h.isChrome=!h.isOpera&&(/(Chrome|CriOS)\s*\/\s*(\d[\d\.]*)/i).test(e);h.verChrome=h.isChrome?r.formatNum(RegExp.$2):null;h.isSafari=!h.isOpera&&!h.isChrome&&((/Apple/i).test(a)||!a)&&(/Safari\s*\/\s*(\d[\d\.]*)/i).test(e);h.verSafari=h.isSafari&&(/Version\s*\/\s*(\d[\d\.]*)/i).test(e)?r.formatNum(RegExp.$1):null},init:function(){var a=this;a.detectPlatform();a.detectIE();a.detectNonIE()}},init:{hasRun:0,library:function(){window[r.name]=r;var a=this,c=document;r.win.init();r.head=c.getElementsByTagName("head")[0]||c.getElementsByTagName("body")[0]||c.body||null;r.browser.init();a.hasRun=1}},ev:{addEvent:function(a,c,e){if(a&&c&&e){if(a.addEventListener){a.addEventListener(c,e,false)}else{if(a.attachEvent){a.attachEvent("on"+c,e)}else{a["on"+c]=this.concatFn(e,a["on"+c])}}}},removeEvent:function(a,c,e){if(a&&c&&e){if(a.removeEventListener){a.removeEventListener(c,e,false)}else{if(a.detachEvent){a.detachEvent("on"+c,e)}}}},concatFn:function(a,c){return function(){a();if(typeof c=="function"){c()}}},handler:function(a,c,e,f,h){return function(){a(c,e,f,h)}},handlerOnce:function(a,c,e,f){return function(){var h=r.uniqueName();if(!a[h]){a[h]=1;a(c,e,f)}}},handlerWait:function(e,a,f,h,j){var c=this;return function(){c.setTimeout(c.handler(a,f,h,j),e)}},setTimeout:function(a,c){if(r.win&&r.win.unload){return}setTimeout(a,c)},fPush:function(a,c){if(r.isArray(c)&&(r.isFunc(a)||(r.isArray(a)&&a.length>0&&r.isFunc(a[0])))){c.push(a)}},call0:function(a){var c=r.isArray(a)?a.length:-1;if(c>0&&r.isFunc(a[0])){a[0](r,c>1?a[1]:0,c>2?a[2]:0,c>3?a[3]:0)}else{if(r.isFunc(a)){a(r)}}},callArray0:function(e){var c=this,a;if(r.isArray(e)){while(e.length){a=e[0];e.splice(0,1);if(r.win&&r.win.unload&&e!==r.win.unloadHndlrs){}else{c.call0(a)}}}},call:function(a){var c=this;c.call0(a);c.ifDetectDoneCallHndlrs()},callArray:function(c){var a=this;a.callArray0(c);a.ifDetectDoneCallHndlrs()},allDoneHndlrs:[],ifDetectDoneCallHndlrs:function(){var a=this,e,c;if(!a.allDoneHndlrs.length){return}if(r.win){if(!r.win.loaded||r.win.loadPrvtHndlrs.length||r.win.loadPblcHndlrs.length){return}}if(r.Plugins){for(e in r.Plugins){if(r.hasOwn(r.Plugins,e)){c=r.Plugins[e];if(c&&r.isFunc(c.getVersion)){if(c.OTF==3||(c.DoneHndlrs&&c.DoneHndlrs.length)||(c.BIHndlrs&&c.BIHndlrs.length)){return}}}}}a.callArray0(a.allDoneHndlrs)}},isMinVersion:function(a,c,h,j){var f=r.pd.findPlugin(a),e,k=-1;if(f.status<0){return f.status}e=f.plugin;c=r.formatNum(r.isNum(c)?c.toString():(r.isStrNum(c)?r.getNum(c):"0"));if(e.getVersionDone!=1){e.getVersion(c,h,j);if(e.getVersionDone===null){e.getVersionDone=1}}if(e.installed!==null){k=e.installed<=0.5?e.installed:(e.installed==0.7?1:(e.version===null?0:(r.compareNums(e.version,c,e)>=0?1:-0.1)))}return k},getVersion:function(a,f,h){var e=r.pd.findPlugin(a),c,j;if(e.status<0){return null}c=e.plugin;if(c.getVersionDone!=1){c.getVersion(null,f,h);if(c.getVersionDone===null){c.getVersionDone=1}}j=(c.version||c.version0);j=j?j.replace(r.splitNumRegx,r.pd.getVersionDelimiter):j;return j},hasMimeType:function(f){if(f&&window.navigator&&navigator.mimeTypes){var a,c,k,h,l=navigator.mimeTypes,j=r.isArray(f)?[].concat(f):(r.isString(f)?[f]:[]);h=j.length;for(k=0;k<h;k++){a=0;try{if(r.isString(j[k])&&/[^\s]/.test(j[k])){a=l[j[k]]}}catch(e){}c=a?a.enabledPlugin:0;if(c&&(c.name||c.description)){return a}}}return null},onDetectionDone:function(c,e,j,k){var h=r.pd.findPlugin(c),a,f;if(h.status==-3){return -1}f=h.plugin;if(!r.isArray(f.DoneHndlrs)){f.DoneHndlrs=[]}if(f.getVersionDone!=1){a=r.getVersion?r.getVersion(c,j,k):r.isMinVersion(c,"0",j,k)}if(f.installed!=-0.5&&f.installed!=0.5){r.ev.call(e);return 1}r.ev.fPush(e,f.DoneHndlrs);return 0},onWindowLoaded:function(a){if(r.win.loaded){r.ev.call(a)}else{r.ev.fPush(a,r.win.loadPblcHndlrs)}},codebase:{isDisabled:function(){if(r.browser.ActiveXEnabled&&r.isDefined(r.pd.getPROP(document.createElement("object"),"object"))){return 0}return 1},isMin:function(a,c){var e=this,f,h,j=0;if(!r.isStrNum(c)||e.isDisabled()){return j}e.init(a);if(!a.L){a.L={};for(f=0;f<a.Lower.length;f++){if(e.isActiveXObject(a,a.Lower[f])){a.L=e.convert(a,a.Lower[f]);break}}}if(a.L.v){h=e.convert(a,c,1);if(h.x>=0){j=(a.L.x==h.x?e.isActiveXObject(a,h.v):r.compareNums(c,a.L.v)<=0)?1:-1}}return j},search:function(m){var j=this,l=m.$$,f=0,c;c=m.searchHasRun||j.isDisabled()?1:0;m.searchHasRun=1;if(c){return m.version||null}j.init(m);var z,I,a,H=m.DIGITMAX,y,h,e=99999999,o=[0,0,0,0],n=[0,0,0,0];var k=function(D,A){var C=[].concat(o),B;C[D]=A;B=j.isActiveXObject(m,C.join(","));if(B){f=1;o[D]=A}else{n[D]=A}return B};for(z=0;z<n.length;z++){o[z]=Math.floor(m.DIGITMIN[z])||0;y=o.join(",");h=o.slice(0,z).concat([e,e,e,e]).slice(0,o.length).join(",");for(a=0;a<H.length;a++){if(r.isArray(H[a])){H[a].push(0);if(H[a][z]>n[z]&&r.compareNums(h,m.Lower[a])>=0&&r.compareNums(y,m.Upper[a])<0){n[z]=Math.floor(H[a][z])}}}for(I=0;I<30;I++){if(n[z]-o[z]<=16){for(a=n[z];a>=o[z]+(z?1:0);a--){if(k(z,a)){break}}break}k(z,Math.round((n[z]+o[z])/2))}if(!f){break}n[z]=o[z]}if(f){m.version=j.convert(m,o.join(",")).v}return m.version||null},emptyNode:function(c){try{c.innerHTML=""}catch(a){}},HTML:[],len:0,onUnload:function(e,f){var h,a=f.HTML,c;for(h=0;h<a.length;h++){c=a[h];if(c){a[h]=0;f.emptyNode(c.span());c.span=0;c.spanObj=0;c=0}}f.iframe=0},init:function(a){var c=this;if(!c.iframe){var e=r.DOM,h;h=e.iframe.insert(0,"$.codebase{ }");c.iframe=h;e.iframe.write(h," ");e.iframe.close(h)}if(!a.init){a.init=1;var j,f;r.ev.fPush([c.onUnload,c],r.win.unloadHndlrs);a.tagA='<object width="1" height="1" style="display:none;" codebase="#version=';f=a.classID||a.$$.classID||"";a.tagB='" '+((/clsid\s*:/i).test(f)?'classid="':'type="')+f+'">'+r.openTag+"/object>";for(j=0;j<a.Lower.length;j++){a.Lower[j]=r.formatNum(a.Lower[j]);a.Upper[j]=r.formatNum(a.Upper[j])}}},isActiveXObject:function(a,h){var c=this,j=0,e=a.$$,f=(r.DOM.iframe.doc(c.iframe)||document).createElement("span");if(a.min&&r.compareNums(h,a.min)<=0){return 1}if(a.max&&r.compareNums(h,a.max)>=0){return 0}f.innerHTML=a.tagA+h+a.tagB;if(r.pd.getPROP(f.firstChild,"object")){j=1}if(j){a.min=h;c.HTML.push({spanObj:f,span:c.span})}else{a.max=h;f.innerHTML=""}return j},span:function(){return this.spanObj},convert_:function(a,h,f,c){var e=a.convert[h];return e?(r.isFunc(e)?r.formatNum(e(f.split(r.splitNumRegx),c).join(",")):f):e},convert:function(a,h,c){var e=this,j,k,f;h=r.formatNum(h);k={v:h,x:-1};if(h){for(j=0;j<a.Lower.length;j++){f=e.convert_(a,j,a.Lower[j]);if(f&&r.compareNums(h,c?f:a.Lower[j])>=0&&(!j||r.compareNums(h,c?e.convert_(a,j,a.Upper[j]):a.Upper[j])<0)){k.v=e.convert_(a,j,h,c);k.x=j;break}}}return k},z:0},win:{disable:function(){this.cancel=true},cancel:false,loaded:false,unload:false,hasRun:0,init:function(){var a=this;if(!a.hasRun){a.hasRun=1;if((/complete/i).test(document.readyState||"")){a.loaded=true}else{r.ev.addEvent(window,"load",a.onLoad)}r.ev.addEvent(window,"unload",a.onUnload)}},loadPrvtHndlrs:[],loadPblcHndlrs:[],unloadHndlrs:[],onUnload:function(){var a=r.win;if(a.unload){return}a.unload=true;r.ev.removeEvent(window,"load",a.onLoad);r.ev.removeEvent(window,"unload",a.onUnload);r.ev.callArray(a.unloadHndlrs)},onLoad:function(){var a=r.win;if(a.loaded||a.unload||a.cancel){return}a.loaded=true;r.ev.callArray(a.loadPrvtHndlrs);r.ev.callArray(a.loadPblcHndlrs)}},DOM:{isEnabled:{objectTag:function(){var a=r.browser,c=a.isIE?0:1;if(a.ActiveXEnabled){c=1}return !!c},objectTagUsingActiveX:function(){var a=0;if(r.browser.ActiveXEnabled){a=1}return !!a},objectProperty:function(a){if(a&&a.tagName&&r.browser.isIE){if((/applet/i).test(a.tagName)){return(!this.objectTag()||r.isDefined(r.pd.getPROP(document.createElement("object"),"object"))?1:0)}return r.isDefined(r.pd.getPROP(document.createElement(a.tagName),"object"))?1:0}return 0}},HTML:[],div:null,divID:"plugindetect",divWidth:500,getDiv:function(){return this.div||document.getElementById(this.divID)||null},initDiv:function(){var a=this,c;if(!a.div){c=a.getDiv();if(c){a.div=c}else{a.div=document.createElement("div");a.div.id=a.divID;a.setStyle(a.div,a.getStyle.div());a.insertDivInBody(a.div)}r.ev.fPush([a.onUnload,a],r.win.unloadHndlrs)}c=0},pluginSize:1,iframeWidth:40,iframeHeight:10,altHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",emptyNode:function(c){var e=this;if(c&&(/div|span/i).test(c.tagName||"")){if(r.browser.isIE){e.setStyle(c,["display","none"])}try{c.innerHTML=""}catch(a){}}},removeNode:function(c){try{if(c&&c.parentNode){c.parentNode.removeChild(c)}}catch(a){}},onUnload:function(e,f){var j,k,h,c,a=f.HTML,l=a.length;if(l){for(k=l-1;k>=0;k--){c=a[k];if(c){a[k]=0;f.emptyNode(c.span());f.removeNode(c.span());c.span=0;c.spanObj=0;c.doc=0;c.objectProperty=0}}}j=f.getDiv();f.emptyNode(j);f.removeNode(j);c=0;h=0;j=0;f.div=0},span:function(){var a=this;if(!a.spanObj){a.spanObj=a.doc.getElementById(a.spanId)}return a.spanObj||null},width:function(){var a=this,c=a.span(),f,e,h=-1;f=c&&r.isNum(c.scrollWidth)?c.scrollWidth:h;e=c&&r.isNum(c.offsetWidth)?c.offsetWidth:h;c=0;return e>0?e:(f>0?f:Math.max(e,f))},obj:function(){var a=this.span();return a?a.firstChild||null:null},readyState:function(){var a=this;return r.browser.isIE&&r.isDefined(r.pd.getPROP(a.span(),"readyState"))?r.pd.getPROP(a.obj(),"readyState"):r.UNDEFINED},objectProperty:function(){var a=this,c=a.DOM,e;if(c.isEnabled.objectProperty(a)){e=r.pd.getPROP(a.obj(),"object")}return e},onLoadHdlr:function(c,a){a.loaded=1},getTagStatus:function(N,O,n,J,o,f,k){var l=this;if(!N||!N.span()){return -2}var c=N.width(),L=N.obj()?1:0,I=N.readyState(),P=N.objectProperty();if(P){return 1.5}var m=/clsid\s*\:/i,K=n&&m.test(n.outerHTML||"")?n:(J&&m.test(J.outerHTML||"")?J:0),h=n&&!m.test(n.outerHTML||"")?n:(J&&!m.test(J.outerHTML||"")?J:0),a=N&&m.test(N.outerHTML||"")?K:h;if(!O||!O.span()||!a||!a.span()){return -2}var e=a.width(),M=O.width(),j=a.readyState();if(c<0||e<0||M<=l.pluginSize){return 0}if(k&&!N.pi&&r.isDefined(P)&&r.browser.isIE&&N.tagName==a.tagName&&N.time<=a.time&&c===e&&I===0&&j!==0){N.pi=1}if(e<M||!N.loaded||!O.loaded||!a.loaded){return N.pi?-0.1:0}if(c==M||!L){return N.pi?-0.5:-1}else{if(c==l.pluginSize&&L&&(!r.isNum(I)||I===4)){return 1}}return N.pi?-0.5:-1},setStyle:function(f,a){var c=f.style,h;if(c&&a){for(h=0;h<a.length;h=h+2){try{c[a[h]]=a[h+1]}catch(e){}}}f=0;c=0},getStyle:{iframe:function(){return this.span()},span:function(a){var c=r.DOM,e;e=a?this.plugin():([].concat(this.Default).concat(["display","inline","fontSize",(c.pluginSize+3)+"px","lineHeight",(c.pluginSize+3)+"px"]));return e},div:function(){var a=r.DOM;return[].concat(this.Default).concat(["display","block","width",a.divWidth+"px","height",(a.pluginSize+3)+"px","fontSize",(a.pluginSize+3)+"px","lineHeight",(a.pluginSize+3)+"px","position","absolute","right","9999px","top","-9999px"])},plugin:function(a){var c=r.DOM;return"background-color:transparent;background-image:none;vertical-align:baseline;outline-style:none;border-style:none;padding:0px;margin:0px;visibility:"+(a?"hidden;":"visible;")+"display:inline;font-size:"+(c.pluginSize+3)+"px;line-height:"+(c.pluginSize+3)+"px;"},Default:["backgroundColor","transparent","backgroundImage","none","verticalAlign","baseline","outlineStyle","none","borderStyle","none","padding","0px","margin","0px","visibility","visible"]},insertDivInBody:function(a,e){var c="pd33993399",j=null,f=e?window.top.document:window.document,k=f.getElementsByTagName("body")[0]||f.body;if(!k){try{f.write('<div id="'+c+'">.'+r.openTag+"/div>");j=f.getElementById(c)}catch(h){}}k=f.getElementsByTagName("body")[0]||f.body;if(k){k.insertBefore(a,k.firstChild);if(j){k.removeChild(j)}}a=0},iframe:{onLoad:function(c,a){r.ev.callArray(c)},insert:function(j,k){var h=this,c=r.DOM,l,e=document.createElement("iframe"),f;c.setStyle(e,c.getStyle.iframe());e.width=c.iframeWidth;e.height=c.iframeHeight;c.initDiv();l=c.getDiv();l.appendChild(e);try{h.doc(e).open()}catch(a){}e[r.uniqueName()]=[];f=r.ev.handlerOnce(r.isNum(j)&&j>0?r.ev.handlerWait(j,h.onLoad,e[r.uniqueName()],k):r.ev.handler(h.onLoad,e[r.uniqueName()],k));r.ev.addEvent(e,"load",f);if(!e.onload){e.onload=f}r.ev.addEvent(h.win(e),"load",f);return e},addHandler:function(a,c){if(a){r.ev.fPush(c,a[r.uniqueName()])}},close:function(c){try{this.doc(c).close()}catch(a){}},write:function(e,a){try{this.doc(e).write(a)}catch(c){}},win:function(c){try{return c.contentWindow}catch(a){}return null},doc:function(e){var a;try{a=e.contentWindow.document}catch(c){}try{if(!a){a=e.contentDocument}}catch(c){}return a||null}},insert:function(I,K,G,j,m,n,o){var c=this,H,J,f,h,k;if(!o){c.initDiv();o=c.getDiv()}if(o){if((/div/i).test(o.tagName)){h=o.ownerDocument}if((/iframe/i).test(o.tagName)){h=c.iframe.doc(o)}}if(h&&h.createElement){}else{h=document}if(!r.isDefined(j)){j=""}if(r.isString(I)&&(/[^\s]/).test(I)){I=I.toLowerCase().replace(/\s/g,"");H=r.openTag+I+" ";H+='style="'+c.getStyle.plugin(n)+'" ';var a=1,e=1;for(k=0;k<K.length;k=k+2){if(/[^\s]/.test(K[k+1])){H+=K[k]+'="'+K[k+1]+'" '}if((/width/i).test(K[k])){a=0}if((/height/i).test(K[k])){e=0}}H+=(a?'width="'+c.pluginSize+'" ':"")+(e?'height="'+c.pluginSize+'" ':"");if(I=="embed"||I=="img"){H+=" />"}else{H+=">";for(k=0;k<G.length;k=k+2){if(/[^\s]/.test(G[k+1])){H+=r.openTag+'param name="'+G[k]+'" value="'+G[k+1]+'" />'}}H+=j+r.openTag+"/"+I+">"}}else{I="";H=j}J={spanId:"",spanObj:null,span:c.span,loaded:null,tagName:I,outerHTML:H,DOM:c,time:new Date().getTime(),width:c.width,obj:c.obj,readyState:c.readyState,objectProperty:c.objectProperty,doc:h};if(o&&o.parentNode){if((/iframe/i).test(o.tagName)){c.iframe.addHandler(o,[c.onLoadHdlr,J]);J.loaded=0;J.spanId=r.name+"Span"+c.HTML.length;f='<span id="'+J.spanId+'" style="'+c.getStyle.span(1)+'">'+H+"</span>";c.iframe.write(o,f)}else{if((/div/i).test(o.tagName)){f=h.createElement("span");c.setStyle(f,c.getStyle.span());o.appendChild(f);try{f.innerHTML=H}catch(l){}J.spanObj=f}}}f=0;o=0;c.HTML.push(J);return J}},file:{any:"fileStorageAny999",valid:"fileStorageValid999",save:function(c,a,e){var f=this,h;if(c&&r.isDefined(e)){if(!c[f.any]){c[f.any]=[]}if(!c[f.valid]){c[f.valid]=[]}c[f.any].push(e);h=f.split(a,e);if(h){c[f.valid].push(h)}}},getValidLength:function(a){return a&&a[this.valid]?a[this.valid].length:0},getAnyLength:function(a){return a&&a[this.any]?a[this.any].length:0},getValid:function(a,e){var c=this;return a&&a[c.valid]?c.get(a[c.valid],e):null},getAny:function(a,e){var c=this;return a&&a[c.any]?c.get(a[c.any],e):null},get:function(a,f){var c=a.length-1,e=r.isNum(f)?f:c;return(e<0||e>c)?null:a[e]},split:function(a,f){var c=null,h,e;a=a?a.replace(".","\\."):"";e=new RegExp("^(.*[^\\/])("+a+"\\s*)$");if(r.isString(f)&&e.test(f)){h=(RegExp.$1).split("/");c={name:h[h.length-1],ext:RegExp.$2,full:f};h[h.length-1]="";c.path=h.join("/")}return c}},Plugins:{}};r.init.library();var s={setPluginStatus:function(e,f,a){var c=this;c.version=f?r.formatNum(f,3):null;c.installed=c.version?1:(a?(a>0?0.7:-0.1):(e?0:-1));c.getVersionDone=c.installed==0.7||c.installed==-0.1||c.nav.done===0?0:1},getVersion:function(e,c){var a=this,j=null,f=0,h;c=r.browser.isIE?0:c;if((!f||r.dbug)&&a.nav.query(c).installed){f=1}if((!j||r.dbug)&&a.nav.query(c).version){j=a.nav.version}h=!j?a.codebase.isMin(e):0;if(h){a.setPluginStatus(0,0,h);return}if(!j||r.dbug){h=a.codebase.search();if(h){f=1;j=h}}if((!f||r.dbug)&&a.axo.query().installed){f=1}if((!j||r.dbug)&&a.axo.query().version){j=a.axo.version}a.setPluginStatus(f,j)},nav:{done:null,installed:0,version:null,result:[0,0],mimeType:["video/quicktime","application/x-quicktimeplayer","image/x-macpaint","image/x-quicktime","application/x-rtsp","application/x-sdp","application/sdp","audio/vnd.qcelp","video/sd-video","audio/mpeg","video/mp4","video/3gpp2","application/x-mpeg","audio/x-m4b","audio/x-aac","video/flc"],find:"QuickTime.*Plug-?in",find2:"QuickTime.*Plug-?in",find3filename:"QuickTime|QT",avoid:"Totem|VLC|RealPlayer|Helix|MPlayer|Windows\\s*Media\\s*Player",plugins:"QuickTime Plug-in",detect:function(c){var a=this,e,f,h={installed:0,version:null,plugin:null};e=r.pd.findNavPlugin({find:a.find,find2:c?0:a.find2,avoid:c?0:a.avoid,mimes:a.mimeType,plugins:a.plugins});if(e){h.plugin=e;h.installed=1;f=new RegExp(a.find,"i");if(e.name&&f.test(e.name+"")){h.version=r.getNum(e.name+"")}}return h},query:function(a){var c=this,l,m;a=a?1:0;if(c.done===null){if(r.hasMimeType(c.mimeType)){m=c.detect(1);if(m.installed){l=c.detect(0);c.result=[l,l.installed?l:m]}var f=c.result[0],j=c.result[1],h=new RegExp(c.avoid,"i"),k=new RegExp(c.find3filename,"i"),e;f=f?f.plugin:0;j=j?j.plugin:0;if(!f&&j&&j.name&&(!j.description||(/^[\s]*$/).test(j.description+""))&&!h.test(j.name+"")){e=(j.filename||"")+"";if((/^.*[\\\/]([^\\\/]*)$/).test(e)){e=RegExp.$1}if(e&&k.test(e)&&!h.test(e)){c.result[0]=c.result[1]}}}c.done=c.result[0]===c.result[1]?1:0}if(c.result[a]){c.installed=c.result[a].installed;c.version=c.result[a].version}return c}},codebase:{classID:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",isMin:function(c){var a=this,e,f=0;a.$$=s;if(r.isStrNum(c)){e=c.split(r.splitNumRegx);if(e.length>3&&parseInt(e[3],10)>0){e[3]="9999"}c=e.join(",");f=r.codebase.isMin(a,c)}return f},search:function(){this.$$=s;return r.codebase.search(this)},DIGITMAX:[[12,11,11],[7,60],[7,11,11],0,[7,11,11]],DIGITMIN:[5,0,0,0],Upper:["999","7,60","7,50","7,6","7,5"],Lower:["7,60","7,50","7,6","7,5","0"],convert:[1,function(a,c){return c?[a[0],a[1]+a[2],a[3],"0"]:[a[0],a[1].charAt(0),a[1].charAt(1),a[2]]},1,0,1]},axo:{hasRun:0,installed:0,version:null,progID:["QuickTimeCheckObject.QuickTimeCheck","QuickTimeCheckObject.QuickTimeCheck.1"],progID0:"QuickTime.QuickTime",query:function(){var e=this,a,h,f,c=e.hasRun||!r.browser.ActiveXEnabled;e.hasRun=1;if(c){return e}for(h=0;h<e.progID.length;h++){a=r.getAXO(e.progID[h]);if(a){e.installed=1;f=r.pd.getPROP(a,"QuickTimeVersion");if(f&&f.toString){f=f.toString(16);e.version=parseInt(f.charAt(0)||"0",16)+"."+parseInt(f.charAt(1)||"0",16)+"."+parseInt(f.charAt(2)||"0",16);if(!r.dbug){break}}}}return e}}};r.addPlugin("quicktime",s);var x={mimeType:["application/x-java-applet","application/x-java-vm","application/x-java-bean"],mimeType_dummy:"application/dummymimejavaapplet",classID:"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93",classID_dummy:"clsid:8AD9C840-044E-11D1-B3E9-BA9876543210",navigator:{init:function(){var a=this,c=x;a.mimeObj=r.hasMimeType(c.mimeType);if(a.mimeObj){a.pluginObj=a.mimeObj.enabledPlugin}},a:(function(){try{return window.navigator.javaEnabled()}catch(a){}return 1})(),javaEnabled:function(){return !!this.a},mimeObj:0,pluginObj:0},OTF:null,getVerifyTagsDefault:function(){return[1,this.applet.isDisabled.VerifyTagsDefault_1()?0:1,1]},getVersion:function(j,m,k){var c=this,o,e=c.applet,l=c.verify,h=c.navigator,n=null,f=null,a=null;if(c.getVersionDone===null){c.OTF=0;h.init();if(l){l.init()}}e.setVerifyTagsArray(k);r.file.save(c,".jar",m);if(c.getVersionDone===0){if(e.should_Insert_Query_Any()){o=e.insert_Query_Any(j);c.setPluginStatus(o[0],o[1],n,j)}return}if((!n||r.dbug)&&c.navMime.query().version){n=c.navMime.version}if((!n||r.dbug)&&c.navPlugin.query().version){n=c.navPlugin.version}if((!n||r.dbug)&&c.DTK.query().version){n=c.DTK.version}if(c.nonAppletDetectionOk(n)){a=n}c.setPluginStatus(a,f,n,j);if(e.should_Insert_Query_Any()){o=e.insert_Query_Any(j);if(o[0]){a=o[0];f=o[1]}}c.setPluginStatus(a,f,n,j)},nonAppletDetectionOk:function(f){var a=this,h=a.navigator,e=r.browser,c=1;if(!f||!h.javaEnabled()||(!e.isIE&&!h.mimeObj)){c=0}return c},setPluginStatus:function(c,a,l,e){var f=this,h,k=0,j=f.applet;l=l||f.version0;h=j.isRange(c);if(h){if(j.setRange(h,e)==c){k=h}c=0}if(f.OTF<3){f.installed=k?(k>0?0.7:-0.1):(c?1:(l?-0.2:-1))}if(f.OTF==2&&f.NOTF&&!f.applet.getResult()[0]){f.installed=l?-0.2:-1}if(f.OTF==3&&f.installed!=-0.5&&f.installed!=0.5){f.installed=(f.NOTF.isJavaActive(1)>=1?0.5:-0.5)}if(f.OTF==4&&(f.installed==-0.5||f.installed==0.5)){if(c){f.installed=1}else{if(k){f.installed=k>0?0.7:-0.1}else{if(f.NOTF.isJavaActive(1)>=1){if(l){f.installed=1;c=l}else{f.installed=0}}else{if(l){f.installed=-0.2}else{f.installed=-1}}}}}if(l){f.version0=r.formatNum(r.getNum(l))}if(c&&!k){f.version=r.formatNum(r.getNum(c))}if(a&&r.isString(a)){f.vendor=a}if(!f.vendor){f.vendor=""}if(f.verify&&f.verify.isEnabled()){f.getVersionDone=0}else{if(f.getVersionDone!=1){if(f.OTF<2){f.getVersionDone=0}else{f.getVersionDone=f.applet.can_Insert_Query_Any()?0:1}}}},DTK:{hasRun:0,status:null,VERSIONS:[],version:"",HTML:null,Plugin2Status:null,classID:["clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA","clsid:CAFEEFAC-DEC7-0000-0000-ABCDEFFEDCBA"],mimeType:["application/java-deployment-toolkit","application/npruntime-scriptable-plugin;DeploymentToolkit"],isDisabled:function(c){var a=this;if(a.HTML){return 1}if(c||r.dbug){return 0}if(a.hasRun||!r.DOM.isEnabled.objectTagUsingActiveX()){return 1}return 0},query:function(e){var j=this,o=x,h,m,f=r.DOM.altHTML,n={},c,C=null,l=null,a=j.isDisabled(e);j.hasRun=1;if(a){return j}j.status=0;if(r.DOM.isEnabled.objectTagUsingActiveX()){for(h=0;h<j.classID.length;h++){j.HTML=r.DOM.insert("object",["classid",j.classID[h]],[],f);C=j.HTML.obj();if(r.pd.getPROP(C,"jvms")){break}}}else{m=r.hasMimeType(j.mimeType);if(m&&m.type){j.HTML=r.DOM.insert("object",["type",m.type],[],f);C=j.HTML.obj()}}if(C){try{c=r.pd.getPROP(C,"jvms");if(c){l=c.getLength();if(r.isNum(l)){j.status=l>0?1:-1;for(h=0;h<l;h++){m=r.getNum(c.get(l-1-h).version);if(m){j.VERSIONS.push(m);n["a"+r.formatNum(m)]=1}}}}}catch(k){}if(j.VERSIONS.length){j.version=r.formatNum(j.VERSIONS[0])}}return j}},navMime:{hasRun:0,mimetype:"",version:"",mimeObj:0,pluginObj:0,regexJPI:/^\s*application\/x-java-applet;jpi-version\s*=\s*(\d.*)$/i,isDisabled:function(){var c=this,a=x;if(c.hasRun||!a.navigator.mimeObj){return 1}return 0},update:function(a){var f=this,c=a?a.enabledPlugin:0,e=a&&f.regexJPI.test(a.type||"")?r.formatNum(r.getNum(RegExp.$1)):0;if(e&&c&&(c.description||c.name)){if(r.compareNums(e,f.version||r.formatNum("0"))>0){f.version=e;f.mimeObj=a;f.pluginObj=c;f.mimetype=a.type}}},query:function(){var n=this,o=x,k,l,f,h,j,a,c=navigator.mimeTypes,e=n.isDisabled();n.hasRun=1;if(e){return n}a=c.length;if(r.isNum(a)){for(k=0;k<a;k++){f=0;try{f=c[k]}catch(m){}n.update(f)}}if(!n.version||r.dbug){j=r.isArray(o.mimeType)?o.mimeType:[o.mimeType];for(k=0;k<j.length;k++){f=0;try{f=c[j[k]]}catch(m){}h=f?f.enabledPlugin:0;a=h?h.length:null;if(r.isNum(a)){for(l=0;l<a;l++){f=0;try{f=h[l]}catch(m){}n.update(f)}}}}return n}},navPlugin:{hasRun:0,version:"",getPlatformNum:function(){var e=x,f=0,c=/Java.*TM.*Platform[^\d]*(\d+)[\.,_]?(\d*)\s*U?(?:pdate)?\s*(\d*)/i,a=r.pd.findNavPlugin({find:c,mimes:e.mimeType,plugins:1});if(a&&(c.test(a.name||"")||c.test(a.description||""))&&parseInt(RegExp.$1,10)>=5){f="1,"+RegExp.$1+","+(RegExp.$2?RegExp.$2:"0")+","+(RegExp.$3?RegExp.$3:"0")}return f},getPluginNum:function(){var h=this,k=x,l=0,e,f,j,a,c=0;j=/Java[^\d]*Plug-in/i;a=r.pd.findNavPlugin({find:j,num:1,mimes:k.mimeType,plugins:1,dbug:c});if(a){e=h.checkPluginNum(a.description,j);f=h.checkPluginNum(a.name,j);l=e&&f?(r.compareNums(e,f)>0?e:f):(e||f)}if(!l){j=/Java.*\d.*Plug-in/i;a=r.pd.findNavPlugin({find:j,mimes:k.mimeType,plugins:1,dbug:c});if(a){e=h.checkPluginNum(a.description,j);f=h.checkPluginNum(a.name,j);l=e&&f?(r.compareNums(e,f)>0?e:f):(e||f)}}return l},checkPluginNum:function(a,c){var f,e;f=c.test(a)?r.formatNum(r.getNum(a)):0;if(f&&r.compareNums(f,r.formatNum("10"))>=0){e=f.split(r.splitNumRegx);f=r.formatNum("1,"+(parseInt(e[0],10)-3)+",0,"+e[1])}if(f&&(r.compareNums(f,r.formatNum("1,3"))<0||r.compareNums(f,r.formatNum("2"))>=0)){f=0}return f},query:function(){var a=this,c=x,e,h=0,f=a.hasRun||!c.navigator.mimeObj;a.hasRun=1;if(f){return a}if(!h||r.dbug){e=a.getPlatformNum();if(e){h=e}}if(!h||r.dbug){e=a.getPluginNum();if(e){h=e}}if(h){a.version=r.formatNum(h)}return a}},applet:{codebase:{isMin:function(a){this.$$=x;return r.codebase.isMin(this,a)},search:function(){this.$$=x;return r.codebase.search(this)},DIGITMAX:[[15,128],[6,0,512],0,[1,5,2,256],0,[1,4,1,1],[1,4,0,64],[1,3,2,32]],DIGITMIN:[1,0,0,0],Upper:["999","10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4"],Lower:["10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4","0"],convert:[function(a,c){return c?[parseInt(a[0],10)>1?"99":parseInt(a[1],10)+3+"",a[3],"0","0"]:["1",parseInt(a[0],10)-3+"","0",a[1]]},function(a,c){return c?[a[1],a[2],a[3]+"0","0"]:["1",a[0],a[1],a[2].substring(0,a[2].length-1||1)]},0,function(a,c){return c?[a[0],a[1],a[2],a[3]+"0"]:[a[0],a[1],a[2],a[3].substring(0,a[3].length-1||1)]},0,1,function(a,c){return c?[a[0],a[1],a[2],a[3]+"0"]:[a[0],a[1],a[2],a[3].substring(0,a[3].length-1||1)]},1]},results:[[null,null],[null,null],[null,null],[null,null]],getResult:function(){var e=this,a=e.results,f,c=[];for(f=a.length-1;f>=0;f--){c=a[f];if(c[0]){break}}c=[].concat(c);return c},DummySpanTagHTML:0,HTML:[0,0,0,0],active:[0,0,0,0],DummyObjTagHTML:0,DummyObjTagHTML2:0,allowed:[1,1,1,1],VerifyTagsHas:function(c){var a=this,e;for(e=0;e<a.allowed.length;e++){if(a.allowed[e]===c){return 1}}return 0},saveAsVerifyTagsArray:function(a){var c=this,e;if(r.isArray(a)){for(e=1;e<c.allowed.length;e++){if(a.length>e-1&&r.isNum(a[e-1])){if(a[e-1]<0){a[e-1]=0}if(a[e-1]>3){a[e-1]=3}c.allowed[e]=a[e-1]}}c.allowed[0]=c.allowed[3]}},setVerifyTagsArray:function(a){var c=this,e=x;if(e.getVersionDone===null){c.saveAsVerifyTagsArray(e.getVerifyTagsDefault())}if(r.dbug){c.saveAsVerifyTagsArray([3,3,3])}else{if(a){c.saveAsVerifyTagsArray(a)}}},isDisabled:{single:function(a){var c=this;if(c.all()){return 1}if(a==1){return !r.DOM.isEnabled.objectTag()}if(a==2){return c.AppletTag()}if(a===0){return r.codebase.isDisabled()}if(a==3){return !r.DOM.isEnabled.objectTagUsingActiveX()}return 1},all_:null,all:function(){var e=this,a=x,f=a.navigator,h,c=r.browser;if(e.all_===null){if((c.isOpera&&r.compareNums(c.verOpera,"13,0,0,0")<0&&!f.javaEnabled())||(e.AppletTag()&&!r.DOM.isEnabled.objectTag())||(!f.mimeObj&&!c.isIE)){h=1}else{h=0}e.all_=h}return e.all_},AppletTag:function(){var a=x,c=a.navigator;return r.browser.isIE?!c.javaEnabled():0},VerifyTagsDefault_1:function(){var a=r.browser,c=1;if(a.isIE&&!a.ActiveXEnabled){c=0}if((a.isIE&&a.verIE<9)||(a.verGecko&&r.compareNums(a.verGecko,r.formatNum("2"))<0)||(a.isSafari&&(!a.verSafari||r.compareNums(a.verSafari,r.formatNum("4"))<0))||(a.isOpera&&r.compareNums(a.verOpera,r.formatNum("11"))<0)){c=0}return c}},can_Insert_Query:function(a){var e=this,c=e.results[0][0],f=e.getResult()[0];if(e.HTML[a]||(a===0&&c!==null&&!e.isRange(c))||(a===0&&f&&!e.isRange(f))){return 0}return !e.isDisabled.single(a)},can_Insert_Query_Any:function(){var a=this,c;for(c=0;c<a.results.length;c++){if(a.can_Insert_Query(c)){return 1}}return 0},should_Insert_Query:function(c){var e=this,a=e.allowed,f=x,h=e.getResult()[0];h=h&&(c>0||!e.isRange(h));if(!e.can_Insert_Query(c)||a[c]===0){return 0}if(a[c]==3||(a[c]==2.8&&!h)){return 1}if(!f.nonAppletDetectionOk(f.version0)){if(a[c]==2||(a[c]==1&&!h)){return 1}}return 0},should_Insert_Query_Any:function(){var a=this,c;for(c=0;c<a.allowed.length;c++){if(a.should_Insert_Query(c)){return 1}}return 0},query:function(m){var e=this,n=x,h=null,f=null,c=e.results,a,k,l=e.HTML[m];if(!l||!l.obj()||c[m][0]||n.bridgeDisabled){return}a=l.obj();k=l.readyState();if(!r.isNum(k)||k==4){try{h=r.getNum(a.getVersion()+"");f=a.getVendor()+"";a.statusbar(r.win.loaded?" ":" ")}catch(j){}if(h&&r.isStrNum(h)&&!(r.dbug&&n.OTF<3)){c[m]=[h,f];e.active[m]=2}}},isRange:function(a){return(/^[<>]/).test(a||"")?(a.charAt(0)==">"?1:-1):0},setRange:function(a,c){return(a?(a>0?">":"<"):"")+(r.isString(c)?c:"")},insertJavaTag:function(l,o,j,J,c){var H=x,F="A.class",k=r.file.getValid(H),m=k.name+k.ext,n=k.path;var G=["archive",m,"code",F],I=(J?["width",J]:[]).concat(c?["height",c]:[]),a=["mayscript","true"],f=["scriptable","true","codebase_lookup","false"].concat(a),h=H.navigator,e=!r.browser.isIE&&h.mimeObj&&h.mimeObj.type?h.mimeObj.type:H.mimeType[0];if(l==1){return r.browser.isIE?r.DOM.insert("object",["type",e].concat(I),["codebase",n].concat(G).concat(f),j,H,0,o):r.DOM.insert("object",["type",e].concat(I),["codebase",n].concat(G).concat(f),j,H,0,o)}if(l==2){return r.browser.isIE?r.DOM.insert("applet",["alt",j].concat(a).concat(G).concat(I),["codebase",n].concat(f),j,H,0,o):r.DOM.insert("applet",["codebase",n,"alt",j].concat(a).concat(G).concat(I),[].concat(f),j,H,0,o)}if(l==3){return r.browser.isIE?r.DOM.insert("object",["classid",H.classID].concat(I),["codebase",n].concat(G).concat(f),j,H,0,o):r.DOM.insert()}if(l==4){return r.DOM.insert("embed",["codebase",n].concat(G).concat(["type",e]).concat(f).concat(I),[],j,H,0,o)}return r.DOM.insert()},insertIframe:function(a){return r.DOM.iframe.insert(99,a)},insert_Query_Any:function(j){var c=this,a=x,f=r.DOM,l=c.results,h=c.HTML,e=f.altHTML,m,n,k=r.file.getValid(a);if(c.should_Insert_Query(0)){if(a.OTF<2){a.OTF=2}l[0]=[0,0];m=j?c.codebase.isMin(j):c.codebase.search();if(m){l[0][0]=j?c.setRange(m,j):m}c.active[0]=m?1.5:-1}if(!k){return c.getResult()}if(!c.DummySpanTagHTML){n=c.insertIframe("applet.DummySpanTagHTML");c.DummySpanTagHTML=f.insert("",[],[],e,0,0,n);f.iframe.close(n)}if(c.should_Insert_Query(1)){if(a.OTF<2){a.OTF=2}n=c.insertIframe("applet.HTML[1]");h[1]=c.insertJavaTag(1,n,e);f.iframe.close(n);l[1]=[0,0];c.query(1)}if(c.should_Insert_Query(2)){if(a.OTF<2){a.OTF=2}n=c.insertIframe("applet.HTML[2]");h[2]=c.insertJavaTag(2,n,e);f.iframe.close(n);l[2]=[0,0];c.query(2)}if(c.should_Insert_Query(3)){if(a.OTF<2){a.OTF=2}n=c.insertIframe("applet.HTML[3]");h[3]=c.insertJavaTag(3,n,e);f.iframe.close(n);l[3]=[0,0];c.query(3)}if(f.isEnabled.objectTag()){if(!c.DummyObjTagHTML&&(h[1]||h[2])){n=c.insertIframe("applet.DummyObjTagHTML");c.DummyObjTagHTML=f.insert("object",["type",a.mimeType_dummy],[],e,0,0,n);f.iframe.close(n)}if(!c.DummyObjTagHTML2&&h[3]){n=c.insertIframe("applet.DummyObjTagHTML2");c.DummyObjTagHTML2=f.insert("object",["classid",a.classID_dummy],[],e,0,0,n);f.iframe.close(n)}}a.NOTF.init();return c.getResult()}},NOTF:{count:0,count2:0,countMax:25,intervalLength:250,init:function(){var a=this,c=x;if(c.OTF<3&&a.shouldContinueQuery()){c.OTF=3;r.ev.setTimeout(a.onIntervalQuery,a.intervalLength)}},allHTMLloaded:function(){var a=x.applet,c,e=[a.DummySpanTagHTML,a.DummyObjTagHTML,a.DummyObjTagHTML2].concat(a.HTML);for(c=0;c<e.length;c++){if(e[c]&&e[c].loaded!==null&&!e[c].loaded){return 0}}return 1},shouldContinueQuery:function(){var a=this,c=x,e=c.applet,f,h=0;if(a.allHTMLloaded()){if(a.count-a.count2>2){return h}}else{a.count2=a.count}for(f=0;f<e.results.length;f++){if(e.HTML[f]){if(!e.results[f][0]&&(e.allowed[f]>=2||(e.allowed[f]==1&&!e.getResult()[0]))&&(!a.count||a.isAppletActive(f)>=0)){h=1}}}return h},isJavaActive:function(e){var a=this,f=x,j,h,c=-9;for(j=0;j<f.applet.HTML.length;j++){h=a.isAppletActive(j,e);if(h>c){c=h}}return c},isAppletActive:function(o,n){var m=this,c=x,h=c.navigator,f=c.applet,l=f.HTML[o],C=f.active,j,a=0,k,e=C[o];if(n||e>=1.5||!l||!l.span()){return e}k=r.DOM.getTagStatus(l,f.DummySpanTagHTML,f.DummyObjTagHTML,f.DummyObjTagHTML2,m.count);for(j=0;j<C.length;j++){if(C[j]>0){a=1}}if(k!=1){e=k}else{if(r.browser.isIE||(c.version0&&h.javaEnabled()&&h.mimeObj&&(l.tagName=="object"||a))){e=1}else{e=0}}C[o]=e;return e},onIntervalQuery:function(){var a=x.NOTF,c;a.count++;if(x.OTF==3){c=a.queryAllApplets();if(!a.shouldContinueQuery()){a.queryCompleted(c)}}if(x.OTF==3){r.ev.setTimeout(a.onIntervalQuery,a.intervalLength)}},queryAllApplets:function(){var a=this,c=x,e=c.applet,f,h;for(f=0;f<e.results.length;f++){e.query(f)}h=e.getResult();return h},queryCompleted:function(e){var a=this,c=x;if(c.OTF>=4){return}c.OTF=4;a.isJavaActive();c.setPluginStatus(e[0],e[1],0);r.ev.callArray(c.DoneHndlrs)}}};r.addPlugin("java",x);var g={getVersion:function(){var a=this,e=null,c;if((!c||r.dbug)&&a.nav.query().installed){c=1}if((!e||r.dbug)&&a.nav.query().version){e=a.nav.version}if((!c||r.dbug)&&a.axo.query().installed){c=1}if((!e||r.dbug)&&a.axo.query().version){e=a.axo.version}a.installed=e?1:(c?0:-1);a.version=r.formatNum(e)},nav:{hasRun:0,installed:0,version:null,mimeType:"application/x-devalvrx",query:function(){var a=this,f,c,e=a.hasRun||!r.hasMimeType(a.mimeType);a.hasRun=1;if(e){return a}c=r.pd.findNavPlugin({find:"DevalVR.*Plug-?in",mimes:a.mimeType,plugins:"DevalVR 3D Plugin"});if(c&&(/Plug-?in(.*)/i).test(c.description||"")){f=r.getNum(RegExp.$1)}if(c){a.installed=1}if(f){a.version=f}return a}},axo:{hasRun:0,installed:0,version:null,progID:["DevalVRXCtrl.DevalVRXCtrl","DevalVRXCtrl.DevalVRXCtrl.1"],classID:"clsid:5D2CF9D0-113A-476B-986F-288B54571614",query:function(){var f=this,a=g,j,k,c,h,e=f.hasRun;f.hasRun=1;if(e){return f}for(k=0;k<f.progID.length;k++){c=r.getAXO(f.progID[k]);if(c){f.installed=1;if(!r.dbug){break}}}if(c&&r.DOM.isEnabled.objectTagUsingActiveX()){h=r.pd.getPROP(r.DOM.insert("object",["classid",f.classID],["src",""],"",a).obj(),"pluginversion");if(h&&h.toString){j="00000000"+h.toString(16);j=j.substr(j.length-8,8);j=parseInt(j.substr(0,2)||"0",16)+","+parseInt(j.substr(2,2)||"0",16)+","+parseInt(j.substr(4,2)||"0",16)+","+parseInt(j.substr(6,2)||"0",16);if(j){f.version=j}}}return f}}};r.addPlugin("devalvr",g);var v={mimeType:"application/x-shockwave-flash",setPluginStatus:function(a,f){var c=this,e;c.installed=f?1:(a?0:-1);c.version=r.formatNum(f);e=c.installed==-1||c.instance.version;e=e||c.axo.version;c.getVersionDone=e?1:0},getVersion:function(a,f){var e=this,h=null,c=0;if((!c||r.dbug)&&e.navPlugin.query().installed){c=1}if((!h||r.dbug)&&e.navPlugin.query().version){h=e.navPlugin.version}if((!c||r.dbug)&&e.axo.query().installed){c=1}if((!h||r.dbug)&&e.axo.query().version){h=e.axo.version}if(((!c&&!h)||f||r.dbug)&&e.instance.query().version){c=1;h=e.instance.version}e.setPluginStatus(c,h)},navPlugin:{hasRun:0,installed:0,version:null,getNum:function(a){if(!a){return null}var c=/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(a);return c?c[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null},query:function(){var c=this,f=v,h,a,e=c.hasRun||!r.hasMimeType(f.mimeType);c.hasRun=1;if(e){return c}a=r.pd.findNavPlugin({find:"Shockwave.*Flash",mimes:f.mimeType,plugins:["Shockwave Flash"]});if(a){c.installed=1;if(a.description){h=c.getNum(a.description)}}if(h){h=r.getPluginFileVersion(a,h)}if(h){c.version=h}return c}},axo:{hasRun:0,installed:0,version:null,progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",query:function(){var f=this,h,j,a,e=f.hasRun;f.hasRun=1;if(e){return f}for(j=0;j<10;j++){a=r.getAXO(f.progID+(j?"."+j:""));if(a){f.installed=1;h=0;try{h=r.getNum(a.GetVariable("$version")+"")}catch(c){}if(h){f.version=h;if(!r.dbug){break}}}}return f}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var c=this,a=v,e=1;if(c.hasRun||r.DOM.isEnabled.objectTagUsingActiveX()||!r.DOM.isEnabled.objectTag()||!r.hasMimeType(a.mimeType)){e=0}return e},query:function(){var f=this,c=v,e=f.isEnabled();f.hasRun=1;if(e){f.HTML=r.DOM.insert("object",["type",c.mimeType],["play","false","menu","false"],"",c);try{f.version=r.getNum(f.HTML.obj().GetVariable("$version")+"")}catch(a){}}return f}}};r.addPlugin("flash",v);var q={getVersion:function(){var a=this,e=null,c;if((!c||r.dbug)&&a.nav.query().installed){c=1}if((!e||r.dbug)&&a.nav.query().version){e=a.nav.version}if((!c||r.dbug)&&a.axo.query().installed){c=1}if((!e||r.dbug)&&a.axo.query().version){e=a.axo.version}a.installed=e?1:(c?0:-1);a.version=r.formatNum(e)},nav:{hasRun:0,installed:0,version:null,mimeType:"application/x-director",query:function(){var a=this,f,c,e=a.hasRun||!r.hasMimeType(a.mimeType);a.hasRun=1;if(e){return a}c=r.pd.findNavPlugin({find:"Shockwave\\s*for\\s*Director",mimes:a.mimeType,plugins:"Shockwave for Director"});if(c&&c.description){f=r.getNum(c.description+"")}if(f){f=r.getPluginFileVersion(c,f)}if(c){a.installed=1}if(f){a.version=f}return a}},axo:{hasRun:0,installed:null,version:null,progID:["SWCtl.SWCtl","SWCtl.SWCtl.1","SWCtl.SWCtl.7","SWCtl.SWCtl.8","SWCtl.SWCtl.11","SWCtl.SWCtl.12"],classID:"clsid:166B1BCA-3F9C-11CF-8075-444553540000",query:function(){var f=this,c,l,k,a,h,j=!f.hasRun;f.hasRun=1;if(j){for(l=0;l<f.progID.length;l++){c=r.getAXO(f.progID[l]);if(c){f.installed=1;a="";try{a=c.ShockwaveVersion("")+""}catch(e){}if((/(\d[\d\.\,]*)(?:\s*r\s*(\d+))?/i).test(a)){h=RegExp.$2;k=r.formatNum(RegExp.$1);if(h){k=k.split(r.splitNumRegx);k[3]=h;k=k.join(",")}}if(k){f.version=k;if(!r.dbug){break}}}}}return f}}};r.addPlugin("shockwave",q);var b={setPluginStatus:function(e,a){var c=this;if(e){c.version=r.formatNum(e)}c.installed=c.version?1:(a?0:-1);c.getVersionDone=c.installed===0?0:1},getVersion:function(a,f){var e=this,c,h=null;if((!c||r.dbug)&&e.nav.query().installed){c=1}if((!c||r.dbug)&&e.axo.query().installed){c=1}if((!h||r.dbug)&&e.axo.query().version){h=e.axo.version}if(((!c&&!h)||f||r.dbug)&&e.FirefoxPlugin.query().version){c=1;h=e.FirefoxPlugin.version}e.setPluginStatus(h,c)},mimeType:["application/x-ms-wmp","application/asx","application/x-mplayer2","video/x-ms-asf","video/x-ms-wm","video/x-ms-asf-plugin"],find:["Microsoft.*Windows\\s*Media\\s*Player.*Firefox.*Plug-?in","Windows\\s*Media\\s*Player\\s*Plug-?in\\s*Dynamic\\s*Link\\s*Library","Flip4Mac.*Windows\\s*Media.*Plug-?in|Flip4Mac.*WMV.*Plug-?in"],avoid:"Totem|VLC|RealPlayer|Helix",plugins:["Microsoft"+String.fromCharCode(174)+" Windows Media Player Firefox Plugin","Windows Media Player Plug-in Dynamic Link Library"],nav:{hasRun:0,installed:0,query:function(){var a=this,f=b,c,e=a.hasRun||!r.hasMimeType(f.mimeType);a.hasRun=1;if(e){return a}c=r.pd.findNavPlugin({find:f.find.join("|"),avoid:f.avoid,mimes:f.mimeType,plugins:f.plugins});if(c){a.installed=1}return a}},FirefoxPlugin:{hasRun:0,version:null,isDisabled:function(){var e=this,a=b,c=r.browser;if(e.hasRun||(c.isGecko&&r.compareNums(c.verGecko,r.formatNum("1.8"))<0)||(c.isOpera&&r.compareNums(c.verOpera,r.formatNum("10"))<0)||r.DOM.isEnabled.objectTagUsingActiveX()||!r.hasMimeType(a.mimeType)||!r.pd.findNavPlugin({find:a.find[0],avoid:a.avoid,mimes:a.mimeType,plugins:a.plugins[0]})){return 1}return 0},query:function(){var e=this,c=b,f,a=e.isDisabled();e.hasRun=1;if(a){return e}f=r.pd.getPROP(r.DOM.insert("object",["type",r.hasMimeType(c.mimeType).type,"data",""],["src",""],"",c).obj(),"versionInfo");if(f){e.version=r.getNum(f)}return e}},axo:{hasRun:0,installed:null,version:null,progID:["WMPlayer.OCX","WMPlayer.OCX.7"],classID:"clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6",query:function(){var c=this,a,h,f,e=!c.hasRun;c.hasRun=1;if(e){for(h=0;h<c.progID.length;h++){a=r.getAXO(c.progID[h]);if(a){c.installed=1;f=r.pd.getPROP(a,"versionInfo",0);if(f){f=r.getNum(f)}if(f){c.version=f;if(!r.dbug){break}}}}}return c}}};r.addPlugin("windowsmediaplayer",b);var t={getVersion:function(){var a=this,e=null,c=0;if((!c||r.dbug)&&a.nav.query().installed){c=1}if((!e||r.dbug)&&a.nav.query().version){e=a.nav.version}if((!c||r.dbug)&&a.axo.query().installed){c=1}if((!e||r.dbug)&&a.axo.query().version){e=a.axo.version}a.version=r.formatNum(e);a.installed=e?1:(c?0:-1)},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-silverlight","application/x-silverlight-2"],query:function(){var a=this,h,f,c,e=a.hasRun||!r.hasMimeType(a.mimeType);a.hasRun=1;if(e){return a}c=r.pd.findNavPlugin({find:"Silverlight.*Plug-?in",mimes:a.mimeType,plugins:"Silverlight Plug-In"});if(c){a.installed=1}if(c&&c.description){f=r.formatNum(r.getNum(c.description+""))}if(f){h=f.split(r.splitNumRegx);if(parseInt(h[0],10)<2&&parseInt(h[2],10)>=30226){h[0]="2"}f=h.join(",")}if(f){a.version=f}return a}},axo:{hasRun:0,installed:0,version:null,progID:"AgControl.AgControl",maxdigit:[20,10,10,100,100,10],mindigit:[0,0,0,0,0,0],IsVersionSupported:function(a,e){var f=this;try{return f.testVersion?r.compareNums(r.formatNum(f.testVersion.join(",")),r.formatNum(e.join(",")))>=0:a.IsVersionSupported(f.format(e))}catch(c){}return 0},format:function(a){var c=this;return(a[0]+"."+a[1]+"."+a[2]+c.make2digits(a[3])+c.make2digits(a[4])+"."+a[5])},make2digits:function(a){return(a<10?"0":"")+a+""},query:function(){var h=this,j,a,f=h.hasRun;h.hasRun=1;if(f){return h}a=r.getAXO(h.progID);if(a){h.installed=1}if(a&&h.IsVersionSupported(a,h.mindigit)){var k=[].concat(h.mindigit),c,e=0;for(j=0;j<h.maxdigit.length;j++){c=0;while(h.maxdigit[j]-h.mindigit[j]>1&&c<20){c++;e++;k[j]=Math.round((h.maxdigit[j]+h.mindigit[j])/2);if(h.IsVersionSupported(a,k)){h.mindigit[j]=k[j]}else{h.maxdigit[j]=k[j]}}k[j]=h.mindigit[j]}h.version=h.format(k)}return h}}};r.addPlugin("silverlight",t);var u={compareNums:function(n,a){var f=n.split(r.splitNumRegx),j=a.split(r.splitNumRegx),k,c,e,l,m,h;for(k=0;k<Math.min(f.length,j.length);k++){h=/([\d]+)([a-z]?)/.test(f[k]);c=parseInt(RegExp.$1,10);l=(k==2&&RegExp.$2.length>0)?RegExp.$2.charCodeAt(0):-1;h=/([\d]+)([a-z]?)/.test(j[k]);e=parseInt(RegExp.$1,10);m=(k==2&&RegExp.$2.length>0)?RegExp.$2.charCodeAt(0):-1;if(c!=e){return(c>e?1:-1)}if(k==2&&l!=m){return(l>m?1:-1)}}return 0},setPluginStatus:function(c,f,a){var e=this;e.installed=f?1:(a?(a>0?0.7:-0.1):(c?0:-1));if(f){e.version=r.formatNum(f)}e.getVersionDone=e.installed==0.7||e.installed==-0.1?0:1},getVersion:function(c){var a=this,e,h=null,f;if((!e||r.dbug)&&a.nav.query().installed){e=1}if((!h||r.dbug)&&a.nav.query().version){h=a.nav.version}if((!e||r.dbug)&&a.axo.query().installed){e=1}if((!h||r.dbug)&&a.axo.query().version){h=a.axo.version}if(!h||r.dbug){f=a.codebase.isMin(c);if(f){a.setPluginStatus(0,0,f);return}}if(!h||r.dbug){f=a.codebase.search();if(f){e=1;h=f}}a.setPluginStatus(e,h,0)},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-vlc-plugin","application/x-google-vlc-plugin","application/mpeg4-muxcodetable","application/x-matroska","application/xspf+xml","video/divx","video/webm","video/x-mpeg","video/x-msvideo","video/ogg","audio/x-flac","audio/amr","audio/amr"],find:"VLC.*Plug-?in",find2:"VLC|VideoLAN",avoid:"Totem|Helix",plugins:["VLC Web Plugin","VLC Multimedia Plug-in","VLC Multimedia Plugin","VLC multimedia plugin"],query:function(){var a=this,f,c,e=a.hasRun||!r.hasMimeType(a.mimeType);a.hasRun=1;if(e){return a}c=r.pd.findNavPlugin({find:a.find,avoid:a.avoid,mimes:a.mimeType,plugins:a.plugins});if(c){a.installed=1;if(c.description){f=r.getNum(c.description+"","[\\d][\\d\\.]*[a-z]*")}if(f){a.version=f}}return a}},axo:{hasRun:0,installed:0,version:null,progID:"VideoLAN.VLCPlugin",query:function(){var e=this,a,f,c=e.hasRun;e.hasRun=1;if(c){return e}a=r.getAXO(e.progID);if(a){e.installed=1;f=r.getNum(r.pd.getPROP(a,"VersionInfo"),"[\\d][\\d\\.]*[a-z]*");if(f){e.version=f}}return e}},codebase:{classID:"clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921",isMin:function(a){this.$$=u;return r.codebase.isMin(this,a)},search:function(){this.$$=u;return r.codebase.search(this)},DIGITMAX:[[11,11,16]],DIGITMIN:[0,0,0,0],Upper:["999"],Lower:["0"],convert:[1]}};r.addPlugin("vlc",u);var w={OTF:null,setPluginStatus:function(){var P=this,N=P.OTF,k=P.nav.detected,e=P.nav.version,a=P.nav.precision,K=a,m=e,I=k>0;var f=P.axo.detected,L=P.axo.version,h=P.axo.precision,J=P.doc.detected,j=P.doc.version,o=P.doc.precision,n=P.doc2.detected,l=P.doc2.version,c=P.doc2.precision;m=l||m||L||j;K=c||K||h||o;I=n>0||I||f>0||J>0;m=m||null;P.version=r.formatNum(m);P.precision=K;var M=-1;if(N==3){M=P.version?0.5:-0.5}else{if(m){M=1}else{if(I){M=0}else{if(f==-0.5||J==-0.5){M=-0.15}else{if(r.browser.isIE&&(!r.browser.ActiveXEnabled||r.browser.ActiveXFilteringEnabled)){M=-1.5}}}}}P.installed=M;if(P.getVersionDone!=1){var O=1;if((P.verify&&P.verify.isEnabled())||P.installed==0.5||P.installed==-0.5){O=0}else{if(P.doc2.isDisabled()==1){O=0}}P.getVersionDone=O}},getVersion:function(c,e){var h=this,f=0,a=h.verify;if(h.getVersionDone===null){h.OTF=0;if(a){a.init()}}r.file.save(h,".pdf",e);if(h.getVersionDone===0){h.doc2.insertHTMLQuery();h.setPluginStatus();return}if((!f||r.dbug)&&h.nav.query().version){f=1}if((!f||r.dbug)&&h.axo.query().version){f=1}if((!f||r.dbug)&&h.doc.query().version){f=1}if(1){h.doc2.insertHTMLQuery()}h.setPluginStatus()},getPrecision:function(a,c,e){if(r.isString(a)){c=c||"";e=e||"";var j,f="\\d+",h="[\\.]",k=[f,f,f,f];for(j=4;j>0;j--){if((new RegExp(c+k.slice(0,j).join(h)+e)).test(a)){return j}}}return 0},nav:{detected:0,version:null,precision:0,mimeType:["application/pdf","application/vnd.adobe.pdfxml"],find:"Adobe.*PDF.*Plug-?in|Adobe.*Acrobat.*Plug-?in|Adobe.*Reader.*Plug-?in",plugins:["Adobe Acrobat","Adobe Acrobat and Reader Plug-in","Adobe Reader Plugin"],query:function(){var a=this,c,e=null;if(a.detected||!r.hasMimeType(a.mimeType)){return a}c=r.pd.findNavPlugin({find:a.find,mimes:a.mimeType,plugins:a.plugins});a.detected=c?1:-1;if(c){e=r.getNum(c.description)||r.getNum(c.name);e=r.getPluginFileVersion(c,e);if(!e){e=a.attempt3()}if(e){a.version=e;a.precision=w.getPrecision(e)}}return a},attempt3:function(){var a=null;if(r.OS==1){if(r.hasMimeType("application/vnd.adobe.pdfxml")){a="9"}else{if(r.hasMimeType("application/vnd.adobe.x-mars")){a="8"}else{if(r.hasMimeType("application/vnd.adobe.xfdf")){a="6"}}}}return a}},activexQuery:function(a){var e="",f,k,h,j,l={precision:0,version:null};try{if(a){e=a.GetVersions()+""}}catch(c){}if(e&&r.isString(e)){f=/\=\s*[\d\.]+/g;j=e.match(f);if(j){for(k=0;k<j.length;k++){h=r.formatNum(r.getNum(j[k]));if(h&&(!l.version||r.compareNums(h,l.version)>0)){l.version=h}}l.precision=w.getPrecision(e,"\\=\\s*")}}return l},axo:{detected:0,version:null,precision:0,progID:["AcroPDF.PDF","AcroPDF.PDF.1","PDF.PdfCtrl","PDF.PdfCtrl.5","PDF.PdfCtrl.1"],progID_dummy:"AcroDUMMY.DUMMY",query:function(){var f=this,k=w,e,c,h,j,l,a;if(f.detected){return f}f.detected=-1;c=r.getAXO(f.progID_dummy);if(!c){a=r.errObj}for(l=0;l<f.progID.length;l++){c=r.getAXO(f.progID[l]);if(c){f.detected=1;e=k.activexQuery(c);h=e.version;j=e.precision;if(!r.dbug&&h){break}}else{if(a&&r.errObj&&a!==r.errObj&&a.message!==r.errObj.message){f.detected=-0.5}}}if(h){f.version=h}if(j){f.precision=j}return f}},doc:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",classID_dummy:"clsid:CA8A9780-280D-11CF-A24D-BA9876543210",DummySpanTagHTML:0,HTML:0,DummyObjTagHTML1:0,DummyObjTagHTML2:0,isDisabled:function(){var a=this,c=0;if(a.HTML){c=1}else{if(r.dbug){}else{if(!r.DOM.isEnabled.objectTagUsingActiveX()){c=1}}}return c},query:function(){var f=this,k=w,e=r.DOM.altHTML,a=1,n,h,j,m,l=1,c;if(f.isDisabled()){return f}n=r.DOM.iframe.insert(99,"Adobe Reader");f.DummySpanTagHTML=r.DOM.insert("",[],[],e,k,l,n);f.HTML=r.DOM.insert("object",["classid",f.classID],[],e,k,l,n);f.DummyObjTagHTML2=r.DOM.insert("object",["classid",f.classID_dummy],[],e,k,l,n);r.DOM.iframe.close(n);c=r.DOM.getTagStatus(f.HTML,f.DummySpanTagHTML,f.DummyObjTagHTML1,f.DummyObjTagHTML2,0,0,a);h=k.activexQuery(f.HTML.obj());j=h.version;m=h.precision;f.detected=c>0||j?1:(c==-0.1||c==-0.5?-0.5:-1);if(j){f.version=j}if(m){f.precision=m}return f}},doc2:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",mimeType:"application/pdf",HTML:0,count:0,count2:0,time2:0,intervalLength:50,maxCount:150,isDisabled:function(){var a=this,j=w,k=j.axo,e=j.nav,f=j.doc,h,l,c=0,m;if(a.HTML){c=2}else{if(r.dbug){}else{if(!r.DOM.isEnabled.objectTagUsingActiveX()){c=2}else{h=(e?e.version:0)||(k?k.version:0)||(f?f.version:0)||0;l=(e?e.precision:0)||(k?k.precision:0)||(f?f.precision:0)||0;if(!h||!l||l>2||r.compareNums(r.formatNum(h),r.formatNum("11"))<0){c=2}}}}if(c<2){m=r.file.getValid(j);if(!m||!m.full){c=1}}return c},handlerSet:0,onMessage:function(){var a=this;return function(c){if(a.version){return}a.detected=1;if(r.isArray(c)){c=c[0]}c=r.getNum(c+"");if(c){if(!(/[.,_]/).test(c)){c+="."}c+="00000";if((/^(\d+)[.,_](\d)(\d\d)(\d\d)/).test(c)){c=RegExp.$1+","+RegExp.$2+","+RegExp.$3+","+RegExp.$4}a.version=r.formatNum(c);a.precision=3;w.setPluginStatus()}}},isDefinedMsgHandler:function(c,a){try{return c?c.messageHandler!==a:0}catch(e){}return 1},queryObject:function(){var c=this,a=c.HTML,e=a?a.obj():0;if(!e){return}if(!c.handlerSet&&c.isDefinedMsgHandler(e)){try{e.messageHandler={onMessage:c.onMessage()}}catch(f){}c.handlerSet=1;c.count2=c.count;c.time2=(new Date()).getTime()}if(!c.detected){if(c.count>3&&!c.handlerSet){c.detected=-1}else{if(c.time2&&c.count-c.count2>=c.maxCount&&(new Date()).getTime()-c.time2>=c.intervalLength*c.maxCount){c.detected=-0.5}}}if(c.detected){if(c.detected!=-1){}}},insertHTMLQuery:function(){var a=this,j=w,f=r.DOM.altHTML,h,e,c=0;if(a.isDisabled()){return a}if(j.OTF<2){j.OTF=2}h=r.file.getValid(j).full;e=r.DOM.iframe.insert(0,"Adobe Reader");r.DOM.iframe.write(e,'<script type="text/javascript"><\/script>');a.HTML=r.DOM.insert("object",["data",h].concat(r.browser.isIE?["classid",a.classID]:["type",a.mimeType]),["src",h],f,j,c,e);r.DOM.iframe.addHandler(e,a.onIntervalQuery);if(j.OTF<3&&a.HTML){j.OTF=3}r.DOM.iframe.close(e);return a},onIntervalQuery:function(){var c=w,a=c.doc2;a.count++;if(c.OTF==3){a.queryObject();if(a.detected){a.queryCompleted()}}if(c.OTF==3){r.ev.setTimeout(a.onIntervalQuery,a.intervalLength)}},queryCompleted:function(){var a=this,c=w;if(c.OTF==4){return}c.OTF=4;c.setPluginStatus();r.ev.callArray(c.DoneHndlrs)},z:0}};r.addPlugin("adobereader",w);var p={OTF:null,detectIE3P:0,setPluginStatus:function(){var j=this,h=j.OTF,a=j.doc.result,c=j.mime.result,e=a>0||c>0;var f=j.axo.result;e=e||f>0;j.version=null;if(h==3){j.installed=-0.5}else{e=e?0:-1;if(e==-1){e=f==-0.5||a==-0.5?-0.15:(r.browser.isIE&&(!r.browser.ActiveXEnabled||r.browser.ActiveXFilteringEnabled||!j.detectIE3P)?-1.5:-1)}j.installed=e}if(j.verify&&j.verify.isEnabled()){j.getVersionDone=0}else{if(j.getVersionDone!=1){j.getVersionDone=(j.installed==-0.5||(j.installed==-1&&j.doc.isDisabled1()<2&&j.doc.isDisabled2()<2))?0:1}}},getVersion:function(f,h,e){var k=this,j=false,a=k.doc,c=k.verify;if(r.isDefined(e)){k.detectIE3P=e?1:0}if(k.getVersionDone===null){k.OTF=0;if(c){c.init()}}r.file.save(k,".pdf",h);if(k.getVersionDone===0){if(c&&c.isEnabled()&&r.isNum(k.installed)&&k.installed>=0){return}if(a.insertHTMLQuery()>0){j=true}k.setPluginStatus();return}if((!j||r.dbug)&&k.mime.query()>0){j=true}if((!j||r.dbug)&&k.axo.query()>0){j=true}if((!j||r.dbug)&&a.insertHTMLQuery()>0){j=true}k.setPluginStatus()},mime:{mimeType:"application/pdf",result:0,query:function(){var a=this;if(!a.result){a.result=r.hasMimeType(a.mimeType)?1:-1}return a.result}},axo:{result:0,progID:["AcroPDF.PDF","AcroPDF.PDF.1","PDF.PdfCtrl","PDF.PdfCtrl.5","PDF.PdfCtrl.1"],progID_dummy:"AcroDUMMY.DUMMY",prodID3rd:["NitroPDF.IE.ActiveDoc","PDFXCviewIEPlugin.CoPDFXCviewIEPlugin","PDFXCviewIEPlugin.CoPDFXCviewIEPlugin.1","FoxitReader.FoxitReaderCtl","FoxitReader.FoxitReaderCtl.1","FOXITREADEROCX.FoxitReaderOCXCtrl","FOXITREADEROCX.FoxitReaderOCXCtrl.1"],query:function(){var c=this,e=p,f,a;if(!c.result){c.result=-1;if(!r.getAXO(c.progID_dummy)){a=r.errObj}for(f=0;f<c.progID.length;f++){if(r.getAXO(c.progID[f])){c.result=1;if(!r.dbug){break}}else{if(a&&r.errObj&&a!==r.errObj&&a.message!==r.errObj.message){c.result=-0.5}}}if((c.result<-0.5&&e.detectIE3P)||r.dbug){for(f=0;f<c.prodID3rd.length;f++){if(r.getAXO(c.prodID3rd[f])){c.result=1;if(!r.dbug){break}}}}}return c.result}},doc:{result:-1,result1:-1,result2:-1,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",classID_dummy:"clsid:CA8A9780-280D-11CF-A24D-BA9876543210",mimeType:"application/pdf",mimeType_dummy:"application/dummymimepdf",DummySpanTagHTML:0,HTML1:0,HTML2:0,DummyObjTagHTML1:0,insertHTMLQuery:function(){var a=this;a.insertHTMLQuery1();a.insertHTMLQuery2();return a.queryObject()},queryObject:function(c){var a=this,e=a.queryObject1(c),f=a.queryObject2(c),h=e>0||f<0?e:(e<-0.5||f>0?f:(e==-0.1?e:0));if(r.dbug){h=e==-0.1?e:(!e||!f?0:h)}a.result=h;return h},avoidBrowser:function(){var a=r.browser;if((a.isGecko&&r.compareNums(a.verGecko,r.formatNum("10"))<=0&&r.OS<=4)||(a.isOpera&&r.compareNums(a.verOpera,r.formatNum("11"))<=0&&r.OS<=4)||(a.isChrome&&r.compareNums(a.verChrome,r.formatNum("10"))<0&&r.OS<=4)){return 1}return 0},hasDummyPDF:function(){var a=r.file.getValid(p);if(!a||!a.full){return 0}return 1},isDisabled1:function(){var a=this,c=0;if(a.HTML1||!r.DOM.isEnabled.objectTag()){c=2}else{if(r.dbug||r.hasMimeType(a.mimeType)){}else{if(a.avoidBrowser()){c=2}}}if(c<2&&!a.hasDummyPDF()){c=1}return c},isDisabled2:function(){var a=this,c=0,e=r.browser;if(a.HTML2){c=2}else{if(r.dbug){}else{if(e.isIE){c=2}}}if(c<2&&!a.hasDummyPDF()){c=1}return c},insertHTMLQuery1:function(){var a=this,j=p,f,e,c=1,h=r.DOM.altHTML;if(a.isDisabled1()){return a.result1}a.result1=0;if(j.OTF<2){j.OTF=2}f=r.file.getValid(j).full;e=r.DOM.iframe.insert(99,"PDFReader");a.DummySpanTagHTML=r.DOM.insert("",[],[],h,j,c,e);a.HTML1=r.DOM.insert("object",(r.browser.isIE&&!j.detectIE3P?["classid",a.classID]:["type",a.mimeType]).concat(["data",f]),["src",f],h,j,c,e);a.DummyObjTagHTML1=r.DOM.insert("object",(r.browser.isIE&&!j.detectIE3P?["classid",a.classID_dummy]:["type",a.mimeType_dummy]),[],h,j,c,e);r.DOM.iframe.close(e);a.queryObject1();if(r.browser.isIE&&a.result===0){a.HTML1.span().innerHTML=a.HTML1.outerHTML;a.DummyObjTagHTML1.span().innerHTML=a.DummyObjTagHTML1.outerHTML}j.NOTF.init()},insertHTMLQuery2:function(){var a=this,h=p,f=r.DOM.altHTML,c=1,e;if(a.isDisabled2()){return a.result2}a.result2=0;if(h.OTF<2){h.OTF=2}e=r.DOM.iframe.insert(99,"PDFReader2");a.HTML2=r.DOM.insert("img",["alt",f,"src",r.file.getValid(h).full],[],f,h,c,e);r.ev.addEvent(a.HTML2.obj(),"load",r.ev.handler(a.onImgLoaded,a));r.DOM.iframe.close(e);h.NOTF.init()},onImgLoaded:function(a){a.imgLoaded=1},queryObject1:function(e){var a=this,h=p,f=0,c=1;f=r.DOM.getTagStatus(a.HTML1,a.DummySpanTagHTML,a.DummyObjTagHTML1,0,null,null,c);a.result1=f;return f},queryObject2:function(c){var a=this,f=p,e;if(a.HTML2.loaded){a.result2=a.imgLoaded?1:-1}e=a.result2;return e}},NOTF:{count:0,intervalLength:250,init:function(){var a=this,e=p,c=e.doc;if(e.OTF<3&&(c.HTML1||c.HTML2)){e.OTF=3;r.ev.setTimeout(a.onIntervalQuery,a.intervalLength)}},onIntervalQuery:function(){var c=p.doc,a=p.NOTF,e;a.count++;if(p.OTF==3){e=c.queryObject(a.count);if(e>0||e<-0.1){a.queryCompleted()}}if(p.OTF==3){r.ev.setTimeout(a.onIntervalQuery,a.intervalLength)}},queryCompleted:function(){var a=this,c=p;if(c.OTF==4){return}c.OTF=4;c.setPluginStatus();r.ev.callArray(c.DoneHndlrs)}}};r.addPlugin("pdfreader",p);var d={mimeType:["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"],classID:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA",setPluginStatus:function(c,f){var a=this,e;if(f){a.version=r.formatNum(r.getNum(f))}a.installed=a.version?1:(c?0:-1);e=a.installed==-1||a.instance.version;e=e||a.axo.version;a.getVersionDone=e?1:0},navObj:{hasRun:0,installed:null,version:null,find:"RealPlayer.*Plug-?in",avoid:"Totem|QuickTime|Helix|VLC|Download",plugins:["RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (32-bit) ","RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (64-bit) ","RealPlayer Plugin"],query:function(){var e=this,a=d,c,f=!e.hasRun&&r.hasMimeType(a.mimeType);e.hasRun=1;if(f){c=r.pd.findNavPlugin({find:e.find,avoid:e.avoid,mimes:a.mimeType,plugins:e.plugins});e.installed=c?1:0;c=r.getPluginFileVersion(c);if(c&&r.compareNums(r.formatNum(c),r.formatNum("15"))>=0){e.version=c}}return e}},JS:{hasRun:0,version:null,regStr:"RealPlayer.*Version.*Plug-?in",mimetype:"application/vnd.rn-realplayer-javascript",q1:[[11,0,0],[999],[663],[663],[663],[660],[468],[468],[468],[468],[468],[468],[431],[431],[431],[372],[180],[180],[172],[172],[167],[114],[0]],q3:[[6,0],[12,99],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,46],[12,46],[12,46],[11,3006],[11,2806],[11,2806],[11,2804],[11,2804],[11,2799],[11,2749],[11,2700]],compare:function(e,f){var h,j=e.length,a=f.length,k,c;for(h=0;h<Math.max(j,a);h++){k=h<j?e[h]:0;c=h<a?f[h]:0;if(k>c){return 1}if(k<c){return -1}}return 0},convertNum:function(f,k,a){var c=this,e,h,l,j=null;if(!f||!(e=r.formatNum(f))){return j}e=e.split(r.splitNumRegx);for(l=0;l<e.length;l++){e[l]=parseInt(e[l],10)}if(c.compare(e.slice(0,Math.min(k[0].length,e.length)),k[0])!==0){return j}h=e.length>k[0].length?e.slice(k[0].length):[];if(c.compare(h,k[1])>0||c.compare(h,k[k.length-1])<0){return j}for(l=k.length-1;l>=1;l--){if(l==1){break}if(c.compare(k[l],h)===0&&c.compare(k[l],k[l-1])===0){break}if(c.compare(h,k[l])>=0&&c.compare(h,k[l-1])<0){break}}return a[0].join(".")+"."+a[l].join(".")},isEnabled:function(){var a=this;return !a.hasRun&&r.OS==1&&r.hasMimeType(a.mimetype)?1:0},query:function(){var a=this,c,f,e,j=a.isEnabled();a.hasRun=1;if(j){f=r.pd.findNavPlugin({find:a.regStr,mimes:a.mimetype});if(f){c=r.formatNum(r.getNum(f.description))}if(c){var h=c.split(r.splitNumRegx);e=1;if(a.compare(h,[6,0,12,200])<0){e=-1}else{if(a.compare(h,[6,0,12,1739])<=0&&a.compare(h,[6,0,12,857])>=0){e=-1}}if(e<0){f=a.convertNum(c,a.q3,a.q1);a.version=f?f:c}}}return a}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var c=this,a=d,e=1;if(!r.DOM.isEnabled.objectTag()){e=0}else{if(r.dbug){}else{if(c.hasRun||r.DOM.isEnabled.objectTagUsingActiveX()||!r.hasMimeType(a.mimeType)||(r.browser.isGecko&&r.compareNums(r.browser.verGecko,r.formatNum("1,8"))<0)||(r.browser.isOpera&&r.compareNums(r.browser.verOpera,r.formatNum("10"))<0)){e=0}}}return e},query:function(){var h=this,a=d,c,f=h.isEnabled();h.hasRun=1;if(f){h.HTML=r.DOM.insert("object",["type",a.mimeType[0]],["src","","autostart","false","imagestatus","false","controls","stopbutton"],"",a);c=h.HTML.obj();try{h.version=r.getNum(c.GetVersionInfo())}catch(e){}r.DOM.setStyle(c,["display","none"])}return h}},axo:{hasRun:0,installed:null,version:null,progID:["rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer"],query:function(){var e=this,a,h,f;if(!e.hasRun){e.hasRun=1;for(h=0;h<e.progID.length;h++){a=r.getAXO(e.progID[h]);if(a){e.installed=1;f=0;try{f=a.GetVersionInfo()+""}catch(c){}if(f){e.version=f;if(!r.dbug){break}}}}}return e}},getVersion:function(c,f){var a=this,h=null,e=0;if((!e||r.dbug)&&a.axo.query().installed){e=1}if((!h||r.dbug)&&a.axo.query().version){h=a.axo.version}if((!e||r.dbug)&&a.navObj.query().installed){e=1}if((!h||r.dbug)&&a.navObj.query().version){h=a.navObj.version}if((!h||r.dbug)&&a.JS.query().version){e=1;h=a.JS.version}if(((!e&&!h)||f||r.dbug)&&a.instance.query().version){e=1;h=a.instance.version}a.setPluginStatus(e,h)}};r.addPlugin("realplayer",d)})();var IaDfp=(function(){var L;try{var n=null;var ai={};var l=true;(function(ax,at){var ay={version:"3.0.1",x86:{},x64:{}};function aA(aB,aC){return((aB&65535)*aC)+((((aB>>>16)*aC)&65535)<<16)}function ap(aB,aC){return(aB<<aC)|(aB>>>(32-aC))}function aq(aB){aB^=aB>>>16;aB=aA(aB,2246822507);aB^=aB>>>13;aB=aA(aB,3266489909);aB^=aB>>>16;return aB}function az(aB,aD){aB=[aB[0]>>>16,aB[0]&65535,aB[1]>>>16,aB[1]&65535];aD=[aD[0]>>>16,aD[0]&65535,aD[1]>>>16,aD[1]&65535];var aC=[0,0,0,0];aC[3]+=aB[3]+aD[3];aC[2]+=aC[3]>>>16;aC[3]&=65535;aC[2]+=aB[2]+aD[2];aC[1]+=aC[2]>>>16;aC[2]&=65535;aC[1]+=aB[1]+aD[1];aC[0]+=aC[1]>>>16;aC[1]&=65535;aC[0]+=aB[0]+aD[0];aC[0]&=65535;return[(aC[0]<<16)|aC[1],(aC[2]<<16)|aC[3]]}function e(aB,aD){aB=[aB[0]>>>16,aB[0]&65535,aB[1]>>>16,aB[1]&65535];aD=[aD[0]>>>16,aD[0]&65535,aD[1]>>>16,aD[1]&65535];var aC=[0,0,0,0];aC[3]+=aB[3]*aD[3];aC[2]+=aC[3]>>>16;aC[3]&=65535;aC[2]+=aB[2]*aD[3];aC[1]+=aC[2]>>>16;aC[2]&=65535;aC[2]+=aB[3]*aD[2];aC[1]+=aC[2]>>>16;aC[2]&=65535;aC[1]+=aB[1]*aD[3];aC[0]+=aC[1]>>>16;aC[1]&=65535;aC[1]+=aB[2]*aD[2];aC[0]+=aC[1]>>>16;aC[1]&=65535;aC[1]+=aB[3]*aD[1];aC[0]+=aC[1]>>>16;aC[1]&=65535;aC[0]+=(aB[0]*aD[3])+(aB[1]*aD[2])+(aB[2]*aD[1])+(aB[3]*aD[0]);aC[0]&=65535;return[(aC[0]<<16)|aC[1],(aC[2]<<16)|aC[3]]}function aw(aB,aC){aC%=64;if(aC===32){return[aB[1],aB[0]]}else{if(aC<32){return[(aB[0]<<aC)|(aB[1]>>>(32-aC)),(aB[1]<<aC)|(aB[0]>>>(32-aC))]}else{aC-=32;return[(aB[1]<<aC)|(aB[0]>>>(32-aC)),(aB[0]<<aC)|(aB[1]>>>(32-aC))]}}}function ar(aB,aC){aC%=64;if(aC===0){return aB}else{if(aC<32){return[(aB[0]<<aC)|(aB[1]>>>(32-aC)),aB[1]<<aC]}else{return[aB[1]<<(aC-32),0]}}}function au(aB,aC){return[aB[0]^aC[0],aB[1]^aC[1]]}function av(aB){aB=au(aB,[0,aB[0]>>>1]);aB=e(aB,[4283543511,3981806797]);aB=au(aB,[0,aB[0]>>>1]);aB=e(aB,[3301882366,444984403]);aB=au(aB,[0,aB[0]>>>1]);return aB}ay.x86.hash32=function(aH,aE){aH=aH||"";aE=aE||0;var aI=aH.length%4;var aJ=aH.length-aI;var aG=aE;var aF=0;var aD=3432918353;var aB=461845907;for(var aC=0;aC<aJ;aC=aC+4){aF=((aH.charCodeAt(aC)&255))|((aH.charCodeAt(aC+1)&255)<<8)|((aH.charCodeAt(aC+2)&255)<<16)|((aH.charCodeAt(aC+3)&255)<<24);aF=aA(aF,aD);aF=ap(aF,15);aF=aA(aF,aB);aG^=aF;aG=ap(aG,13);aG=aA(aG,5)+3864292196}aF=0;switch(aI){case 3:aF^=(aH.charCodeAt(aC+2)&255)<<16;case 2:aF^=(aH.charCodeAt(aC+1)&255)<<8;case 1:aF^=(aH.charCodeAt(aC)&255);aF=aA(aF,aD);aF=ap(aF,15);aF=aA(aF,aB);aG^=aF}aG^=aH.length;aG=aq(aG);return aG>>>0};ay.x86.hash128=function(aP,aG){aP=aP||"";aG=aG||0;var aQ=aP.length%16;var aR=aP.length-aQ;var aO=aG;var aN=aG;var aL=aG;var aJ=aG;var aM=0;var aK=0;var aI=0;var aH=0;var aF=597399067;var aD=2869860233;var aC=951274213;var aB=2716044179;for(var aE=0;aE<aR;aE=aE+16){aM=((aP.charCodeAt(aE)&255))|((aP.charCodeAt(aE+1)&255)<<8)|((aP.charCodeAt(aE+2)&255)<<16)|((aP.charCodeAt(aE+3)&255)<<24);aK=((aP.charCodeAt(aE+4)&255))|((aP.charCodeAt(aE+5)&255)<<8)|((aP.charCodeAt(aE+6)&255)<<16)|((aP.charCodeAt(aE+7)&255)<<24);aI=((aP.charCodeAt(aE+8)&255))|((aP.charCodeAt(aE+9)&255)<<8)|((aP.charCodeAt(aE+10)&255)<<16)|((aP.charCodeAt(aE+11)&255)<<24);aH=((aP.charCodeAt(aE+12)&255))|((aP.charCodeAt(aE+13)&255)<<8)|((aP.charCodeAt(aE+14)&255)<<16)|((aP.charCodeAt(aE+15)&255)<<24);aM=aA(aM,aF);aM=ap(aM,15);aM=aA(aM,aD);aO^=aM;aO=ap(aO,19);aO+=aN;aO=aA(aO,5)+1444728091;aK=aA(aK,aD);aK=ap(aK,16);aK=aA(aK,aC);aN^=aK;aN=ap(aN,17);aN+=aL;aN=aA(aN,5)+197830471;aI=aA(aI,aC);aI=ap(aI,17);aI=aA(aI,aB);aL^=aI;aL=ap(aL,15);aL+=aJ;aL=aA(aL,5)+2530024501;aH=aA(aH,aB);aH=ap(aH,18);aH=aA(aH,aF);aJ^=aH;aJ=ap(aJ,13);aJ+=aO;aJ=aA(aJ,5)+850148119}aM=0;aK=0;aI=0;aH=0;switch(aQ){case 15:aH^=aP.charCodeAt(aE+14)<<16;case 14:aH^=aP.charCodeAt(aE+13)<<8;case 13:aH^=aP.charCodeAt(aE+12);aH=aA(aH,aB);aH=ap(aH,18);aH=aA(aH,aF);aJ^=aH;case 12:aI^=aP.charCodeAt(aE+11)<<24;case 11:aI^=aP.charCodeAt(aE+10)<<16;case 10:aI^=aP.charCodeAt(aE+9)<<8;case 9:aI^=aP.charCodeAt(aE+8);aI=aA(aI,aC);aI=ap(aI,17);aI=aA(aI,aB);aL^=aI;case 8:aK^=aP.charCodeAt(aE+7)<<24;case 7:aK^=aP.charCodeAt(aE+6)<<16;case 6:aK^=aP.charCodeAt(aE+5)<<8;case 5:aK^=aP.charCodeAt(aE+4);aK=aA(aK,aD);aK=ap(aK,16);aK=aA(aK,aC);aN^=aK;case 4:aM^=aP.charCodeAt(aE+3)<<24;case 3:aM^=aP.charCodeAt(aE+2)<<16;case 2:aM^=aP.charCodeAt(aE+1)<<8;case 1:aM^=aP.charCodeAt(aE);aM=aA(aM,aF);aM=ap(aM,15);aM=aA(aM,aD);aO^=aM}aO^=aP.length;aN^=aP.length;aL^=aP.length;aJ^=aP.length;aO+=aN;aO+=aL;aO+=aJ;aN+=aO;aL+=aO;aJ+=aO;aO=aq(aO);aN=aq(aN);aL=aq(aL);aJ=aq(aJ);aO+=aN;aO+=aL;aO+=aJ;aN+=aO;aL+=aO;aJ+=aO;return("00000000"+(aO>>>0).toString(16)).slice(-8)+("00000000"+(aN>>>0).toString(16)).slice(-8)+("00000000"+(aL>>>0).toString(16)).slice(-8)+("00000000"+(aJ>>>0).toString(16)).slice(-8)};ay.x64.hash128=function(aJ,aE){aJ=aJ||"";aE=aE||0;var aK=aJ.length%16;var aL=aJ.length-aK;var aI=[0,aE];var aH=[0,aE];var aG=[0,0];var aF=[0,0];var aD=[2277735313,289559509];var aB=[1291169091,658871167];for(var aC=0;aC<aL;aC=aC+16){aG=[((aJ.charCodeAt(aC+4)&255))|((aJ.charCodeAt(aC+5)&255)<<8)|((aJ.charCodeAt(aC+6)&255)<<16)|((aJ.charCodeAt(aC+7)&255)<<24),((aJ.charCodeAt(aC)&255))|((aJ.charCodeAt(aC+1)&255)<<8)|((aJ.charCodeAt(aC+2)&255)<<16)|((aJ.charCodeAt(aC+3)&255)<<24)];aF=[((aJ.charCodeAt(aC+12)&255))|((aJ.charCodeAt(aC+13)&255)<<8)|((aJ.charCodeAt(aC+14)&255)<<16)|((aJ.charCodeAt(aC+15)&255)<<24),((aJ.charCodeAt(aC+8)&255))|((aJ.charCodeAt(aC+9)&255)<<8)|((aJ.charCodeAt(aC+10)&255)<<16)|((aJ.charCodeAt(aC+11)&255)<<24)];aG=e(aG,aD);aG=aw(aG,31);aG=e(aG,aB);aI=au(aI,aG);aI=aw(aI,27);aI=az(aI,aH);aI=az(e(aI,[0,5]),[0,1390208809]);aF=e(aF,aB);aF=aw(aF,33);aF=e(aF,aD);aH=au(aH,aF);aH=aw(aH,31);aH=az(aH,aI);aH=az(e(aH,[0,5]),[0,944331445])}aG=[0,0];aF=[0,0];switch(aK){case 15:aF=au(aF,ar([0,aJ.charCodeAt(aC+14)],48));case 14:aF=au(aF,ar([0,aJ.charCodeAt(aC+13)],40));case 13:aF=au(aF,ar([0,aJ.charCodeAt(aC+12)],32));case 12:aF=au(aF,ar([0,aJ.charCodeAt(aC+11)],24));case 11:aF=au(aF,ar([0,aJ.charCodeAt(aC+10)],16));case 10:aF=au(aF,ar([0,aJ.charCodeAt(aC+9)],8));case 9:aF=au(aF,[0,aJ.charCodeAt(aC+8)]);aF=e(aF,aB);aF=aw(aF,33);aF=e(aF,aD);aH=au(aH,aF);case 8:aG=au(aG,ar([0,aJ.charCodeAt(aC+7)],56));case 7:aG=au(aG,ar([0,aJ.charCodeAt(aC+6)],48));case 6:aG=au(aG,ar([0,aJ.charCodeAt(aC+5)],40));case 5:aG=au(aG,ar([0,aJ.charCodeAt(aC+4)],32));case 4:aG=au(aG,ar([0,aJ.charCodeAt(aC+3)],24));case 3:aG=au(aG,ar([0,aJ.charCodeAt(aC+2)],16));case 2:aG=au(aG,ar([0,aJ.charCodeAt(aC+1)],8));case 1:aG=au(aG,[0,aJ.charCodeAt(aC)]);aG=e(aG,aD);aG=aw(aG,31);aG=e(aG,aB);aI=au(aI,aG)}aI=au(aI,[0,aJ.length]);aH=au(aH,[0,aJ.length]);aI=az(aI,aH);aH=az(aH,aI);aI=av(aI);aH=av(aH);aI=az(aI,aH);aH=az(aH,aI);return("00000000"+(aI[0]>>>0).toString(16)).slice(-8)+("00000000"+(aI[1]>>>0).toString(16)).slice(-8)+("00000000"+(aH[0]>>>0).toString(16)).slice(-8)+("00000000"+(aH[1]>>>0).toString(16)).slice(-8)};if(typeof ai!=="undefined"){if(typeof l!=="undefined"&&l.exports){ai=l.exports=ay}ai.murmurHash3=ay}else{if(typeof define==="function"&&define.amd){define([],function(){return ay})}else{ay._murmurHash3=ax.murmurHash3;ay.noConflict=function(){ax.murmurHash3=ay._murmurHash3;ay._murmurHash3=at;ay.noConflict=at;return ay};ax.murmurHash3=ay}}})(this);L=ai.murmurHash3}catch(am){if(window.console&&console.log){console.log("Failed to load murmurHash3js.js:",am)}}var r={},h="|",X="=",D=".",ak="2",ab="_v02",B=navigator.userAgent.toLowerCase(),C=B.indexOf("opera")>=0,u=B.indexOf("msie")>=0&&!C,d=u&&B.indexOf("mac")>=0,z=B.indexOf("mozilla")&&!u&&!C,j=navigator.platform,Y=null,P="__vip_ia_tag__",N="_ia01",J="_iat1",A="_ia_tag_id",s=(typeof parentDomainToBeTagged==="undefined"?"":parentDomainToBeTagged),O=N+"_"+s,y=false,Q=null,b={enhancedFingerprint:(typeof enhancedFingerprint==="undefined"?y:enhancedFingerprint),enhancedFingerprintExcludeBrowserList:(typeof enhancedFingerprintExcludeBrowserList==="undefined"?Q:enhancedFingerprintExcludeBrowserList),doesBrowserDiscourageCanvasFingerprinting:k,shouldFingerprintCanvas:H};try{Y=function(aZ,aY,aX){function ay(e){aR.cssText=e}function ax(a0,e){return ay(aN.join(a0+";")+(e||""))}function aw(a0,e){return typeof a0===e}function av(a0,e){return !!~(""+a0).indexOf(e)}function au(a1,a0){for(var a3 in a1){var a2=a1[a3];if(!av(a2,"-")&&aR[a2]!==aX){return a0=="pfx"?a2:!0}}return !1}function at(a1,a0,a4){for(var a3 in a1){var a2=a0[a1[a3]];if(a2!==aX){return a4===!1?a1[a3]:aw(a2,"function")?a2.bind(a4||a0):a2}}return !1}function ar(a1,a0,a4){var a3=a1.charAt(0).toUpperCase()+a1.slice(1),a2=(a1+" "+aL.join(a3+" ")+a3).split(" ");return aw(a0,"string")||aw(a0,"undefined")?au(a2,a0):(a2=(a1+" "+aK.join(a3+" ")+a3).split(" "),at(a2,a0,a4))}function aq(){aV.input=function(a2){for(var a1=0,a0=a2.length;a1<a0;a1++){aG[a2[a1]]=a2[a1] in aQ}return aG.list&&(aG.list=!!aY.createElement("datalist")&&!!aZ.HTMLDataListElement),aG}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),aV.inputtypes=function(a0){for(var a5=0,a4,a3,a2,a1=a0.length;a5<a1;a5++){aQ.setAttribute("type",a3=a0[a5]),a4=aQ.type!=="text",a4&&(aQ.value=aP,aQ.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(a3)&&aQ.style.WebkitAppearance!==aX?(aU.appendChild(aQ),a2=aY.defaultView,a4=a2.getComputedStyle&&a2.getComputedStyle(aQ,null).WebkitAppearance!=="textfield"&&aQ.offsetHeight!==0,aU.removeChild(aQ)):/^(search|tel)$/.test(a3)||(/^(url|email)$/.test(a3)?a4=aQ.checkValidity&&aQ.checkValidity()===!1:a4=aQ.value!=aP)),aH[a0[a5]]=!!a4}return aH}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var aW="2.6.2",aV={},aU=aY.documentElement,aT="modernizr",aS=aY.createElement(aT),aR=aS.style,aQ=aY.createElement("input"),aP=":)",aO={}.toString,aN=" -webkit- -moz- -o- -ms- ".split(" "),aM="Webkit Moz O ms",aL=aM.split(" "),aK=aM.toLowerCase().split(" "),aJ={svg:"http://www.w3.org/2000/svg"},aI={},aH={},aG={},aF=[],aE=aF.slice,aD,aC=function(ba,a9,a8,a7){var a6,a5,a4,a3,a2=aY.createElement("div"),a1=aY.body,a0=a1||aY.createElement("body");if(parseInt(a8,10)){while(a8--){a4=aY.createElement("div"),a4.id=a7?a7[a8]:aT+(a8+1),a2.appendChild(a4)}}return a6=["&#173;",'<style id="s',aT,'">',ba,"</style>"].join(""),a2.id=aT,(a1?a2:a0).innerHTML+=a6,a0.appendChild(a2),a1||(a0.style.background="",a0.style.overflow="hidden",a3=aU.style.overflow,aU.style.overflow="hidden",aU.appendChild(a0)),a5=a9(a2,ba),a1?a2.parentNode.removeChild(a2):(a0.parentNode.removeChild(a0),aU.style.overflow=a3),!!a5},aB=function(){function a0(a3,a2){a2=a2||aY.createElement(e[a3]||"div"),a3="on"+a3;var a1=a3 in a2;return a1||(a2.setAttribute||(a2=aY.createElement("div")),a2.setAttribute&&a2.removeAttribute&&(a2.setAttribute(a3,""),a1=aw(a2[a3],"function"),aw(a2[a3],"undefined")||(a2[a3]=aX),a2.removeAttribute(a3))),a2=null,a1}var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return a0}(),aA={}.hasOwnProperty,az;!aw(aA,"undefined")&&!aw(aA.call,"undefined")?az=function(a0,e){return aA.call(a0,e)}:az=function(a0,e){return e in a0&&aw(a0.constructor.prototype[e],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a0){var a3=this;if(typeof a3!="function"){throw new TypeError}var a2=aE.call(arguments,1),a1=function(){if(this instanceof a1){var e=function(){};e.prototype=a3.prototype;var a5=new e,a4=a3.apply(a5,a2.concat(aE.call(arguments)));return Object(a4)===a4?a4:a5}return a3.apply(a0,a2.concat(aE.call(arguments)))};return a1}),aI.flexbox=function(){return ar("flexWrap")},aI.flexboxlegacy=function(){return ar("boxDirection")},aI.canvas=function(){var e=aY.createElement("canvas");return !!e.getContext&&!!e.getContext("2d")},aI.canvastext=function(){return !!aV.canvas&&!!aw(aY.createElement("canvas").getContext("2d").fillText,"function")},aI.webgl=function(){return !!aZ.WebGLRenderingContext},aI.touch=function(){var e;return"ontouchstart" in aZ||aZ.DocumentTouch&&aY instanceof DocumentTouch?e=!0:aC(["@media (",aN.join("touch-enabled),("),aT,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a0){e=a0.offsetTop===9}),e},aI.geolocation=function(){return"geolocation" in navigator},aI.postmessage=function(){return !!aZ.postMessage},aI.websqldatabase=function(){return !!aZ.openDatabase},aI.indexedDB=function(){return !!ar("indexedDB",aZ)},aI.hashchange=function(){return aB("hashchange",aZ)&&(aY.documentMode===aX||aY.documentMode>7)},aI.history=function(){return !!aZ.history&&!!history.pushState},aI.draganddrop=function(){var e=aY.createElement("div");return"draggable" in e||"ondragstart" in e&&"ondrop" in e},aI.websockets=function(){return"WebSocket" in aZ||"MozWebSocket" in aZ},aI.rgba=function(){return ay("background-color:rgba(150,255,150,.5)"),av(aR.backgroundColor,"rgba")},aI.hsla=function(){return ay("background-color:hsla(120,40%,100%,.5)"),av(aR.backgroundColor,"rgba")||av(aR.backgroundColor,"hsla")},aI.multiplebgs=function(){return ay("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(aR.background)},aI.backgroundsize=function(){return ar("backgroundSize")},aI.borderimage=function(){return ar("borderImage")},aI.borderradius=function(){return ar("borderRadius")},aI.boxshadow=function(){return ar("boxShadow")},aI.textshadow=function(){return aY.createElement("div").style.textShadow===""},aI.opacity=function(){return ax("opacity:.55"),/^0.55$/.test(aR.opacity)},aI.cssanimations=function(){return ar("animationName")},aI.csscolumns=function(){return ar("columnCount")},aI.cssgradients=function(){var a0="background-image:",e="gradient(linear,left top,right bottom,from(#9f9),to(white));",a1="linear-gradient(left top,#9f9, white);";return ay((a0+"-webkit- ".split(" ").join(e+a0)+aN.join(a1+a0)).slice(0,-a0.length)),av(aR.backgroundImage,"gradient")},aI.cssreflections=function(){return ar("boxReflect")},aI.csstransforms=function(){return !!ar("transform")},aI.csstransforms3d=function(){var e=!!ar("perspective");return e&&"webkitPerspective" in aU.style&&aC("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(a0,a1){e=a0.offsetLeft===9&&a0.offsetHeight===3}),e},aI.csstransitions=function(){return ar("transition")},aI.fontface=function(){var e;return aC('@font-face {font-family:"font";src:"//:";}',function(a4,a3){var a2=aY.getElementById("smodernizr"),a1=a2.sheet||a2.styleSheet,a0=a1?a1.cssRules&&a1.cssRules[0]?a1.cssRules[0].cssText:a1.cssText||"":"";e=/src/i.test(a0)&&a0.indexOf(a3.split(" ")[0])===0}),e},aI.video=function(){var e=aY.createElement("video"),a1=!1;try{if(a1=!!e.canPlayType){a1=new Boolean(a1),a1.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),a1.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),a1.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}}catch(a0){}return a1},aI.audio=function(){var e=aY.createElement("audio"),a1=!1;try{if(a1=!!e.canPlayType){a1=new Boolean(a1),a1.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),a1.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),a1.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),a1.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}}catch(a0){}return a1},aI.localstorage=function(){try{return localStorage.setItem(aT,aT),localStorage.removeItem(aT),!0}catch(e){return !1}},aI.sessionstorage=function(){try{return sessionStorage.setItem(aT,aT),sessionStorage.removeItem(aT),!0}catch(e){return !1}},aI.webworkers=function(){return !!aZ.Worker},aI.applicationcache=function(){return !!aZ.applicationCache},aI.svg=function(){return !!aY.createElementNS&&!!aY.createElementNS(aJ.svg,"svg").createSVGRect},aI.inlinesvg=function(){var e=aY.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==aJ.svg},aI.smil=function(){return !!aY.createElementNS&&/SVGAnimate/.test(aO.call(aY.createElementNS(aJ.svg,"animate")))},aI.svgclippaths=function(){return !!aY.createElementNS&&/SVGClipPath/.test(aO.call(aY.createElementNS(aJ.svg,"clipPath")))};for(var ap in aI){az(aI,ap)&&(aD=ap.toLowerCase(),aV[aD]=aI[ap](),aF.push((aV[aD]?"":"no-")+aD))}return aV.input||aq(),aV.addTest=function(a0,e){if(typeof a0=="object"){for(var a1 in a0){az(a0,a1)&&aV.addTest(a1,a0[a1])}}else{a0=a0.toLowerCase();if(aV[a0]!==aX){return aV}e=typeof e=="function"?e():e,typeof enableClasses!="undefined"&&enableClasses&&(aU.className+=" "+(e?"":"no-")+a0),aV[a0]=e}return aV},ay(""),aS=aQ=null,aV._version=aW,aV._prefixes=aN,aV._domPrefixes=aK,aV._cssomPrefixes=aL,aV.hasEvent=aB,aV.testProp=function(e){return au([e])},aV.testAllProps=ar,aV.testStyles=aC,aV}(this,this.document),function(aP,aO){function aF(aQ,e){var aS=aQ.createElement("p"),aR=aQ.getElementsByTagName("head")[0]||aQ.documentElement;return aS.innerHTML="x<style>"+e+"</style>",aR.insertBefore(aS.lastChild,aR.firstChild)}function aE(){var e=ay.elements;return typeof e=="string"?e.split(" "):e}function aD(aQ){var e=aH[aQ[aJ]];return e||(e={},aI++,aQ[aJ]=aI,aH[aI]=e),e}function aC(e,aS,aR){aS||(aS=aO);if(aG){return aS.createElement(e)}aR||(aR=aD(aS));var aQ;return aR.cache[e]?aQ=aR.cache[e].cloneNode():aL.test(e)?aQ=(aR.cache[e]=aR.createElem(e)).cloneNode():aQ=aR.createElem(e),aQ.canHaveChildren&&!aM.test(e)?aR.frag.appendChild(aQ):aQ}function aB(aQ,aV){aQ||(aQ=aO);if(aG){return aQ.createDocumentFragment()}aV=aV||aD(aQ);var aU=aV.frag.cloneNode(),aT=0,aS=aE(),aR=aS.length;for(;aT<aR;aT++){aU.createElement(aS[aT])}return aU}function aA(aQ,e){e.cache||(e.cache={},e.createElem=aQ.createElement,e.createFrag=aQ.createDocumentFragment,e.frag=e.createFrag()),aQ.createElement=function(aR){return ay.shivMethods?aC(aR,aQ,e):e.createElem(aR)},aQ.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+aE().join().replace(/\w+/g,function(aR){return e.createElem(aR),e.frag.createElement(aR),'c("'+aR+'")'})+");return n}")(ay,e.frag)}function az(e){e||(e=aO);var aQ=aD(e);return ay.shivCSS&&!aK&&!aQ.hasCSS&&(aQ.hasCSS=!!aF(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),aG||aA(e,aQ),e}function au(aR){var aQ,aV=aR.getElementsByTagName("*"),aU=aV.length,aT=RegExp("^(?:"+aE().join("|")+")$","i"),aS=[];while(aU--){aQ=aV[aU],aT.test(aQ.nodeName)&&aS.push(aQ.applyElement(at(aQ)))}return aS}function at(aR){var aQ,aU=aR.attributes,aT=aU.length,aS=aR.ownerDocument.createElement(aw+":"+aR.nodeName);while(aT--){aQ=aU[aT],aQ.specified&&aS.setAttribute(aQ.nodeName,aQ.nodeValue)}return aS.style.cssText=aR.style.cssText,aS}function ar(aR){var aQ,aV=aR.split("{"),aU=aV.length,aT=RegExp("(^|[\\s,>+~])("+aE().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),aS="$1"+aw+"\\:$2";while(aU--){aQ=aV[aU]=aV[aU].split("}"),aQ[aQ.length-1]=aQ[aQ.length-1].replace(aT,aS),aV[aU]=aQ.join("}")}return aV.join("{")}function aq(aQ){var e=aQ.length;while(e--){aQ[e].removeNode()}}function ap(aR){function aS(){clearTimeout(aV._removeSheetTimer),aQ&&aQ.removeNode(!0),aQ=null}var aQ,aW,aV=aD(aR),aU=aR.namespaces,aT=aR.parentWindow;return !av||aR.printShived?aR:(typeof aU[aw]=="undefined"&&aU.add(aw),aT.attachEvent("onbeforeprint",function(){aS();var a4,a3,a2,a1=aR.styleSheets,a0=[],aZ=a1.length,aY=Array(aZ);while(aZ--){aY[aZ]=a1[aZ]}while(a2=aY.pop()){if(!a2.disabled&&ax.test(a2.media)){try{a4=a2.imports,a3=a4.length}catch(aX){a3=0}for(aZ=0;aZ<a3;aZ++){aY.push(a4[aZ])}try{a0.push(a2.cssText)}catch(aX){}}}a0=ar(a0.reverse().join("")),aW=au(aR),aQ=aF(aR,a0)}),aT.attachEvent("onafterprint",function(){aq(aW),clearTimeout(aV._removeSheetTimer),aV._removeSheetTimer=setTimeout(aS,500)}),aR.printShived=!0,aR)}var aN=aP.html5||{},aM=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,aL=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,aK,aJ="_html5shiv",aI=0,aH={},aG;(function(){try{var e=aO.createElement("a");e.innerHTML="<xyz></xyz>",aK="hidden" in e,aG=e.childNodes.length==1||function(){aO.createElement("a");var aR=aO.createDocumentFragment();return typeof aR.cloneNode=="undefined"||typeof aR.createDocumentFragment=="undefined"||typeof aR.createElement=="undefined"}()}catch(aQ){aK=!0,aG=!0}})();var ay={elements:aN.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:aN.shivCSS!==!1,supportsUnknownElements:aG,shivMethods:aN.shivMethods!==!1,type:"default",shivDocument:az,createElement:aC,createDocumentFragment:aB};aP.html5=ay,az(aO);var ax=/^$|\b(?:all|print)\b/,aw="html5shiv",av=!aG&&function(){var e=aO.documentElement;return typeof aO.namespaces!="undefined"&&typeof aO.parentWindow!="undefined"&&typeof e.applyElement!="undefined"&&typeof e.removeNode!="undefined"&&typeof aP.attachEvent!="undefined"}();ay.type+=" print",ay.shivPrint=ap,ap(aO)}(this,document),function(aR,aQ,aP){function aO(e){return"[object Function]"==aD.call(e)}function aN(e){return"string"==typeof e}function aM(){}function aL(e){return !e||"loaded"==e||"complete"==e||"uninitialized"==e}function aK(){var e=aC.shift();aA=1,e?e.t?aF(function(){("c"==e.t?az.injectCss:az.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),aK()):aA=0}function aJ(a2,a1,a0,aZ,aY,aX,aW){function aV(e){if(!aT&&aL(aU.readyState)&&(a3.r=aT=1,!aA&&aK(),aU.onload=aU.onreadystatechange=null,e)){"img"!=a2&&aF(function(){aw.removeChild(aU)},50);for(var a4 in aq[a1]){aq[a1].hasOwnProperty(a4)&&aq[a1][a4].onload()}}}var aW=aW||az.errorTimeout,aU=aQ.createElement(a2),aT=0,aS=0,a3={t:a0,s:a1,e:aY,a:aX,x:aW};1===aq[a1]&&(aS=1,aq[a1]=[]),"object"==a2?aU.data=a1:(aU.src=a1,aU.type=a2),aU.width=aU.height="0",aU.onerror=aU.onload=aU.onreadystatechange=function(){aV.call(this,aS)},aC.splice(aZ,0,a3),"img"!=a2&&(aS||2===aq[a1]?(aw.insertBefore(aU,ax?null:aE),aF(aV,aW)):aq[a1].push(aU))}function aI(aS,e,aV,aU,aT){return aA=0,e=e||"j",aN(aS)?aJ("c"==e?au:av,aS,e,this.i++,aV,aU,aT):(aC.splice(this.i++,0,aS),1==aC.length&&aK()),this}function aH(){var e=az;return e.loader={load:aI,i:0},e}var aG=aQ.documentElement,aF=aR.setTimeout,aE=aQ.getElementsByTagName("script")[0],aD={}.toString,aC=[],aA=0,ay="MozAppearance" in aG.style,ax=ay&&!!aQ.createRange().compareNode,aw=ax?aG:aE.parentNode,aG=aR.opera&&"[object Opera]"==aD.call(aR.opera),aG=!!aQ.attachEvent&&!aG,av=ay?"object":aG?"script":"img",au=aG?"script":av,at=Array.isArray||function(e){return"[object Array]"==aD.call(e)},ar=[],aq={},ap={timeout:function(aS,e){return e.length&&(aS.timeout=e[0]),aS}},aB,az;az=function(aT){function e(aZ){var aZ=aZ.split("!"),aY=ar.length,a4=aZ.pop(),a3=aZ.length,a4={url:a4,origUrl:a4,prefixes:aZ},a2,a1,a0;for(a1=0;a1<a3;a1++){a0=aZ[a1].split("="),(a2=ap[a0.shift()])&&(a4=a2(a4,a0))}for(a1=0;a1<aY;a1++){a4=ar[a1](a4)}return a4}function aX(aY,a4,a3,a2,a1){var a0=e(aY),aZ=a0.autoCallback;a0.url.split(".").pop().split("?").shift(),a0.bypass||(a4&&(a4=aO(a4)?a4:a4[aY]||a4[a2]||a4[aY.split("/").pop().split("?")[0]]),a0.instead?a0.instead(aY,a4,a3,a2,a1):(aq[a0.url]?a0.noexec=!0:aq[a0.url]=1,a3.load(a0.url,a0.forceCSS||!a0.forceJS&&"css"==a0.url.split(".").pop().split("?").shift()?"c":aP,a0.noexec,a0.attrs,a0.timeout),(aO(a4)||aO(aZ))&&a3.load(function(){aH(),a4&&a4(a0.origUrl,a1,a2),aZ&&aZ(a0.origUrl,a1,a2),aq[a0.url]=2})))}function aW(a7,a6){function a5(a8,a9){if(a8){if(aN(a8)){a9||(a2=function(){var ba=[].slice.call(arguments);a1.apply(this,ba),a0()}),aX(a8,a2,a6,0,a4)}else{if(Object(a8)===a8){for(aY in aZ=function(){var ba=0,bb;for(bb in a8){a8.hasOwnProperty(bb)&&ba++}return ba}(),a8){a8.hasOwnProperty(aY)&&(!a9&&!--aZ&&(aO(a2)?a2=function(){var ba=[].slice.call(arguments);a1.apply(this,ba),a0()}:a2[aY]=function(ba){return function(){var bb=[].slice.call(arguments);ba&&ba.apply(this,bb),a0()}}(a1[aY])),aX(a8[aY],a2,a6,aY,a4))}}}}else{!a9&&a0()}}var a4=!!a7.test,a3=a7.load||a7.both,a2=a7.callback||aM,a1=a2,a0=a7.complete||aM,aZ,aY;a5(a4?a7.yep:a7.nope,!!a3),a3&&a5(a3)}var aV,aU,aS=this.yepnope.loader;if(aN(aT)){aX(aT,0,aS,0)}else{if(at(aT)){for(aV=0;aV<aT.length;aV++){aU=aT[aV],aN(aU)?aX(aU,0,aS,0):at(aU)?az(aU):Object(aU)===aU&&aW(aU,aS)}}else{Object(aT)===aT&&aW(aT,aS)}}},az.addPrefix=function(aS,e){ap[aS]=e},az.addFilter=function(e){ar.push(e)},az.errorTimeout=10000,null==aQ.readyState&&aQ.addEventListener&&(aQ.readyState="loading",aQ.addEventListener("DOMContentLoaded",aB=function(){aQ.removeEventListener("DOMContentLoaded",aB,0),aQ.readyState="complete"},0)),aR.yepnope=aH(),aR.yepnope.executeStack=aK,aR.yepnope.injectJs=function(a0,aZ,aY,aX,aW,aV){var aU=aQ.createElement("script"),aT,aS,aX=aX||az.errorTimeout;aU.src=a0;for(aS in aY){aU.setAttribute(aS,aY[aS])}aZ=aV?aK:aZ||aM,aU.onreadystatechange=aU.onload=function(){!aT&&aL(aU.readyState)&&(aT=1,aZ(),aU.onload=aU.onreadystatechange=null)},aF(function(){aT||(aT=1,aZ(1))},aX),aW?aU.onload():aE.parentNode.insertBefore(aU,aE)},aR.yepnope.injectCss=function(aS,aY,aX,aW,aV,aU){var aW=aQ.createElement("link"),aT,aY=aU?aK:aY||aM;aW.href=aS,aW.rel="stylesheet",aW.type="text/css";for(aT in aX){aW.setAttribute(aT,aX[aT])}aV||(aE.parentNode.insertBefore(aW,aE),aF(aY,0))}}(this,document),Y.load=function(){yepnope.apply(window,[].slice.call(arguments,0))}}catch(am){if(!window.ALLOW_MODERNIZR_FAIL){throw am}Y={input:{},inputtypes:{}}}var o={init:function(){this.browser=this.searchString(this.dataBrowser)||"Other";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown"},searchString:function(aq){for(var e=0;e<aq.length;e++){var ap=aq[e].string;this.versionSearchString=aq[e].subString;if(ap.indexOf(aq[e].subString)!==-1){return aq[e].identity}}},searchVersion:function(ap){var e=ap.indexOf(this.versionSearchString);if(e===-1){return}var aq=ap.indexOf("rv:");if(this.versionSearchString==="Trident"&&aq!==-1){return parseFloat(ap.substring(aq+3))}else{return parseFloat(ap.substring(e+this.versionSearchString.length+1))}},browserMatches:function al(ar,aw,aq,ap){var at,au,av,e;if(ar!==aq||ar==="Unknown"||!aw){return false}if(ap.match(".*\\+$")){au=parseFloat(ap.slice(0,-1));if(aw>=au){return true}}if(ap.indexOf("-")!==-1){at=ap.split("-");au=parseFloat(at[0]);av=parseFloat(at[1]);if((aw>=au)&&(aw<=av)){return true}}e=parseFloat(ap);return aw===e},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"MS Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}]};o.init();function V(aq,ap,at,ar,e){this._name=aq;this._getter=ap;this._setter=at;this._remover=ar;this._defaultTimestampValue=e||0;this._value=null;this._timestamp=null}function ag(e){if(undefined===e){return null}return e}V.MissingValueTimestamp=-1000000;if(window.EXPORT_TIMESTAMPED_VALUE){window.TimestampedValue=V}V.prototype.getValue=function(){if(null!==this._value){return this._value}if(!this._getter||!this._name){return null}return(this._value=ag(this._getter(this._name)))};function w(ap){var e=ap&&ap.match(/:(.*)$/);return e&&e[1]}function v(ap,e){return ap+":"+e}V.prototype.getTimestamp=function(){if(null!==this._timestamp){return this._timestamp}if(!this._getter||!this._name){return V.MissingValueTimestamp}var ap=this.getValue();var aq=ag(this._getter(this._name+"_timestamp_"));var e;if(null===ap){e=V.MissingValueTimestamp}else{if(ap!==w(aq)){e=this._defaultTimestampValue}else{e=parseInt(aq,10)}}return(this._timestamp=e)};V.prototype.hasTimestamp=function(){var e=this.getTimestamp();return e!==this._defaultTimestampValue&&e!==V.MissingValueTimestamp};V.prototype.remove=function(){this.reset();if(!this._remover||!this._name){return}this._remover(this._name);this._remover(this._name+"_timestamp_")};V.prototype.reset=function(){this._value=null;this._timestamp=null};V.prototype.setValue=function(e){if(!this._setter||!this._name){return}this._value=e;if(null!==Date.now){this._timestamp=Date.now()}else{this._timestamp=new Date().getTime()}var ap=v(this._timestamp,this._value);this._setter(this._name,e);this._setter(this._name+"_timestamp_",ap)};V.Comparator=function(ap,e){return e.getTimestamp()-ap.getTimestamp()};function ac(e){return f.get(e)}function aj(ap,e){f.set(ap,e)}function af(e){f.remove(e)}function c(ap){try{componentVersion=document.body.getComponentVersion("{"+ap+"}","ComponentID")}catch(aq){if(console&&console.log){console.log("document.body.getComponentVersion failed")}componentVersion=null}return(componentVersion!=null)?componentVersion:false}function aa(aq){var ap="";aq=aq.toLowerCase();for(var e=0;e<aq.length;e++){if(aq.charAt(e)!="\n"&&aq.charAt(e)!="/"&&aq.charAt(e)!="\\"){ap+=aq.charAt(e)}else{if(aq.charAt(e)=="\n"){ap+="n"}}}return ap}function W(ap){if(!ap){return""}var aq=ap.replace("|","");var e=32;if(aq.length>e){return a(aq).substring(0,e)}else{return aq}}function g(){return navigator.userAgent+h+navigator.platform}function K(){var e="";if(self.screen){e+=screen.colorDepth+h+screen.width+h+screen.height+h+screen.availWidth+h+screen.availHeight}return e}function ae(){var ay="";var ar=true;if(navigator.plugins.length>0){var ax="";var aq=Math.min(navigator.plugins.length,30);for(var at=0;at<aq;at++){var au=navigator.plugins[at];var aw=W(au.filename);if(ar){ax+=aw;ar=false}else{ax+=h+aw}}ay=aa(ax)}else{if(u){names=new Array("abk","wnt","aol","arb","chs","cht","dht","dhj","dan","dsh","heb","ie5","icw","ibe","iec","ieh","iee","jap","krn","lan","swf","shw","msn","wmp","obp","oex","net","pan","thi","tks","uni","vtc","vnm","mvm","vbs","wfd");components=new Array("7790769C-0471-11D2-AF11-00C04FA35D02","89820200-ECBD-11CF-8B85-00AA005B4340","47F67D00-9E55-11D1-BAEF-00C04FC2D130","76C19B38-F0C8-11CF-87CC-0020AFEECF20","76C19B34-F0C8-11CF-87CC-0020AFEECF20","76C19B33-F0C8-11CF-87CC-0020AFEECF20","9381D8F2-0288-11D0-9501-00AA00B911A5","4F216970-C90C-11D1-B5C7-0000F8051515","283807B5-2C60-11D0-A31D-00AA00B92C03","44BBA848-CC51-11CF-AAFA-00AA00B6015C","76C19B36-F0C8-11CF-87CC-0020AFEECF20","89820200-ECBD-11CF-8B85-00AA005B4383","5A8D6EE0-3E18-11D0-821E-444553540000","630B1DA0-B465-11D1-9948-00C04F98BBC9","08B0E5C0-4FCB-11CF-AAA5-00401C608555","45EA75A0-A269-11D1-B5BF-0000F8051515","DE5AED00-A4BF-11D1-9948-00C04F98BBC9","76C19B30-F0C8-11CF-87CC-0020AFEECF20","76C19B31-F0C8-11CF-87CC-0020AFEECF20","76C19B50-F0C8-11CF-87CC-0020AFEECF20","D27CDB6E-AE6D-11CF-96B8-444553540000","2A202491-F00D-11CF-87CC-0020AFEECF20","5945C046-LE7D-LLDL-BC44-00C04FD912BE","22D6F312-B0F6-11D0-94AB-0080C74C7E95","3AF36230-A269-11D1-B5BF-0000F8051515","44BBA840-CC51-11CF-AAFA-00AA00B6015C","44BBA842-CC51-11CF-AAFA-00AA00B6015B","76C19B32-F0C8-11CF-87CC-0020AFEECF20","76C19B35-F0C8-11CF-87CC-0020AFEECF20","CC2A9BA0-3BDD-11D0-821E-444553540000","3BF42070-B3B1-11D1-B5C5-0000F8051515","10072CEC-8CC1-11D1-986E-00A0C955B42F","76C19B37-F0C8-11CF-87CC-0020AFEECF20","08B0E5C0-4FCB-11CF-AAA5-00401C608500","4F645220-306D-11D2-995D-00C04F98BBC9","73FA19D0-2D75-11D2-995D-00C04F98BBC9");try{document.body.addBehavior("#default#clientCaps")}catch(av){if(console&&console.log){console.log('document.body.addBehavior("#default#clientCaps") failed')}}for(var at=0;at<components.length;at++){ver=c(components[at]);var ap=names[at];if(ver){if(ar==true){ay+=ap+X+ver;ar=false}else{ay+=h+ap+X+ver}}else{ay+="";ar=false}}}}return ay}function ao(){components=new Array("Flash","Java","QuickTime","DevalVR","Shockwave","WindowsMediaPlayer","Silverlight","VLC","pdfreader","adobereader","realplayer");names=new Array("swf","java","qt","vr","shw","wmp","xap","vlc","pdf","adbr","rm");var ar="";var e=true;PluginDetect.getVersion(D);for(var aq=0;aq<components.length;aq++){ver=PluginDetect.getVersion(components[aq]);var ap=names[aq];if(ver){if(e==true){ar+=ap+X+ver;e=false}else{ar+=h+ap+X+ver}}else{ar+="";e=false}}return ar}function G(){var e=(new Date().getTimezoneOffset()/60)*(-1);return e}function T(){var e="";e+=(typeof(navigator.language)!="undefined")?navigator.language:"";e+=h;e+=(typeof(navigator.browserLanguage)!="undefined")?navigator.browserLanguage:"";e+=h;e+=(typeof(navigator.systemLanguage)!="undefined")?navigator.systemLanguage:"";e+=h;e+=(typeof(navigator.userLanguage)!="undefined")?navigator.userLanguage:"";return e}function U(){var ar=(navigator.javaEnabled())?"1":"0";var au=(navigator.cookieEnabled)?"1":"0";if(typeof navigator.cookieEnabled=="undefined"&&!au){document.cookie="testcookie";au=(document.cookie.indexOf("testcookie")!=-1)?"1":"0"}var aq;try{aq=new XMLSerializer()}catch(at){}var aw=(aq)?"1":"0";var ap="0";try{new ActiveXObject("Microsoft.XMLDOM");ap="1"}catch(at){}try{var av=new DOMParser();ap="1"}catch(at){}return ar+au+aw+ap+Z(Y.fontface)+Z(Y.flexbox)+Z(Y.textshadow)+Z(Y.rgba)+Z(Y.hsla)+Z(Y.borderimage)+Z(Y.borderradius)+Z(Y.boxshadow)+Z(Y.opacity)+Z(Y.backgroundsize)+Z(Y.multiplebgs)+Z(Y.cssanimations)+Z(Y.csscolumns)+Z(Y.cssgradients)+Z(Y.cssreflections)+Z(Y.csstransforms)+Z(Y.csstransforms3d)+Z(Y.csstransitions)+Z(Y.applicationcache)+Z(Y.canvas)+Z(Y.canvastext)+Z(Y.draganddrop)+Z(Y.hashchange)+Z(Y.history)+Z(Y.audio)+Z(Y.video)+Z(Y.indexeddb)+Z(Y.inputtypes.search)+Z(Y.inputtypes.tel)+Z(Y.inputtypes.url)+Z(Y.inputtypes.email)+Z(Y.inputtypes.datetime)+Z(Y.inputtypes.date)+Z(Y.inputtypes.month)+Z(Y.inputtypes.week)+Z(Y.inputtypes.time)+Z(Y.inputtypes.datetimelocal)+Z(Y.inputtypes.number)+Z(Y.inputtypes.range)+Z(Y.inputtypes.color)+Z(Y.input.autocomplete)+Z(Y.input.autofocus)+Z(Y.input.list)+Z(Y.input.placeholder)+Z(Y.input.max)+Z(Y.input.min)+Z(Y.input.multiple)+Z(Y.input.pattern)+Z(Y.input.required)+Z(Y.input.step)+Z(Y.localstorage)+Z(Y.postmessage)+Z(Y.sessionstorage)+Z(Y.webworkers)+Z(Y.websockets)+Z(Y.websqldatabase)+Z(Y.geolocation)+Z(Y.inlinesvg)+Z(Y.svg)+Z(Y.smil)+Z(Y.svgclippaths)+Z(Y.touch)+Z(Y.webgl)+Z(Y.iepp)}function Z(e){return e==true?"1":"0"}function F(){var e=document.getElementById("SYMC_VIP_IADID_ID");if(e){return e.value}else{return""}}var S=[];(function(){function ap(at){var au=at.bind(null,true);var ay=at.bind(null,false);function ax(){try{if(localStorage.length){ay()}else{localStorage.x=1;localStorage.removeItem("x");ay()}}catch(az){navigator.cookieEnabled?au():ay()}}function aw(){try{window.openDatabase(null,null,null,null);ay()}catch(az){navigator.cookieEnabled?au():ay()}}var ar=window.RequestFileSystem||window.webkitRequestFileSystem;if(ar){ar(0,0,ay,au)}else{if("MozAppearance" in document.documentElement.style){var av=indexedDB.open("test");av.onerror=au;av.onsuccess=ay}else{if(/constructor/i.test(window.HTMLElement)||window.safari){if(window.safari&&e()>=11){aw()}else{ax()}}else{if(window.PointerEvent||window.MSPointerEvent){if(!window.indexedDB){au()}else{ay()}}else{ay()}}}}}function e(){var ar=navigator.appVersion;var at=ar.indexOf("Version");if(at===-1){return}return parseFloat(ar.substring(at+"Version".length+1))}var aq={isIncognito:null};S.push(function(ar,au){var at=aq.isIncognito;if(null===at){return}ar.push("inc="+(at?"1":"0"))});if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(ar){ap(function(at){aq.isIncognito=at})})}})();(function(){var e=[];(function(){function at(aw){var av=aw.getExtension("WEBGL_lose_context")||aw.getExtension("WEBKIT_WEBGL_lose_context")||aw.getExtension("MOZ_WEBGL_lose_context");if(av!=null){av.loseContext()}}function au(){var av=document.createElement("canvas");if(!av.toDataURL){return null}var ax=null;try{ax=av.getContext("webgl")||av.getContext("experimental-webgl")}catch(aw){}if(!ax){ax=null}return ax}function ar(){var az;var av=function(aL){az.clearColor(0,0,0,1);az.enable(az.DEPTH_TEST);az.depthFunc(az.LEQUAL);az.clear(az.COLOR_BUFFER_BIT|az.DEPTH_BUFFER_BIT);return"["+aL[0]+", "+aL[1]+"]"};var aI=function(aN){var aM=aN.getExtension("EXT_texture_filter_anisotropic")||aN.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||aN.getExtension("MOZ_EXT_texture_filter_anisotropic");if(aM){var aL=aN.getParameter(aM.MAX_TEXTURE_MAX_ANISOTROPY_EXT);if(aL===0){aL=2}return aL}else{return null}};az=au();if(!az){return null}var aC={};var ax=[];aC.attributeList=ax;var aw="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}";var aA="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}";var aH=az.createBuffer();az.bindBuffer(az.ARRAY_BUFFER,aH);var aE=new Float32Array([-0.2,-0.9,0,0.4,-0.26,0,0,0.732134444,0]);az.bufferData(az.ARRAY_BUFFER,aE,az.STATIC_DRAW);aH.itemSize=3;aH.numItems=3;var ay=az.createProgram();var aG=az.createShader(az.VERTEX_SHADER);az.shaderSource(aG,aw);az.compileShader(aG);var aK=az.createShader(az.FRAGMENT_SHADER);az.shaderSource(aK,aA);az.compileShader(aK);az.attachShader(ay,aG);az.attachShader(ay,aK);az.linkProgram(ay);az.useProgram(ay);ay.vertexPosAttrib=az.getAttribLocation(ay,"attrVertex");ay.offsetUniform=az.getUniformLocation(ay,"uniformOffset");az.enableVertexAttribArray(ay.vertexPosArray);az.vertexAttribPointer(ay.vertexPosAttrib,aH.itemSize,az.FLOAT,!1,0,0);az.uniform2f(ay.offsetUniform,1,1);az.drawArrays(az.TRIANGLE_STRIP,0,aH.numItems);if(az.canvas!=null){ax.push(az.canvas.toDataURL())}ax.push("extensions:"+az.getSupportedExtensions().join(";"));ax.push("webgl aliased line width range:"+av(az.getParameter(az.ALIASED_LINE_WIDTH_RANGE)));ax.push("webgl aliased point size range:"+av(az.getParameter(az.ALIASED_POINT_SIZE_RANGE)));ax.push("webgl alpha bits:"+az.getParameter(az.ALPHA_BITS));ax.push("webgl antialiasing:"+(az.getContextAttributes().antialias?"yes":"no"));ax.push("webgl blue bits:"+az.getParameter(az.BLUE_BITS));ax.push("webgl depth bits:"+az.getParameter(az.DEPTH_BITS));ax.push("webgl green bits:"+az.getParameter(az.GREEN_BITS));ax.push("webgl max anisotropy:"+aI(az));ax.push("webgl max combined texture image units:"+az.getParameter(az.MAX_COMBINED_TEXTURE_IMAGE_UNITS));ax.push("webgl max cube map texture size:"+az.getParameter(az.MAX_CUBE_MAP_TEXTURE_SIZE));ax.push("webgl max fragment uniform vectors:"+az.getParameter(az.MAX_FRAGMENT_UNIFORM_VECTORS));ax.push("webgl max render buffer size:"+az.getParameter(az.MAX_RENDERBUFFER_SIZE));ax.push("webgl max texture image units:"+az.getParameter(az.MAX_TEXTURE_IMAGE_UNITS));ax.push("webgl max texture size:"+az.getParameter(az.MAX_TEXTURE_SIZE));ax.push("webgl max varying vectors:"+az.getParameter(az.MAX_VARYING_VECTORS));ax.push("webgl max vertex attribs:"+az.getParameter(az.MAX_VERTEX_ATTRIBS));ax.push("webgl max vertex texture image units:"+az.getParameter(az.MAX_VERTEX_TEXTURE_IMAGE_UNITS));ax.push("webgl max vertex uniform vectors:"+az.getParameter(az.MAX_VERTEX_UNIFORM_VECTORS));ax.push("webgl max viewport dims:"+av(az.getParameter(az.MAX_VIEWPORT_DIMS)));ax.push("webgl red bits:"+az.getParameter(az.RED_BITS));ax.push("webgl renderer:"+az.getParameter(az.RENDERER));ax.push("webgl shading language version:"+az.getParameter(az.SHADING_LANGUAGE_VERSION));ax.push("webgl stencil bits:"+az.getParameter(az.STENCIL_BITS));ax.push("webgl vendor:"+az.getParameter(az.VENDOR));ax.push("webgl version:"+az.getParameter(az.VERSION));try{var aB=az.getExtension("WEBGL_debug_renderer_info");if(aB){var aJ=az.getParameter(aB.UNMASKED_VENDOR_WEBGL);var aF=az.getParameter(aB.UNMASKED_RENDERER_WEBGL)}ax.push("webgl unmasked vendor:"+aJ);ax.push("webgl unmasked renderer:"+aF);aC.vendor=aJ;aC.renderer=aF}catch(aD){}if(!az.getShaderPrecisionFormat){at(az);return aC}ax.push("webgl vertex shader high float precision:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.HIGH_FLOAT).precision);ax.push("webgl vertex shader high float precision rangeMin:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.HIGH_FLOAT).rangeMin);ax.push("webgl vertex shader high float precision rangeMax:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.HIGH_FLOAT).rangeMax);ax.push("webgl vertex shader medium float precision:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.MEDIUM_FLOAT).precision);ax.push("webgl vertex shader medium float precision rangeMin:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.MEDIUM_FLOAT).rangeMin);ax.push("webgl vertex shader medium float precision rangeMax:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.MEDIUM_FLOAT).rangeMax);ax.push("webgl vertex shader low float precision:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.LOW_FLOAT).precision);ax.push("webgl vertex shader low float precision rangeMin:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.LOW_FLOAT).rangeMin);ax.push("webgl vertex shader low float precision rangeMax:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.LOW_FLOAT).rangeMax);ax.push("webgl fragment shader high float precision:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.HIGH_FLOAT).precision);ax.push("webgl fragment shader high float precision rangeMin:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.HIGH_FLOAT).rangeMin);ax.push("webgl fragment shader high float precision rangeMax:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.HIGH_FLOAT).rangeMax);ax.push("webgl fragment shader medium float precision:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.MEDIUM_FLOAT).precision);ax.push("webgl fragment shader medium float precision rangeMin:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.MEDIUM_FLOAT).rangeMin);ax.push("webgl fragment shader medium float precision rangeMax:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.MEDIUM_FLOAT).rangeMax);ax.push("webgl fragment shader low float precision:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.LOW_FLOAT).precision);ax.push("webgl fragment shader low float precision rangeMin:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.LOW_FLOAT).rangeMin);ax.push("webgl fragment shader low float precision rangeMax:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.LOW_FLOAT).rangeMax);ax.push("webgl vertex shader high int precision:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.HIGH_INT).precision);ax.push("webgl vertex shader high int precision rangeMin:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.HIGH_INT).rangeMin);ax.push("webgl vertex shader high int precision rangeMax:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.HIGH_INT).rangeMax);ax.push("webgl vertex shader medium int precision:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.MEDIUM_INT).precision);ax.push("webgl vertex shader medium int precision rangeMin:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.MEDIUM_INT).rangeMin);ax.push("webgl vertex shader medium int precision rangeMax:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.MEDIUM_INT).rangeMax);ax.push("webgl vertex shader low int precision:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.LOW_INT).precision);ax.push("webgl vertex shader low int precision rangeMin:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.LOW_INT).rangeMin);ax.push("webgl vertex shader low int precision rangeMax:"+az.getShaderPrecisionFormat(az.VERTEX_SHADER,az.LOW_INT).rangeMax);ax.push("webgl fragment shader high int precision:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.HIGH_INT).precision);ax.push("webgl fragment shader high int precision rangeMin:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.HIGH_INT).rangeMin);ax.push("webgl fragment shader high int precision rangeMax:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.HIGH_INT).rangeMax);ax.push("webgl fragment shader medium int precision:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.MEDIUM_INT).precision);ax.push("webgl fragment shader medium int precision rangeMin:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.MEDIUM_INT).rangeMin);ax.push("webgl fragment shader medium int precision rangeMax:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.MEDIUM_INT).rangeMax);ax.push("webgl fragment shader low int precision:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.LOW_INT).precision);ax.push("webgl fragment shader low int precision rangeMin:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.LOW_INT).rangeMin);ax.push("webgl fragment shader low int precision rangeMax:"+az.getShaderPrecisionFormat(az.FRAGMENT_SHADER,az.LOW_INT).rangeMax);at(az);return aC}e.push(function(aw,az){if(!az.shouldFingerprintCanvas()){return}var ay=ar();if(null==ay){return}var av=ay.attributeList.join("~");aw.wglfp=L.x64.hash128(av);if(ay.vendor&&ay.renderer){var ax=L.x86.hash32(ay.vendor+"/"+ay.renderer);aw.wglvrfp=("00000000"+ax.toString(16)).slice(-8)}})})();(function(){var ar={dontUseFakeFontInCanvas:false};function at(){var au=[];var aw=document.createElement("canvas");if(!aw.toDataURL||!aw.getContext){return null}aw.width=2000;aw.height=200;aw.style.display="inline";var av=aw.getContext("2d");if(!av){return null}av.rect(0,0,10,10);av.rect(2,2,6,6);au.push("canvas winding:"+((av.isPointInPath(5,5,"evenodd")===false)?"yes":"no"));av.textBaseline="alphabetic";av.fillStyle="#f60";av.fillRect(125,1,62,20);av.fillStyle="#069";if(ar.dontUseFakeFontInCanvas){av.font="11pt Arial"}else{av.font="11pt no-real-font-123"}av.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",2,15);av.fillStyle="rgba(102, 204, 0, 0.2)";av.font="18pt Arial";av.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",4,45);av.globalCompositeOperation="multiply";av.fillStyle="rgb(255,0,255)";av.beginPath();av.arc(50,50,50,0,Math.PI*2,true);av.closePath();av.fill();av.fillStyle="rgb(0,255,255)";av.beginPath();av.arc(100,50,50,0,Math.PI*2,true);av.closePath();av.fill();av.fillStyle="rgb(255,255,0)";av.beginPath();av.arc(75,100,50,0,Math.PI*2,true);av.closePath();av.fill();av.fillStyle="rgb(255,0,255)";av.arc(75,75,75,0,Math.PI*2,true);av.arc(75,75,25,0,Math.PI*2,true);av.fill("evenodd");au.push("canvas fp:"+aw.toDataURL());return au.join("~")}e.push(function(au,aw){if(!aw.shouldFingerprintCanvas()){return}var av=at();if(null==av){return}au.cnvfp=L.x64.hash128(av)})})();(function(){var az={};try{var aw=null;var ax=az;var au=true;(function(aB,aC){"object"===typeof ax&&"undefined"!==typeof au?aC(ax):"function"===typeof define&&define.amd?define(["exports"],aC):aC(aB.THREE=aB.THREE||{})})(this,function(fu){function c1(){}function fX(bc,bb){this.x=bc||0;this.y=bb||0}function fO(ce,cd,cc,cb,bg,bf,be,bd,bc,bb){Object.defineProperty(this,"id",{value:du++});this.uuid=fK.generateUUID();this.name="";this.image=void 0!==ce?ce:fO.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==cd?cd:fO.DEFAULT_MAPPING;this.wrapS=void 0!==cc?cc:1001;this.wrapT=void 0!==cb?cb:1001;this.magFilter=void 0!==bg?bg:1006;this.minFilter=void 0!==bf?bf:1008;this.anisotropy=void 0!==bc?bc:1;this.format=void 0!==be?be:1023;this.type=void 0!==bd?bd:1009;this.offset=new fX(0,0);this.repeat=new fX(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==bb?bb:3000;this.version=0;this.onUpdate=null}function fJ(bc,bb,be,bd){this.x=bc||0;this.y=bb||0;this.z=be||0;this.w=void 0!==bd?bd:1}function bV(bc,bb,bd){this.uuid=fK.generateUUID();this.width=bc;this.height=bb;this.scissor=new fJ(0,0,bc,bb);this.scissorTest=!1;this.viewport=new fJ(0,0,bc,bb);bd=bd||{};void 0===bd.minFilter&&(bd.minFilter=1006);this.texture=new fO(void 0,void 0,bd.wrapS,bd.wrapT,bd.magFilter,bd.minFilter,bd.format,bd.type,bd.anisotropy,bd.encoding);this.depthBuffer=void 0!==bd.depthBuffer?bd.depthBuffer:!0;this.stencilBuffer=void 0!==bd.stencilBuffer?bd.stencilBuffer:!0;this.depthTexture=void 0!==bd.depthTexture?bd.depthTexture:null}function bC(bc,bb,bd){bV.call(this,bc,bb,bd);this.activeMipMapLevel=this.activeCubeFace=0}function d6(bc,bb,be,bd){this._x=bc||0;this._y=bb||0;this._z=be||0;this._w=void 0!==bd?bd:1}function ft(bc,bb,bd){this.x=bc||0;this.y=bb||0;this.z=bd||0}function fN(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function fY(cg,cf,ce,cd,cc,cb,bg,bf,be,bd,bb,bc){fO.call(this,null,cb,bg,bf,be,bd,cd,cc,bb,bc);this.image={data:cg,width:cf,height:ce};this.magFilter=void 0!==be?be:1003;this.minFilter=void 0!==bd?bd:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}function cO(ce,cd,cc,cb,bg,bf,be,bd,bc,bb){ce=void 0!==ce?ce:[];fO.call(this,ce,void 0!==cd?cd:301,cc,cb,bg,bf,be,bd,bc,bb);this.flipY=!1}function bq(bc,bb,bg){var bf=bc[0];if(0>=bf||0<bf){return bc}var be=bb*bg,bd=gv[be];void 0===bd&&(bd=new Float32Array(be),gv[be]=bd);if(0!==bb){for(bf.toArray(bd,0),bf=1,be=0;bf!==bb;++bf){be+=bg,bc[bf].toArray(bd,be)}}return bd}function f7(bc,bb){var be=bS[bb];void 0===be&&(be=new Int32Array(bb),bS[bb]=be);for(var bd=0;bd!==bb;++bd){be[bd]=bc.allocTextureUnit()}return be}function c9(bc,bb){bc.uniform1f(this.addr,bb)}function cW(bc,bb){bc.uniform1i(this.addr,bb)}function cE(bc,bb){void 0===bb.x?bc.uniform2fv(this.addr,bb):bc.uniform2f(this.addr,bb.x,bb.y)}function cs(bc,bb){void 0!==bb.x?bc.uniform3f(this.addr,bb.x,bb.y,bb.z):void 0!==bb.r?bc.uniform3f(this.addr,bb.r,bb.g,bb.b):bc.uniform3fv(this.addr,bb)}function ca(bc,bb){void 0===bb.x?bc.uniform4fv(this.addr,bb):bc.uniform4f(this.addr,bb.x,bb.y,bb.z,bb.w)}function bY(bc,bb){bc.uniformMatrix2fv(this.addr,!1,bb.elements||bb)}function bF(bc,bb){void 0===bb.elements?bc.uniformMatrix3fv(this.addr,!1,bb):(bz.set(bb.elements),bc.uniformMatrix3fv(this.addr,!1,bz))}function bt(bc,bb){void 0===bb.elements?bc.uniformMatrix4fv(this.addr,!1,bb):(bn.set(bb.elements),bc.uniformMatrix4fv(this.addr,!1,bn))}function ba(bc,bb,be){var bd=be.allocTextureUnit();bc.uniform1i(this.addr,bd);be.setTexture2D(bb||a5,bd)}function aZ(bc,bb,be){var bd=be.allocTextureUnit();bc.uniform1i(this.addr,bd);be.setTextureCube(bb||aU,bd)}function aI(bc,bb){bc.uniform2iv(this.addr,bb)}function gB(bc,bb){bc.uniform3iv(this.addr,bb)}function gq(bc,bb){bc.uniform4iv(this.addr,bb)}function aN(bb){switch(bb){case 5126:return c9;case 35664:return cE;case 35665:return cs;case 35666:return ca;case 35674:return bY;case 35675:return bF;case 35676:return bt;case 35678:case 36198:return ba;case 35680:return aZ;case 5124:case 35670:return cW;case 35667:case 35671:return aI;case 35668:case 35672:return gB;case 35669:case 35673:return gq}}function aC(bc,bb){bc.uniform1fv(this.addr,bb)}function gu(bc,bb){bc.uniform1iv(this.addr,bb)}function f6(bc,bb){bc.uniform2fv(this.addr,bq(bb,this.size,2))}function bR(bc,bb){bc.uniform3fv(this.addr,bq(bb,this.size,3))}function by(bc,bb){bc.uniform4fv(this.addr,bq(bb,this.size,4))}function bm(bc,bb){bc.uniformMatrix2fv(this.addr,!1,bq(bb,this.size,4))}function a4(bc,bb){bc.uniformMatrix3fv(this.addr,!1,bq(bb,this.size,9))}function aT(bc,bb){bc.uniformMatrix4fv(this.addr,!1,bq(bb,this.size,16))}function aH(bc,bb,bf){var be=bb.length,bd=f7(bf,be);bc.uniform1iv(this.addr,bd);for(bc=0;bc!==be;++bc){bf.setTexture2D(bb[bc]||a5,bd[bc])}}function gA(bc,bb,bf){var be=bb.length,bd=f7(bf,be);bc.uniform1iv(this.addr,bd);for(bc=0;bc!==be;++bc){bf.setTextureCube(bb[bc]||aU,bd[bc])}}function gp(bb){switch(bb){case 5126:return aC;case 35664:return f6;case 35665:return bR;case 35666:return by;case 35674:return bm;case 35675:return a4;case 35676:return aT;case 35678:return aH;case 35680:return gA;case 5124:case 35670:return gu;case 35667:case 35671:return aI;case 35668:case 35672:return gB;case 35669:case 35673:return gq}}function f0(bc,bb,bd){this.id=bc;this.addr=bd;this.setValue=aN(bb.type)}function fB(bc,bb,bd){this.id=bc;this.addr=bd;this.size=bb.size;this.setValue=gp(bb.type)}function f1(bb){this.id=bb;this.seq=[];this.map={}}function fA(cg,cf,ce){this.seq=[];this.map={};this.renderer=ce;ce=cg.getProgramParameter(cf,cg.ACTIVE_UNIFORMS);for(var cd=0;cd<ce;++cd){var cc=cg.getActiveUniform(cf,cd),cb=cg.getUniformLocation(cf,cc.name),bg=this,bf=cc.name,be=bf.length;for(d9.lastIndex=0;;){var bd=d9.exec(bf),bb=d9.lastIndex,bc=bd[1],da=bd[3];"]"===bd[2]&&(bc|=0);if(void 0===da||"["===da&&bb+2===be){bf=bg;cc=void 0===da?new f0(bc,cc,cb):new fB(bc,cc,cb);bf.seq.push(cc);bf.map[cc.id]=cc;break}else{da=bg.map[bc],void 0===da&&(da=new f1(bc),bc=bg,bg=da,bc.seq.push(bg),bc.map[bg.id]=bg),bg=da}}}}function fZ(bc,bb,bd){return void 0===bb&&void 0===bd?this.set(bc):this.setRGB(bc,bb,bd)}function d3(bc,bb){this.min=void 0!==bc?bc:new fX(Infinity,Infinity);this.max=void 0!==bb?bb:new fX(-Infinity,-Infinity)}function fl(eb,ea,dg,df,de){var dd,dc,db,da,cg,cc,ce,bf,bg,cf,be,bd,bb,cd,bc,cb;this.render=function(ge,fe,gc,gb){if(0!==ge.length){fe=new ft;var fc=gb.w/gb.z,ec=0.5*gb.z,gf=0.5*gb.w,fb=16/gb.w,ee=new fX(fb*fc,fb),gg=new ft(1,1,0),eg=new fX(1,1),ef=new d3;ef.min.set(gb.x,gb.y);ef.max.set(gb.x+(gb.z-16),gb.y+(gb.w-16));if(void 0===cd){var fb=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),gd=new Uint16Array([0,1,2,0,2,3]);be=ea.createBuffer();bd=ea.createBuffer();ea.bindBuffer(ea.ARRAY_BUFFER,be);ea.bufferData(ea.ARRAY_BUFFER,fb,ea.STATIC_DRAW);ea.bindBuffer(ea.ELEMENT_ARRAY_BUFFER,bd);ea.bufferData(ea.ELEMENT_ARRAY_BUFFER,gd,ea.STATIC_DRAW);bc=ea.createTexture();cb=ea.createTexture();dg.bindTexture(ea.TEXTURE_2D,bc);ea.texImage2D(ea.TEXTURE_2D,0,ea.RGB,16,16,0,ea.RGB,ea.UNSIGNED_BYTE,null);ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_WRAP_S,ea.CLAMP_TO_EDGE);ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_WRAP_T,ea.CLAMP_TO_EDGE);ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_MAG_FILTER,ea.NEAREST);ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_MIN_FILTER,ea.NEAREST);dg.bindTexture(ea.TEXTURE_2D,cb);ea.texImage2D(ea.TEXTURE_2D,0,ea.RGBA,16,16,0,ea.RGBA,ea.UNSIGNED_BYTE,null);ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_WRAP_S,ea.CLAMP_TO_EDGE);ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_WRAP_T,ea.CLAMP_TO_EDGE);ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_MAG_FILTER,ea.NEAREST);ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_MIN_FILTER,ea.NEAREST);var fb=bb={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},gd=ea.createProgram(),fa=ea.createShader(ea.FRAGMENT_SHADER),ed=ea.createShader(ea.VERTEX_SHADER),fd="precision "+de.precision+" float;\n";ea.shaderSource(fa,fd+fb.fragmentShader);ea.shaderSource(ed,fd+fb.vertexShader);ea.compileShader(fa);ea.compileShader(ed);ea.attachShader(gd,fa);ea.attachShader(gd,ed);ea.linkProgram(gd);cd=gd;bg=ea.getAttribLocation(cd,"position");cf=ea.getAttribLocation(cd,"uv");dd=ea.getUniformLocation(cd,"renderType");dc=ea.getUniformLocation(cd,"map");db=ea.getUniformLocation(cd,"occlusionMap");da=ea.getUniformLocation(cd,"opacity");cg=ea.getUniformLocation(cd,"color");cc=ea.getUniformLocation(cd,"scale");ce=ea.getUniformLocation(cd,"rotation");bf=ea.getUniformLocation(cd,"screenPosition")}dg.useProgram(cd);dg.initAttributes();dg.enableAttribute(bg);dg.enableAttribute(cf);dg.disableUnusedAttributes();ea.uniform1i(db,0);ea.uniform1i(dc,1);ea.bindBuffer(ea.ARRAY_BUFFER,be);ea.vertexAttribPointer(bg,2,ea.FLOAT,!1,16,0);ea.vertexAttribPointer(cf,2,ea.FLOAT,!1,16,8);ea.bindBuffer(ea.ELEMENT_ARRAY_BUFFER,bd);dg.disable(ea.CULL_FACE);dg.buffers.depth.setMask(!1);gd=0;for(fa=ge.length;gd<fa;gd++){if(fb=16/gb.w,ee.set(fb*fc,fb),ed=ge[gd],fe.set(ed.matrixWorld.elements[12],ed.matrixWorld.elements[13],ed.matrixWorld.elements[14]),fe.applyMatrix4(gc.matrixWorldInverse),fe.applyMatrix4(gc.projectionMatrix),gg.copy(fe),eg.x=gb.x+gg.x*ec+ec-8,eg.y=gb.y+gg.y*gf+gf-8,!0===ef.containsPoint(eg)){dg.activeTexture(ea.TEXTURE0);dg.bindTexture(ea.TEXTURE_2D,null);dg.activeTexture(ea.TEXTURE1);dg.bindTexture(ea.TEXTURE_2D,bc);ea.copyTexImage2D(ea.TEXTURE_2D,0,ea.RGB,eg.x,eg.y,16,16,0);ea.uniform1i(dd,0);ea.uniform2f(cc,ee.x,ee.y);ea.uniform3f(bf,gg.x,gg.y,gg.z);dg.disable(ea.BLEND);dg.enable(ea.DEPTH_TEST);ea.drawElements(ea.TRIANGLES,6,ea.UNSIGNED_SHORT,0);dg.activeTexture(ea.TEXTURE0);dg.bindTexture(ea.TEXTURE_2D,cb);ea.copyTexImage2D(ea.TEXTURE_2D,0,ea.RGBA,eg.x,eg.y,16,16,0);ea.uniform1i(dd,1);dg.disable(ea.DEPTH_TEST);dg.activeTexture(ea.TEXTURE1);dg.bindTexture(ea.TEXTURE_2D,bc);ea.drawElements(ea.TRIANGLES,6,ea.UNSIGNED_SHORT,0);ed.positionScreen.copy(gg);ed.customUpdateCallback?ed.customUpdateCallback(ed):ed.updateLensFlares();ea.uniform1i(dd,2);dg.enable(ea.BLEND);for(var fd=0,ff=ed.lensFlares.length;fd<ff;fd++){var fg=ed.lensFlares[fd];0.001<fg.opacity&&0.001<fg.scale&&(gg.x=fg.x,gg.y=fg.y,gg.z=fg.z,fb=fg.size*fg.scale/gb.w,ee.x=fb*fc,ee.y=fb,ea.uniform3f(bf,gg.x,gg.y,gg.z),ea.uniform2f(cc,ee.x,ee.y),ea.uniform1f(ce,fg.rotation),ea.uniform1f(da,fg.opacity),ea.uniform3f(cg,fg.color.r,fg.color.g,fg.color.b),dg.setBlending(fg.blending,fg.blendEquation,fg.blendSrc,fg.blendDst),df.setTexture2D(fg.texture,1),ea.drawElements(ea.TRIANGLES,6,ea.UNSIGNED_SHORT,0))}}}dg.enable(ea.CULL_FACE);dg.enable(ea.DEPTH_TEST);dg.buffers.depth.setMask(!0);dg.reset()}}}function cH(cd,cc,cb,bg,bf,be,bd,bc,bb){fO.call(this,cd,cc,cb,bg,bf,be,bd,bc,bb);this.needsUpdate=!0}function e2(fc,fb,fa,eg,ef){var ee,ed,ec,ea,dg,db,dd,cf,cg,de,ce,cc,bg,dc,cb,da,cd;function bd(ff,fe){return ff.renderOrder!==fe.renderOrder?ff.renderOrder-fe.renderOrder:ff.z!==fe.z?fe.z-ff.z:fe.id-ff.id}var eb,df,be,bb,fd=new ft,bf=new d6,bc=new ft;this.render=function(gf,fg,gb){if(0!==gf.length){if(void 0===be){var gc=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),gd=new Uint16Array([0,1,2,0,2,3]);eb=fb.createBuffer();df=fb.createBuffer();fb.bindBuffer(fb.ARRAY_BUFFER,eb);fb.bufferData(fb.ARRAY_BUFFER,gc,fb.STATIC_DRAW);fb.bindBuffer(fb.ELEMENT_ARRAY_BUFFER,df);fb.bufferData(fb.ELEMENT_ARRAY_BUFFER,gd,fb.STATIC_DRAW);gc=fb.createProgram();gd=fb.createShader(fb.VERTEX_SHADER);var ge=fb.createShader(fb.FRAGMENT_SHADER);fb.shaderSource(gd,["precision "+ef.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));fb.shaderSource(ge,["precision "+ef.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));fb.compileShader(gd);fb.compileShader(ge);fb.attachShader(gc,gd);fb.attachShader(gc,ge);fb.linkProgram(gc);be=gc;da=fb.getAttribLocation(be,"position");cd=fb.getAttribLocation(be,"uv");ee=fb.getUniformLocation(be,"uvOffset");ed=fb.getUniformLocation(be,"uvScale");ec=fb.getUniformLocation(be,"rotation");ea=fb.getUniformLocation(be,"scale");dg=fb.getUniformLocation(be,"color");db=fb.getUniformLocation(be,"map");dd=fb.getUniformLocation(be,"opacity");cf=fb.getUniformLocation(be,"modelViewMatrix");cg=fb.getUniformLocation(be,"projectionMatrix");de=fb.getUniformLocation(be,"fogType");ce=fb.getUniformLocation(be,"fogDensity");cc=fb.getUniformLocation(be,"fogNear");bg=fb.getUniformLocation(be,"fogFar");dc=fb.getUniformLocation(be,"fogColor");cb=fb.getUniformLocation(be,"alphaTest");gc=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");gc.width=8;gc.height=8;gd=gc.getContext("2d");gd.fillStyle="white";gd.fillRect(0,0,8,8);bb=new cH(gc)}fa.useProgram(be);fa.initAttributes();fa.enableAttribute(da);fa.enableAttribute(cd);fa.disableUnusedAttributes();fa.disable(fb.CULL_FACE);fa.enable(fb.BLEND);fb.bindBuffer(fb.ARRAY_BUFFER,eb);fb.vertexAttribPointer(da,2,fb.FLOAT,!1,16,0);fb.vertexAttribPointer(cd,2,fb.FLOAT,!1,16,8);fb.bindBuffer(fb.ELEMENT_ARRAY_BUFFER,df);fb.uniformMatrix4fv(cg,!1,gb.projectionMatrix.elements);fa.activeTexture(fb.TEXTURE0);fb.uniform1i(db,0);gd=gc=0;(ge=fg.fog)?(fb.uniform3f(dc,ge.color.r,ge.color.g,ge.color.b),ge.isFog?(fb.uniform1f(cc,ge.near),fb.uniform1f(bg,ge.far),fb.uniform1i(de,1),gd=gc=1):ge.isFogExp2&&(fb.uniform1f(ce,ge.density),fb.uniform1i(de,2),gd=gc=2)):(fb.uniform1i(de,0),gd=gc=0);for(var fe=0,ff=gf.length;fe<ff;fe++){ge=gf[fe],ge.modelViewMatrix.multiplyMatrices(gb.matrixWorldInverse,ge.matrixWorld),ge.z=-ge.modelViewMatrix.elements[14]}gf.sort(bd);for(var gE=[],fe=0,ff=gf.length;fe<ff;fe++){ge=gf[fe];var gg=ge.material;if(!1!==gg.visible){ge.onBeforeRender(fc,fg,gb,void 0,gg,void 0);fb.uniform1f(cb,gg.alphaTest);fb.uniformMatrix4fv(cf,!1,ge.modelViewMatrix.elements);ge.matrixWorld.decompose(fd,bf,bc);gE[0]=bc.x;gE[1]=bc.y;var gD=0;fg.fog&&gg.fog&&(gD=gd);gc!==gD&&(fb.uniform1i(de,gD),gc=gD);null!==gg.map?(fb.uniform2f(ee,gg.map.offset.x,gg.map.offset.y),fb.uniform2f(ed,gg.map.repeat.x,gg.map.repeat.y)):(fb.uniform2f(ee,0,0),fb.uniform2f(ed,1,1));fb.uniform1f(dd,gg.opacity);fb.uniform3f(dg,gg.color.r,gg.color.g,gg.color.b);fb.uniform1f(ec,gg.rotation);fb.uniform2fv(ea,gE);fa.setBlending(gg.blending,gg.blendEquation,gg.blendSrc,gg.blendDst,gg.blendEquationAlpha,gg.blendSrcAlpha,gg.blendDstAlpha,gg.premultipliedAlpha);fa.buffers.depth.setTest(gg.depthTest);fa.buffers.depth.setMask(gg.depthWrite);eg.setTexture2D(gg.map||bb,0);fb.drawElements(fb.TRIANGLES,6,fb.UNSIGNED_SHORT,0);ge.onAfterRender(fc,fg,gb,void 0,gg,void 0)}}fa.enable(fb.CULL_FACE);fa.reset()}}}function fM(){Object.defineProperty(this,"id",{value:eP++});this.uuid=fK.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function gz(bb){fM.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==bb&&(void 0!==bb.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(bb))}function cC(bb){fM.call(this);this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(bb)}function cq(bb){fM.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new ft;this.nearDistance=1;this.farDistance=1000;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(bb)}function ej(bc,bb){this.min=void 0!==bc?bc:new ft(Infinity,Infinity,Infinity);this.max=void 0!==bb?bb:new ft(-Infinity,-Infinity,-Infinity)}function br(bc,bb){this.center=void 0!==bc?bc:new ft;this.radius=void 0!==bb?bb:0}function cl(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function gh(bc,bb){this.normal=void 0!==bc?bc:new ft(1,0,0);this.constant=void 0!==bb?bb:0}function dG(bc,bb,bg,bf,be,bd){this.planes=[void 0!==bc?bc:new gh,void 0!==bb?bb:new gh,void 0!==bg?bg:new gh,void 0!==bf?bf:new gh,void 0!==be?be:new gh,void 0!==bd?bd:new gh]}function fm(eb,ea,dg){function df(fd,fc,fb,fa,eg,ef){var ee=fd.geometry;var ec=ce;var ed=fd.customDepthMaterial;fb&&(ec=bf,ed=fd.customDistanceMaterial);ed?ec=ed:(ed=!1,fc.morphTargets&&(ee&&ee.isBufferGeometry?ed=ee.morphAttributes&&ee.morphAttributes.position&&0<ee.morphAttributes.position.length:ee&&ee.isGeometry&&(ed=ee.morphTargets&&0<ee.morphTargets.length)),fd.isSkinnedMesh&&!1===fc.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",fd),fd=fd.isSkinnedMesh&&fc.skinning,ee=0,ed&&(ee|=1),fd&&(ee|=2),ec=ec[ee]);eb.localClippingEnabled&&!0===fc.clipShadows&&0!==fc.clippingPlanes.length&&(ee=ec.uuid,ed=fc.uuid,fd=bg[ee],void 0===fd&&(fd={},bg[ee]=fd),ee=fd[ed],void 0===ee&&(ee=ec.clone(),fd[ed]=ee),ec=ee);ec.visible=fc.visible;ec.wireframe=fc.wireframe;ed=fc.side;cb.renderSingleSided&&2==ed&&(ed=0);cb.renderReverseSided&&(0===ed?ed=1:1===ed&&(ed=0));ec.side=ed;ec.clipShadows=fc.clipShadows;ec.clippingPlanes=fc.clippingPlanes;ec.clipIntersection=fc.clipIntersection;ec.wireframeLinewidth=fc.wireframeLinewidth;ec.linewidth=fc.linewidth;fb&&ec.isMeshDistanceMaterial&&(ec.referencePosition.copy(fa),ec.nearDistance=eg,ec.farDistance=ef);return ec}function de(fd,fc,fb,eg){var fa;if(!1!==fd.visible){if(fd.layers.test(fc.layers)&&(fd.isMesh||fd.isLine||fd.isPoints)&&fd.castShadow&&(!fd.frustumCulled||dd.intersectsObject(fd))){fd.modelViewMatrix.multiplyMatrices(fb.matrixWorldInverse,fd.matrixWorld);var ed=ea.update(fd),ff=fd.material;if(Array.isArray(ff)){for(var ec=ed.groups,ee=0,ef=ec.length;ee<ef;ee++){var fe=ec[ee];(fa=ff[fe.materialIndex])&&fa.visible&&(fa=df(fd,fa,eg,cc,fb.near,fb.far),eb.renderBufferDirect(fb,null,ed,fa,fd,fe))}}else{ff.visible&&(fa=df(fd,ff,eg,cc,fb.near,fb.far),eb.renderBufferDirect(fb,null,ed,fa,fd,null))}}fd=fd.children;ed=0;for(ff=fd.length;ed<ff;ed++){de(fd[ed],fc,fb,eg)}}}var dd=new dG,dc=new fN,db=new fX,da=new fX(dg,dg),cg=new ft,cc=new ft,ce=Array(4),bf=Array(4),bg={},cf=[new ft(1,0,0),new ft(-1,0,0),new ft(0,0,1),new ft(0,0,-1),new ft(0,1,0),new ft(0,-1,0)],be=[new ft(0,1,0),new ft(0,1,0),new ft(0,1,0),new ft(0,1,0),new ft(0,0,1),new ft(0,0,-1)],bd=[new fJ,new fJ,new fJ,new fJ,new fJ,new fJ];for(dg=0;4!==dg;++dg){var bb=0!==(dg&1),cd=0!==(dg&2),bc=new cC({depthPacking:3201,morphTargets:bb,skinning:cd});ce[dg]=bc;bb=new cq({morphTargets:bb,skinning:cd});bf[dg]=bb}var cb=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(fc,fa,eg){if(!1!==cb.enabled&&(!1!==cb.autoUpdate||!1!==cb.needsUpdate)&&0!==fc.length){var ed=eb.state;ed.disable(eb.context.BLEND);ed.buffers.color.setClear(1,1,1,1);ed.buffers.depth.setTest(!0);ed.setScissorTest(!1);for(var fg,ec=0,ee=fc.length;ec<ee;ec++){var ff=fc[ec];fg=ff.shadow;var fd=ff&&ff.isPointLight;if(void 0===fg){console.warn("THREE.WebGLShadowMap:",ff,"has no shadow.")}else{var ef=fg.camera;db.copy(fg.mapSize);db.min(da);if(fd){var fb=db.x,fe=db.y;bd[0].set(2*fb,fe,fb,fe);bd[1].set(0,fe,fb,fe);bd[2].set(3*fb,fe,fb,fe);bd[3].set(fb,fe,fb,fe);bd[4].set(3*fb,0,fb,fe);bd[5].set(fb,0,fb,fe);db.x*=4;db.y*=2}null===fg.map&&(fg.map=new bV(db.x,db.y,{minFilter:1003,magFilter:1003,format:1023}),fg.map.texture.name=ff.name+".shadowMap",ef.updateProjectionMatrix());fg.isSpotLightShadow&&fg.update(ff);fb=fg.map;fe=fg.matrix;cc.setFromMatrixPosition(ff.matrixWorld);ef.position.copy(cc);fd?(fg=6,fe.makeTranslation(-cc.x,-cc.y,-cc.z)):(fg=1,cg.setFromMatrixPosition(ff.target.matrixWorld),ef.lookAt(cg),ef.updateMatrixWorld(),fe.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),fe.multiply(ef.projectionMatrix),fe.multiply(ef.matrixWorldInverse));eb.setRenderTarget(fb);eb.clear();for(ff=0;ff<fg;ff++){fd&&(cg.copy(ef.position),cg.add(cf[ff]),ef.up.copy(be[ff]),ef.lookAt(cg),ef.updateMatrixWorld(),ed.viewport(bd[ff])),dc.multiplyMatrices(ef.projectionMatrix,ef.matrixWorldInverse),dd.setFromMatrix(dc),de(fa,eg,ef,fd)}}}cb.needsUpdate=!1}}}function eC(bc){var bb={};return{get:function(bd){bd.isInterleavedBufferAttribute&&(bd=bd.data);return bb[bd.uuid]},remove:function(be){be.isInterleavedBufferAttribute&&(be=be.data);var bd=bb[be.uuid];bd&&(bc.deleteBuffer(bd.buffer),delete bb[be.uuid])},update:function(cc,cb){cc.isInterleavedBufferAttribute&&(cc=cc.data);var bg=bb[cc.uuid];if(void 0===bg){var bg=cc.uuid,bf=cc.array,be=cc.dynamic?bc.DYNAMIC_DRAW:bc.STATIC_DRAW,bd=bc.createBuffer();bc.bindBuffer(cb,bd);bc.bufferData(cb,bf,be);cc.onUploadCallback();cb=bc.FLOAT;bf instanceof Float32Array?cb=bc.FLOAT:bf instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):bf instanceof Uint16Array?cb=bc.UNSIGNED_SHORT:bf instanceof Int16Array?cb=bc.SHORT:bf instanceof Uint32Array?cb=bc.UNSIGNED_INT:bf instanceof Int32Array?cb=bc.INT:bf instanceof Int8Array?cb=bc.BYTE:bf instanceof Uint8Array&&(cb=bc.UNSIGNED_BYTE);bb[bg]={buffer:bd,type:cb,bytesPerElement:bf.BYTES_PER_ELEMENT,version:cc.version}}else{bg.version<cc.version&&(bf=cc,bd=bf.array,be=bf.updateRange,bc.bindBuffer(cb,bg.buffer),!1===bf.dynamic?bc.bufferData(cb,bd,bc.STATIC_DRAW):-1===be.count?bc.bufferSubData(cb,0,bd):0===be.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(bc.bufferSubData(cb,be.offset*bd.BYTES_PER_ELEMENT,bd.subarray(be.offset,be.offset+be.count)),be.count=-1),bg.version=cc.version)}}}}function b9(bc,bb,be,bd){this._x=bc||0;this._y=bb||0;this._z=be||0;this._order=bd||b9.DefaultOrder}function dX(){this.mask=1}function fs(){Object.defineProperty(this,"id",{value:eq++});this.uuid=fK.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=fs.DefaultUp.clone();var bc=new ft,bb=new b9,be=new d6,bd=new ft(1,1,1);bb.onChange(function(){be.setFromEuler(bb,!1)});be.onChange(function(){bb.setFromQuaternion(be,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:bc},rotation:{enumerable:!0,value:bb},quaternion:{enumerable:!0,value:be},scale:{enumerable:!0,value:bd},modelViewMatrix:{value:new fN},normalMatrix:{value:new cl}});this.matrix=new fN;this.matrixWorld=new fN;this.matrixAutoUpdate=fs.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new dX;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}}function eU(){fs.call(this);this.type="Camera";this.matrixWorldInverse=new fN;this.projectionMatrix=new fN}function a8(bc,bb,bg,bf,be,bd){eU.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=bc;this.right=bb;this.top=bg;this.bottom=bf;this.near=void 0!==be?be:0.1;this.far=void 0!==bd?bd:2000;this.updateProjectionMatrix()}function dU(bc,bb,be,bd){eU.call(this);this.type="PerspectiveCamera";this.fov=void 0!==bc?bc:50;this.zoom=1;this.near=void 0!==be?be:0.1;this.far=void 0!==bd?bd:2000;this.focus=10;this.aspect=void 0!==bb?bb:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function d0(bc,bb,bg,bf,be,bd){this.a=bc;this.b=bb;this.c=bg;this.normal=bf&&bf.isVector3?bf:new ft;this.vertexNormals=Array.isArray(bf)?bf:[];this.color=be&&be.isColor?be:new fZ;this.vertexColors=Array.isArray(be)?be:[];this.materialIndex=void 0!==bd?bd:0}function fL(){Object.defineProperty(this,"id",{value:dL++});this.uuid=fK.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function fQ(bc,bb,bd){if(Array.isArray(bc)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.uuid=fK.generateUUID();this.name="";this.array=bc;this.itemSize=bb;this.count=void 0!==bc?bc.length/bb:0;this.normalized=!0===bd;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function cv(bc,bb){fQ.call(this,new Int8Array(bc),bb)}function cj(bc,bb){fQ.call(this,new Uint8Array(bc),bb)}function b1(bc,bb){fQ.call(this,new Uint8ClampedArray(bc),bb)}function bI(bc,bb){fQ.call(this,new Int16Array(bc),bb)}function fj(bc,bb){fQ.call(this,new Uint16Array(bc),bb)}function bw(bc,bb){fQ.call(this,new Int32Array(bc),bb)}function e0(bc,bb){fQ.call(this,new Uint32Array(bc),bb)}function fp(bc,bb){fQ.call(this,new Float32Array(bc),bb)}function bj(bc,bb){fQ.call(this,new Float64Array(bc),bb)}function e3(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function dA(bc){if(0===bc.length){return -Infinity}for(var bb=bc[0],be=1,bd=bc.length;be<bd;++be){bc[be]>bb&&(bb=bc[be])}return bb}function fU(){Object.defineProperty(this,"id",{value:dL++});this.uuid=fK.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function aX(bc,bb,bg,bf,be,bd){fL.call(this);this.type="BoxGeometry";this.parameters={width:bc,height:bb,depth:bg,widthSegments:bf,heightSegments:be,depthSegments:bd};this.fromBufferGeometry(new eN(bc,bb,bg,bf,be,bd));this.mergeVertices()}function eN(da,cg,cf,ce,cd,cc){function cb(gd,gc,gb,fg,ff,fe,fd,fa,dc,fc,fb){var eg=fe/dc,ec=fd/fc,ed=fe/2,dg=fd/2,df=fa/2;fd=dc+1;var ef=fc+1,de=fe=0,eb,ea,dd=new ft;for(ea=0;ea<ef;ea++){var ee=ea*ec-dg;for(eb=0;eb<fd;eb++){dd[gd]=(eb*eg-ed)*fg,dd[gc]=ee*ff,dd[gb]=df,be.push(dd.x,dd.y,dd.z),dd[gd]=0,dd[gc]=0,dd[gb]=0<fa?1:-1,bc.push(dd.x,dd.y,dd.z),bd.push(eb/dc),bd.push(1-ea/fc),fe+=1}}for(ea=0;ea<fc;ea++){for(eb=0;eb<dc;eb++){gd=db+eb+fd*(ea+1),gc=db+(eb+1)+fd*(ea+1),gb=db+(eb+1)+fd*ea,bf.push(db+eb+fd*ea,gd,gb),bf.push(gd,gc,gb),de+=6}}bg.addGroup(bb,de,fb);bb+=de;db+=fe}fU.call(this);this.type="BoxBufferGeometry";this.parameters={width:da,height:cg,depth:cf,widthSegments:ce,heightSegments:cd,depthSegments:cc};var bg=this;ce=Math.floor(ce)||1;cd=Math.floor(cd)||1;cc=Math.floor(cc)||1;var bf=[],be=[],bc=[],bd=[],db=0,bb=0;cb("z","y","x",-1,-1,cf,cg,da,cc,cd,0);cb("z","y","x",1,-1,cf,cg,-da,cc,cd,1);cb("x","z","y",1,1,da,cf,cg,ce,cc,2);cb("x","z","y",1,-1,da,cf,-cg,ce,cc,3);cb("x","y","z",1,-1,da,cg,cf,ce,cd,4);cb("x","y","z",-1,-1,da,cg,-cf,ce,cd,5);this.setIndex(bf);this.addAttribute("position",new fp(be,3));this.addAttribute("normal",new fp(bc,3));this.addAttribute("uv",new fp(bd,2))}function a2(bc,bb,be,bd){fL.call(this);this.type="PlaneGeometry";this.parameters={width:bc,height:bb,widthSegments:be,heightSegments:bd};this.fromBufferGeometry(new eB(bc,bb,be,bd));this.mergeVertices()}function eB(db,da,cg,cf){fU.call(this);this.type="PlaneBufferGeometry";this.parameters={width:db,height:da,widthSegments:cg,heightSegments:cf};var ce=db/2,cd=da/2;cg=Math.floor(cg)||1;cf=Math.floor(cf)||1;var cc=cg+1,cb=cf+1,bg=db/cg,bf=da/cf,bc=[],bd=[],dc=[],bb=[];for(db=0;db<cb;db++){var be=db*bf-cd;for(da=0;da<cc;da++){bd.push(da*bg-ce,-be,0),dc.push(0,0,1),bb.push(da/cg),bb.push(1-db/cf)}}for(db=0;db<cf;db++){for(da=0;da<cg;da++){ce=da+cc*(db+1),cd=da+1+cc*(db+1),cb=da+1+cc*db,bc.push(da+cc*db,ce,cb),bc.push(ce,cd,cb)}}this.setIndex(bc);this.addAttribute("position",new fp(bd,3));this.addAttribute("normal",new fp(dc,3));this.addAttribute("uv",new fp(bb,2))}function bK(bb){fM.call(this);this.type="MeshBasicMaterial";this.color=new fZ(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=0.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(bb)}function ep(bc,bb){this.origin=void 0!==bc?bc:new ft;this.direction=void 0!==bb?bb:new ft}function aL(bc,bb){this.start=void 0!==bc?bc:new ft;this.end=void 0!==bb?bb:new ft}function dO(bc,bb,bd){this.a=void 0!==bc?bc:new ft;this.b=void 0!==bb?bb:new ft;this.c=void 0!==bd?bd:new ft}function eO(bc,bb){fs.call(this);this.type="Mesh";this.geometry=void 0!==bc?bc:new fU;this.material=void 0!==bb?bb:new bK({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function d7(ce,cd,cc,cb){function bg(cf,cg){cd.buffers.color.setClear(cf.r,cf.g,cf.b,cg,cb)}var bf=new fZ(0),be=0,bd,bc,bb;return{getClearColor:function(){return bf},setClearColor:function(cg,cf){bf.set(cg);be=void 0!==cf?cf:1;bg(bf,be)},getClearAlpha:function(){return be},setClearAlpha:function(cf){be=cf;bg(bf,be)},render:function(cf,db,cg,da){db=db.background;null===db?bg(bf,be):db&&db.isColor&&(bg(db,1),da=!0);(ce.autoClear||da)&&ce.clear(ce.autoClearColor,ce.autoClearDepth,ce.autoClearStencil);db&&db.isCubeTexture?(void 0===bb&&(bb=new eO(new eN(1,1,1),new gz({uniforms:d5.cube.uniforms,vertexShader:d5.cube.vertexShader,fragmentShader:d5.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,polygonOffset:!0,fog:!1})),bb.geometry.removeAttribute("normal"),bb.geometry.removeAttribute("uv"),bb.onBeforeRender=function(dd,dc,de){dd=de.far;this.matrixWorld.makeScale(dd,dd,dd);this.matrixWorld.copyPosition(de.matrixWorld);this.material.polygonOffsetUnits=10*dd},cc.update(bb.geometry)),bb.material.uniforms.tCube.value=db,cf.push(bb,bb.geometry,bb.material,0,null)):db&&db.isTexture&&(void 0===bd&&(bd=new a8(-1,1,1,-1,0,1),bc=new eO(new eB(2,2),new bK({depthTest:!1,depthWrite:!1,fog:!1})),cc.update(bc.geometry)),bc.material.map=db,ce.renderBufferDirect(bd,null,bc.geometry,bc.material,bc,null))}}}function dV(bc,bb){return bc.renderOrder!==bb.renderOrder?bc.renderOrder-bb.renderOrder:bc.program&&bb.program&&bc.program!==bb.program?bc.program.id-bb.program.id:bc.material.id!==bb.material.id?bc.material.id-bb.material.id:bc.z!==bb.z?bc.z-bb.z:bc.id-bb.id}function dJ(bc,bb){return bc.renderOrder!==bb.renderOrder?bc.renderOrder-bb.renderOrder:bc.z!==bb.z?bb.z-bc.z:bc.id-bb.id}function dy(){var bc=[],bb=0,be=[],bd=[];return{opaque:be,transparent:bd,init:function(){bb=0;be.length=0;bd.length=0},push:function(ce,cd,cc,cb,bg){var bf=bc[bb];void 0===bf?(bf={id:ce.id,object:ce,geometry:cd,material:cc,program:cc.program,renderOrder:ce.renderOrder,z:cb,group:bg},bc[bb]=bf):(bf.id=ce.id,bf.object=ce,bf.geometry=cd,bf.material=cc,bf.program=cc.program,bf.renderOrder=ce.renderOrder,bf.z=cb,bf.group=bg);(!0===cc.transparent?bd:be).push(bf);bb++},sort:function(){1<be.length&&be.sort(dV);1<bd.length&&bd.sort(dJ)}}}function dm(){var bb={};return{get:function(bc,bd){bc=bc.id+","+bd.id;bd=bb[bc];void 0===bd&&(bd=new dy,bb[bc]=bd);return bd},dispose:function(){bb={}}}}function c2(bc,bb){return Math.abs(bb[1])-Math.abs(bc[1])}function cK(bc){var bb={},bd=new Float32Array(8);return{update:function(cg,cf,ce,cd){var cc=cg.morphTargetInfluences,cb=cc.length;cg=bb[cf.id];if(void 0===cg){cg=[];for(var bg=0;bg<cb;bg++){cg[bg]=[bg,0]}bb[cf.id]=cg}var be=ce.morphTargets&&cf.morphAttributes.position;ce=ce.morphNormals&&cf.morphAttributes.normal;for(bg=0;bg<cb;bg++){var bf=cg[bg];0!==bf[1]&&(be&&cf.removeAttribute("morphTarget"+bg),ce&&cf.removeAttribute("morphNormal"+bg))}for(bg=0;bg<cb;bg++){bf=cg[bg],bf[0]=bg,bf[1]=cc[bg]}cg.sort(c2);for(bg=0;8>bg;bg++){if(bf=cg[bg]){if(cc=bf[0],bf=bf[1]){be&&cf.addAttribute("morphTarget"+bg,be[cc]);ce&&cf.addAttribute("morphNormal"+bg,ce[cc]);bd[bg]=bf;continue}}bd[bg]=0}cd.getUniforms().setValue(bc,"morphTargetInfluences",bd)}}}function cy(bc,bb,bg){var bf,be,bd;this.setMode=function(cb){bf=cb};this.setIndex=function(cb){be=cb.type;bd=cb.bytesPerElement};this.render=function(cb,cc){bc.drawElements(bf,cc,be,cb*bd);bg.calls++;bg.vertices+=cc;bf===bc.TRIANGLES?bg.faces+=cc/3:bf===bc.POINTS&&(bg.points+=cc)};this.renderInstances=function(ce,cd,cc){var cb=bb.get("ANGLE_instanced_arrays");null===cb?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(cb.drawElementsInstancedANGLE(bf,cc,be,cd*bd,ce.maxInstancedCount),bg.calls++,bg.vertices+=cc*ce.maxInstancedCount,bf===bc.TRIANGLES?bg.faces+=ce.maxInstancedCount*cc/3:bf===bc.POINTS&&(bg.points+=ce.maxInstancedCount*cc))}}function cm(bc,bb,be){var bd;this.setMode=function(bf){bd=bf};this.render=function(bf,bg){bc.drawArrays(bd,bf,bg);be.calls++;be.vertices+=bg;bd===bc.TRIANGLES?be.faces+=bg/3:bd===bc.POINTS&&(be.points+=bg)};this.renderInstances=function(cd,cc,cb){var bg=bb.get("ANGLE_instanced_arrays");if(null===bg){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}else{var bf=cd.attributes.position;bf.isInterleavedBufferAttribute?(cb=bf.data.count,bg.drawArraysInstancedANGLE(bd,0,cb,cd.maxInstancedCount)):bg.drawArraysInstancedANGLE(bd,cc,cb,cd.maxInstancedCount);be.calls++;be.vertices+=cb*cd.maxInstancedCount;bd===bc.TRIANGLES?be.faces+=cd.maxInstancedCount*cb/3:bd===bc.POINTS&&(be.points+=cd.maxInstancedCount*cb)}}}function b4(bc,bb,bg){function bf(cb){cb=cb.target;var cd=be[cb.id];null!==cd.index&&bb.remove(cd.index);for(var cc in cd.attributes){bb.remove(cd.attributes[cc])}cb.removeEventListener("dispose",bf);delete be[cb.id];if(cc=bd[cb.id]){bb.remove(cc),delete bd[cb.id]}if(cc=bd[cd.id]){bb.remove(cc),delete bd[cd.id]}bg.geometries--}var be={},bd={};return{get:function(cc,cb){var cd=be[cb.id];if(cd){return cd}cb.addEventListener("dispose",bf);cb.isBufferGeometry?cd=cb:cb.isGeometry&&(void 0===cb._bufferGeometry&&(cb._bufferGeometry=(new fU).setFromObject(cc)),cd=cb._bufferGeometry);be[cb.id]=cd;bg.geometries++;return cd},update:function(cf){var ce=cf.index,cd=cf.attributes;null!==ce&&bb.update(ce,bc.ELEMENT_ARRAY_BUFFER);for(var cc in cd){bb.update(cd[cc],bc.ARRAY_BUFFER)}cf=cf.morphAttributes;for(cc in cf){for(var ce=cf[cc],cd=0,cb=ce.length;cd<cb;cd++){bb.update(ce[cd],bc.ARRAY_BUFFER)}}},getWireframeAttribute:function(db){var da=bd[db.id];if(da){return da}da=[];var cg=db.index;var cd=db.attributes;if(null!==cg){var ce=cg.array;for(var cf=0,cb=ce.length;cf<cb;cf+=3){var cc=ce[cf+0];cd=ce[cf+1];cg=ce[cf+2];da.push(cc,cd,cd,cg,cg,cc)}}else{for(ce=cd.position.array,cf=0,cb=ce.length/3-1;cf<cb;cf+=3){cc=cf+0,cd=cf+1,cg=cf+2,da.push(cc,cd,cd,cg,cg,cc)}}da=new (65535<dA(da)?e0:fj)(da,1);bb.update(da,bc.ELEMENT_ARRAY_BUFFER);return bd[db.id]=da}}}function bL(){var bb={};return{get:function(bc){if(void 0!==bb[bc.id]){return bb[bc.id]}switch(bc.type){case"DirectionalLight":var bd={direction:new ft,color:new fZ,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new fX};break;case"SpotLight":bd={position:new ft,direction:new ft,color:new fZ,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new fX};break;case"PointLight":bd={position:new ft,color:new fZ,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new fX,shadowCameraNear:1,shadowCameraFar:1000};break;case"HemisphereLight":bd={direction:new ft,skyColor:new fZ,groundColor:new fZ};break;case"RectAreaLight":bd={color:new fZ,position:new ft,halfWidth:new ft,halfHeight:new ft}}return bb[bc.id]=bd}}}function cP(){var bc=new bL,bb={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},bf=new ft,be=new fN,bd=new fN;return{setup:function(ee,ed,ec){for(var ea,dg=0,db=0,dd=0,cf=0,cg=0,df=0,ce=0,cc=0,de=ec.matrixWorldInverse,dc=0,cb=ee.length;dc<cb;dc++){var da=ee[dc];ea=da.color;var cd=da.intensity,bg=da.distance,eb=da.shadow&&da.shadow.map?da.shadow.map.texture:null;if(da.isAmbientLight){dg+=ea.r*cd,db+=ea.g*cd,dd+=ea.b*cd}else{if(da.isDirectionalLight){ec=bc.get(da);ec.color.copy(da.color).multiplyScalar(da.intensity);ec.direction.setFromMatrixPosition(da.matrixWorld);bf.setFromMatrixPosition(da.target.matrixWorld);ec.direction.sub(bf);ec.direction.transformDirection(de);if(ec.shadow=da.castShadow){ea=da.shadow,ec.shadowBias=ea.bias,ec.shadowRadius=ea.radius,ec.shadowMapSize=ea.mapSize}bb.directionalShadowMap[cf]=eb;bb.directionalShadowMatrix[cf]=da.shadow.matrix;bb.directional[cf]=ec;cf++}else{if(da.isSpotLight){ec=bc.get(da);ec.position.setFromMatrixPosition(da.matrixWorld);ec.position.applyMatrix4(de);ec.color.copy(ea).multiplyScalar(cd);ec.distance=bg;ec.direction.setFromMatrixPosition(da.matrixWorld);bf.setFromMatrixPosition(da.target.matrixWorld);ec.direction.sub(bf);ec.direction.transformDirection(de);ec.coneCos=Math.cos(da.angle);ec.penumbraCos=Math.cos(da.angle*(1-da.penumbra));ec.decay=0===da.distance?0:da.decay;if(ec.shadow=da.castShadow){ea=da.shadow,ec.shadowBias=ea.bias,ec.shadowRadius=ea.radius,ec.shadowMapSize=ea.mapSize}bb.spotShadowMap[df]=eb;bb.spotShadowMatrix[df]=da.shadow.matrix;bb.spot[df]=ec;df++}else{if(da.isRectAreaLight){ec=bc.get(da),ec.color.copy(ea).multiplyScalar(cd/(da.width*da.height)),ec.position.setFromMatrixPosition(da.matrixWorld),ec.position.applyMatrix4(de),bd.identity(),be.copy(da.matrixWorld),be.premultiply(de),bd.extractRotation(be),ec.halfWidth.set(0.5*da.width,0,0),ec.halfHeight.set(0,0.5*da.height,0),ec.halfWidth.applyMatrix4(bd),ec.halfHeight.applyMatrix4(bd),bb.rectArea[ce]=ec,ce++}else{if(da.isPointLight){ec=bc.get(da);ec.position.setFromMatrixPosition(da.matrixWorld);ec.position.applyMatrix4(de);ec.color.copy(da.color).multiplyScalar(da.intensity);ec.distance=da.distance;ec.decay=0===da.distance?0:da.decay;if(ec.shadow=da.castShadow){ea=da.shadow,ec.shadowBias=ea.bias,ec.shadowRadius=ea.radius,ec.shadowMapSize=ea.mapSize,ec.shadowCameraNear=ea.camera.near,ec.shadowCameraFar=ea.camera.far}bb.pointShadowMap[cg]=eb;bb.pointShadowMatrix[cg]=da.shadow.matrix;bb.point[cg]=ec;cg++}else{da.isHemisphereLight&&(ec=bc.get(da),ec.direction.setFromMatrixPosition(da.matrixWorld),ec.direction.transformDirection(de),ec.direction.normalize(),ec.skyColor.copy(da.color).multiplyScalar(cd),ec.groundColor.copy(da.groundColor).multiplyScalar(cd),bb.hemi[cc]=ec,cc++)}}}}}}bb.ambient[0]=dg;bb.ambient[1]=db;bb.ambient[2]=dd;bb.directional.length=cf;bb.spot.length=df;bb.rectArea.length=ce;bb.point.length=cg;bb.hemi.length=cc;bb.hash=cf+","+cg+","+df+","+ce+","+cc+","+ed.length},state:bb}}function gi(bc,bb){var bd={};return{update:function(cb){var bg=bb.frame,bf=cb.geometry,be=bc.get(cb,bf);bd[be.id]!==bg&&(bf.isGeometry&&be.updateFromObject(cb),bc.update(be),bd[be.id]=bg);return be},clear:function(){bd={}}}}function fR(bc){bc=bc.split("\n");for(var bb=0;bb<bc.length;bb++){bc[bb]=bb+1+": "+bc[bb]}return bc.join("\n")}function eQ(bc,bb,be){var bd=bc.createShader(bb);bc.shaderSource(bd,be);bc.compileShader(bd);!1===bc.getShaderParameter(bd,bc.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==bc.getShaderInfoLog(bd)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",bb===bc.VERTEX_SHADER?"vertex":"fragment",bc.getShaderInfoLog(bd),fR(be));return bd}function eD(bb){switch(bb){case 3000:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+bb)}}function dp(bc,bb){bb=eD(bb);return"vec4 "+bc+"( vec4 value ) { return "+bb[0]+"ToLinear"+bb[1]+"; }"}function fv(bc,bb){bb=eD(bb);return"vec4 "+bc+"( vec4 value ) { return LinearTo"+bb[0]+bb[1]+"; }"}function e7(bc,bb){switch(bb){case 1:bb="Linear";break;case 2:bb="Reinhard";break;case 3:bb="Uncharted2";break;case 4:bb="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+bb)}return"vec3 "+bc+"( vec3 color ) { return "+bb+"ToneMapping( color ); }"}function eV(bc,bb,bd){bc=bc||{};return[bc.derivatives||bb.envMapCubeUV||bb.bumpMap||bb.normalMap||bb.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(bc.fragDepth||bb.logarithmicDepthBuffer)&&bd.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",bc.drawBuffers&&bd.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(bc.shaderTextureLOD||bb.envMap)&&bd.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(aQ).join("\n")}function eI(bc){var bb=[],be;for(be in bc){var bd=bc[be];!1!==bd&&bb.push("#define "+be+" "+bd)}return bb.join("\n")}function aQ(bb){return""!==bb}function er(bc,bb){return bc.replace(/NUM_DIR_LIGHTS/g,bb.numDirLights).replace(/NUM_SPOT_LIGHTS/g,bb.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,bb.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,bb.numPointLights).replace(/NUM_HEMI_LIGHTS/g,bb.numHemiLights)}function c4(bb){return bb.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(bc,bd){bc=fI[bd];if(void 0===bc){throw Error("Can not resolve #include <"+bd+">")}return c4(bc)})}function d8(bb){return bb.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(bc,bf,be,bd){bc="";for(bf=parseInt(bf);bf<parseInt(be);bf++){bc+=bd.replace(/\[ i \]/g,"[ "+bf+" ]")}return bc})}function ew(ea,dg,df,de,dd,dc){var db=ea.context,da=de.defines,cg=dd.vertexShader,cf=dd.fragmentShader,bg="SHADOWMAP_TYPE_BASIC";1===dc.shadowMapType?bg="SHADOWMAP_TYPE_PCF":2===dc.shadowMapType&&(bg="SHADOWMAP_TYPE_PCF_SOFT");var cc="ENVMAP_TYPE_CUBE",be="ENVMAP_MODE_REFLECTION",bf="ENVMAP_BLENDING_MULTIPLY";if(dc.envMap){switch(de.envMap.mapping){case 301:case 302:cc="ENVMAP_TYPE_CUBE";break;case 306:case 307:cc="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:cc="ENVMAP_TYPE_EQUIREC";break;case 305:cc="ENVMAP_TYPE_SPHERE"}switch(de.envMap.mapping){case 302:case 304:be="ENVMAP_MODE_REFRACTION"}switch(de.combine){case 0:bf="ENVMAP_BLENDING_MULTIPLY";break;case 1:bf="ENVMAP_BLENDING_MIX";break;case 2:bf="ENVMAP_BLENDING_ADD"}}var ce=0<ea.gammaFactor?ea.gammaFactor:1,bd=eV(de.extensions,dc,dg),bc=eI(da),cd=db.createProgram();de.isRawShaderMaterial?(da=[bc,"\n"].filter(aQ).join("\n"),dg=[bd,bc,"\n"].filter(aQ).join("\n")):(da=["precision "+dc.precision+" float;","precision "+dc.precision+" int;","#define SHADER_NAME "+dd.name,bc,dc.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+ce,"#define MAX_BONES "+dc.maxBones,dc.useFog&&dc.fog?"#define USE_FOG":"",dc.useFog&&dc.fogExp?"#define FOG_EXP2":"",dc.map?"#define USE_MAP":"",dc.envMap?"#define USE_ENVMAP":"",dc.envMap?"#define "+be:"",dc.lightMap?"#define USE_LIGHTMAP":"",dc.aoMap?"#define USE_AOMAP":"",dc.emissiveMap?"#define USE_EMISSIVEMAP":"",dc.bumpMap?"#define USE_BUMPMAP":"",dc.normalMap?"#define USE_NORMALMAP":"",dc.displacementMap&&dc.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",dc.specularMap?"#define USE_SPECULARMAP":"",dc.roughnessMap?"#define USE_ROUGHNESSMAP":"",dc.metalnessMap?"#define USE_METALNESSMAP":"",dc.alphaMap?"#define USE_ALPHAMAP":"",dc.vertexColors?"#define USE_COLOR":"",dc.flatShading?"#define FLAT_SHADED":"",dc.skinning?"#define USE_SKINNING":"",dc.useVertexTexture?"#define BONE_TEXTURE":"",dc.morphTargets?"#define USE_MORPHTARGETS":"",dc.morphNormals&&!1===dc.flatShading?"#define USE_MORPHNORMALS":"",dc.doubleSided?"#define DOUBLE_SIDED":"",dc.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+dc.numClippingPlanes,dc.shadowMapEnabled?"#define USE_SHADOWMAP":"",dc.shadowMapEnabled?"#define "+bg:"",dc.sizeAttenuation?"#define USE_SIZEATTENUATION":"",dc.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",dc.logarithmicDepthBuffer&&dg.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(aQ).join("\n"),dg=[bd,"precision "+dc.precision+" float;","precision "+dc.precision+" int;","#define SHADER_NAME "+dd.name,bc,dc.alphaTest?"#define ALPHATEST "+dc.alphaTest:"","#define GAMMA_FACTOR "+ce,dc.useFog&&dc.fog?"#define USE_FOG":"",dc.useFog&&dc.fogExp?"#define FOG_EXP2":"",dc.map?"#define USE_MAP":"",dc.envMap?"#define USE_ENVMAP":"",dc.envMap?"#define "+cc:"",dc.envMap?"#define "+be:"",dc.envMap?"#define "+bf:"",dc.lightMap?"#define USE_LIGHTMAP":"",dc.aoMap?"#define USE_AOMAP":"",dc.emissiveMap?"#define USE_EMISSIVEMAP":"",dc.bumpMap?"#define USE_BUMPMAP":"",dc.normalMap?"#define USE_NORMALMAP":"",dc.specularMap?"#define USE_SPECULARMAP":"",dc.roughnessMap?"#define USE_ROUGHNESSMAP":"",dc.metalnessMap?"#define USE_METALNESSMAP":"",dc.alphaMap?"#define USE_ALPHAMAP":"",dc.vertexColors?"#define USE_COLOR":"",dc.gradientMap?"#define USE_GRADIENTMAP":"",dc.flatShading?"#define FLAT_SHADED":"",dc.doubleSided?"#define DOUBLE_SIDED":"",dc.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+dc.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(dc.numClippingPlanes-dc.numClipIntersection),dc.shadowMapEnabled?"#define USE_SHADOWMAP":"",dc.shadowMapEnabled?"#define "+bg:"",dc.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",dc.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",dc.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",dc.logarithmicDepthBuffer&&dg.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",dc.envMap&&dg.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==dc.toneMapping?"#define TONE_MAPPING":"",0!==dc.toneMapping?fI.tonemapping_pars_fragment:"",0!==dc.toneMapping?e7("toneMapping",dc.toneMapping):"",dc.dithering?"#define DITHERING":"",dc.outputEncoding||dc.mapEncoding||dc.envMapEncoding||dc.emissiveMapEncoding?fI.encodings_pars_fragment:"",dc.mapEncoding?dp("mapTexelToLinear",dc.mapEncoding):"",dc.envMapEncoding?dp("envMapTexelToLinear",dc.envMapEncoding):"",dc.emissiveMapEncoding?dp("emissiveMapTexelToLinear",dc.emissiveMapEncoding):"",dc.outputEncoding?fv("linearToOutputTexel",dc.outputEncoding):"",dc.depthPacking?"#define DEPTH_PACKING "+de.depthPacking:"","\n"].filter(aQ).join("\n"));cg=c4(cg);cg=er(cg,dc);cf=c4(cf);cf=er(cf,dc);de.isShaderMaterial||(cg=d8(cg),cf=d8(cf));cf=dg+cf;cg=eQ(db,db.VERTEX_SHADER,da+cg);cf=eQ(db,db.FRAGMENT_SHADER,cf);db.attachShader(cd,cg);db.attachShader(cd,cf);void 0!==de.index0AttributeName?db.bindAttribLocation(cd,0,de.index0AttributeName):!0===dc.morphTargets&&db.bindAttribLocation(cd,0,"position");db.linkProgram(cd);dc=db.getProgramInfoLog(cd);dd=db.getShaderInfoLog(cg);bg=db.getShaderInfoLog(cf);be=cc=!0;if(!1===db.getProgramParameter(cd,db.LINK_STATUS)){cc=!1,console.error("THREE.WebGLProgram: shader error: ",db.getError(),"gl.VALIDATE_STATUS",db.getProgramParameter(cd,db.VALIDATE_STATUS),"gl.getProgramInfoLog",dc,dd,bg)}else{if(""!==dc){console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",dc)}else{if(""===dd||""===bg){be=!1}}}be&&(this.diagnostics={runnable:cc,material:de,programLog:dc,vertexShader:{log:dd,prefix:da},fragmentShader:{log:bg,prefix:dg}});db.deleteShader(cg);db.deleteShader(cf);var cb;this.getUniforms=function(){void 0===cb&&(cb=new fA(db,cd,ea));return cb};var bb;this.getAttributes=function(){if(void 0===bb){for(var ec={},eb=db.getProgramParameter(cd,db.ACTIVE_ATTRIBUTES),ee=0;ee<eb;ee++){var ed=db.getActiveAttrib(cd,ee).name;ec[ed]=db.getAttribLocation(cd,ed)}bb=ec}return bb};this.destroy=function(){db.deleteProgram(cd);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=ek++;this.code=df;this.usedTimes=1;this.program=cd;this.vertexShader=cg;this.fragmentShader=cf;return this}function d1(bc,bb,cb){function bg(cd,cc){if(cd){cd.isTexture?ce=cd.encoding:cd.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ce=cd.texture.encoding)}else{var ce=3000}3000===ce&&cc&&(ce=3007);return ce}var bf=[],be={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},bd="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(de,dd,dc,cd,ce,df,cc){var db=be[de.type];if(cc.isSkinnedMesh){var cg=cc.skeleton.bones;if(cb.floatVertexTextures){cg=1024}else{var da=Math.min(Math.floor((cb.maxVertexUniforms-20)/4),cg.length);da<cg.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+cg.length+" bones. This GPU supports "+da+"."),cg=0):cg=da}}else{cg=0}da=cb.precision;null!==de.precision&&(da=cb.getMaxPrecision(de.precision),da!==de.precision&&console.warn("THREE.WebGLProgram.getParameters:",de.precision,"not supported, using",da,"instead."));var cf=bc.getRenderTarget();return{shaderID:db,precision:da,supportsVertexTextures:cb.vertexTextures,outputEncoding:bg(cf?cf.texture:null,bc.gammaOutput),map:!!de.map,mapEncoding:bg(de.map,bc.gammaInput),envMap:!!de.envMap,envMapMode:de.envMap&&de.envMap.mapping,envMapEncoding:bg(de.envMap,bc.gammaInput),envMapCubeUV:!!de.envMap&&(306===de.envMap.mapping||307===de.envMap.mapping),lightMap:!!de.lightMap,aoMap:!!de.aoMap,emissiveMap:!!de.emissiveMap,emissiveMapEncoding:bg(de.emissiveMap,bc.gammaInput),bumpMap:!!de.bumpMap,normalMap:!!de.normalMap,displacementMap:!!de.displacementMap,roughnessMap:!!de.roughnessMap,metalnessMap:!!de.metalnessMap,specularMap:!!de.specularMap,alphaMap:!!de.alphaMap,gradientMap:!!de.gradientMap,combine:de.combine,vertexColors:de.vertexColors,fog:!!cd,useFog:de.fog,fogExp:cd&&cd.isFogExp2,flatShading:de.flatShading,sizeAttenuation:de.sizeAttenuation,logarithmicDepthBuffer:cb.logarithmicDepthBuffer,skinning:de.skinning&&0<cg,maxBones:cg,useVertexTexture:cb.floatVertexTextures,morphTargets:de.morphTargets,morphNormals:de.morphNormals,maxMorphTargets:bc.maxMorphTargets,maxMorphNormals:bc.maxMorphNormals,numDirLights:dd.directional.length,numPointLights:dd.point.length,numSpotLights:dd.spot.length,numRectAreaLights:dd.rectArea.length,numHemiLights:dd.hemi.length,numClippingPlanes:ce,numClipIntersection:df,dithering:de.dithering,shadowMapEnabled:bc.shadowMap.enabled&&cc.receiveShadow&&0<dc.length,shadowMapType:bc.shadowMap.type,toneMapping:bc.toneMapping,physicallyCorrectLights:bc.physicallyCorrectLights,premultipliedAlpha:de.premultipliedAlpha,alphaTest:de.alphaTest,doubleSided:2===de.side,flipSided:1===de.side,depthPacking:void 0!==de.depthPacking?de.depthPacking:!1}};this.getProgramCode=function(cc,cf){var ce=[];cf.shaderID?ce.push(cf.shaderID):(ce.push(cc.fragmentShader),ce.push(cc.vertexShader));if(void 0!==cc.defines){for(var cd in cc.defines){ce.push(cd),ce.push(cc.defines[cd])}}for(cd=0;cd<bd.length;cd++){ce.push(cf[bd[cd]])}ce.push(cc.onBeforeCompile.toString());ce.push(bc.gammaOutput);return ce.join()};this.acquireProgram=function(dc,db,da,cf){for(var ce,cc=0,cd=bf.length;cc<cd;cc++){var cg=bf[cc];if(cg.code===cf){ce=cg;++ce.usedTimes;break}}void 0===ce&&(ce=new ew(bc,bb,cf,dc,db,da),bf.push(ce));return ce};this.releaseProgram=function(cd){if(0===--cd.usedTimes){var cc=bf.indexOf(cd);bf[cc]=bf[bf.length-1];bf.pop();cd.destroy()}};this.programs=bf}function dP(df,de,dd,dc,db,da,cg){function cf(ea,dg){if(ea.width>dg||ea.height>dg){dg/=Math.max(ea.width,ea.height);var eb=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");eb.width=Math.floor(ea.width*dg);eb.height=Math.floor(ea.height*dg);eb.getContext("2d").drawImage(ea,0,0,ea.width,ea.height,0,0,eb.width,eb.height);console.warn("THREE.WebGLRenderer: image is too big ("+ea.width+"x"+ea.height+"). Resized to "+eb.width+"x"+eb.height,ea);return eb}return ea}function ce(dg){return fK.isPowerOfTwo(dg.width)&&fK.isPowerOfTwo(dg.height)}function cd(ea,dg){return ea.generateMipmaps&&dg&&1003!==ea.minFilter&&1006!==ea.minFilter}function bf(dg){return 1003===dg||1004===dg||1005===dg?df.NEAREST:df.LINEAR}function bg(dg){dg=dg.target;dg.removeEventListener("dispose",bg);df:{var ea=dc.get(dg);if(dg.image&&ea.__image__webglTextureCube){df.deleteTexture(ea.__image__webglTextureCube)}else{if(void 0===ea.__webglInit){break df}df.deleteTexture(ea.__webglTexture)}dc.remove(dg)}cg.textures--}function bd(dg){dg=dg.target;dg.removeEventListener("dispose",bd);var eb=dc.get(dg),ea=dc.get(dg.texture);if(dg){void 0!==ea.__webglTexture&&df.deleteTexture(ea.__webglTexture);dg.depthTexture&&dg.depthTexture.dispose();if(dg.isWebGLRenderTargetCube){for(ea=0;6>ea;ea++){df.deleteFramebuffer(eb.__webglFramebuffer[ea]),eb.__webglDepthbuffer&&df.deleteRenderbuffer(eb.__webglDepthbuffer[ea])}}else{df.deleteFramebuffer(eb.__webglFramebuffer),eb.__webglDepthbuffer&&df.deleteRenderbuffer(eb.__webglDepthbuffer)}dc.remove(dg.texture);dc.remove(dg)}cg.textures--}function be(ed,ea){var fa=dc.get(ed);if(0<ed.version&&fa.__version!==ed.version){var dg=ed.image;if(void 0===dg){console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",ed)}else{if(!1===dg.complete){console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",ed)}else{void 0===fa.__webglInit&&(fa.__webglInit=!0,ed.addEventListener("dispose",bg),fa.__webglTexture=df.createTexture(),cg.textures++);dd.activeTexture(df.TEXTURE0+ea);dd.bindTexture(df.TEXTURE_2D,fa.__webglTexture);df.pixelStorei(df.UNPACK_FLIP_Y_WEBGL,ed.flipY);df.pixelStorei(df.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ed.premultiplyAlpha);df.pixelStorei(df.UNPACK_ALIGNMENT,ed.unpackAlignment);var ef=cf(ed.image,db.maxTextureSize);(1001!==ed.wrapS||1001!==ed.wrapT||1003!==ed.minFilter&&1006!==ed.minFilter)&&!1===ce(ef)&&(ea=ef,ea instanceof HTMLImageElement||ea instanceof HTMLCanvasElement?(dg=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),dg.width=fK.nearestPowerOfTwo(ea.width),dg.height=fK.nearestPowerOfTwo(ea.height),dg.getContext("2d").drawImage(ea,0,0,dg.width,dg.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+ea.width+"x"+ea.height+"). Resized to "+dg.width+"x"+dg.height,ea),ef=dg):ef=ea);ea=ce(ef);var dg=da.convert(ed.format),eb=da.convert(ed.type);cc(df.TEXTURE_2D,ed,ea);var ec=ed.mipmaps;if(ed.isDepthTexture){ec=df.DEPTH_COMPONENT;if(1015===ed.type){if(!bb){throw Error("Float Depth Texture only supported in WebGL2.0")}ec=df.DEPTH_COMPONENT32F}else{bb&&(ec=df.DEPTH_COMPONENT16)}1026===ed.format&&ec===df.DEPTH_COMPONENT&&1012!==ed.type&&1014!==ed.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ed.type=1012,eb=da.convert(ed.type));1027===ed.format&&(ec=df.DEPTH_STENCIL,1020!==ed.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ed.type=1020,eb=da.convert(ed.type)));dd.texImage2D(df.TEXTURE_2D,0,ec,ef.width,ef.height,0,dg,eb,null)}else{if(ed.isDataTexture){if(0<ec.length&&ea){for(var eg=0,ee=ec.length;eg<ee;eg++){ef=ec[eg],dd.texImage2D(df.TEXTURE_2D,eg,dg,ef.width,ef.height,0,dg,eb,ef.data)}ed.generateMipmaps=!1}else{dd.texImage2D(df.TEXTURE_2D,0,dg,ef.width,ef.height,0,dg,eb,ef.data)}}else{if(ed.isCompressedTexture){for(eg=0,ee=ec.length;eg<ee;eg++){ef=ec[eg],1023!==ed.format&&1022!==ed.format?-1<dd.getCompressedTextureFormats().indexOf(dg)?dd.compressedTexImage2D(df.TEXTURE_2D,eg,dg,ef.width,ef.height,0,ef.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):dd.texImage2D(df.TEXTURE_2D,eg,dg,ef.width,ef.height,0,dg,eb,ef.data)}}else{if(0<ec.length&&ea){eg=0;for(ee=ec.length;eg<ee;eg++){ef=ec[eg],dd.texImage2D(df.TEXTURE_2D,eg,dg,dg,eb,ef)}ed.generateMipmaps=!1}else{dd.texImage2D(df.TEXTURE_2D,0,dg,dg,eb,ef)}}}}cd(ed,ea)&&df.generateMipmap(df.TEXTURE_2D);fa.__version=ed.version;if(ed.onUpdate){ed.onUpdate(ed)}return}}}dd.activeTexture(df.TEXTURE0+ea);dd.bindTexture(df.TEXTURE_2D,fa.__webglTexture)}function cc(eb,ea,dg){dg?(df.texParameteri(eb,df.TEXTURE_WRAP_S,da.convert(ea.wrapS)),df.texParameteri(eb,df.TEXTURE_WRAP_T,da.convert(ea.wrapT)),df.texParameteri(eb,df.TEXTURE_MAG_FILTER,da.convert(ea.magFilter)),df.texParameteri(eb,df.TEXTURE_MIN_FILTER,da.convert(ea.minFilter))):(df.texParameteri(eb,df.TEXTURE_WRAP_S,df.CLAMP_TO_EDGE),df.texParameteri(eb,df.TEXTURE_WRAP_T,df.CLAMP_TO_EDGE),1001===ea.wrapS&&1001===ea.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",ea),df.texParameteri(eb,df.TEXTURE_MAG_FILTER,bf(ea.magFilter)),df.texParameteri(eb,df.TEXTURE_MIN_FILTER,bf(ea.minFilter)),1003!==ea.minFilter&&1006!==ea.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",ea));!(dg=de.get("EXT_texture_filter_anisotropic"))||1015===ea.type&&null===de.get("OES_texture_float_linear")||1016===ea.type&&null===de.get("OES_texture_half_float_linear")||!(1<ea.anisotropy||dc.get(ea).__currentAnisotropy)||(df.texParameterf(eb,dg.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ea.anisotropy,db.getMaxAnisotropy())),dc.get(ea).__currentAnisotropy=ea.anisotropy)}function cb(dg,ee,ed,ec){var ea=da.convert(ee.texture.format),eb=da.convert(ee.texture.type);dd.texImage2D(ec,0,ea,ee.width,ee.height,0,ea,eb,null);df.bindFramebuffer(df.FRAMEBUFFER,dg);df.framebufferTexture2D(df.FRAMEBUFFER,ed,ec,dc.get(ee.texture).__webglTexture,0);df.bindFramebuffer(df.FRAMEBUFFER,null)}function bc(dg,ea){df.bindRenderbuffer(df.RENDERBUFFER,dg);ea.depthBuffer&&!ea.stencilBuffer?(df.renderbufferStorage(df.RENDERBUFFER,df.DEPTH_COMPONENT16,ea.width,ea.height),df.framebufferRenderbuffer(df.FRAMEBUFFER,df.DEPTH_ATTACHMENT,df.RENDERBUFFER,dg)):ea.depthBuffer&&ea.stencilBuffer?(df.renderbufferStorage(df.RENDERBUFFER,df.DEPTH_STENCIL,ea.width,ea.height),df.framebufferRenderbuffer(df.FRAMEBUFFER,df.DEPTH_STENCIL_ATTACHMENT,df.RENDERBUFFER,dg)):df.renderbufferStorage(df.RENDERBUFFER,df.RGBA4,ea.width,ea.height);df.bindRenderbuffer(df.RENDERBUFFER,null)}var bb="undefined"!==typeof WebGL2RenderingContext&&df instanceof WebGL2RenderingContext;this.setTexture2D=be;this.setTextureCube=function(ef,ea){var fe=dc.get(ef);if(6===ef.image.length){if(0<ef.version&&fe.__version!==ef.version){fe.__image__webglTextureCube||(ef.addEventListener("dispose",bg),fe.__image__webglTextureCube=df.createTexture(),cg.textures++);dd.activeTexture(df.TEXTURE0+ea);dd.bindTexture(df.TEXTURE_CUBE_MAP,fe.__image__webglTextureCube);df.pixelStorei(df.UNPACK_FLIP_Y_WEBGL,ef.flipY);ea=ef&&ef.isCompressedTexture;for(var dg=ef.image[0]&&ef.image[0].isDataTexture,fc=[],ec=0;6>ec;ec++){fc[ec]=ea||dg?dg?ef.image[ec].image:ef.image[ec]:cf(ef.image[ec],db.maxCubemapSize)}var fd=ce(fc[0]),eg=da.convert(ef.format),eb=da.convert(ef.type);cc(df.TEXTURE_CUBE_MAP,ef,fd);for(ec=0;6>ec;ec++){if(ea){for(var ee,fb=fc[ec].mipmaps,fa=0,ed=fb.length;fa<ed;fa++){ee=fb[fa],1023!==ef.format&&1022!==ef.format?-1<dd.getCompressedTextureFormats().indexOf(eg)?dd.compressedTexImage2D(df.TEXTURE_CUBE_MAP_POSITIVE_X+ec,fa,eg,ee.width,ee.height,0,ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):dd.texImage2D(df.TEXTURE_CUBE_MAP_POSITIVE_X+ec,fa,eg,ee.width,ee.height,0,eg,eb,ee.data)}}else{dg?dd.texImage2D(df.TEXTURE_CUBE_MAP_POSITIVE_X+ec,0,eg,fc[ec].width,fc[ec].height,0,eg,eb,fc[ec].data):dd.texImage2D(df.TEXTURE_CUBE_MAP_POSITIVE_X+ec,0,eg,eg,eb,fc[ec])}}cd(ef,fd)&&df.generateMipmap(df.TEXTURE_CUBE_MAP);fe.__version=ef.version;if(ef.onUpdate){ef.onUpdate(ef)}}else{dd.activeTexture(df.TEXTURE0+ea),dd.bindTexture(df.TEXTURE_CUBE_MAP,fe.__image__webglTextureCube)}}};this.setTextureCubeDynamic=function(dg,ea){dd.activeTexture(df.TEXTURE0+ea);dd.bindTexture(df.TEXTURE_CUBE_MAP,dc.get(dg).__webglTexture)};this.setupRenderTarget=function(dg){var ee=dc.get(dg),ec=dc.get(dg.texture);dg.addEventListener("dispose",bd);ec.__webglTexture=df.createTexture();cg.textures++;var ea=!0===dg.isWebGLRenderTargetCube,ed=ce(dg);if(ea){ee.__webglFramebuffer=[];for(var eb=0;6>eb;eb++){ee.__webglFramebuffer[eb]=df.createFramebuffer()}}else{ee.__webglFramebuffer=df.createFramebuffer()}if(ea){dd.bindTexture(df.TEXTURE_CUBE_MAP,ec.__webglTexture);cc(df.TEXTURE_CUBE_MAP,dg.texture,ed);for(eb=0;6>eb;eb++){cb(ee.__webglFramebuffer[eb],dg,df.COLOR_ATTACHMENT0,df.TEXTURE_CUBE_MAP_POSITIVE_X+eb)}cd(dg.texture,ed)&&df.generateMipmap(df.TEXTURE_CUBE_MAP);dd.bindTexture(df.TEXTURE_CUBE_MAP,null)}else{dd.bindTexture(df.TEXTURE_2D,ec.__webglTexture),cc(df.TEXTURE_2D,dg.texture,ed),cb(ee.__webglFramebuffer,dg,df.COLOR_ATTACHMENT0,df.TEXTURE_2D),cd(dg.texture,ed)&&df.generateMipmap(df.TEXTURE_2D),dd.bindTexture(df.TEXTURE_2D,null)}if(dg.depthBuffer){ee=dc.get(dg);ec=!0===dg.isWebGLRenderTargetCube;if(dg.depthTexture){if(ec){throw Error("target.depthTexture not supported in Cube render targets")}if(dg&&dg.isWebGLRenderTargetCube){throw Error("Depth Texture with cube render targets is not supported")}df.bindFramebuffer(df.FRAMEBUFFER,ee.__webglFramebuffer);if(!dg.depthTexture||!dg.depthTexture.isDepthTexture){throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture")}dc.get(dg.depthTexture).__webglTexture&&dg.depthTexture.image.width===dg.width&&dg.depthTexture.image.height===dg.height||(dg.depthTexture.image.width=dg.width,dg.depthTexture.image.height=dg.height,dg.depthTexture.needsUpdate=!0);be(dg.depthTexture,0);ee=dc.get(dg.depthTexture).__webglTexture;if(1026===dg.depthTexture.format){df.framebufferTexture2D(df.FRAMEBUFFER,df.DEPTH_ATTACHMENT,df.TEXTURE_2D,ee,0)}else{if(1027===dg.depthTexture.format){df.framebufferTexture2D(df.FRAMEBUFFER,df.DEPTH_STENCIL_ATTACHMENT,df.TEXTURE_2D,ee,0)}else{throw Error("Unknown depthTexture format")}}}else{if(ec){for(ee.__webglDepthbuffer=[],ec=0;6>ec;ec++){df.bindFramebuffer(df.FRAMEBUFFER,ee.__webglFramebuffer[ec]),ee.__webglDepthbuffer[ec]=df.createRenderbuffer(),bc(ee.__webglDepthbuffer[ec],dg)}}else{df.bindFramebuffer(df.FRAMEBUFFER,ee.__webglFramebuffer),ee.__webglDepthbuffer=df.createRenderbuffer(),bc(ee.__webglDepthbuffer,dg)}}df.bindFramebuffer(df.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(dg){var eb=dg.texture,ea=ce(dg);cd(eb,ea)&&(dg=dg.isWebGLRenderTargetCube?df.TEXTURE_CUBE_MAP:df.TEXTURE_2D,eb=dc.get(eb).__webglTexture,dd.bindTexture(dg,eb),df.generateMipmap(dg),dd.bindTexture(dg,null))}}function dD(){var bb={};return{get:function(bc){bc=bc.uuid;var bd=bb[bc];void 0===bd&&(bd={},bb[bc]=bd);return bd},remove:function(bc){delete bb[bc.uuid]},clear:function(){bb={}}}}function dt(gD,gg,gf){function ge(gF,gJ,gI){var gH=new Uint8Array(4),gG=gD.createTexture();gD.bindTexture(gF,gG);gD.texParameteri(gF,gD.TEXTURE_MIN_FILTER,gD.NEAREST);gD.texParameteri(gF,gD.TEXTURE_MAG_FILTER,gD.NEAREST);for(gF=0;gF<gI;gF++){gD.texImage2D(gJ+gF,0,gD.RGBA,1,1,0,gD.RGBA,gD.UNSIGNED_BYTE,gH)}return gG}function gd(gF){!0!==df[gF]&&(gD.enable(gF),df[gF]=!0)}function gc(gF){!1!==df[gF]&&(gD.disable(gF),df[gF]=!1)}function gb(gF,gM,gJ,gI,gG,gH,gL,gK){0!==gF?gd(gD.BLEND):gc(gD.BLEND);if(5!==gF){if(gF!==cg||gK!==ce){switch(gF){case 2:gK?(gD.blendEquationSeparate(gD.FUNC_ADD,gD.FUNC_ADD),gD.blendFuncSeparate(gD.ONE,gD.ONE,gD.ONE,gD.ONE)):(gD.blendEquation(gD.FUNC_ADD),gD.blendFunc(gD.SRC_ALPHA,gD.ONE));break;case 3:gK?(gD.blendEquationSeparate(gD.FUNC_ADD,gD.FUNC_ADD),gD.blendFuncSeparate(gD.ZERO,gD.ZERO,gD.ONE_MINUS_SRC_COLOR,gD.ONE_MINUS_SRC_ALPHA)):(gD.blendEquation(gD.FUNC_ADD),gD.blendFunc(gD.ZERO,gD.ONE_MINUS_SRC_COLOR));break;case 4:gK?(gD.blendEquationSeparate(gD.FUNC_ADD,gD.FUNC_ADD),gD.blendFuncSeparate(gD.ZERO,gD.SRC_COLOR,gD.ZERO,gD.SRC_ALPHA)):(gD.blendEquation(gD.FUNC_ADD),gD.blendFunc(gD.ZERO,gD.SRC_COLOR));break;default:gK?(gD.blendEquationSeparate(gD.FUNC_ADD,gD.FUNC_ADD),gD.blendFuncSeparate(gD.ONE,gD.ONE_MINUS_SRC_ALPHA,gD.ONE,gD.ONE_MINUS_SRC_ALPHA)):(gD.blendEquationSeparate(gD.FUNC_ADD,gD.FUNC_ADD),gD.blendFuncSeparate(gD.SRC_ALPHA,gD.ONE_MINUS_SRC_ALPHA,gD.ONE,gD.ONE_MINUS_SRC_ALPHA))}}dd=dc=gE=eb=ee=ea=null}else{gG=gG||gM;gH=gH||gJ;gL=gL||gI;if(gM!==ea||gG!==gE){gD.blendEquationSeparate(gf.convert(gM),gf.convert(gG)),ea=gM,gE=gG}if(gJ!==ee||gI!==eb||gH!==dc||gL!==dd){gD.blendFuncSeparate(gf.convert(gJ),gf.convert(gI),gf.convert(gH),gf.convert(gL)),ee=gJ,eb=gI,dc=gH,dd=gL}}cg=gF;ce=gK}function fg(gF){db!==gF&&(gF?gD.frontFace(gD.CW):gD.frontFace(gD.CCW),db=gF)}function ff(gF){0!==gF?(gd(gD.CULL_FACE),gF!==dg&&(1===gF?gD.cullFace(gD.BACK):2===gF?gD.cullFace(gD.FRONT):gD.cullFace(gD.FRONT_AND_BACK))):gc(gD.CULL_FACE);dg=gF}function fe(gF,gH,gG){if(gF){if(gd(gD.POLYGON_OFFSET_FILL),bc!==gH||cc!==gG){gD.polygonOffset(gH,gG),bc=gH,cc=gG}}else{gc(gD.POLYGON_OFFSET_FILL)}}function fa(gF){void 0===gF&&(gF=gD.TEXTURE0+bg-1);cd!==gF&&(gD.activeTexture(gF),cd=gF)}var fb=new function(){var gF=!1,gI=new fJ,gH=null,gG=new fJ(0,0,0,0);return{setMask:function(gJ){gH===gJ||gF||(gD.colorMask(gJ,gJ,gJ,gJ),gH=gJ)},setLocked:function(gJ){gF=gJ},setClear:function(gJ,gN,gM,gL,gK){!0===gK&&(gJ*=gL,gN*=gL,gM*=gL);gI.set(gJ,gN,gM,gL);!1===gG.equals(gI)&&(gD.clearColor(gJ,gN,gM,gL),gG.copy(gI))},reset:function(){gF=!1;gH=null;gG.set(-1,0,0,0)}}},ef=new function(){var gF=!1,gI=null,gH=null,gG=null;return{setTest:function(gJ){gJ?gd(gD.DEPTH_TEST):gc(gD.DEPTH_TEST)},setMask:function(gJ){gI===gJ||gF||(gD.depthMask(gJ),gI=gJ)},setFunc:function(gJ){if(gH!==gJ){if(gJ){switch(gJ){case 0:gD.depthFunc(gD.NEVER);break;case 1:gD.depthFunc(gD.ALWAYS);break;case 2:gD.depthFunc(gD.LESS);break;case 3:gD.depthFunc(gD.LEQUAL);break;case 4:gD.depthFunc(gD.EQUAL);break;case 5:gD.depthFunc(gD.GEQUAL);break;case 6:gD.depthFunc(gD.GREATER);break;case 7:gD.depthFunc(gD.NOTEQUAL);break;default:gD.depthFunc(gD.LEQUAL)}}else{gD.depthFunc(gD.LEQUAL)}gH=gJ}},setLocked:function(gJ){gF=gJ},setClear:function(gJ){gG!==gJ&&(gD.clearDepth(gJ),gG=gJ)},reset:function(){gF=!1;gG=gH=gI=null}}},eg=new function(){var gN=!1,gM=null,gL=null,gK=null,gJ=null,gH=null,gI=null,gG=null,gF=null;return{setTest:function(gO){gO?gd(gD.STENCIL_TEST):gc(gD.STENCIL_TEST)},setMask:function(gO){gM===gO||gN||(gD.stencilMask(gO),gM=gO)},setFunc:function(gO,gQ,gP){if(gL!==gO||gK!==gQ||gJ!==gP){gD.stencilFunc(gO,gQ,gP),gL=gO,gK=gQ,gJ=gP}},setOp:function(gO,gQ,gP){if(gH!==gO||gI!==gQ||gG!==gP){gD.stencilOp(gO,gQ,gP),gH=gO,gI=gQ,gG=gP}},setLocked:function(gO){gN=gO},setClear:function(gO){gF!==gO&&(gD.clearStencil(gO),gF=gO)},reset:function(){gN=!1;gF=gG=gI=gH=gJ=gK=gL=gM=null}}},fd=gD.getParameter(gD.MAX_VERTEX_ATTRIBS),fc=new Uint8Array(fd),ed=new Uint8Array(fd),ec=new Uint8Array(fd),df={},cf=null,de=null,cg=null,ea=null,ee=null,eb=null,gE=null,dc=null,dd=null,ce=!1,db=null,dg=null,cb=null,bc=null,cc=null,bg=gD.getParameter(gD.MAX_COMBINED_TEXTURE_IMAGE_UNITS),fd=parseFloat(/^WebGL\ ([0-9])/.exec(gD.getParameter(gD.VERSION))[1]),be=1<=parseFloat(fd),cd=null,bd={},bf=new fJ,da=new fJ,bb={};bb[gD.TEXTURE_2D]=ge(gD.TEXTURE_2D,gD.TEXTURE_2D,1);bb[gD.TEXTURE_CUBE_MAP]=ge(gD.TEXTURE_CUBE_MAP,gD.TEXTURE_CUBE_MAP_POSITIVE_X,6);fb.setClear(0,0,0,1);ef.setClear(1);eg.setClear(0);gd(gD.DEPTH_TEST);ef.setFunc(3);fg(!1);ff(1);gd(gD.CULL_FACE);gd(gD.BLEND);gb(1);return{buffers:{color:fb,depth:ef,stencil:eg},initAttributes:function(){for(var gG=0,gF=fc.length;gG<gF;gG++){fc[gG]=0}},enableAttribute:function(gF){fc[gF]=1;0===ed[gF]&&(gD.enableVertexAttribArray(gF),ed[gF]=1);0!==ec[gF]&&(gg.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(gF,0),ec[gF]=0)},enableAttributeAndDivisor:function(gG,gF){fc[gG]=1;0===ed[gG]&&(gD.enableVertexAttribArray(gG),ed[gG]=1);ec[gG]!==gF&&(gg.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(gG,gF),ec[gG]=gF)},disableUnusedAttributes:function(){for(var gF=0,gG=ed.length;gF!==gG;++gF){ed[gF]!==fc[gF]&&(gD.disableVertexAttribArray(gF),ed[gF]=0)}},enable:gd,disable:gc,getCompressedTextureFormats:function(){if(null===cf&&(cf=[],gg.get("WEBGL_compressed_texture_pvrtc")||gg.get("WEBGL_compressed_texture_s3tc")||gg.get("WEBGL_compressed_texture_etc1"))){for(var gG=gD.getParameter(gD.COMPRESSED_TEXTURE_FORMATS),gF=0;gF<gG.length;gF++){cf.push(gG[gF])}}return cf},useProgram:function(gF){return de!==gF?(gD.useProgram(gF),de=gF,!0):!1},setBlending:gb,setMaterial:function(gF){2===gF.side?gc(gD.CULL_FACE):gd(gD.CULL_FACE);fg(1===gF.side);!0===gF.transparent?gb(gF.blending,gF.blendEquation,gF.blendSrc,gF.blendDst,gF.blendEquationAlpha,gF.blendSrcAlpha,gF.blendDstAlpha,gF.premultipliedAlpha):gb(0);ef.setFunc(gF.depthFunc);ef.setTest(gF.depthTest);ef.setMask(gF.depthWrite);fb.setMask(gF.colorWrite);fe(gF.polygonOffset,gF.polygonOffsetFactor,gF.polygonOffsetUnits)},setFlipSided:fg,setCullFace:ff,setLineWidth:function(gF){gF!==cb&&(be&&gD.lineWidth(gF),cb=gF)},setPolygonOffset:fe,setScissorTest:function(gF){gF?gd(gD.SCISSOR_TEST):gc(gD.SCISSOR_TEST)},activeTexture:fa,bindTexture:function(gF,gH){null===cd&&fa();var gG=bd[cd];void 0===gG&&(gG={type:void 0,texture:void 0},bd[cd]=gG);if(gG.type!==gF||gG.texture!==gH){gD.bindTexture(gF,gH||bb[gF]),gG.type=gF,gG.texture=gH}},compressedTexImage2D:function(){try{gD.compressedTexImage2D.apply(gD,arguments)}catch(gF){console.error("THREE.WebGLState:",gF)}},texImage2D:function(){try{gD.texImage2D.apply(gD,arguments)}catch(gF){console.error("THREE.WebGLState:",gF)}},scissor:function(gF){!1===bf.equals(gF)&&(gD.scissor(gF.x,gF.y,gF.z,gF.w),bf.copy(gF))},viewport:function(gF){!1===da.equals(gF)&&(gD.viewport(gF.x,gF.y,gF.z,gF.w),da.copy(gF))},reset:function(){for(var gF=0;gF<ed.length;gF++){1===ed[gF]&&(gD.disableVertexAttribArray(gF),ed[gF]=0)}df={};cd=cf=null;bd={};dg=db=cg=de=null;fb.reset();ef.reset();eg.reset()}}}function c8(dc,db,da){function cg(de){if("highp"===de){if(0<dc.getShaderPrecisionFormat(dc.VERTEX_SHADER,dc.HIGH_FLOAT).precision&&0<dc.getShaderPrecisionFormat(dc.FRAGMENT_SHADER,dc.HIGH_FLOAT).precision){return"highp"}de="mediump"}return"mediump"===de&&0<dc.getShaderPrecisionFormat(dc.VERTEX_SHADER,dc.MEDIUM_FLOAT).precision&&0<dc.getShaderPrecisionFormat(dc.FRAGMENT_SHADER,dc.MEDIUM_FLOAT).precision?"mediump":"lowp"}var cf,ce=void 0!==da.precision?da.precision:"highp",cd=cg(ce);cd!==ce&&(console.warn("THREE.WebGLRenderer:",ce,"not supported, using",cd,"instead."),ce=cd);da=!0===da.logarithmicDepthBuffer&&!!db.get("EXT_frag_depth");var cd=dc.getParameter(dc.MAX_TEXTURE_IMAGE_UNITS),cc=dc.getParameter(dc.MAX_VERTEX_TEXTURE_IMAGE_UNITS),cb=dc.getParameter(dc.MAX_TEXTURE_SIZE),bg=dc.getParameter(dc.MAX_CUBE_MAP_TEXTURE_SIZE),bc=dc.getParameter(dc.MAX_VERTEX_ATTRIBS),bd=dc.getParameter(dc.MAX_VERTEX_UNIFORM_VECTORS),dd=dc.getParameter(dc.MAX_VARYING_VECTORS),bb=dc.getParameter(dc.MAX_FRAGMENT_UNIFORM_VECTORS),bf=0<cc,be=!!db.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==cf){return cf}var de=db.get("EXT_texture_filter_anisotropic");return cf=null!==de?dc.getParameter(de.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:cg,precision:ce,logarithmicDepthBuffer:da,maxTextures:cd,maxVertexTextures:cc,maxTextureSize:cb,maxCubemapSize:bg,maxAttributes:bc,maxVertexUniforms:bd,maxVaryings:dd,maxFragmentUniforms:bb,vertexTextures:bf,floatFragmentTextures:be,floatVertexTextures:bf&&be}}function di(bb){dU.call(this);this.cameras=bb||[]}function cV(cg){function cf(){if(null!==cd&&cd.isPresenting){var db=cd.getEyeParameters("left"),dc=db.renderWidth,db=db.renderHeight;da=cg.getPixelRatio();bc=cg.getSize();cg.setDrawingBufferSize(2*dc,db,1)}else{ce.enabled&&cg.setDrawingBufferSize(bc.width,bc.height,da)}}var ce=this,cd=null,cc=null;"VRFrameData" in window&&(cc=new window.VRFrameData);var cb=new fN,bg=new fN,bf=new fN,be=new dU;be.bounds=new fJ(0,0,0.5,1);be.layers.enable(1);var bd=new dU;bd.bounds=new fJ(0.5,0,0.5,1);bd.layers.enable(2);var bb=new di([be,bd]);bb.layers.enable(1);bb.layers.enable(2);var bc,da;window.addEventListener("vrdisplaypresentchange",cf,!1);this.standing=this.enabled=!1;this.getDevice=function(){return cd};this.setDevice=function(db){void 0!==db&&(cd=db)};this.getCamera=function(dc){if(null===cd){return dc}cd.depthNear=dc.near;cd.depthFar=dc.far;cd.getFrameData(cc);var db=cc.pose;null!==db.position?dc.position.fromArray(db.position):dc.position.set(0,0,0);null!==db.orientation&&dc.quaternion.fromArray(db.orientation);dc.updateMatrixWorld();db=cd.stageParameters;this.standing&&db&&(bg.fromArray(db.sittingToStandingTransform),bf.getInverse(bg),dc.matrixWorld.multiply(bg),dc.matrixWorldInverse.multiply(bf));if(!1===cd.isPresenting){return dc}be.near=dc.near;bd.near=dc.near;be.far=dc.far;bd.far=dc.far;bb.matrixWorld.copy(dc.matrixWorld);bb.matrixWorldInverse.copy(dc.matrixWorldInverse);be.matrixWorldInverse.fromArray(cc.leftViewMatrix);bd.matrixWorldInverse.fromArray(cc.rightViewMatrix);this.standing&&db&&(be.matrixWorldInverse.multiply(bf),bd.matrixWorldInverse.multiply(bf));dc=dc.parent;null!==dc&&(cb.getInverse(dc.matrixWorld),be.matrixWorldInverse.multiply(cb),bd.matrixWorldInverse.multiply(cb));be.matrixWorld.getInverse(be.matrixWorldInverse);bd.matrixWorld.getInverse(bd.matrixWorldInverse);be.projectionMatrix.fromArray(cc.leftProjectionMatrix);bd.projectionMatrix.fromArray(cc.rightProjectionMatrix);bb.projectionMatrix.copy(be.projectionMatrix);dc=cd.getLayers();dc.length&&(dc=dc[0],null!==dc.leftBounds&&4===dc.leftBounds.length&&be.bounds.fromArray(dc.leftBounds),null!==dc.rightBounds&&4===dc.rightBounds.length&&bd.bounds.fromArray(dc.rightBounds));return bb};this.getStandingMatrix=function(){return bg};this.submitFrame=function(){cd&&cd.isPresenting&&cd.submitFrame()};this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",cf)}}function cD(bc){var bb={};return{get:function(be){if(void 0!==bb[be]){return bb[be]}switch(be){case"WEBGL_depth_texture":var bd=bc.getExtension("WEBGL_depth_texture")||bc.getExtension("MOZ_WEBGL_depth_texture")||bc.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":bd=bc.getExtension("EXT_texture_filter_anisotropic")||bc.getExtension("MOZ_EXT_texture_filter_anisotropic")||bc.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":bd=bc.getExtension("WEBGL_compressed_texture_s3tc")||bc.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||bc.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":bd=bc.getExtension("WEBGL_compressed_texture_pvrtc")||bc.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":bd=bc.getExtension("WEBGL_compressed_texture_etc1");break;default:bd=bc.getExtension(be)}null===bd&&console.warn("THREE.WebGLRenderer: "+be+" extension not supported.");return bb[be]=bd}}}function cr(){function ce(){bb.value!==cb&&(bb.value=cb,bb.needsUpdate=0<bg);cc.numPlanes=bg;cc.numIntersection=0}function cd(cg,cf,dd,dc){var db=null!==cg?cg.length:0,da=null;if(0!==db){da=bb.value;if(!0!==dc||null===da){dc=dd+4*db;cf=cf.matrixWorldInverse;bc.getNormalMatrix(cf);if(null===da||da.length<dc){da=new Float32Array(dc)}for(dc=0;dc!==db;++dc,dd+=4){bd.copy(cg[dc]).applyMatrix4(cf,bc),bd.normal.toArray(da,dd),da[dd+3]=bd.constant}}bb.value=da;bb.needsUpdate=!0}cc.numPlanes=db;return da}var cc=this,cb=null,bg=0,bf=!1,be=!1,bd=new gh,bc=new cl,bb={value:null,needsUpdate:!1};this.uniform=bb;this.numIntersection=this.numPlanes=0;this.init=function(cf,db,da){var cg=0!==cf.length||db||0!==bg||bf;bf=db;cb=cd(cf,da,0);bg=cf.length;return cg};this.beginShadows=function(){be=!0;cd(null)};this.endShadows=function(){be=!1;ce()};this.setState=function(df,da,cg,db,cf,de){if(!bf||null===df||0===df.length||be&&!cg){be?cd(null):ce()}else{cg=be?0:bg;var dd=4*cg,dc=cf.clippingState||null;bb.value=dc;dc=cd(df,db,dd,de);for(df=0;df!==dd;++df){dc[df]=cb[df]}cf.clippingState=dc;this.numIntersection=da?this.numPlanes:0;this.numPlanes+=cg}}}function dW(bc,bb){return{convert:function(be){if(1000===be){return bc.REPEAT}if(1001===be){return bc.CLAMP_TO_EDGE}if(1002===be){return bc.MIRRORED_REPEAT}if(1003===be){return bc.NEAREST}if(1004===be){return bc.NEAREST_MIPMAP_NEAREST}if(1005===be){return bc.NEAREST_MIPMAP_LINEAR}if(1006===be){return bc.LINEAR}if(1007===be){return bc.LINEAR_MIPMAP_NEAREST}if(1008===be){return bc.LINEAR_MIPMAP_LINEAR}if(1009===be){return bc.UNSIGNED_BYTE}if(1017===be){return bc.UNSIGNED_SHORT_4_4_4_4}if(1018===be){return bc.UNSIGNED_SHORT_5_5_5_1}if(1019===be){return bc.UNSIGNED_SHORT_5_6_5}if(1010===be){return bc.BYTE}if(1011===be){return bc.SHORT}if(1012===be){return bc.UNSIGNED_SHORT}if(1013===be){return bc.INT}if(1014===be){return bc.UNSIGNED_INT}if(1015===be){return bc.FLOAT}if(1016===be){var bd=bb.get("OES_texture_half_float");if(null!==bd){return bd.HALF_FLOAT_OES}}if(1021===be){return bc.ALPHA}if(1022===be){return bc.RGB}if(1023===be){return bc.RGBA}if(1024===be){return bc.LUMINANCE}if(1025===be){return bc.LUMINANCE_ALPHA}if(1026===be){return bc.DEPTH_COMPONENT}if(1027===be){return bc.DEPTH_STENCIL}if(100===be){return bc.FUNC_ADD}if(101===be){return bc.FUNC_SUBTRACT}if(102===be){return bc.FUNC_REVERSE_SUBTRACT}if(200===be){return bc.ZERO}if(201===be){return bc.ONE}if(202===be){return bc.SRC_COLOR}if(203===be){return bc.ONE_MINUS_SRC_COLOR}if(204===be){return bc.SRC_ALPHA}if(205===be){return bc.ONE_MINUS_SRC_ALPHA}if(206===be){return bc.DST_ALPHA}if(207===be){return bc.ONE_MINUS_DST_ALPHA}if(208===be){return bc.DST_COLOR}if(209===be){return bc.ONE_MINUS_DST_COLOR}if(210===be){return bc.SRC_ALPHA_SATURATE}if(2001===be||2002===be||2003===be||2004===be){if(bd=bb.get("WEBGL_compressed_texture_s3tc"),null!==bd){if(2001===be){return bd.COMPRESSED_RGB_S3TC_DXT1_EXT}if(2002===be){return bd.COMPRESSED_RGBA_S3TC_DXT1_EXT}if(2003===be){return bd.COMPRESSED_RGBA_S3TC_DXT3_EXT}if(2004===be){return bd.COMPRESSED_RGBA_S3TC_DXT5_EXT}}}if(2100===be||2101===be||2102===be||2103===be){if(bd=bb.get("WEBGL_compressed_texture_pvrtc"),null!==bd){if(2100===be){return bd.COMPRESSED_RGB_PVRTC_4BPPV1_IMG}if(2101===be){return bd.COMPRESSED_RGB_PVRTC_2BPPV1_IMG}if(2102===be){return bd.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG}if(2103===be){return bd.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}}}if(2151===be&&(bd=bb.get("WEBGL_compressed_texture_etc1"),null!==bd)){return bd.COMPRESSED_RGB_ETC1_WEBGL}if(103===be||104===be){if(bd=bb.get("EXT_blend_minmax"),null!==bd){if(103===be){return bd.MIN_EXT}if(104===be){return bd.MAX_EXT}}}return 1020===be&&(bd=bb.get("WEBGL_depth_texture"),null!==bd)?bd.UNSIGNED_INT_24_8_WEBGL:0}}}function b6(gD){function gg(){be=new cD(gZ);be.get("WEBGL_depth_texture");be.get("OES_texture_float");be.get("OES_texture_float_linear");be.get("OES_texture_half_float");be.get("OES_texture_half_float_linear");be.get("OES_standard_derivatives");be.get("ANGLE_instanced_arrays");be.get("OES_element_index_uint")&&(fU.MaxIndex=4294967296);bg=new dW(gZ,be);bc=new c8(gZ,be,gD);gG=new dt(gZ,be,bg);gG.scissor(gJ.copy(fe).multiplyScalar(gQ));gG.viewport(gK.copy(g7).multiplyScalar(gQ));cd=new dD;hf=new dP(gZ,be,gG,cd,bc,bg,cc);cg=new eC(gZ);hj=new b4(gZ,cg,cc);gE=new gi(hj,bb);cb=new cK(gZ);g0=new d1(gT,be,bc);g5=new cP;hd=new dm;ge=new d7(gT,gG,hj,gX);he=new cm(gZ,be,bb);g6=new cy(gZ,be,bb);g9=new fl(gT,gZ,gG,hf,bc);gV=new e2(gT,gZ,gG,hf,bc);gT.info.programs=g0.programs;gT.context=gZ;gT.capabilities=bc;gT.extensions=be;gT.properties=cd;gT.renderLists=hd;gT.state=gG}function gf(da){da.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");gN=!0}function gd(da){console.log("THREE.WebGLRenderer: Context Restored.");gN=!1;gg()}function gc(da){da=da.target;da.removeEventListener("dispose",gc);gb(da);cd.remove(da)}function gb(ea){var da=cd.get(ea).program;ea.program=void 0;void 0!==da&&g0.releaseProgram(da)}function fg(ea,da,fa){ea.render(function(ha){gT.renderBufferImmediate(ha,da,fa)})}function ff(da){null!==hg&&hg(da);(hb.getDevice()||window).requestAnimationFrame(ff)}function fd(hp,ho,hn){if(hp.visible){if(hp.layers.test(ho.layers)){if(hp.isLight){dg.push(hp),hp.castShadow&&dd.push(hp)}else{if(hp.isSprite){hp.frustumCulled&&!gF.intersectsSprite(hp)||g1.push(hp)}else{if(hp.isLensFlare){g2.push(hp)}else{if(hp.isImmediateRenderObject){hn&&hi.setFromMatrixPosition(hp.matrixWorld).applyMatrix4(hh),gP.push(hp,null,hp.material,hi.z,null)}else{if(hp.isMesh||hp.isLine||hp.isPoints){if(hp.isSkinnedMesh&&hp.skeleton.update(),!hp.frustumCulled||gF.intersectsObject(hp)){hn&&hi.setFromMatrixPosition(hp.matrixWorld).applyMatrix4(hh);var hm=gE.update(hp),hl=hp.material;if(Array.isArray(hl)){for(var hk=hm.groups,ha=0,fa=hk.length;ha<fa;ha++){var ea=hk[ha],da=hl[ea.materialIndex];da&&da.visible&&gP.push(hp,hm,da,hi.z,ea)}}else{hl.visible&&gP.push(hp,hm,hl,hi.z,null)}}}}}}}}hp=hp.children;ha=0;for(fa=hp.length;ha<fa;ha++){fd(hp[ha],ho,hn)}}}function fc(hs,hr,hq,hp){for(var ho=0,hn=hs.length;ho<hn;ho++){var hm=hs[ho],hl=hm.object,ha=hm.geometry,hk=void 0===hp?hm.material:hp,hm=hm.group;if(hq.isArrayCamera){gH=hq;for(var ea=hq.cameras,hu=0,da=ea.length;hu<da;hu++){var fa=ea[hu];if(hl.layers.test(fa.layers)){var ht=fa.bounds;gG.viewport(gK.set(ht.x*gL,ht.y*eg,ht.z*gL,ht.w*eg).multiplyScalar(gQ));ee(hl,hr,fa,ha,hk,hm)}}}else{gH=null,ee(hl,hr,hq,ha,hk,hm)}}}function ee(ea,da,hm,hl,hk,ha){ea.onBeforeRender(gT,da,hm,hl,hk,ha);ea.modelViewMatrix.multiplyMatrices(hm.matrixWorldInverse,ea.matrixWorld);ea.normalMatrix.getNormalMatrix(ea.modelViewMatrix);if(ea.isImmediateRenderObject){gG.setMaterial(hk);var fa=ec(hm,da.fog,hk,ea);gS="";fg(ea,fa,hk)}else{gT.renderBufferDirect(hm,da.fog,hl,hk,ea,ha)}ea.onAfterRender(gT,da,hm,hl,hk,ha)}function ef(fa,da,hm){var hl=cd.get(fa);hm=g0.getParameters(fa,g5.state,dd,da,hc.numPlanes,hc.numIntersection,hm);var hk=g0.getProgramCode(fa,hm),ha=hl.program,ea=!0;if(void 0===ha){fa.addEventListener("dispose",gc)}else{if(ha.code!==hk){gb(fa)}else{if(void 0!==hm.shaderID){return}ea=!1}}ea&&(hm.shaderID?(ha=d5[hm.shaderID],hl.shader={name:fa.type,uniforms:a9.clone(ha.uniforms),vertexShader:ha.vertexShader,fragmentShader:ha.fragmentShader}):hl.shader={name:fa.type,uniforms:fa.uniforms,vertexShader:fa.vertexShader,fragmentShader:fa.fragmentShader},fa.onBeforeCompile(hl.shader),ha=g0.acquireProgram(fa,hl.shader,hm,hk),hl.program=ha,fa.program=ha);hm=ha.getAttributes();if(fa.morphTargets){for(hk=fa.numSupportedMorphTargets=0;hk<gT.maxMorphTargets;hk++){0<=hm["morphTarget"+hk]&&fa.numSupportedMorphTargets++}}if(fa.morphNormals){for(hk=fa.numSupportedMorphNormals=0;hk<gT.maxMorphNormals;hk++){0<=hm["morphNormal"+hk]&&fa.numSupportedMorphNormals++}}hm=hl.shader.uniforms;if(!fa.isShaderMaterial&&!fa.isRawShaderMaterial||!0===fa.clipping){hl.numClippingPlanes=hc.numPlanes,hl.numIntersection=hc.numIntersection,hm.clippingPlanes=hc.uniform}hl.fog=da;hl.lightsHash=g5.state.hash;fa.lights&&(hm.ambientLightColor.value=g5.state.ambient,hm.directionalLights.value=g5.state.directional,hm.spotLights.value=g5.state.spot,hm.rectAreaLights.value=g5.state.rectArea,hm.pointLights.value=g5.state.point,hm.hemisphereLights.value=g5.state.hemi,hm.directionalShadowMap.value=g5.state.directionalShadowMap,hm.directionalShadowMatrix.value=g5.state.directionalShadowMatrix,hm.spotShadowMap.value=g5.state.spotShadowMap,hm.spotShadowMatrix.value=g5.state.spotShadowMatrix,hm.pointShadowMap.value=g5.state.pointShadowMap,hm.pointShadowMatrix.value=g5.state.pointShadowMatrix);fa=hl.program.getUniforms();fa=fA.seqWithValue(fa.seq,hm);hl.uniformsList=fa}function ec(hq,hp,ho,hn){gY=0;var hm=cd.get(ho);ce&&(dc||hq!==gO)&&hc.setState(ho.clippingPlanes,ho.clipIntersection,ho.clipShadows,hq,hm,hq===gO&&ho.id===gM);!1===ho.needsUpdate&&(void 0===hm.program?ho.needsUpdate=!0:ho.fog&&hm.fog!==hp?ho.needsUpdate=!0:ho.lights&&hm.lightsHash!==g5.state.hash?ho.needsUpdate=!0:void 0===hm.numClippingPlanes||hm.numClippingPlanes===hc.numPlanes&&hm.numIntersection===hc.numIntersection||(ho.needsUpdate=!0));ho.needsUpdate&&(ef(ho,hp,hn),ho.needsUpdate=!1);var hl=!1,hk=!1,ha=!1,ea=hm.program,fa=ea.getUniforms(),da=hm.shader.uniforms;gG.useProgram(ea.program)&&(ha=hk=hl=!0);ho.id!==gM&&(gM=ho.id,hk=!0);if(hl||hq!==gO){fa.setValue(gZ,"projectionMatrix",hq.projectionMatrix);bc.logarithmicDepthBuffer&&fa.setValue(gZ,"logDepthBufFC",2/(Math.log(hq.far+1)/Math.LN2));gO!==(gH||hq)&&(gO=gH||hq,ha=hk=!0);if(ho.isShaderMaterial||ho.isMeshPhongMaterial||ho.isMeshStandardMaterial||ho.envMap){hl=fa.map.cameraPosition,void 0!==hl&&hl.setValue(gZ,hi.setFromMatrixPosition(hq.matrixWorld))}(ho.isMeshPhongMaterial||ho.isMeshLambertMaterial||ho.isMeshBasicMaterial||ho.isMeshStandardMaterial||ho.isShaderMaterial||ho.skinning)&&fa.setValue(gZ,"viewMatrix",hq.matrixWorldInverse)}if(ho.skinning&&(fa.setOptional(gZ,hn,"bindMatrix"),fa.setOptional(gZ,hn,"bindMatrixInverse"),hq=hn.skeleton)){if(hl=hq.bones,bc.floatVertexTextures){if(void 0===hq.boneTexture){var hl=Math.sqrt(4*hl.length),hl=fK.nextPowerOfTwo(Math.ceil(hl)),hl=Math.max(hl,4),hs=new Float32Array(hl*hl*4);hs.set(hq.boneMatrices);var hr=new fY(hs,hl,hl,1023,1015);hq.boneMatrices=hs;hq.boneTexture=hr;hq.boneTextureSize=hl}fa.setValue(gZ,"boneTexture",hq.boneTexture);fa.setValue(gZ,"boneTextureSize",hq.boneTextureSize)}else{fa.setOptional(gZ,hq,"boneMatrices")}}hk&&(fa.setValue(gZ,"toneMappingExposure",gT.toneMappingExposure),fa.setValue(gZ,"toneMappingWhitePoint",gT.toneMappingWhitePoint),ho.lights&&(hk=ha,da.ambientLightColor.needsUpdate=hk,da.directionalLights.needsUpdate=hk,da.pointLights.needsUpdate=hk,da.spotLights.needsUpdate=hk,da.rectAreaLights.needsUpdate=hk,da.hemisphereLights.needsUpdate=hk),hp&&ho.fog&&(da.fogColor.value=hp.color,hp.isFog?(da.fogNear.value=hp.near,da.fogFar.value=hp.far):hp.isFogExp2&&(da.fogDensity.value=hp.density)),ho.isMeshBasicMaterial?ed(da,ho):ho.isMeshLambertMaterial?(ed(da,ho),ho.emissiveMap&&(da.emissiveMap.value=ho.emissiveMap)):ho.isMeshPhongMaterial?(ed(da,ho),ho.isMeshToonMaterial?(fb(da,ho),ho.gradientMap&&(da.gradientMap.value=ho.gradientMap)):fb(da,ho)):ho.isMeshStandardMaterial?(ed(da,ho),ho.isMeshPhysicalMaterial&&(da.clearCoat.value=ho.clearCoat,da.clearCoatRoughness.value=ho.clearCoatRoughness),da.roughness.value=ho.roughness,da.metalness.value=ho.metalness,ho.roughnessMap&&(da.roughnessMap.value=ho.roughnessMap),ho.metalnessMap&&(da.metalnessMap.value=ho.metalnessMap),ho.emissiveMap&&(da.emissiveMap.value=ho.emissiveMap),ho.bumpMap&&(da.bumpMap.value=ho.bumpMap,da.bumpScale.value=ho.bumpScale),ho.normalMap&&(da.normalMap.value=ho.normalMap,da.normalScale.value.copy(ho.normalScale)),ho.displacementMap&&(da.displacementMap.value=ho.displacementMap,da.displacementScale.value=ho.displacementScale,da.displacementBias.value=ho.displacementBias),ho.envMap&&(da.envMapIntensity.value=ho.envMapIntensity)):ho.isMeshDepthMaterial?(ed(da,ho),ho.displacementMap&&(da.displacementMap.value=ho.displacementMap,da.displacementScale.value=ho.displacementScale,da.displacementBias.value=ho.displacementBias)):ho.isMeshDistanceMaterial?(ed(da,ho),ho.displacementMap&&(da.displacementMap.value=ho.displacementMap,da.displacementScale.value=ho.displacementScale,da.displacementBias.value=ho.displacementBias),da.referencePosition.value.copy(ho.referencePosition),da.nearDistance.value=ho.nearDistance,da.farDistance.value=ho.farDistance):ho.isMeshNormalMaterial?(ed(da,ho),ho.bumpMap&&(da.bumpMap.value=ho.bumpMap,da.bumpScale.value=ho.bumpScale),ho.normalMap&&(da.normalMap.value=ho.normalMap,da.normalScale.value.copy(ho.normalScale)),ho.displacementMap&&(da.displacementMap.value=ho.displacementMap,da.displacementScale.value=ho.displacementScale,da.displacementBias.value=ho.displacementBias)):ho.isLineBasicMaterial?(da.diffuse.value=ho.color,da.opacity.value=ho.opacity,ho.isLineDashedMaterial&&(da.dashSize.value=ho.dashSize,da.totalSize.value=ho.dashSize+ho.gapSize,da.scale.value=ho.scale)):ho.isPointsMaterial?(da.diffuse.value=ho.color,da.opacity.value=ho.opacity,da.size.value=ho.size*gQ,da.scale.value=0.5*eg,da.map.value=ho.map,null!==ho.map&&(hp=ho.map.offset,ho=ho.map.repeat,da.offsetRepeat.value.set(hp.x,hp.y,ho.x,ho.y))):ho.isShadowMaterial&&(da.color.value=ho.color,da.opacity.value=ho.opacity),void 0!==da.ltcMat&&(da.ltcMat.value=fP.LTC_MAT_TEXTURE),void 0!==da.ltcMag&&(da.ltcMag.value=fP.LTC_MAG_TEXTURE),fA.upload(gZ,hm.uniformsList,da,gT));fa.setValue(gZ,"modelViewMatrix",hn.modelViewMatrix);fa.setValue(gZ,"normalMatrix",hn.normalMatrix);fa.setValue(gZ,"modelMatrix",hn.matrixWorld);return ea}function ed(ea,da){ea.opacity.value=da.opacity;da.color&&(ea.diffuse.value=da.color);da.emissive&&ea.emissive.value.copy(da.emissive).multiplyScalar(da.emissiveIntensity);da.map&&(ea.map.value=da.map);da.alphaMap&&(ea.alphaMap.value=da.alphaMap);da.specularMap&&(ea.specularMap.value=da.specularMap);da.envMap&&(ea.envMap.value=da.envMap,ea.flipEnvMap.value=da.envMap&&da.envMap.isCubeTexture?-1:1,ea.reflectivity.value=da.reflectivity,ea.refractionRatio.value=da.refractionRatio);da.lightMap&&(ea.lightMap.value=da.lightMap,ea.lightMapIntensity.value=da.lightMapIntensity);da.aoMap&&(ea.aoMap.value=da.aoMap,ea.aoMapIntensity.value=da.aoMapIntensity);if(da.map){var fa=da.map}else{da.specularMap?fa=da.specularMap:da.displacementMap?fa=da.displacementMap:da.normalMap?fa=da.normalMap:da.bumpMap?fa=da.bumpMap:da.roughnessMap?fa=da.roughnessMap:da.metalnessMap?fa=da.metalnessMap:da.alphaMap?fa=da.alphaMap:da.emissiveMap&&(fa=da.emissiveMap)}void 0!==fa&&(fa.isWebGLRenderTarget&&(fa=fa.texture),da=fa.offset,fa=fa.repeat,ea.offsetRepeat.value.set(da.x,da.y,fa.x,fa.y))}function fb(ea,da){ea.specular.value=da.specular;ea.shininess.value=Math.max(da.shininess,0.0001);da.emissiveMap&&(ea.emissiveMap.value=da.emissiveMap);da.bumpMap&&(ea.bumpMap.value=da.bumpMap,ea.bumpScale.value=da.bumpScale);da.normalMap&&(ea.normalMap.value=da.normalMap,ea.normalScale.value.copy(da.normalScale));da.displacementMap&&(ea.displacementMap.value=da.displacementMap,ea.displacementScale.value=da.displacementScale,ea.displacementBias.value=da.displacementBias)}console.log("THREE.WebGLRenderer","87");gD=gD||{};var eb=void 0!==gD.canvas?gD.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),df=void 0!==gD.context?gD.context:null,de=void 0!==gD.alpha?gD.alpha:!1,g4=void 0!==gD.depth?gD.depth:!0,gW=void 0!==gD.stencil?gD.stencil:!0,g3=void 0!==gD.antialias?gD.antialias:!1,gX=void 0!==gD.premultipliedAlpha?gD.premultipliedAlpha:!0,db=void 0!==gD.preserveDrawingBuffer?gD.preserveDrawingBuffer:!1,dg=[],dd=[],gP=null,g1=[],g2=[];this.domElement=eb;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var gT=this,gN=!1,g8=null,gR=null,gM=-1,gS="",gO=null,gH=null,gK=new fJ,gJ=new fJ,gI=null,gY=0,gL=eb.width,eg=eb.height,gQ=1,g7=new fJ(0,0,gL,eg),fe=new fJ(0,0,gL,eg),gU=!1,gF=new dG,hc=new cr,ce=!1,dc=!1,hh=new fN,hi=new ft,cc={geometries:0,textures:0},bb={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:bb,memory:cc,programs:null};try{de={alpha:de,depth:g4,stencil:gW,antialias:g3,premultipliedAlpha:gX,preserveDrawingBuffer:db};var gZ=df||eb.getContext("webgl",de)||eb.getContext("experimental-webgl",de);if(null===gZ){if(null!==eb.getContext("webgl")){throw"Error creating WebGL context with your selected attributes."}throw"Error creating WebGL context."}void 0===gZ.getShaderPrecisionFormat&&(gZ.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});eb.addEventListener("webglcontextlost",gf,!1);eb.addEventListener("webglcontextrestored",gd,!1)}catch(bd){console.error("THREE.WebGLRenderer: "+bd)}var be,bc,gG,cd,hf,cg,hj,gE,g5,g0,hd,ge,cb,he,g6,g9,gV,bg;gg();var hb=new cV(gT);this.vr=hb;var cf=new fm(gT,gE,bc.maxTextureSize);this.shadowMap=cf;this.getContext=function(){return gZ};this.getContextAttributes=function(){return gZ.getContextAttributes()};this.forceContextLoss=function(){var da=be.get("WEBGL_lose_context");da&&da.loseContext()};this.forceContextRestore=function(){var da=be.get("WEBGL_lose_context");da&&da.restoreContext()};this.getPixelRatio=function(){return gQ};this.setPixelRatio=function(da){void 0!==da&&(gQ=da,this.setSize(gL,eg,!1))};this.getSize=function(){return{width:gL,height:eg}};this.setSize=function(ea,da,ha){var fa=hb.getDevice();fa&&fa.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(gL=ea,eg=da,eb.width=ea*gQ,eb.height=da*gQ,!1!==ha&&(eb.style.width=ea+"px",eb.style.height=da+"px"),this.setViewport(0,0,ea,da))};this.getDrawingBufferSize=function(){return{width:gL*gQ,height:eg*gQ}};this.setDrawingBufferSize=function(ea,da,fa){gL=ea;eg=da;gQ=fa;eb.width=ea*fa;eb.height=da*fa;this.setViewport(0,0,ea,da)};this.setViewport=function(ea,da,ha,fa){g7.set(ea,eg-da-fa,ha,fa);gG.viewport(gK.copy(g7).multiplyScalar(gQ))};this.setScissor=function(ea,da,ha,fa){fe.set(ea,eg-da-fa,ha,fa);gG.scissor(gJ.copy(fe).multiplyScalar(gQ))};this.setScissorTest=function(da){gG.setScissorTest(gU=da)};this.getClearColor=ge.getClearColor;this.setClearColor=ge.setClearColor;this.getClearAlpha=ge.getClearAlpha;this.setClearAlpha=ge.setClearAlpha;this.clear=function(ea,da,ha){var fa=0;if(void 0===ea||ea){fa|=gZ.COLOR_BUFFER_BIT}if(void 0===da||da){fa|=gZ.DEPTH_BUFFER_BIT}if(void 0===ha||ha){fa|=gZ.STENCIL_BUFFER_BIT}gZ.clear(fa)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(ea,da,ha,fa){this.setRenderTarget(ea);this.clear(da,ha,fa)};this.dispose=function(){eb.removeEventListener("webglcontextlost",gf,!1);eb.removeEventListener("webglcontextrestored",gd,!1);hd.dispose();hb.dispose()};this.renderBufferImmediate=function(hp,ho,hn){gG.initAttributes();var hm=cd.get(hp);hp.hasPositions&&!hm.position&&(hm.position=gZ.createBuffer());hp.hasNormals&&!hm.normal&&(hm.normal=gZ.createBuffer());hp.hasUvs&&!hm.uv&&(hm.uv=gZ.createBuffer());hp.hasColors&&!hm.color&&(hm.color=gZ.createBuffer());ho=ho.getAttributes();hp.hasPositions&&(gZ.bindBuffer(gZ.ARRAY_BUFFER,hm.position),gZ.bufferData(gZ.ARRAY_BUFFER,hp.positionArray,gZ.DYNAMIC_DRAW),gG.enableAttribute(ho.position),gZ.vertexAttribPointer(ho.position,3,gZ.FLOAT,!1,0,0));if(hp.hasNormals){gZ.bindBuffer(gZ.ARRAY_BUFFER,hm.normal);if(!hn.isMeshPhongMaterial&&!hn.isMeshStandardMaterial&&!hn.isMeshNormalMaterial&&!0===hn.flatShading){for(var hl=0,hk=3*hp.count;hl<hk;hl+=9){var ha=hp.normalArray,fa=(ha[hl+0]+ha[hl+3]+ha[hl+6])/3,da=(ha[hl+1]+ha[hl+4]+ha[hl+7])/3,ea=(ha[hl+2]+ha[hl+5]+ha[hl+8])/3;ha[hl+0]=fa;ha[hl+1]=da;ha[hl+2]=ea;ha[hl+3]=fa;ha[hl+4]=da;ha[hl+5]=ea;ha[hl+6]=fa;ha[hl+7]=da;ha[hl+8]=ea}}gZ.bufferData(gZ.ARRAY_BUFFER,hp.normalArray,gZ.DYNAMIC_DRAW);gG.enableAttribute(ho.normal);gZ.vertexAttribPointer(ho.normal,3,gZ.FLOAT,!1,0,0)}hp.hasUvs&&hn.map&&(gZ.bindBuffer(gZ.ARRAY_BUFFER,hm.uv),gZ.bufferData(gZ.ARRAY_BUFFER,hp.uvArray,gZ.DYNAMIC_DRAW),gG.enableAttribute(ho.uv),gZ.vertexAttribPointer(ho.uv,2,gZ.FLOAT,!1,0,0));hp.hasColors&&0!==hn.vertexColors&&(gZ.bindBuffer(gZ.ARRAY_BUFFER,hm.color),gZ.bufferData(gZ.ARRAY_BUFFER,hp.colorArray,gZ.DYNAMIC_DRAW),gG.enableAttribute(ho.color),gZ.vertexAttribPointer(ho.color,3,gZ.FLOAT,!1,0,0));gG.disableUnusedAttributes();gZ.drawArrays(gZ.TRIANGLES,0,hp.count);hp.count=0};this.renderBufferDirect=function(hC,hB,hA,hz,hy,hx){gG.setMaterial(hz);var hw=ec(hC,hB,hz,hy);hC=hA.id+"_"+hw.id+"_"+(!0===hz.wireframe);var hv=!1;hC!==gS&&(gS=hC,hv=!0);hy.morphTargetInfluences&&(cb.update(hy,hA,hz,hw),hv=!0);var ht=hA.index,hu=hA.attributes.position;hB=1;!0===hz.wireframe&&(ht=hj.getWireframeAttribute(hA),hB=2);hC=he;if(null!==ht){var ho=cg.get(ht);hC=g6;hC.setIndex(ho)}if(hv){hv=void 0;if(hA&&hA.isInstancedBufferGeometry&&null===be.get("ANGLE_instanced_arrays")){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}else{void 0===hv&&(hv=0);gG.initAttributes();var hq=hA.attributes,hw=hw.getAttributes(),hm=hz.defaultAttributeValues;for(ha in hw){var hs=hw[ha];if(0<=hs){var hk=hq[ha];if(void 0!==hk){var hr=hk.normalized,fa=hk.itemSize,hl=cg.get(hk);if(void 0!==hl){var hp=hl.buffer,hn=hl.type,hl=hl.bytesPerElement;if(hk.isInterleavedBufferAttribute){var da=hk.data,ea=da.stride,hk=hk.offset;da&&da.isInstancedInterleavedBuffer?(gG.enableAttributeAndDivisor(hs,da.meshPerAttribute),void 0===hA.maxInstancedCount&&(hA.maxInstancedCount=da.meshPerAttribute*da.count)):gG.enableAttribute(hs);gZ.bindBuffer(gZ.ARRAY_BUFFER,hp);gZ.vertexAttribPointer(hs,fa,hn,hr,ea*hl,(hv*ea+hk)*hl)}else{hk.isInstancedBufferAttribute?(gG.enableAttributeAndDivisor(hs,hk.meshPerAttribute),void 0===hA.maxInstancedCount&&(hA.maxInstancedCount=hk.meshPerAttribute*hk.count)):gG.enableAttribute(hs),gZ.bindBuffer(gZ.ARRAY_BUFFER,hp),gZ.vertexAttribPointer(hs,fa,hn,hr,0,hv*fa*hl)}}}else{if(void 0!==hm&&(hr=hm[ha],void 0!==hr)){switch(hr.length){case 2:gZ.vertexAttrib2fv(hs,hr);break;case 3:gZ.vertexAttrib3fv(hs,hr);break;case 4:gZ.vertexAttrib4fv(hs,hr);break;default:gZ.vertexAttrib1fv(hs,hr)}}}}}gG.disableUnusedAttributes()}null!==ht&&gZ.bindBuffer(gZ.ELEMENT_ARRAY_BUFFER,ho.buffer)}ho=0;null!==ht?ho=ht.count:void 0!==hu&&(ho=hu.count);ht=hA.drawRange.start*hB;hu=null!==hx?hx.start*hB:0;var ha=Math.max(ht,hu);hx=Math.max(0,Math.min(ho,ht+hA.drawRange.count*hB,hu+(null!==hx?hx.count*hB:Infinity))-1-ha+1);if(0!==hx){if(hy.isMesh){if(!0===hz.wireframe){gG.setLineWidth(hz.wireframeLinewidth*(null===g8?gQ:1)),hC.setMode(gZ.LINES)}else{switch(hy.drawMode){case 0:hC.setMode(gZ.TRIANGLES);break;case 1:hC.setMode(gZ.TRIANGLE_STRIP);break;case 2:hC.setMode(gZ.TRIANGLE_FAN)}}}else{hy.isLine?(hz=hz.linewidth,void 0===hz&&(hz=1),gG.setLineWidth(hz*(null===g8?gQ:1)),hy.isLineSegments?hC.setMode(gZ.LINES):hy.isLineLoop?hC.setMode(gZ.LINE_LOOP):hC.setMode(gZ.LINE_STRIP)):hy.isPoints&&hC.setMode(gZ.POINTS)}hA&&hA.isInstancedBufferGeometry?0<hA.maxInstancedCount&&hC.renderInstances(hA,ha,hx):hC.render(ha,hx)}};this.compile=function(ea,da){dg.length=0;dd.length=0;ea.traverse(function(fa){fa.isLight&&(dg.push(fa),fa.castShadow&&dd.push(fa))});g5.setup(dg,dd,da);ea.traverse(function(fa){if(fa.material){if(Array.isArray(fa.material)){for(var ha=0;ha<fa.material.length;ha++){ef(fa.material[ha],ea.fog,fa)}}else{ef(fa.material,ea.fog,fa)}}})};var bf=!1,hg=null;this.animate=function(da){hg=da;bf||((hb.getDevice()||window).requestAnimationFrame(ff),bf=!0)};this.render=function(ea,da,hl,hk){if(!da||!da.isCamera){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")}else{if(!gN){gS="";gM=-1;gO=null;!0===ea.autoUpdate&&ea.updateMatrixWorld();null===da.parent&&da.updateMatrixWorld();hb.enabled&&(da=hb.getCamera(da));hh.multiplyMatrices(da.projectionMatrix,da.matrixWorldInverse);gF.setFromMatrix(hh);dg.length=0;dd.length=0;g1.length=0;g2.length=0;dc=this.localClippingEnabled;ce=hc.init(this.clippingPlanes,dc,da);gP=hd.get(ea,da);gP.init();fd(ea,da,gT.sortObjects);!0===gT.sortObjects&&gP.sort();ce&&hc.beginShadows();cf.render(dd,ea,da);g5.setup(dg,dd,da);ce&&hc.endShadows();bb.frame++;bb.calls=0;bb.vertices=0;bb.faces=0;bb.points=0;void 0===hl&&(hl=null);this.setRenderTarget(hl);ge.render(gP,ea,da,hk);hk=gP.opaque;var ha=gP.transparent;if(ea.overrideMaterial){var fa=ea.overrideMaterial;hk.length&&fc(hk,ea,da,fa);ha.length&&fc(ha,ea,da,fa)}else{hk.length&&fc(hk,ea,da),ha.length&&fc(ha,ea,da)}gV.render(g1,ea,da);g9.render(g2,ea,da,gK);hl&&hf.updateRenderTargetMipmap(hl);gG.buffers.depth.setTest(!0);gG.buffers.depth.setMask(!0);gG.buffers.color.setMask(!0);gG.setPolygonOffset(!1);hb.enabled&&hb.submitFrame()}}};this.setFaceCulling=function(ea,da){gG.setCullFace(ea);gG.setFlipSided(0===da)};this.allocTextureUnit=function(){var da=gY;da>=bc.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+da+" texture units while this GPU supports only "+bc.maxTextures);gY+=1;return da};this.setTexture2D=function(){var da=!1;return function(ea,fa){ea&&ea.isWebGLRenderTarget&&(da||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),da=!0),ea=ea.texture);hf.setTexture2D(ea,fa)}}();this.setTexture=function(){var da=!1;return function(ea,fa){da||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),da=!0);hf.setTexture2D(ea,fa)}}();this.setTextureCube=function(){var da=!1;return function(ea,fa){ea&&ea.isWebGLRenderTargetCube&&(da||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),da=!0),ea=ea.texture);ea&&ea.isCubeTexture||Array.isArray(ea.image)&&6===ea.image.length?hf.setTextureCube(ea,fa):hf.setTextureCubeDynamic(ea,fa)}}();this.getRenderTarget=function(){return g8};this.setRenderTarget=function(ea){(g8=ea)&&void 0===cd.get(ea).__webglFramebuffer&&hf.setupRenderTarget(ea);var da=null,fa=!1;ea?(da=cd.get(ea).__webglFramebuffer,ea.isWebGLRenderTargetCube&&(da=da[ea.activeCubeFace],fa=!0),gK.copy(ea.viewport),gJ.copy(ea.scissor),gI=ea.scissorTest):(gK.copy(g7).multiplyScalar(gQ),gJ.copy(fe).multiplyScalar(gQ),gI=gU);gR!==da&&(gZ.bindFramebuffer(gZ.FRAMEBUFFER,da),gR=da);gG.viewport(gK);gG.scissor(gJ);gG.setScissorTest(gI);fa&&(fa=cd.get(ea.texture),gZ.framebufferTexture2D(gZ.FRAMEBUFFER,gZ.COLOR_ATTACHMENT0,gZ.TEXTURE_CUBE_MAP_POSITIVE_X+ea.activeCubeFace,fa.__webglTexture,ea.activeMipMapLevel))};this.readRenderTargetPixels=function(hq,hp,ho,hn,hm,hl){if(hq&&hq.isWebGLRenderTarget){var hk=cd.get(hq).__webglFramebuffer;if(hk){var ha=!1;hk!==gR&&(gZ.bindFramebuffer(gZ.FRAMEBUFFER,hk),ha=!0);try{var ea=hq.texture,fa=ea.format,da=ea.type;1023!==fa&&bg.convert(fa)!==gZ.getParameter(gZ.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===da||bg.convert(da)===gZ.getParameter(gZ.IMPLEMENTATION_COLOR_READ_TYPE)||1015===da&&(be.get("OES_texture_float")||be.get("WEBGL_color_buffer_float"))||1016===da&&be.get("EXT_color_buffer_half_float")?gZ.checkFramebufferStatus(gZ.FRAMEBUFFER)===gZ.FRAMEBUFFER_COMPLETE?0<=hp&&hp<=hq.width-hn&&0<=ho&&ho<=hq.height-hm&&gZ.readPixels(hp,ho,hn,hm,bg.convert(fa),bg.convert(da),hl):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{ha&&gZ.bindFramebuffer(gZ.FRAMEBUFFER,gR)}}}else{console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}}function gt(bc,bb){this.name="";this.color=new fZ(bc);this.density=void 0!==bb?bb:0.00025}function f4(bc,bb,bd){this.name="";this.color=new fZ(bc);this.near=void 0!==bb?bb:1;this.far=void 0!==bd?bd:1000}function cY(){fs.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function bN(bc,bb,bf,be,bd){fs.call(this);this.lensFlares=[];this.positionScreen=new ft;this.customUpdateCallback=void 0;void 0!==bc&&this.add(bc,bb,bf,be,bd)}function bQ(bb){fM.call(this);this.type="SpriteMaterial";this.color=new fZ(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(bb)}function aF(bb){fs.call(this);this.type="Sprite";this.material=void 0!==bb?bb:new bQ}function gx(){fs.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function f9(bc,bb){bc=bc||[];this.bones=bc.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===bb){this.calculateInverses()}else{if(this.bones.length===bb.length){this.boneInverses=bb.slice(0)}else{for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],bc=0,bb=this.bones.length;bc<bb;bc++){this.boneInverses.push(new fN)}}}}function cG(){fs.call(this);this.type="Bone"}function cu(bc,bb){eO.call(this,bc,bb);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new fN;this.bindMatrixInverse=new fN;bc=this.initBones();bc=new f9(bc);this.bind(bc,this.matrixWorld);this.normalizeSkinWeights()}function fH(bb){fM.call(this);this.type="LineBasicMaterial";this.color=new fZ(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(bb)}function b3(bc,bb,bd){if(1===bd){return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new fG(bc,bb)}fs.call(this);this.type="Line";this.geometry=void 0!==bc?bc:new fU;this.material=void 0!==bb?bb:new fH({color:16777215*Math.random()})}function fG(bc,bb){b3.call(this,bc,bb);this.type="LineSegments"}function ci(bc,bb){b3.call(this,bc,bb);this.type="LineLoop"}function dl(bb){fM.call(this);this.type="PointsMaterial";this.color=new fZ(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(bb)}function fE(bc,bb){fs.call(this);this.type="Points";this.geometry=void 0!==bc?bc:new fU;this.material=void 0!==bb?bb:new dl({color:16777215*Math.random()})}function bU(){fs.call(this);this.type="Group"}function b0(cf,ce,cd,cc,cb,bg,bf,be,bd){function bc(){requestAnimationFrame(bc);cf.readyState>=cf.HAVE_CURRENT_DATA&&(bb.needsUpdate=!0)}fO.call(this,cf,ce,cd,cc,cb,bg,bf,be,bd);this.generateMipmaps=!1;var bb=this;bc()}function fq(cg,cf,ce,cd,cc,cb,bg,bf,be,bd,bb,bc){fO.call(this,null,cb,bg,bf,be,bd,cd,cc,bb,bc);this.image={width:cf,height:ce};this.mipmaps=cg;this.generateMipmaps=this.flipY=!1}function bB(ce,cd,cc,cb,bg,bf,be,bd,bc,bb){bb=void 0!==bb?bb:1026;if(1026!==bb&&1027!==bb){throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat")}void 0===cc&&1026===bb&&(cc=1012);void 0===cc&&1027===bb&&(cc=1020);fO.call(this,null,cb,bg,bf,be,bd,bb,cc,bc);this.image={width:ce,height:cd};this.magFilter=void 0!==be?be:1003;this.minFilter=void 0!==bd?bd:1003;this.generateMipmaps=this.flipY=!1}function e6(da){fU.call(this);this.type="WireframeGeometry";var cg=[],cf,ce,cd,cc=[0,0],cb={},bg=["a","b","c"];if(da&&da.isGeometry){var bf=da.faces;var be=0;for(ce=bf.length;be<ce;be++){var bc=bf[be];for(cf=0;3>cf;cf++){var bd=bc[bg[cf]];var db=bc[bg[(cf+1)%3]];cc[0]=Math.min(bd,db);cc[1]=Math.max(bd,db);bd=cc[0]+","+cc[1];void 0===cb[bd]&&(cb[bd]={index1:cc[0],index2:cc[1]})}}for(bd in cb){be=cb[bd],bg=da.vertices[be.index1],cg.push(bg.x,bg.y,bg.z),bg=da.vertices[be.index2],cg.push(bg.x,bg.y,bg.z)}}else{if(da&&da.isBufferGeometry){var bg=new ft;if(null!==da.index){bf=da.attributes.position;bc=da.index;var bb=da.groups;0===bb.length&&(bb=[{start:0,count:bc.count,materialIndex:0}]);da=0;for(cd=bb.length;da<cd;++da){for(be=bb[da],cf=be.start,ce=be.count,be=cf,ce=cf+ce;be<ce;be+=3){for(cf=0;3>cf;cf++){bd=bc.getX(be+cf),db=bc.getX(be+(cf+1)%3),cc[0]=Math.min(bd,db),cc[1]=Math.max(bd,db),bd=cc[0]+","+cc[1],void 0===cb[bd]&&(cb[bd]={index1:cc[0],index2:cc[1]})}}}for(bd in cb){be=cb[bd],bg.fromBufferAttribute(bf,be.index1),cg.push(bg.x,bg.y,bg.z),bg.fromBufferAttribute(bf,be.index2),cg.push(bg.x,bg.y,bg.z)}}else{for(bf=da.attributes.position,be=0,ce=bf.count/3;be<ce;be++){for(cf=0;3>cf;cf++){cb=3*be+cf,bg.fromBufferAttribute(bf,cb),cg.push(bg.x,bg.y,bg.z),cb=3*be+(cf+1)%3,bg.fromBufferAttribute(bf,cb),cg.push(bg.x,bg.y,bg.z)}}}}}this.addAttribute("position",new fp(cg,3))}function bp(bc,bb,bd){fL.call(this);this.type="ParametricGeometry";this.parameters={func:bc,slices:bb,stacks:bd};this.fromBufferGeometry(new eT(bc,bb,bd));this.mergeVertices()}function eT(dc,da,cg){fU.call(this);this.type="ParametricBufferGeometry";this.parameters={func:dc,slices:da,stacks:cg};var cf=[],ce=[],cd=[],cc=[],cb=new ft,bg=new ft,bf=new ft,bc=new ft,bd=new ft,de,bb,be=da+1;for(de=0;de<=cg;de++){var dd=de/cg;for(bb=0;bb<=da;bb++){var db=bb/da,bg=dc(db,dd,bg);ce.push(bg.x,bg.y,bg.z);0<=db-0.00001?(bf=dc(db-0.00001,dd,bf),bc.subVectors(bg,bf)):(bf=dc(db+0.00001,dd,bf),bc.subVectors(bf,bg));0<=dd-0.00001?(bf=dc(db,dd-0.00001,bf),bd.subVectors(bg,bf)):(bf=dc(db,dd+0.00001,bf),bd.subVectors(bf,bg));cb.crossVectors(bc,bd).normalize();cd.push(cb.x,cb.y,cb.z);cc.push(db,dd)}}for(de=0;de<cg;de++){for(bb=0;bb<da;bb++){dc=de*be+bb+1,cb=(de+1)*be+bb+1,bg=(de+1)*be+bb,cf.push(de*be+bb,dc,bg),cf.push(dc,cb,bg)}}this.setIndex(cf);this.addAttribute("position",new fp(ce,3));this.addAttribute("normal",new fp(cd,3));this.addAttribute("uv",new fp(cc,2))}function a7(bc,bb,be,bd){fL.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:bc,indices:bb,radius:be,detail:bd};this.fromBufferGeometry(new bl(bc,bb,be,bd));this.mergeVertices()}function bl(cd,cc,cb,bg){function bf(ce){bc.push(ce.x,ce.y,ce.z)}function be(ce,cf){ce*=3;cf.x=cd[ce+0];cf.y=cd[ce+1];cf.z=cd[ce+2]}function bd(cf,ce,da,cg){0>cg&&1===cf.x&&(bb[ce]=cf.x-1);0===da.x&&0===da.z&&(bb[ce]=cg/2/Math.PI+0.5)}fU.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:cd,indices:cc,radius:cb,detail:bg};cb=cb||1;bg=bg||0;var bc=[],bb=[];(function(eb){for(var dg=new ft,de=new ft,dd=new ft,dc=0;dc<cc.length;dc+=3){be(cc[dc+0],dg);be(cc[dc+1],de);be(cc[dc+2],dd);var da,db,cg=dg,ea=de,cf=dd,ed=Math.pow(2,eb),ce=[];for(db=0;db<=ed;db++){ce[db]=[];var ee=cg.clone().lerp(cf,db/ed),ec=ea.clone().lerp(cf,db/ed),df=ed-db;for(da=0;da<=df;da++){ce[db][da]=0===da&&db===ed?ee:ee.clone().lerp(ec,da/df)}}for(db=0;db<ed;db++){for(da=0;da<2*(ed-db)-1;da++){cg=Math.floor(da/2),0===da%2?(bf(ce[db][cg+1]),bf(ce[db+1][cg]),bf(ce[db][cg])):(bf(ce[db][cg+1]),bf(ce[db+1][cg+1]),bf(ce[db+1][cg]))}}}})(bg);(function(cf){for(var ce=new ft,cg=0;cg<bc.length;cg+=3){ce.x=bc[cg+0],ce.y=bc[cg+1],ce.z=bc[cg+2],ce.normalize().multiplyScalar(cf),bc[cg+0]=ce.x,bc[cg+1]=ce.y,bc[cg+2]=ce.z}})(cb);(function(){for(var df=new ft,de=0;de<bc.length;de+=3){df.x=bc[de+0],df.y=bc[de+1],df.z=bc[de+2],bb.push(Math.atan2(df.z,-df.x)/2/Math.PI+0.5,1-(Math.atan2(-df.y,Math.sqrt(df.x*df.x+df.z*df.z))/Math.PI+0.5))}for(var df=new ft,de=new ft,dc=new ft,db=new ft,da=new fX,cg=new fX,cf=new fX,dg=0,dd=0;dg<bc.length;dg+=9,dd+=6){df.set(bc[dg+0],bc[dg+1],bc[dg+2]);de.set(bc[dg+3],bc[dg+4],bc[dg+5]);dc.set(bc[dg+6],bc[dg+7],bc[dg+8]);da.set(bb[dd+0],bb[dd+1]);cg.set(bb[dd+2],bb[dd+3]);cf.set(bb[dd+4],bb[dd+5]);db.copy(df).add(de).add(dc).divideScalar(3);var ce=Math.atan2(db.z,-db.x);bd(da,dd+0,df,ce);bd(cg,dd+2,de,ce);bd(cf,dd+4,dc,ce)}for(df=0;df<bb.length;df+=6){de=bb[df+0],dc=bb[df+2],db=bb[df+4],da=Math.min(de,dc,db),0.9<Math.max(de,dc,db)&&0.1>da&&(0.2>de&&(bb[df+0]+=1),0.2>dc&&(bb[df+2]+=1),0.2>db&&(bb[df+4]+=1))}})();this.addAttribute("position",new fp(bc,3));this.addAttribute("normal",new fp(bc.slice(),3));this.addAttribute("uv",new fp(bb,2));0===bg?this.computeVertexNormals():this.normalizeNormals()}function aW(bc,bb){fL.call(this);this.type="TetrahedronGeometry";this.parameters={radius:bc,detail:bb};this.fromBufferGeometry(new eG(bc,bb));this.mergeVertices()}function eG(bc,bb){bl.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],bc,bb);this.type="TetrahedronBufferGeometry";this.parameters={radius:bc,detail:bb}}function aK(bc,bb){fL.call(this);this.type="OctahedronGeometry";this.parameters={radius:bc,detail:bb};this.fromBufferGeometry(new dT(bc,bb));this.mergeVertices()}function dT(bc,bb){bl.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],bc,bb);this.type="OctahedronBufferGeometry";this.parameters={radius:bc,detail:bb}}function aB(bc,bb){fL.call(this);this.type="IcosahedronGeometry";this.parameters={radius:bc,detail:bb};this.fromBufferGeometry(new eu(bc,bb));this.mergeVertices()}function eu(bc,bb){var bd=(1+Math.sqrt(5))/2;bl.call(this,[-1,bd,0,1,bd,0,-1,-bd,0,1,-bd,0,0,-1,bd,0,1,bd,0,-1,-bd,0,1,-bd,bd,0,-1,bd,0,1,-bd,0,-1,-bd,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],bc,bb);this.type="IcosahedronBufferGeometry";this.parameters={radius:bc,detail:bb}}function gs(bc,bb){fL.call(this);this.type="DodecahedronGeometry";this.parameters={radius:bc,detail:bb};this.fromBufferGeometry(new ei(bc,bb));this.mergeVertices()}function ei(bc,bb){var be=(1+Math.sqrt(5))/2,bd=1/be;bl.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-bd,-be,0,-bd,be,0,bd,-be,0,bd,be,-bd,-be,0,-bd,be,0,bd,-be,0,bd,be,0,-be,0,-bd,be,0,-bd,-be,0,bd,be,0,bd],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],bc,bb);this.type="DodecahedronBufferGeometry";this.parameters={radius:bc,detail:bb}}function f3(bc,bb,bg,bf,be,bd){fL.call(this);this.type="TubeGeometry";this.parameters={path:bc,tubularSegments:bb,radius:bg,radialSegments:bf,closed:be};void 0!==bd&&console.warn("THREE.TubeGeometry: taper has been removed.");bc=new dZ(bc,bb,bg,bf,be);this.tangents=bc.tangents;this.normals=bc.normals;this.binormals=bc.binormals;this.fromBufferGeometry(bc);this.mergeVertices()}function dZ(da,cg,cf,ce,cd){function cc(eb){var ea=da.getPointAt(eb/cg),de=cb.normals[eb];eb=cb.binormals[eb];for(bc=0;bc<=ce;bc++){var dg=bc/ce*Math.PI*2,df=Math.sin(dg),dg=-Math.cos(dg);bf.x=dg*de.x+df*eb.x;bf.y=dg*de.y+df*eb.y;bf.z=dg*de.z+df*eb.z;bf.normalize();bd.push(bf.x,bf.y,bf.z);bg.x=ea.x+cf*bf.x;bg.y=ea.y+cf*bf.y;bg.z=ea.z+cf*bf.z;dd.push(bg.x,bg.y,bg.z)}}fU.call(this);this.type="TubeBufferGeometry";this.parameters={path:da,tubularSegments:cg,radius:cf,radialSegments:ce,closed:cd};cg=cg||64;cf=cf||1;ce=ce||8;cd=cd||!1;var cb=da.computeFrenetFrames(cg,cd);this.tangents=cb.tangents;this.normals=cb.normals;this.binormals=cb.binormals;var bg=new ft,bf=new ft,be=new fX,bb,bc,dd=[],bd=[],db=[],dc=[];for(bb=0;bb<cg;bb++){cc(bb)}cc(!1===cd?cg:0);for(bb=0;bb<=cg;bb++){for(bc=0;bc<=ce;bc++){be.x=bb/cg,be.y=bc/ce,db.push(be.x,be.y)}}(function(){for(bc=1;bc<=cg;bc++){for(bb=1;bb<=ce;bb++){var de=(ce+1)*bc+(bb-1),dg=(ce+1)*bc+bb,df=(ce+1)*(bc-1)+bb;dc.push((ce+1)*(bc-1)+(bb-1),de,df);dc.push(de,dg,df)}}})();this.setIndex(dc);this.addAttribute("position",new fp(dd,3));this.addAttribute("normal",new fp(bd,3));this.addAttribute("uv",new fp(db,2))}function fD(bc,bb,cb,bg,bf,be,bd){fL.call(this);this.type="TorusKnotGeometry";this.parameters={radius:bc,tube:bb,tubularSegments:cb,radialSegments:bg,p:bf,q:be};void 0!==bd&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new dN(bc,bb,cb,bg,bf,be));this.mergeVertices()}function dN(ec,eb,ea,dg,df,de){function dd(ee,ed,fb,fa,eg){var ef=Math.sin(ee);ed=fb/ed*ee;fb=Math.cos(ed);eg.x=fa*(2+fb)*0.5*Math.cos(ee);eg.y=fa*(2+fb)*ef*0.5;eg.z=fa*Math.sin(ed)*0.5}fU.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:ec,tube:eb,tubularSegments:ea,radialSegments:dg,p:df,q:de};ec=ec||100;eb=eb||40;ea=Math.floor(ea)||64;dg=Math.floor(dg)||8;df=df||2;de=de||3;var dc=[],db=[],da=[],cd=[],cf,cb=new ft,cg=new ft,bf=new ft,bg=new ft,bd=new ft,bb=new ft,ce=new ft;for(cf=0;cf<=ea;++cf){var bc=cf/ea*df*Math.PI*2;dd(bc,df,de,ec,bf);dd(bc+0.01,df,de,ec,bg);bb.subVectors(bg,bf);ce.addVectors(bg,bf);bd.crossVectors(bb,ce);ce.crossVectors(bd,bb);bd.normalize();ce.normalize();for(bc=0;bc<=dg;++bc){var cc=bc/dg*Math.PI*2,be=-eb*Math.cos(cc),cc=eb*Math.sin(cc);cb.x=bf.x+(be*ce.x+cc*bd.x);cb.y=bf.y+(be*ce.y+cc*bd.y);cb.z=bf.z+(be*ce.z+cc*bd.z);db.push(cb.x,cb.y,cb.z);cg.subVectors(cb,bf).normalize();da.push(cg.x,cg.y,cg.z);cd.push(cf/ea);cd.push(bc/dg)}}for(bc=1;bc<=ea;bc++){for(cf=1;cf<=dg;cf++){ec=(dg+1)*bc+(cf-1),eb=(dg+1)*bc+cf,df=(dg+1)*(bc-1)+cf,dc.push((dg+1)*(bc-1)+(cf-1),ec,df),dc.push(ec,eb,df)}}this.setIndex(dc);this.addAttribute("position",new fp(db,3));this.addAttribute("normal",new fp(da,3));this.addAttribute("uv",new fp(cd,2))}function fo(bc,bb,bf,be,bd){fL.call(this);this.type="TorusGeometry";this.parameters={radius:bc,tube:bb,radialSegments:bf,tubularSegments:be,arc:bd};this.fromBufferGeometry(new dC(bc,bb,bf,be,bd));this.mergeVertices()}function dC(da,cg,cf,ce,cd){fU.call(this);this.type="TorusBufferGeometry";this.parameters={radius:da,tube:cg,radialSegments:cf,tubularSegments:ce,arc:cd};da=da||100;cg=cg||40;cf=Math.floor(cf)||8;ce=Math.floor(ce)||6;cd=cd||2*Math.PI;var cc=[],cb=[],bg=[],bf=[],be=new ft,bb=new ft,bc=new ft,dd,bd;for(dd=0;dd<=cf;dd++){for(bd=0;bd<=ce;bd++){var db=bd/ce*cd,dc=dd/cf*Math.PI*2;bb.x=(da+cg*Math.cos(dc))*Math.cos(db);bb.y=(da+cg*Math.cos(dc))*Math.sin(db);bb.z=cg*Math.sin(dc);cb.push(bb.x,bb.y,bb.z);be.x=da*Math.cos(db);be.y=da*Math.sin(db);bc.subVectors(bb,be).normalize();bg.push(bc.x,bc.y,bc.z);bf.push(bd/ce);bf.push(dd/cf)}}for(dd=1;dd<=cf;dd++){for(bd=1;bd<=ce;bd++){da=(ce+1)*(dd-1)+bd-1,cg=(ce+1)*(dd-1)+bd,cd=(ce+1)*dd+bd,cc.push((ce+1)*dd+bd-1,da,cd),cc.push(da,cg,cd)}}this.setIndex(cc);this.addAttribute("position",new fp(cb,3));this.addAttribute("normal",new fp(bg,3));this.addAttribute("uv",new fp(bf,2))}function cU(bc,bb){fL.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:bc,options:bb};this.fromBufferGeometry(new aY(bc,bb));this.mergeVertices()}function aY(bc,bb){"undefined"!==typeof bc&&(fU.call(this),this.type="ExtrudeBufferGeometry",bc=Array.isArray(bc)?bc:[bc],this.addShapeList(bc,bb),this.computeVertexNormals())}function e5(bc,bb){fL.call(this);this.type="TextGeometry";this.parameters={text:bc,parameters:bb};this.fromBufferGeometry(new dr(bc,bb));this.mergeVertices()}function dr(bc,bb){bb=bb||{};var bd=bb.font;if(!bd||!bd.isFont){return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new fL}bc=bd.generateShapes(bc,bb.size,bb.curveSegments);bb.amount=void 0!==bb.height?bb.height:50;void 0===bb.bevelThickness&&(bb.bevelThickness=10);void 0===bb.bevelSize&&(bb.bevelSize=8);void 0===bb.bevelEnabled&&(bb.bevelEnabled=!1);aY.call(this,bc,bb);this.type="TextBufferGeometry"}function eS(bc,bb,cb,bg,bf,be,bd){fL.call(this);this.type="SphereGeometry";this.parameters={radius:bc,widthSegments:bb,heightSegments:cb,phiStart:bg,phiLength:bf,thetaStart:be,thetaLength:bd};this.fromBufferGeometry(new dI(bc,bb,cb,bg,bf,be,bd));this.mergeVertices()}function dI(eb,ea,dg,df,de,dd,dc){fU.call(this);this.type="SphereBufferGeometry";this.parameters={radius:eb,widthSegments:ea,heightSegments:dg,phiStart:df,phiLength:de,thetaStart:dd,thetaLength:dc};eb=eb||50;ea=Math.max(3,Math.floor(ea)||8);dg=Math.max(2,Math.floor(dg)||6);df=void 0!==df?df:0;de=void 0!==de?de:2*Math.PI;dd=void 0!==dd?dd:0;dc=void 0!==dc?dc:Math.PI;var db=dd+dc,da,cg,cc=0,ce=[],bg=new ft,cf=new ft,be=[],bf=[],bd=[],bb=[];for(cg=0;cg<=dg;cg++){var cd=[],bc=cg/dg;for(da=0;da<=ea;da++){var cb=da/ea;bg.x=-eb*Math.cos(df+cb*de)*Math.sin(dd+bc*dc);bg.y=eb*Math.cos(dd+bc*dc);bg.z=eb*Math.sin(df+cb*de)*Math.sin(dd+bc*dc);bf.push(bg.x,bg.y,bg.z);cf.set(bg.x,bg.y,bg.z).normalize();bd.push(cf.x,cf.y,cf.z);bb.push(cb,1-bc);cd.push(cc++)}ce.push(cd)}for(cg=0;cg<dg;cg++){for(da=0;da<ea;da++){eb=ce[cg][da+1],df=ce[cg][da],de=ce[cg+1][da],dc=ce[cg+1][da+1],(0!==cg||0<dd)&&be.push(eb,df,dc),(cg!==dg-1||db<Math.PI)&&be.push(df,de,dc)}}this.setIndex(be);this.addAttribute("position",new fp(bf,3));this.addAttribute("normal",new fp(bd,3));this.addAttribute("uv",new fp(bb,2))}function eF(bc,bb,bg,bf,be,bd){fL.call(this);this.type="RingGeometry";this.parameters={innerRadius:bc,outerRadius:bb,thetaSegments:bg,phiSegments:bf,thetaStart:be,thetaLength:bd};this.fromBufferGeometry(new c6(bc,bb,bg,bf,be,bd));this.mergeVertices()}function c6(da,cg,cf,ce,cd,cc){fU.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:da,outerRadius:cg,thetaSegments:cf,phiSegments:ce,thetaStart:cd,thetaLength:cc};da=da||20;cg=cg||50;cd=void 0!==cd?cd:0;cc=void 0!==cc?cc:2*Math.PI;cf=void 0!==cf?Math.max(3,cf):8;ce=void 0!==ce?Math.max(1,ce):1;var cb=[],bg=[],bf=[],be=[],bb=da,bc=(cg-da)/ce,dd=new ft,bd=new fX,db,dc;for(db=0;db<=ce;db++){for(dc=0;dc<=cf;dc++){da=cd+dc/cf*cc,dd.x=bb*Math.cos(da),dd.y=bb*Math.sin(da),bg.push(dd.x,dd.y,dd.z),bf.push(0,0,1),bd.x=(dd.x/cg+1)/2,bd.y=(dd.y/cg+1)/2,be.push(bd.x,bd.y)}bb+=bc}for(db=0;db<ce;db++){for(cg=db*(cf+1),dc=0;dc<cf;dc++){da=dc+cg,cd=da+cf+1,cc=da+cf+2,bb=da+1,cb.push(da,cd,bb),cb.push(cd,cc,bb)}}this.setIndex(cb);this.addAttribute("position",new fp(bg,3));this.addAttribute("normal",new fp(bf,3));this.addAttribute("uv",new fp(be,2))}function et(bc,bb,be,bd){fL.call(this);this.type="LatheGeometry";this.parameters={points:bc,segments:bb,phiStart:be,phiLength:bd};this.fromBufferGeometry(new cN(bc,bb,be,bd));this.mergeVertices()}function cN(da,cg,cf,ce){fU.call(this);this.type="LatheBufferGeometry";this.parameters={points:da,segments:cg,phiStart:cf,phiLength:ce};cg=Math.floor(cg)||12;cf=cf||0;ce=ce||2*Math.PI;ce=fK.clamp(ce,0,2*Math.PI);var cd=[],cc=[],cb=[],bg=1/cg,bf=new ft,be=new fX,bb;for(bb=0;bb<=cg;bb++){var bc=cf+bb*bg*ce;var db=Math.sin(bc),bd=Math.cos(bc);for(bc=0;bc<=da.length-1;bc++){bf.x=da[bc].x*db,bf.y=da[bc].y,bf.z=da[bc].x*bd,cc.push(bf.x,bf.y,bf.z),be.x=bb/cg,be.y=bc/(da.length-1),cb.push(be.x,be.y)}}for(bb=0;bb<cg;bb++){for(bc=0;bc<da.length-1;bc++){cf=bc+bb*da.length,bg=cf+da.length,bf=cf+da.length+1,be=cf+1,cd.push(cf,bg,be),cd.push(bg,bf,be)}}this.setIndex(cd);this.addAttribute("position",new fp(cc,3));this.addAttribute("uv",new fp(cb,2));this.computeVertexNormals();if(ce===2*Math.PI){for(ce=this.attributes.normal.array,cd=new ft,cc=new ft,cb=new ft,cf=cg*da.length*3,bc=bb=0;bb<da.length;bb++,bc+=3){cd.x=ce[bc+0],cd.y=ce[bc+1],cd.z=ce[bc+2],cc.x=ce[cf+bc+0],cc.y=ce[cf+bc+1],cc.z=ce[cf+bc+2],cb.addVectors(cd,cc).normalize(),ce[bc+0]=ce[cf+bc+0]=cb.x,ce[bc+1]=ce[cf+bc+1]=cb.y,ce[bc+2]=ce[cf+bc+2]=cb.z}}}function cB(bc,bb){fL.call(this);this.type="ShapeGeometry";"object"===typeof bb&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),bb=bb.curveSegments);this.parameters={shapes:bc,curveSegments:bb};this.fromBufferGeometry(new cp(bc,bb));this.mergeVertices()}function cp(ce,cd){function cc(da){var de,db=bg.length/3;da=da.extractPoints(cd);var cg=da.shape,dc=da.holes;if(!1===aM.isClockWise(cg)){for(cg=cg.reverse(),da=0,de=dc.length;da<de;da++){var cf=dc[da];!0===aM.isClockWise(cf)&&(dc[da]=cf.reverse())}}var dd=aM.triangulateShape(cg,dc);da=0;for(de=dc.length;da<de;da++){cf=dc[da],cg=cg.concat(cf)}da=0;for(de=cg.length;da<de;da++){cf=cg[da],bg.push(cf.x,cf.y,0),bf.push(0,0,1),be.push(cf.x,cf.y)}da=0;for(de=dd.length;da<de;da++){cg=dd[da],cb.push(cg[0]+db,cg[1]+db,cg[2]+db),bc+=3}}fU.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:ce,curveSegments:cd};cd=cd||12;var cb=[],bg=[],bf=[],be=[],bd=0,bc=0;if(!1===Array.isArray(ce)){cc(ce)}else{for(var bb=0;bb<ce.length;bb++){cc(ce[bb]),this.addGroup(bd,bc,bb),bd+=bc,bc=0}}this.setIndex(cb);this.addAttribute("position",new fp(bg,3));this.addAttribute("normal",new fp(bf,3));this.addAttribute("uv",new fp(be,2))}function b8(cg,cf){fU.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:cf};var ce=[];cf=Math.cos(fK.DEG2RAD*(void 0!==cf?cf:1));var cd=[0,0],cc={},cb=["a","b","c"];if(cg.isBufferGeometry){var bg=new fL;bg.fromBufferGeometry(cg)}else{bg=cg.clone()}bg.mergeVertices();bg.computeFaceNormals();cg=bg.vertices;bg=bg.faces;for(var bf=0,be=bg.length;bf<be;bf++){for(var bd=bg[bf],bb=0;3>bb;bb++){var bc=bd[cb[bb]];var da=bd[cb[(bb+1)%3]];cd[0]=Math.min(bc,da);cd[1]=Math.max(bc,da);bc=cd[0]+","+cd[1];void 0===cc[bc]?cc[bc]={index1:cd[0],index2:cd[1],face1:bf,face2:void 0}:cc[bc].face2=bf}}for(bc in cc){if(cd=cc[bc],void 0===cd.face2||bg[cd.face1].normal.dot(bg[cd.face2].normal)<=cf){cb=cg[cd.index1],ce.push(cb.x,cb.y,cb.z),cb=cg[cd.index2],ce.push(cb.x,cb.y,cb.z)}}this.addAttribute("position",new fp(ce,3))}function dx(bc,bb,cc,cb,bg,bf,be,bd){fL.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:bc,radiusBottom:bb,height:cc,radialSegments:cb,heightSegments:bg,openEnded:bf,thetaStart:be,thetaLength:bd};this.fromBufferGeometry(new ds(bc,bb,cc,cb,bg,bf,be,bd));this.mergeVertices()}function ds(df,de,dd,dc,db,da,cg,cf){function ce(eg){var ee,ed=new fX,ec=new ft,dg=0,fc=!0===eg?df:de,eb=!0===eg?1:-1;var fb=bd;for(ee=1;ee<=dc;ee++){cb.push(0,bc*eb,0),bf.push(0,eb,0),cc.push(0.5,0.5),bd++}var ef=bd;for(ee=0;ee<=dc;ee++){var ea=ee/dc*cf+cg,fa=Math.cos(ea),ea=Math.sin(ea);ec.x=fc*ea;ec.y=bc*eb;ec.z=fc*fa;cb.push(ec.x,ec.y,ec.z);bf.push(0,eb,0);ed.x=0.5*fa+0.5;ed.y=0.5*ea*eb+0.5;cc.push(ed.x,ed.y);bd++}for(ee=0;ee<dc;ee++){ed=fb+ee,ec=ef+ee,!0===eg?bg.push(ec,ec+1,ed):bg.push(ec+1,ec,ed),dg+=3}cd.addGroup(bb,dg,!0===eg?1:2);bb+=dg}fU.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:df,radiusBottom:de,height:dd,radialSegments:dc,heightSegments:db,openEnded:da,thetaStart:cg,thetaLength:cf};var cd=this;df=void 0!==df?df:20;de=void 0!==de?de:20;dd=void 0!==dd?dd:100;dc=Math.floor(dc)||8;db=Math.floor(db)||1;da=void 0!==da?da:!1;cg=void 0!==cg?cg:0;cf=void 0!==cf?cf:2*Math.PI;var bg=[],cb=[],bf=[],cc=[],bd=0,be=[],bc=dd/2,bb=0;(function(){var ed,ec,ea=new ft,fc=new ft,fb=0,ef=(de-df)/dd;for(ec=0;ec<=db;ec++){var dg=[],eb=ec/db,fd=eb*(de-df)+df;for(ed=0;ed<=dc;ed++){var ee=ed/dc,fa=ee*cf+cg,eg=Math.sin(fa),fa=Math.cos(fa);fc.x=fd*eg;fc.y=-eb*dd+bc;fc.z=fd*fa;cb.push(fc.x,fc.y,fc.z);ea.set(eg,ef,fa).normalize();bf.push(ea.x,ea.y,ea.z);cc.push(ee,1-eb);dg.push(bd++)}be.push(dg)}for(ed=0;ed<dc;ed++){for(ec=0;ec<db;ec++){ea=be[ec+1][ed],fc=be[ec+1][ed+1],ef=be[ec][ed+1],bg.push(be[ec][ed],ea,ef),bg.push(ea,fc,ef),fb+=6}}cd.addGroup(bb,fb,0);bb+=fb})();!1===da&&(0<df&&ce(!0),0<de&&ce(!1));this.setIndex(bg);this.addAttribute("position",new fp(cb,3));this.addAttribute("normal",new fp(bf,3));this.addAttribute("uv",new fp(cc,2))}function eh(bc,bb,cb,bg,bf,be,bd){dx.call(this,0,bc,bb,cb,bg,bf,be,bd);this.type="ConeGeometry";this.parameters={radius:bc,height:bb,radialSegments:cb,heightSegments:bg,openEnded:bf,thetaStart:be,thetaLength:bd}}function dY(bc,bb,cb,bg,bf,be,bd){ds.call(this,0,bc,bb,cb,bg,bf,be,bd);this.type="ConeBufferGeometry";this.parameters={radius:bc,height:bb,radialSegments:cb,heightSegments:bg,openEnded:bf,thetaStart:be,thetaLength:bd}}function dM(bc,bb,be,bd){fL.call(this);this.type="CircleGeometry";this.parameters={radius:bc,segments:bb,thetaStart:be,thetaLength:bd};this.fromBufferGeometry(new bP(bc,bb,be,bd));this.mergeVertices()}function bP(cg,cf,ce,cd){fU.call(this);this.type="CircleBufferGeometry";this.parameters={radius:cg,segments:cf,thetaStart:ce,thetaLength:cd};cg=cg||50;cf=void 0!==cf?Math.max(3,cf):8;ce=void 0!==ce?ce:0;cd=void 0!==cd?cd:2*Math.PI;var cc=[],cb=[],bg=[],bf=[],be,bd=new ft,bb=new fX;cb.push(0,0,0);bg.push(0,0,1);bf.push(0.5,0.5);var bc=0;for(be=3;bc<=cf;bc++,be+=3){var da=ce+bc/cf*cd;bd.x=cg*Math.cos(da);bd.y=cg*Math.sin(da);cb.push(bd.x,bd.y,bd.z);bg.push(0,0,1);bb.x=(cb[be]/cg+1)/2;bb.y=(cb[be+1]/cg+1)/2;bf.push(bb.x,bb.y)}for(be=1;be<=cf;be++){cc.push(be,be+1,0)}this.setIndex(cc);this.addAttribute("position",new fp(cb,3));this.addAttribute("normal",new fp(bg,3));this.addAttribute("uv",new fp(bf,2))}function cT(bb){fM.call(this);this.type="ShadowMaterial";this.color=new fZ(0);this.opacity=1;this.transparent=this.lights=!0;this.setValues(bb)}function gm(bb){gz.call(this,bb);this.type="RawShaderMaterial"}function eH(bb){fM.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new fZ(16777215);this.metalness=this.roughness=0.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new fZ(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new fX(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=0.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(bb)}function dk(bb){eH.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=0.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(bb)}function bW(bb){fM.call(this);this.type="MeshPhongMaterial";this.color=new fZ(16777215);this.specular=new fZ(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new fZ(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new fX(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=0.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(bb)}function c0(bb){bW.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(bb)}function cI(bb){fM.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new fX(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1;this.setValues(bb)}function cw(bb){fM.call(this);this.type="MeshLambertMaterial";this.color=new fZ(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new fZ(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=0.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(bb)}function ck(bb){fH.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(bb)}function cR(bc,bb,cb){var bg=this,bf=!1,be=0,bd=0;this.onStart=void 0;this.onLoad=bc;this.onProgress=bb;this.onError=cb;this.itemStart=function(cc){bd++;if(!1===bf&&void 0!==bg.onStart){bg.onStart(cc,be,bd)}bf=!0};this.itemEnd=function(cc){be++;if(void 0!==bg.onProgress){bg.onProgress(cc,be,bd)}if(be===bd&&(bf=!1,void 0!==bg.onLoad)){bg.onLoad()}};this.itemError=function(cc){if(void 0!==bg.onError){bg.onError(cc)}}}function f5(bb){this.manager=void 0!==bb?bb:cJ}function dK(bb){this.manager=void 0!==bb?bb:cJ;this._parser=null}function gk(bb){this.manager=void 0!==bb?bb:cJ;this._parser=null}function dB(bb){this.manager=void 0!==bb?bb:cJ}function fT(bb){this.manager=void 0!==bb?bb:cJ}function bH(bb){this.manager=void 0!==bb?bb:cJ}function go(bc,bb){fs.call(this);this.type="Light";this.color=new fZ(bc);this.intensity=void 0!==bb?bb:1;this.receiveShadow=void 0}function bv(bc,bb,bd){go.call(this,bc,bd);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(fs.DefaultUp);this.updateMatrix();this.groundColor=new fZ(bb)}function b2(bb){this.camera=bb;this.bias=0;this.radius=1;this.mapSize=new fX(512,512);this.map=null;this.matrix=new fN}function bi(){b2.call(this,new dU(50,1,0.5,500))}function a1(bc,bb,bg,bf,be,bd){go.call(this,bc,bb);this.type="SpotLight";this.position.copy(fs.DefaultUp);this.updateMatrix();this.target=new fs;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(cb){this.intensity=cb/Math.PI}});this.distance=void 0!==bg?bg:0;this.angle=void 0!==bf?bf:Math.PI/3;this.penumbra=void 0!==be?be:0;this.decay=void 0!==bd?bd:1;this.shadow=new bi}function aP(bc,bb,be,bd){go.call(this,bc,bb);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(bf){this.intensity=bf/(4*Math.PI)}});this.distance=void 0!==be?be:0;this.decay=void 0!==bd?bd:1;this.shadow=new b2(new dU(90,1,0.5,500))}function aE(){b2.call(this,new a8(-5,5,5,-5,0.5,500))}function gw(bc,bb){go.call(this,bc,bb);this.type="DirectionalLight";this.position.copy(fs.DefaultUp);this.updateMatrix();this.target=new fs;this.shadow=new aE}function f8(bc,bb){go.call(this,bc,bb);this.type="AmbientLight";this.castShadow=void 0}function bT(bc,bb,be,bd){go.call(this,bc,bb);this.type="RectAreaLight";this.position.set(0,1,0);this.updateMatrix();this.width=void 0!==be?be:10;this.height=void 0!==bd?bd:10}function aS(bc,bb,be,bd){this.parameterPositions=bc;this._cachedIndex=0;this.resultBuffer=void 0!==bd?bd:new bb.constructor(be);this.sampleValues=bb;this.valueSize=be}function bA(bc,bb,be,bd){aS.call(this,bc,bb,be,bd);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function dq(bc,bb,be,bd){aS.call(this,bc,bb,be,bd)}function bo(bc,bb,be,bd){aS.call(this,bc,bb,be,bd)}function bJ(bc,bb,be,bd){if(void 0===bc){throw Error("track name is undefined")}if(void 0===bb||0===bb.length){throw Error("no keyframes in track named "+bc)}this.name=bc;this.times=e1.convertArray(bb,this.TimeBufferType);this.values=e1.convertArray(be,this.ValueBufferType);this.setInterpolation(bd||this.DefaultInterpolation);this.validate();this.optimize()}function fW(bc,bb,be,bd){bJ.call(this,bc,bb,be,bd)}function a6(bc,bb,be,bd){aS.call(this,bc,bb,be,bd)}function c5(bc,bb,be,bd){bJ.call(this,bc,bb,be,bd)}function fz(bc,bb,be,bd){bJ.call(this,bc,bb,be,bd)}function aV(bc,bb,be,bd){bJ.call(this,bc,bb,be,bd)}function aJ(bc,bb,bd){bJ.call(this,bc,bb,bd)}function gC(bc,bb,be,bd){bJ.call(this,bc,bb,be,bd)}function bx(bc,bb,be,bd){bJ.apply(this,arguments)}function bD(bc,bb,bd){this.name=bc;this.tracks=bd;this.duration=void 0!==bb?bb:-1;this.uuid=fK.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function gr(bb){this.manager=void 0!==bb?bb:cJ;this.textures={}}function fx(bb){this.manager=void 0!==bb?bb:cJ}function fi(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function e9(bb){"boolean"===typeof bb&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),bb=void 0);this.manager=void 0!==bb?bb:cJ;this.withCredentials=!1}function dz(bb){this.manager=void 0!==bb?bb:cJ;this.texturePath=""}function dn(bc,bb,bg,bf,be){bb=0.5*(bf-bb);be=0.5*(be-bg);var bd=bc*bc;return(2*bg-2*bf+bb+be)*bc*bd+(-3*bg+3*bf-2*bb-be)*bd+bb*bc+bg}function bk(bc,bb,bf,be){var bd=1-bc;return bd*bd*bb+2*(1-bc)*bc*bf+bc*bc*be}function a3(bc,bb,cb,bg,bf){var be=1-bc,bd=1-bc;return be*be*be*bb+3*bd*bd*bc*cb+3*(1-bc)*bc*bc*bg+bc*bc*bc*bf}function cx(){this.arcLengthDivisions=200}function ev(bc,bb){this.arcLengthDivisions=200;this.v1=bc;this.v2=bb}function cM(){this.arcLengthDivisions=200;this.curves=[];this.autoClose=!1}function c7(bc,bb,cc,cb,bg,bf,be,bd){this.arcLengthDivisions=200;this.aX=bc;this.aY=bb;this.xRadius=cc;this.yRadius=cb;this.aStartAngle=bg;this.aEndAngle=bf;this.aClockwise=be;this.aRotation=bd||0}function aR(bb){this.arcLengthDivisions=200;this.points=void 0===bb?[]:bb}function eZ(bc,bb,be,bd){this.arcLengthDivisions=200;this.v0=bc;this.v1=bb;this.v2=be;this.v3=bd}function eM(bc,bb,bd){this.arcLengthDivisions=200;this.v0=bc;this.v1=bb;this.v2=bd}function cA(bb){cM.call(this);this.currentPoint=new fX;bb&&this.fromPoints(bb)}function aG(){cA.apply(this,arguments);this.holes=[]}function eX(){this.subPaths=[];this.currentPath=null}function eK(bb){this.data=bb}function c3(bb){this.manager=void 0!==bb?bb:cJ}function ey(bb){this.manager=void 0!==bb?bb:cJ}function cL(){this.type="StereoCamera";this.aspect=1;this.eyeSep=0.064;this.cameraL=new dU;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new dU;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function co(cd,cc,cb){fs.call(this);this.type="CubeCamera";var bg=new dU(90,1,cd,cc);bg.up.set(0,-1,0);bg.lookAt(new ft(1,0,0));this.add(bg);var bf=new dU(90,1,cd,cc);bf.up.set(0,-1,0);bf.lookAt(new ft(-1,0,0));this.add(bf);var be=new dU(90,1,cd,cc);be.up.set(0,0,1);be.lookAt(new ft(0,1,0));this.add(be);var bd=new dU(90,1,cd,cc);bd.up.set(0,0,-1);bd.lookAt(new ft(0,-1,0));this.add(bd);var bc=new dU(90,1,cd,cc);bc.up.set(0,-1,0);bc.lookAt(new ft(0,0,1));this.add(bc);var bb=new dU(90,1,cd,cc);bb.up.set(0,-1,0);bb.lookAt(new ft(0,0,-1));this.add(bb);this.renderTarget=new bC(cb,cb,{format:1022,magFilter:1006,minFilter:1006});this.renderTarget.texture.name="CubeCamera";this.update=function(cg,ce){null===this.parent&&this.updateMatrixWorld();var da=this.renderTarget,cf=da.texture.generateMipmaps;da.texture.generateMipmaps=!1;da.activeCubeFace=0;cg.render(ce,bg,da);da.activeCubeFace=1;cg.render(ce,bf,da);da.activeCubeFace=2;cg.render(ce,be,da);da.activeCubeFace=3;cg.render(ce,bd,da);da.activeCubeFace=4;cg.render(ce,bc,da);da.texture.generateMipmaps=cf;da.activeCubeFace=5;cg.render(ce,bb,da);cg.setRenderTarget(null)};this.clear=function(cf,ce,dc,db){for(var da=this.renderTarget,cg=0;6>cg;cg++){da.activeCubeFace=cg,cf.setRenderTarget(da),cf.clear(ce,dc,db)}cf.setRenderTarget(null)}}function em(){fs.call(this);this.type="AudioListener";this.context=d2.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function eA(bb){fs.call(this);this.type="Audio";this.context=bb.context;this.gain=this.context.createGain();this.gain.connect(bb.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function dR(bb){eA.call(this,bb);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function dF(bc,bb){this.analyser=bc.context.createAnalyser();this.analyser.fftSize=void 0!==bb?bb:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);bc.getOutput().connect(this.analyser)}function dv(bc,bb,bd){this.binding=bc;this.valueSize=bd;bc=Float64Array;switch(bb){case"quaternion":bb=this._slerp;break;case"string":case"bool":bc=Array;bb=this._select;break;default:bb=this._lerp}this.buffer=new bc(4*bd);this._mixBufferRegion=bb;this.referenceCount=this.useCount=this.cumulativeWeight=0}function cz(bc,bb,bd){bd=bd||fk.parseTrackName(bb);this._targetGroup=bc;this._bindings=bc.subscribe_(bb,bd)}function fk(bc,bb,bd){this.path=bb;this.parsedPath=bd||fk.parseTrackName(bb);this.node=fk.findNode(bc,this.parsedPath.nodeName)||bc;this.rootNode=bc}function cn(bc){this.uuid=fK.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var bb={};this._indicesByUUID=bb;for(var be=0,bd=arguments.length;be!==bd;++be){bb[arguments[be].uuid]=be}this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={}}function b5(bc,bb,bg){this._mixer=bc;this._clip=bb;this._localRoot=bg||null;bc=bb.tracks;bb=bc.length;bg=Array(bb);for(var bf={endingStart:2400,endingEnd:2400},be=0;be!==bb;++be){var bd=bc[be].createInterpolant(null);bg[be]=bd;bd.settings=bf}this._interpolantSettings=bf;this._interpolants=bg;this._propertyBindings=Array(bb);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function bM(bb){this._root=bb;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function f2(bc,bb){"string"===typeof bc&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),bc=bb);this.value=bc}function dh(){fU.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function cX(bc,bb,be,bd){this.uuid=fK.generateUUID();this.data=bc;this.itemSize=bb;this.offset=be;this.normalized=!0===bd}function eo(bc,bb){this.uuid=fK.generateUUID();this.array=bc;this.stride=bb;this.count=void 0!==bc?bc.length/bb:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function cF(bc,bb,bd){eo.call(this,bc,bb);this.meshPerAttribute=bd||1}function ct(bc,bb,bd){fQ.call(this,bc,bb);this.meshPerAttribute=bd||1}function cQ(bc,bb,be,bd){this.ray=new ep(bc,bb);this.near=be||0;this.far=bd||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function gj(bc,bb){return bc.distance-bb.distance}function ch(bc,bb,bf,be){if(!1!==bc.visible&&(bc.raycast(bb,bf),!0===be)){bc=bc.children;be=0;for(var bd=bc.length;be<bd;be++){ch(bc[be],bb,bf,!0)}}}function fS(bb){this.autoStart=void 0!==bb?bb:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function fw(bc,bb,bd){this.radius=void 0!==bc?bc:1;this.phi=void 0!==bb?bb:0;this.theta=void 0!==bd?bd:0;return this}function e8(bc,bb,bd){this.radius=void 0!==bc?bc:1;this.theta=void 0!==bb?bb:0;this.y=void 0!==bd?bd:0;return this}function b7(bb){fs.call(this);this.material=bb;this.render=function(bc){}}function bO(bc,bb,be,bd){this.object=bc;this.size=void 0!==bb?bb:1;bc=void 0!==be?be:16711680;bd=void 0!==bd?bd:1;bb=0;(be=this.object.geometry)&&be.isGeometry?bb=3*be.faces.length:be&&be.isBufferGeometry&&(bb=be.attributes.normal.count);be=new fU;bb=new fp(6*bb,3);be.addAttribute("position",bb);fG.call(this,be,new fH({color:bc,linewidth:bd}));this.matrixAutoUpdate=!1;this.update()}function d4(bc,bb){fs.call(this);this.light=bc;this.light.updateMatrixWorld();this.matrix=bc.matrixWorld;this.matrixAutoUpdate=!1;this.color=bb;bc=new fU;bb=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var bg=0,bf=1;32>bg;bg++,bf++){var be=bg/32*Math.PI*2,bd=bf/32*Math.PI*2;bb.push(Math.cos(be),Math.sin(be),1,Math.cos(bd),Math.sin(bd),1)}bc.addAttribute("position",new fp(bb,3));bb=new fH({fog:!1});this.cone=new fG(bc,bb);this.add(this.cone);this.update()}function eW(bc){var bb=[];bc&&bc.isBone&&bb.push(bc);for(var bd=0;bd<bc.children.length;bd++){bb.push.apply(bb,eW(bc.children[bd]))}return bb}function dS(cd){for(var cc=eW(cd),cb=new fU,bg=[],bf=[],be=new fZ(0,0,1),bd=new fZ(0,1,0),bc=0;bc<cc.length;bc++){var bb=cc[bc];bb.parent&&bb.parent.isBone&&(bg.push(0,0,0),bg.push(0,0,0),bf.push(be.r,be.g,be.b),bf.push(bd.r,bd.g,bd.b))}cb.addAttribute("position",new fp(bg,3));cb.addAttribute("color",new fp(bf,3));bg=new fH({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});fG.call(this,cb,bg);this.root=cd;this.bones=cc;this.matrix=cd.matrixWorld;this.matrixAutoUpdate=!1;this.onBeforeRender()}function dH(bc,bb,bd){this.light=bc;this.light.updateMatrixWorld();this.color=bd;bc=new dI(bb,4,2);bb=new bK({wireframe:!0,fog:!1});eO.call(this,bc,bb);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function dw(bc,bb){fs.call(this);this.light=bc;this.light.updateMatrixWorld();this.matrix=bc.matrixWorld;this.matrixAutoUpdate=!1;this.color=bb;bc=new fH({fog:!1});bb=new fU;bb.addAttribute("position",new fQ(new Float32Array(15),3));this.line=new b3(bb,bc);this.add(this.line);this.update()}function dj(bc,bb,bd){fs.call(this);this.light=bc;this.light.updateMatrixWorld();this.matrix=bc.matrixWorld;this.matrixAutoUpdate=!1;this.color=bd;bc=new dT(bb);bc.rotateY(0.5*Math.PI);this.material=new bK({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);bb=bc.getAttribute("position");bb=new Float32Array(3*bb.count);bc.addAttribute("color",new fQ(bb,3));this.add(new eO(bc,this.material));this.update()}function cS(cg,cf,ce,cd){cg=cg||10;cf=cf||10;ce=new fZ(void 0!==ce?ce:4473924);cd=new fZ(void 0!==cd?cd:8947848);var cc=cf/2,cb=cg/cf,bg=cg/2;cg=[];for(var bf=[],be=0,bd=0,bb=-bg;be<=cf;be++,bb+=cb){cg.push(-bg,0,bb,bg,0,bb);cg.push(bb,0,-bg,bb,0,bg);var bc=be===cc?ce:cd;bc.toArray(bf,bd);bd+=3;bc.toArray(bf,bd);bd+=3;bc.toArray(bf,bd);bd+=3;bc.toArray(bf,bd);bd+=3}cf=new fU;cf.addAttribute("position",new fp(cg,3));cf.addAttribute("color",new fp(bf,3));ce=new fH({vertexColors:2});fG.call(this,cf,ce)}function fC(da,cg,cf,ce,cd,cc){da=da||10;cg=cg||16;cf=cf||8;ce=ce||64;cd=new fZ(void 0!==cd?cd:4473924);cc=new fZ(void 0!==cc?cc:8947848);var cb=[],bg=[],bf;for(bf=0;bf<=cg;bf++){var be=bf/cg*2*Math.PI;var bb=Math.sin(be)*da;be=Math.cos(be)*da;cb.push(0,0,0);cb.push(bb,0,be);var bc=bf&1?cd:cc;bg.push(bc.r,bc.g,bc.b);bg.push(bc.r,bc.g,bc.b)}for(bf=0;bf<=cf;bf++){bc=bf&1?cd:cc;var bd=da-da/cf*bf;for(cg=0;cg<ce;cg++){be=cg/ce*2*Math.PI,bb=Math.sin(be)*bd,be=Math.cos(be)*bd,cb.push(bb,0,be),bg.push(bc.r,bc.g,bc.b),be=(cg+1)/ce*2*Math.PI,bb=Math.sin(be)*bd,be=Math.cos(be)*bd,cb.push(bb,0,be),bg.push(bc.r,bc.g,bc.b)}}da=new fU;da.addAttribute("position",new fp(cb,3));da.addAttribute("color",new fp(bg,3));cb=new fH({vertexColors:2});fG.call(this,da,cb)}function gl(bc,bb,be,bd){this.object=bc;this.size=void 0!==bb?bb:1;bc=void 0!==be?be:16776960;bd=void 0!==bd?bd:1;bb=0;(be=this.object.geometry)&&be.isGeometry?bb=be.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");be=new fU;bb=new fp(6*bb,3);be.addAttribute("position",bb);fG.call(this,be,new fH({color:bc,linewidth:bd}));this.matrixAutoUpdate=!1;this.update()}function cZ(bc,bb,bd){fs.call(this);this.light=bc;this.light.updateMatrixWorld();this.matrix=bc.matrixWorld;this.matrixAutoUpdate=!1;this.color=bd;void 0===bb&&(bb=1);bc=new fU;bc.addAttribute("position",new fp([-bb,bb,0,bb,bb,0,bb,-bb,0,-bb,-bb,0,-bb,bb,0],3));bb=new fH({fog:!1});this.lightPlane=new b3(bc,bb);this.add(this.lightPlane);bc=new fU;bc.addAttribute("position",new fp([0,0,0,0,0,1],3));this.targetLine=new b3(bc,bb);this.add(this.targetLine);this.update()}function fV(da){function cg(dc,db,dd){cf(dc,dd);cf(db,dd)}function cf(dc,db){cc.push(0,0,0);cb.push(db.r,db.g,db.b);void 0===bg[dc]&&(bg[dc]=[]);bg[dc].push(cc.length/3-1)}var ce=new fU,cd=new fH({color:16777215,vertexColors:1}),cc=[],cb=[],bg={},bf=new fZ(16755200),be=new fZ(16711680),bb=new fZ(43775),bc=new fZ(16777215),bd=new fZ(3355443);cg("n1","n2",bf);cg("n2","n4",bf);cg("n4","n3",bf);cg("n3","n1",bf);cg("f1","f2",bf);cg("f2","f4",bf);cg("f4","f3",bf);cg("f3","f1",bf);cg("n1","f1",bf);cg("n2","f2",bf);cg("n3","f3",bf);cg("n4","f4",bf);cg("p","n1",be);cg("p","n2",be);cg("p","n3",be);cg("p","n4",be);cg("u1","u2",bb);cg("u2","u3",bb);cg("u3","u1",bb);cg("c","t",bc);cg("p","c",bd);cg("cn1","cn2",bd);cg("cn3","cn4",bd);cg("cf1","cf2",bd);cg("cf3","cf4",bd);ce.addAttribute("position",new fp(cc,3));ce.addAttribute("color",new fp(cb,3));fG.call(this,ce,cd);this.camera=da;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=da.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=bg;this.update()}function gy(bc,bb){this.object=bc;void 0===bb&&(bb=16776960);bc=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var be=new Float32Array(24),bd=new fU;bd.setIndex(new fQ(bc,1));bd.addAttribute("position",new fQ(be,3));fG.call(this,bd,new fH({color:bb}));this.matrixAutoUpdate=!1;this.update()}function fy(bc,bb){this.type="Box3Helper";this.box=bc;bc=void 0!==bb?bb:16776960;bb=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var bd=new fU;bd.setIndex(new fQ(bb,1));bd.addAttribute("position",new fp([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));fG.call(this,bd,new fH({color:bc}));this.geometry.computeBoundingSphere();this.onBeforeRender()}function fh(bc,bb,bd){this.type="PlaneHelper";this.plane=bc;this.size=void 0===bb?1:bb;bc=void 0!==bd?bd:16776960;bb=new fU;bb.addAttribute("position",new fp([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));bb.computeBoundingSphere();b3.call(this,bb,new fH({color:bc}));bb=new fU;bb.addAttribute("position",new fp([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));bb.computeBoundingSphere();this.add(new eO(bb,new bK({color:bc,opacity:0.2,transparent:!0,depthWrite:!1})));this.onBeforeRender()}function ga(bc,bb,bg,bf,be,bd){fs.call(this);void 0===bf&&(bf=16776960);void 0===bg&&(bg=1);void 0===be&&(be=0.2*bg);void 0===bd&&(bd=0.2*be);void 0===fn&&(fn=new fU,fn.addAttribute("position",new fp([0,0,0,0,1,0],3)),bZ=new ds(0,0.5,1,5,1),bZ.translate(0,-0.5,0));this.position.copy(bb);this.line=new b3(fn,new fH({color:bf}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new eO(bZ,new bK({color:bf}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(bc);this.setLength(bg,be,bd)}function e4(bc){bc=bc||1;var bb=[0,0,0,bc,0,0,0,0,0,0,bc,0,0,0,0,0,0,bc];bc=new fU;bc.addAttribute("position",new fp(bb,3));bc.addAttribute("color",new fp([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1],3));bb=new fH({vertexColors:2});fG.call(this,bc,bb)}function bG(){var bc=0,bb=0,be=0,bd=0;return{initCatmullRom:function(cd,cc,cb,bg,bf){cd=bf*(cb-cd);bg=bf*(bg-cc);bc=cc;bb=cd;be=-3*cc+3*cb-2*cd-bg;bd=2*cc-2*cb+cd+bg},initNonuniformCatmullRom:function(cf,ce,cc,cb,bg,bf,cd){cf=((ce-cf)/bg-(cc-cf)/(bg+bf)+(cc-ce)/bf)*bf;cb=((cc-ce)/bf-(cb-ce)/(bf+cd)+(cb-cc)/cd)*bf;bc=ce;bb=cf;be=-3*ce+3*cc-2*cf-cb;bd=2*ce-2*cc+cf+cb},calc:function(bg){var bf=bg*bg;return bc+bb*bg+be*bf+bd*bf*bg}}}function fF(bb){this.arcLengthDivisions=200;2>bb.length&&console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries.");this.points=bb||[];this.closed=!1}function eY(bc,bb,be,bd){this.arcLengthDivisions=200;this.v0=bc;this.v1=bb;this.v2=be;this.v3=bd}function eL(bc,bb,bd){this.arcLengthDivisions=200;this.v0=bc;this.v1=bb;this.v2=bd}function ez(bc,bb){this.arcLengthDivisions=200;this.v1=bc;this.v2=bb}function eR(bc,bb,bg,bf,be,bd){c7.call(this,bc,bb,bg,bg,bf,be,bd)}function eJ(bb){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");fF.call(this,bb);this.type="catmullrom";this.closed=!0}function ex(bb){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");fF.call(this,bb);this.type="catmullrom"}function bu(bb){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");fF.call(this,bb);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(bb){return"number"===typeof bb&&isFinite(bb)&&Math.floor(bb)===bb});void 0===Math.sign&&(Math.sign=function(bb){return 0>bb?-1:0<bb?1:+bb});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(bc){if(void 0===bc||null===bc){throw new TypeError("Cannot convert undefined or null to object")}for(var bb=Object(bc),bf=1;bf<arguments.length;bf++){var be=arguments[bf];if(void 0!==be&&null!==be){for(var bd in be){Object.prototype.hasOwnProperty.call(be,bd)&&(bb[bd]=be[bd])}}}return bb}}();Object.assign(c1.prototype,{addEventListener:function(bc,bb){void 0===this._listeners&&(this._listeners={});var bd=this._listeners;void 0===bd[bc]&&(bd[bc]=[]);-1===bd[bc].indexOf(bb)&&bd[bc].push(bb)},hasEventListener:function(bc,bb){if(void 0===this._listeners){return !1}var bd=this._listeners;return void 0!==bd[bc]&&-1!==bd[bc].indexOf(bb)},removeEventListener:function(bc,bb){void 0!==this._listeners&&(bc=this._listeners[bc],void 0!==bc&&(bb=bc.indexOf(bb),-1!==bb&&bc.splice(bb,1)))},dispatchEvent:function(bc){if(void 0!==this._listeners){var bb=this._listeners[bc.type];if(void 0!==bb){bc.target=this;for(var bb=bb.slice(0),be=0,bd=bb.length;be<bd;be++){bb[be].call(this,bc)}}}}});var fK={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var bc="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),bb=Array(36),be=0,bd;return function(){for(var bf=0;36>bf;bf++){8===bf||13===bf||18===bf||23===bf?bb[bf]="-":14===bf?bb[bf]="4":(2>=be&&(be=33554432+16777216*Math.random()|0),bd=be&15,be>>=4,bb[bf]=bc[19===bf?bd&3|8:bd])}return bb.join("")}}(),clamp:function(bc,bb,bd){return Math.max(bb,Math.min(bd,bc))},euclideanModulo:function(bc,bb){return(bc%bb+bb)%bb},mapLinear:function(bc,bb,bf,be,bd){return be+(bc-bb)*(bd-be)/(bf-bb)},lerp:function(bc,bb,bd){return(1-bd)*bc+bd*bb},smoothstep:function(bc,bb,bd){if(bc<=bb){return 0}if(bc>=bd){return 1}bc=(bc-bb)/(bd-bb);return bc*bc*(3-2*bc)},smootherstep:function(bc,bb,bd){if(bc<=bb){return 0}if(bc>=bd){return 1}bc=(bc-bb)/(bd-bb);return bc*bc*bc*(bc*(6*bc-15)+10)},randInt:function(bc,bb){return bc+Math.floor(Math.random()*(bb-bc+1))},randFloat:function(bc,bb){return bc+Math.random()*(bb-bc)},randFloatSpread:function(bb){return bb*(0.5-Math.random())},degToRad:function(bb){return bb*fK.DEG2RAD},radToDeg:function(bb){return bb*fK.RAD2DEG},isPowerOfTwo:function(bb){return 0===(bb&bb-1)&&0!==bb},nearestPowerOfTwo:function(bb){return Math.pow(2,Math.round(Math.log(bb)/Math.LN2))},nextPowerOfTwo:function(bb){bb--;bb|=bb>>1;bb|=bb>>2;bb|=bb>>4;bb|=bb>>8;bb|=bb>>16;bb++;return bb}};Object.defineProperties(fX.prototype,{width:{get:function(){return this.x},set:function(bb){this.x=bb}},height:{get:function(){return this.y},set:function(bb){this.y=bb}}});Object.assign(fX.prototype,{isVector2:!0,set:function(bc,bb){this.x=bc;this.y=bb;return this},setScalar:function(bb){this.y=this.x=bb;return this},setX:function(bb){this.x=bb;return this},setY:function(bb){this.y=bb;return this},setComponent:function(bc,bb){switch(bc){case 0:this.x=bb;break;case 1:this.y=bb;break;default:throw Error("index is out of range: "+bc)}return this},getComponent:function(bb){switch(bb){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+bb)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(bb){this.x=bb.x;this.y=bb.y;return this},add:function(bc,bb){if(void 0!==bb){return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(bc,bb)}this.x+=bc.x;this.y+=bc.y;return this},addScalar:function(bb){this.x+=bb;this.y+=bb;return this},addVectors:function(bc,bb){this.x=bc.x+bb.x;this.y=bc.y+bb.y;return this},addScaledVector:function(bc,bb){this.x+=bc.x*bb;this.y+=bc.y*bb;return this},sub:function(bc,bb){if(void 0!==bb){return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(bc,bb)}this.x-=bc.x;this.y-=bc.y;return this},subScalar:function(bb){this.x-=bb;this.y-=bb;return this},subVectors:function(bc,bb){this.x=bc.x-bb.x;this.y=bc.y-bb.y;return this},multiply:function(bb){this.x*=bb.x;this.y*=bb.y;return this},multiplyScalar:function(bb){this.x*=bb;this.y*=bb;return this},divide:function(bb){this.x/=bb.x;this.y/=bb.y;return this},divideScalar:function(bb){return this.multiplyScalar(1/bb)},min:function(bb){this.x=Math.min(this.x,bb.x);this.y=Math.min(this.y,bb.y);return this},max:function(bb){this.x=Math.max(this.x,bb.x);this.y=Math.max(this.y,bb.y);return this},clamp:function(bc,bb){this.x=Math.max(bc.x,Math.min(bb.x,this.x));this.y=Math.max(bc.y,Math.min(bb.y,this.y));return this},clampScalar:function(){var bc=new fX,bb=new fX;return function(be,bd){bc.set(be,be);bb.set(bd,bd);return this.clamp(bc,bb)}}(),clampLength:function(bc,bb){var bd=this.length();return this.divideScalar(bd||1).multiplyScalar(Math.max(bc,Math.min(bb,bd)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(bb){return this.x*bb.x+this.y*bb.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var bb=Math.atan2(this.y,this.x);0>bb&&(bb+=2*Math.PI);return bb},distanceTo:function(bb){return Math.sqrt(this.distanceToSquared(bb))},distanceToSquared:function(bc){var bb=this.x-bc.x;bc=this.y-bc.y;return bb*bb+bc*bc},distanceToManhattan:function(bb){return Math.abs(this.x-bb.x)+Math.abs(this.y-bb.y)},setLength:function(bb){return this.normalize().multiplyScalar(bb)},lerp:function(bc,bb){this.x+=(bc.x-this.x)*bb;this.y+=(bc.y-this.y)*bb;return this},lerpVectors:function(bc,bb,bd){return this.subVectors(bb,bc).multiplyScalar(bd).add(bc)},equals:function(bb){return bb.x===this.x&&bb.y===this.y},fromArray:function(bc,bb){void 0===bb&&(bb=0);this.x=bc[bb];this.y=bc[bb+1];return this},toArray:function(bc,bb){void 0===bc&&(bc=[]);void 0===bb&&(bb=0);bc[bb]=this.x;bc[bb+1]=this.y;return bc},fromBufferAttribute:function(bc,bb,bd){void 0!==bd&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=bc.getX(bb);this.y=bc.getY(bb);return this},rotateAround:function(bc,bb){var bf=Math.cos(bb);bb=Math.sin(bb);var be=this.x-bc.x,bd=this.y-bc.y;this.x=be*bf-bd*bb+bc.x;this.y=be*bb+bd*bf+bc.y;return this}});var du=0;fO.DEFAULT_IMAGE=void 0;fO.DEFAULT_MAPPING=300;Object.defineProperty(fO.prototype,"needsUpdate",{set:function(bb){!0===bb&&this.version++}});Object.assign(fO.prototype,c1.prototype,{constructor:fO,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.name=bb.name;this.image=bb.image;this.mipmaps=bb.mipmaps.slice(0);this.mapping=bb.mapping;this.wrapS=bb.wrapS;this.wrapT=bb.wrapT;this.magFilter=bb.magFilter;this.minFilter=bb.minFilter;this.anisotropy=bb.anisotropy;this.format=bb.format;this.type=bb.type;this.offset.copy(bb.offset);this.repeat.copy(bb.repeat);this.generateMipmaps=bb.generateMipmaps;this.premultiplyAlpha=bb.premultiplyAlpha;this.flipY=bb.flipY;this.unpackAlignment=bb.unpackAlignment;this.encoding=bb.encoding;return this},toJSON:function(bc){if(void 0!==bc.textures[this.uuid]){return bc.textures[this.uuid]}var bb={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var cc=this.image;void 0===cc.uuid&&(cc.uuid=fK.generateUUID());if(void 0===bc.images[cc.uuid]){var cb=bc.images,bg=cc.uuid,bf=cc.uuid;if(cc instanceof HTMLCanvasElement){var be=cc}else{be=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");be.width=cc.width;be.height=cc.height;var bd=be.getContext("2d");cc instanceof ImageData?bd.putImageData(cc,0,0):bd.drawImage(cc,0,0,cc.width,cc.height)}be=2048<be.width||2048<be.height?be.toDataURL("image/jpeg",0.6):be.toDataURL("image/png");cb[bg]={uuid:bf,url:be}}bb.image=cc.uuid}return bc.textures[this.uuid]=bb},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(bb){if(300===this.mapping){bb.multiply(this.repeat);bb.add(this.offset);if(0>bb.x||1<bb.x){switch(this.wrapS){case 1000:bb.x-=Math.floor(bb.x);break;case 1001:bb.x=0>bb.x?0:1;break;case 1002:bb.x=1===Math.abs(Math.floor(bb.x)%2)?Math.ceil(bb.x)-bb.x:bb.x-Math.floor(bb.x)}}if(0>bb.y||1<bb.y){switch(this.wrapT){case 1000:bb.y-=Math.floor(bb.y);break;case 1001:bb.y=0>bb.y?0:1;break;case 1002:bb.y=1===Math.abs(Math.floor(bb.y)%2)?Math.ceil(bb.y)-bb.y:bb.y-Math.floor(bb.y)}}this.flipY&&(bb.y=1-bb.y)}}});Object.assign(fJ.prototype,{isVector4:!0,set:function(bc,bb,be,bd){this.x=bc;this.y=bb;this.z=be;this.w=bd;return this},setScalar:function(bb){this.w=this.z=this.y=this.x=bb;return this},setX:function(bb){this.x=bb;return this},setY:function(bb){this.y=bb;return this},setZ:function(bb){this.z=bb;return this},setW:function(bb){this.w=bb;return this},setComponent:function(bc,bb){switch(bc){case 0:this.x=bb;break;case 1:this.y=bb;break;case 2:this.z=bb;break;case 3:this.w=bb;break;default:throw Error("index is out of range: "+bc)}return this},getComponent:function(bb){switch(bb){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+bb)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(bb){this.x=bb.x;this.y=bb.y;this.z=bb.z;this.w=void 0!==bb.w?bb.w:1;return this},add:function(bc,bb){if(void 0!==bb){return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(bc,bb)}this.x+=bc.x;this.y+=bc.y;this.z+=bc.z;this.w+=bc.w;return this},addScalar:function(bb){this.x+=bb;this.y+=bb;this.z+=bb;this.w+=bb;return this},addVectors:function(bc,bb){this.x=bc.x+bb.x;this.y=bc.y+bb.y;this.z=bc.z+bb.z;this.w=bc.w+bb.w;return this},addScaledVector:function(bc,bb){this.x+=bc.x*bb;this.y+=bc.y*bb;this.z+=bc.z*bb;this.w+=bc.w*bb;return this},sub:function(bc,bb){if(void 0!==bb){return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(bc,bb)}this.x-=bc.x;this.y-=bc.y;this.z-=bc.z;this.w-=bc.w;return this},subScalar:function(bb){this.x-=bb;this.y-=bb;this.z-=bb;this.w-=bb;return this},subVectors:function(bc,bb){this.x=bc.x-bb.x;this.y=bc.y-bb.y;this.z=bc.z-bb.z;this.w=bc.w-bb.w;return this},multiplyScalar:function(bb){this.x*=bb;this.y*=bb;this.z*=bb;this.w*=bb;return this},applyMatrix4:function(bc){var bb=this.x,bf=this.y,be=this.z,bd=this.w;bc=bc.elements;this.x=bc[0]*bb+bc[4]*bf+bc[8]*be+bc[12]*bd;this.y=bc[1]*bb+bc[5]*bf+bc[9]*be+bc[13]*bd;this.z=bc[2]*bb+bc[6]*bf+bc[10]*be+bc[14]*bd;this.w=bc[3]*bb+bc[7]*bf+bc[11]*be+bc[15]*bd;return this},divideScalar:function(bb){return this.multiplyScalar(1/bb)},setAxisAngleFromQuaternion:function(bc){this.w=2*Math.acos(bc.w);var bb=Math.sqrt(1-bc.w*bc.w);0.0001>bb?(this.x=1,this.z=this.y=0):(this.x=bc.x/bb,this.y=bc.y/bb,this.z=bc.z/bb);return this},setAxisAngleFromRotationMatrix:function(ce){ce=ce.elements;var cd=ce[0];var cc=ce[4];var cb=ce[8],bg=ce[1],bf=ce[5],be=ce[9];var bd=ce[2];var bc=ce[6];var bb=ce[10];if(0.01>Math.abs(cc-bg)&&0.01>Math.abs(cb-bd)&&0.01>Math.abs(be-bc)){if(0.1>Math.abs(cc+bg)&&0.1>Math.abs(cb+bd)&&0.1>Math.abs(be+bc)&&0.1>Math.abs(cd+bf+bb-3)){return this.set(1,0,0,0),this}ce=Math.PI;cd=(cd+1)/2;bf=(bf+1)/2;bb=(bb+1)/2;cc=(cc+bg)/4;cb=(cb+bd)/4;be=(be+bc)/4;cd>bf&&cd>bb?0.01>cd?(bc=0,cc=bd=0.707106781):(bc=Math.sqrt(cd),bd=cc/bc,cc=cb/bc):bf>bb?0.01>bf?(bc=0.707106781,bd=0,cc=0.707106781):(bd=Math.sqrt(bf),bc=cc/bd,cc=be/bd):0.01>bb?(bd=bc=0.707106781,cc=0):(cc=Math.sqrt(bb),bc=cb/cc,bd=be/cc);this.set(bc,bd,cc,ce);return this}ce=Math.sqrt((bc-be)*(bc-be)+(cb-bd)*(cb-bd)+(bg-cc)*(bg-cc));0.001>Math.abs(ce)&&(ce=1);this.x=(bc-be)/ce;this.y=(cb-bd)/ce;this.z=(bg-cc)/ce;this.w=Math.acos((cd+bf+bb-1)/2);return this},min:function(bb){this.x=Math.min(this.x,bb.x);this.y=Math.min(this.y,bb.y);this.z=Math.min(this.z,bb.z);this.w=Math.min(this.w,bb.w);return this},max:function(bb){this.x=Math.max(this.x,bb.x);this.y=Math.max(this.y,bb.y);this.z=Math.max(this.z,bb.z);this.w=Math.max(this.w,bb.w);return this},clamp:function(bc,bb){this.x=Math.max(bc.x,Math.min(bb.x,this.x));this.y=Math.max(bc.y,Math.min(bb.y,this.y));this.z=Math.max(bc.z,Math.min(bb.z,this.z));this.w=Math.max(bc.w,Math.min(bb.w,this.w));return this},clampScalar:function(){var bc,bb;return function(be,bd){void 0===bc&&(bc=new fJ,bb=new fJ);bc.set(be,be,be,be);bb.set(bd,bd,bd,bd);return this.clamp(bc,bb)}}(),clampLength:function(bc,bb){var bd=this.length();return this.divideScalar(bd||1).multiplyScalar(Math.max(bc,Math.min(bb,bd)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(bb){return this.x*bb.x+this.y*bb.y+this.z*bb.z+this.w*bb.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(bb){return this.normalize().multiplyScalar(bb)},lerp:function(bc,bb){this.x+=(bc.x-this.x)*bb;this.y+=(bc.y-this.y)*bb;this.z+=(bc.z-this.z)*bb;this.w+=(bc.w-this.w)*bb;return this},lerpVectors:function(bc,bb,bd){return this.subVectors(bb,bc).multiplyScalar(bd).add(bc)},equals:function(bb){return bb.x===this.x&&bb.y===this.y&&bb.z===this.z&&bb.w===this.w},fromArray:function(bc,bb){void 0===bb&&(bb=0);this.x=bc[bb];this.y=bc[bb+1];this.z=bc[bb+2];this.w=bc[bb+3];return this},toArray:function(bc,bb){void 0===bc&&(bc=[]);void 0===bb&&(bb=0);bc[bb]=this.x;bc[bb+1]=this.y;bc[bb+2]=this.z;bc[bb+3]=this.w;return bc},fromBufferAttribute:function(bc,bb,bd){void 0!==bd&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=bc.getX(bb);this.y=bc.getY(bb);this.z=bc.getZ(bb);this.w=bc.getW(bb);return this}});Object.assign(bV.prototype,c1.prototype,{isWebGLRenderTarget:!0,setSize:function(bc,bb){if(this.width!==bc||this.height!==bb){this.width=bc,this.height=bb,this.dispose()}this.viewport.set(0,0,bc,bb);this.scissor.set(0,0,bc,bb)},clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.width=bb.width;this.height=bb.height;this.viewport.copy(bb.viewport);this.texture=bb.texture.clone();this.depthBuffer=bb.depthBuffer;this.stencilBuffer=bb.stencilBuffer;this.depthTexture=bb.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});bC.prototype=Object.create(bV.prototype);bC.prototype.constructor=bC;bC.prototype.isWebGLRenderTargetCube=!0;Object.assign(d6,{slerp:function(bc,bb,be,bd){return be.copy(bc).slerp(bb,bd)},slerpFlat:function(dc,db,da,cg,cf,ce,cd){var cc=da[cg+0],cb=da[cg+1],bg=da[cg+2];da=da[cg+3];cg=cf[ce+0];var bc=cf[ce+1],bd=cf[ce+2];cf=cf[ce+3];if(da!==cf||cc!==cg||cb!==bc||bg!==bd){ce=1-cd;var bf=cc*cg+cb*bc+bg*bd+da*cf,bb=0<=bf?1:-1,be=1-bf*bf;be>Number.EPSILON&&(be=Math.sqrt(be),bf=Math.atan2(be,bf*bb),ce=Math.sin(ce*bf)/be,cd=Math.sin(cd*bf)/be);bb*=cd;cc=cc*ce+cg*bb;cb=cb*ce+bc*bb;bg=bg*ce+bd*bb;da=da*ce+cf*bb;ce===1-cd&&(cd=1/Math.sqrt(cc*cc+cb*cb+bg*bg+da*da),cc*=cd,cb*=cd,bg*=cd,da*=cd)}dc[db]=cc;dc[db+1]=cb;dc[db+2]=bg;dc[db+3]=da}});Object.defineProperties(d6.prototype,{x:{get:function(){return this._x},set:function(bb){this._x=bb;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(bb){this._y=bb;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(bb){this._z=bb;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(bb){this._w=bb;this.onChangeCallback()}}});Object.assign(d6.prototype,{set:function(bc,bb,be,bd){this._x=bc;this._y=bb;this._z=be;this._w=bd;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(bb){this._x=bb.x;this._y=bb.y;this._z=bb.z;this._w=bb.w;this.onChangeCallback();return this},setFromEuler:function(cd,cc){if(!cd||!cd.isEuler){throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")}var cb=cd._x,bg=cd._y,bf=cd._z;cd=cd.order;var be=Math.cos,bd=Math.sin,bc=be(cb/2),bb=be(bg/2),be=be(bf/2),cb=bd(cb/2),bg=bd(bg/2),bf=bd(bf/2);"XYZ"===cd?(this._x=cb*bb*be+bc*bg*bf,this._y=bc*bg*be-cb*bb*bf,this._z=bc*bb*bf+cb*bg*be,this._w=bc*bb*be-cb*bg*bf):"YXZ"===cd?(this._x=cb*bb*be+bc*bg*bf,this._y=bc*bg*be-cb*bb*bf,this._z=bc*bb*bf-cb*bg*be,this._w=bc*bb*be+cb*bg*bf):"ZXY"===cd?(this._x=cb*bb*be-bc*bg*bf,this._y=bc*bg*be+cb*bb*bf,this._z=bc*bb*bf+cb*bg*be,this._w=bc*bb*be-cb*bg*bf):"ZYX"===cd?(this._x=cb*bb*be-bc*bg*bf,this._y=bc*bg*be+cb*bb*bf,this._z=bc*bb*bf-cb*bg*be,this._w=bc*bb*be+cb*bg*bf):"YZX"===cd?(this._x=cb*bb*be+bc*bg*bf,this._y=bc*bg*be+cb*bb*bf,this._z=bc*bb*bf-cb*bg*be,this._w=bc*bb*be-cb*bg*bf):"XZY"===cd&&(this._x=cb*bb*be-bc*bg*bf,this._y=bc*bg*be-cb*bb*bf,this._z=bc*bb*bf+cb*bg*be,this._w=bc*bb*be+cb*bg*bf);if(!1!==cc){this.onChangeCallback()}return this},setFromAxisAngle:function(bc,bb){bb/=2;var bd=Math.sin(bb);this._x=bc.x*bd;this._y=bc.y*bd;this._z=bc.z*bd;this._w=Math.cos(bb);this.onChangeCallback();return this},setFromRotationMatrix:function(ce){var cd=ce.elements,cc=cd[0];ce=cd[4];var cb=cd[8],bg=cd[1],bf=cd[5],be=cd[9],bd=cd[2],bc=cd[6],cd=cd[10],bb=cc+bf+cd;0<bb?(cc=0.5/Math.sqrt(bb+1),this._w=0.25/cc,this._x=(bc-be)*cc,this._y=(cb-bd)*cc,this._z=(bg-ce)*cc):cc>bf&&cc>cd?(cc=2*Math.sqrt(1+cc-bf-cd),this._w=(bc-be)/cc,this._x=0.25*cc,this._y=(ce+bg)/cc,this._z=(cb+bd)/cc):bf>cd?(cc=2*Math.sqrt(1+bf-cc-cd),this._w=(cb-bd)/cc,this._x=(ce+bg)/cc,this._y=0.25*cc,this._z=(be+bc)/cc):(cc=2*Math.sqrt(1+cd-cc-bf),this._w=(bg-ce)/cc,this._x=(cb+bd)/cc,this._y=(be+bc)/cc,this._z=0.25*cc);this.onChangeCallback();return this},setFromUnitVectors:function(){var bc=new ft,bb;return function(be,bd){void 0===bc&&(bc=new ft);bb=be.dot(bd)+1;0.000001>bb?(bb=0,Math.abs(be.x)>Math.abs(be.z)?bc.set(-be.y,be.x,0):bc.set(0,-be.z,be.y)):bc.crossVectors(be,bd);this._x=bc.x;this._y=bc.y;this._z=bc.z;this._w=bb;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(bb){return this._x*bb._x+this._y*bb._y+this._z*bb._z+this._w*bb._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var bb=this.length();0===bb?(this._z=this._y=this._x=0,this._w=1):(bb=1/bb,this._x*=bb,this._y*=bb,this._z*=bb,this._w*=bb);this.onChangeCallback();return this},multiply:function(bc,bb){return void 0!==bb?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(bc,bb)):this.multiplyQuaternions(this,bc)},premultiply:function(bb){return this.multiplyQuaternions(bb,this)},multiplyQuaternions:function(bc,bb){var cc=bc._x,cb=bc._y,bg=bc._z;bc=bc._w;var bf=bb._x,be=bb._y,bd=bb._z;bb=bb._w;this._x=cc*bb+bc*bf+cb*bd-bg*be;this._y=cb*bb+bc*be+bg*bf-cc*bd;this._z=bg*bb+bc*bd+cc*be-cb*bf;this._w=bc*bb-cc*bf-cb*be-bg*bd;this.onChangeCallback();return this},slerp:function(bc,bb){if(0===bb){return this}if(1===bb){return this.copy(bc)}var cc=this._x,cb=this._y,bg=this._z,bf=this._w,be=bf*bc._w+cc*bc._x+cb*bc._y+bg*bc._z;0>be?(this._w=-bc._w,this._x=-bc._x,this._y=-bc._y,this._z=-bc._z,be=-be):this.copy(bc);if(1<=be){return this._w=bf,this._x=cc,this._y=cb,this._z=bg,this}bc=Math.sqrt(1-be*be);if(0.001>Math.abs(bc)){return this._w=0.5*(bf+this._w),this._x=0.5*(cc+this._x),this._y=0.5*(cb+this._y),this._z=0.5*(bg+this._z),this}var bd=Math.atan2(bc,be),be=Math.sin((1-bb)*bd)/bc;bb=Math.sin(bb*bd)/bc;this._w=bf*be+this._w*bb;this._x=cc*be+this._x*bb;this._y=cb*be+this._y*bb;this._z=bg*be+this._z*bb;this.onChangeCallback();return this},equals:function(bb){return bb._x===this._x&&bb._y===this._y&&bb._z===this._z&&bb._w===this._w},fromArray:function(bc,bb){void 0===bb&&(bb=0);this._x=bc[bb];this._y=bc[bb+1];this._z=bc[bb+2];this._w=bc[bb+3];this.onChangeCallback();return this},toArray:function(bc,bb){void 0===bc&&(bc=[]);void 0===bb&&(bb=0);bc[bb]=this._x;bc[bb+1]=this._y;bc[bb+2]=this._z;bc[bb+3]=this._w;return bc},onChange:function(bb){this.onChangeCallback=bb;return this},onChangeCallback:function(){}});Object.assign(ft.prototype,{isVector3:!0,set:function(bc,bb,bd){this.x=bc;this.y=bb;this.z=bd;return this},setScalar:function(bb){this.z=this.y=this.x=bb;return this},setX:function(bb){this.x=bb;return this},setY:function(bb){this.y=bb;return this},setZ:function(bb){this.z=bb;return this},setComponent:function(bc,bb){switch(bc){case 0:this.x=bb;break;case 1:this.y=bb;break;case 2:this.z=bb;break;default:throw Error("index is out of range: "+bc)}return this},getComponent:function(bb){switch(bb){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+bb)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(bb){this.x=bb.x;this.y=bb.y;this.z=bb.z;return this},add:function(bc,bb){if(void 0!==bb){return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(bc,bb)}this.x+=bc.x;this.y+=bc.y;this.z+=bc.z;return this},addScalar:function(bb){this.x+=bb;this.y+=bb;this.z+=bb;return this},addVectors:function(bc,bb){this.x=bc.x+bb.x;this.y=bc.y+bb.y;this.z=bc.z+bb.z;return this},addScaledVector:function(bc,bb){this.x+=bc.x*bb;this.y+=bc.y*bb;this.z+=bc.z*bb;return this},sub:function(bc,bb){if(void 0!==bb){return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(bc,bb)}this.x-=bc.x;this.y-=bc.y;this.z-=bc.z;return this},subScalar:function(bb){this.x-=bb;this.y-=bb;this.z-=bb;return this},subVectors:function(bc,bb){this.x=bc.x-bb.x;this.y=bc.y-bb.y;this.z=bc.z-bb.z;return this},multiply:function(bc,bb){if(void 0!==bb){return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(bc,bb)}this.x*=bc.x;this.y*=bc.y;this.z*=bc.z;return this},multiplyScalar:function(bb){this.x*=bb;this.y*=bb;this.z*=bb;return this},multiplyVectors:function(bc,bb){this.x=bc.x*bb.x;this.y=bc.y*bb.y;this.z=bc.z*bb.z;return this},applyEuler:function(){var bb=new d6;return function(bc){bc&&bc.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(bb.setFromEuler(bc))}}(),applyAxisAngle:function(){var bb=new d6;return function(bc,bd){return this.applyQuaternion(bb.setFromAxisAngle(bc,bd))}}(),applyMatrix3:function(bc){var bb=this.x,be=this.y,bd=this.z;bc=bc.elements;this.x=bc[0]*bb+bc[3]*be+bc[6]*bd;this.y=bc[1]*bb+bc[4]*be+bc[7]*bd;this.z=bc[2]*bb+bc[5]*be+bc[8]*bd;return this},applyMatrix4:function(bc){var bb=this.x,bf=this.y,be=this.z;bc=bc.elements;var bd=1/(bc[3]*bb+bc[7]*bf+bc[11]*be+bc[15]);this.x=(bc[0]*bb+bc[4]*bf+bc[8]*be+bc[12])*bd;this.y=(bc[1]*bb+bc[5]*bf+bc[9]*be+bc[13])*bd;this.z=(bc[2]*bb+bc[6]*bf+bc[10]*be+bc[14])*bd;return this},applyQuaternion:function(ce){var cd=this.x,cc=this.y,cb=this.z,bg=ce.x,bf=ce.y,be=ce.z;ce=ce.w;var bd=ce*cd+bf*cb-be*cc,bc=ce*cc+be*cd-bg*cb,bb=ce*cb+bg*cc-bf*cd,cd=-bg*cd-bf*cc-be*cb;this.x=bd*ce+cd*-bg+bc*-be-bb*-bf;this.y=bc*ce+cd*-bf+bb*-bg-bd*-be;this.z=bb*ce+cd*-be+bd*-bf-bc*-bg;return this},project:function(){var bb=new fN;return function(bc){bb.multiplyMatrices(bc.projectionMatrix,bb.getInverse(bc.matrixWorld));return this.applyMatrix4(bb)}}(),unproject:function(){var bb=new fN;return function(bc){bb.multiplyMatrices(bc.matrixWorld,bb.getInverse(bc.projectionMatrix));return this.applyMatrix4(bb)}}(),transformDirection:function(bc){var bb=this.x,be=this.y,bd=this.z;bc=bc.elements;this.x=bc[0]*bb+bc[4]*be+bc[8]*bd;this.y=bc[1]*bb+bc[5]*be+bc[9]*bd;this.z=bc[2]*bb+bc[6]*be+bc[10]*bd;return this.normalize()},divide:function(bb){this.x/=bb.x;this.y/=bb.y;this.z/=bb.z;return this},divideScalar:function(bb){return this.multiplyScalar(1/bb)},min:function(bb){this.x=Math.min(this.x,bb.x);this.y=Math.min(this.y,bb.y);this.z=Math.min(this.z,bb.z);return this},max:function(bb){this.x=Math.max(this.x,bb.x);this.y=Math.max(this.y,bb.y);this.z=Math.max(this.z,bb.z);return this},clamp:function(bc,bb){this.x=Math.max(bc.x,Math.min(bb.x,this.x));this.y=Math.max(bc.y,Math.min(bb.y,this.y));this.z=Math.max(bc.z,Math.min(bb.z,this.z));return this},clampScalar:function(){var bc=new ft,bb=new ft;return function(be,bd){bc.set(be,be,be);bb.set(bd,bd,bd);return this.clamp(bc,bb)}}(),clampLength:function(bc,bb){var bd=this.length();return this.divideScalar(bd||1).multiplyScalar(Math.max(bc,Math.min(bb,bd)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(bb){return this.x*bb.x+this.y*bb.y+this.z*bb.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(bb){return this.normalize().multiplyScalar(bb)},lerp:function(bc,bb){this.x+=(bc.x-this.x)*bb;this.y+=(bc.y-this.y)*bb;this.z+=(bc.z-this.z)*bb;return this},lerpVectors:function(bc,bb,bd){return this.subVectors(bb,bc).multiplyScalar(bd).add(bc)},cross:function(bc,bb){if(void 0!==bb){return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(bc,bb)}bb=this.x;var be=this.y,bd=this.z;this.x=be*bc.z-bd*bc.y;this.y=bd*bc.x-bb*bc.z;this.z=bb*bc.y-be*bc.x;return this},crossVectors:function(bc,bb){var bg=bc.x,bf=bc.y;bc=bc.z;var be=bb.x,bd=bb.y;bb=bb.z;this.x=bf*bb-bc*bd;this.y=bc*be-bg*bb;this.z=bg*bd-bf*be;return this},projectOnVector:function(bc){var bb=bc.dot(this)/bc.lengthSq();return this.copy(bc).multiplyScalar(bb)},projectOnPlane:function(){var bb=new ft;return function(bc){bb.copy(this).projectOnVector(bc);return this.sub(bb)}}(),reflect:function(){var bb=new ft;return function(bc){return this.sub(bb.copy(bc).multiplyScalar(2*this.dot(bc)))}}(),angleTo:function(bb){bb=this.dot(bb)/Math.sqrt(this.lengthSq()*bb.lengthSq());return Math.acos(fK.clamp(bb,-1,1))},distanceTo:function(bb){return Math.sqrt(this.distanceToSquared(bb))},distanceToSquared:function(bc){var bb=this.x-bc.x,bd=this.y-bc.y;bc=this.z-bc.z;return bb*bb+bd*bd+bc*bc},distanceToManhattan:function(bb){return Math.abs(this.x-bb.x)+Math.abs(this.y-bb.y)+Math.abs(this.z-bb.z)},setFromSpherical:function(bc){var bb=Math.sin(bc.phi)*bc.radius;this.x=bb*Math.sin(bc.theta);this.y=Math.cos(bc.phi)*bc.radius;this.z=bb*Math.cos(bc.theta);return this},setFromCylindrical:function(bb){this.x=bb.radius*Math.sin(bb.theta);this.y=bb.y;this.z=bb.radius*Math.cos(bb.theta);return this},setFromMatrixPosition:function(bb){bb=bb.elements;this.x=bb[12];this.y=bb[13];this.z=bb[14];return this},setFromMatrixScale:function(bc){var bb=this.setFromMatrixColumn(bc,0).length(),bd=this.setFromMatrixColumn(bc,1).length();bc=this.setFromMatrixColumn(bc,2).length();this.x=bb;this.y=bd;this.z=bc;return this},setFromMatrixColumn:function(bc,bb){return this.fromArray(bc.elements,4*bb)},equals:function(bb){return bb.x===this.x&&bb.y===this.y&&bb.z===this.z},fromArray:function(bc,bb){void 0===bb&&(bb=0);this.x=bc[bb];this.y=bc[bb+1];this.z=bc[bb+2];return this},toArray:function(bc,bb){void 0===bc&&(bc=[]);void 0===bb&&(bb=0);bc[bb]=this.x;bc[bb+1]=this.y;bc[bb+2]=this.z;return bc},fromBufferAttribute:function(bc,bb,bd){void 0!==bd&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=bc.getX(bb);this.y=bc.getY(bb);this.z=bc.getZ(bb);return this}});Object.assign(fN.prototype,{isMatrix4:!0,set:function(dc,db,da,cg,cf,ce,cd,cc,cb,bg,bc,bd,bf,bb,be,dd){var de=this.elements;de[0]=dc;de[4]=db;de[8]=da;de[12]=cg;de[1]=cf;de[5]=ce;de[9]=cd;de[13]=cc;de[2]=cb;de[6]=bg;de[10]=bc;de[14]=bd;de[3]=bf;de[7]=bb;de[11]=be;de[15]=dd;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new fN).fromArray(this.elements)},copy:function(bc){var bb=this.elements;bc=bc.elements;bb[0]=bc[0];bb[1]=bc[1];bb[2]=bc[2];bb[3]=bc[3];bb[4]=bc[4];bb[5]=bc[5];bb[6]=bc[6];bb[7]=bc[7];bb[8]=bc[8];bb[9]=bc[9];bb[10]=bc[10];bb[11]=bc[11];bb[12]=bc[12];bb[13]=bc[13];bb[14]=bc[14];bb[15]=bc[15];return this},copyPosition:function(bc){var bb=this.elements;bc=bc.elements;bb[12]=bc[12];bb[13]=bc[13];bb[14]=bc[14];return this},extractBasis:function(bc,bb,bd){bc.setFromMatrixColumn(this,0);bb.setFromMatrixColumn(this,1);bd.setFromMatrixColumn(this,2);return this},makeBasis:function(bc,bb,bd){this.set(bc.x,bb.x,bd.x,0,bc.y,bb.y,bd.y,0,bc.z,bb.z,bd.z,0,0,0,0,1);return this},extractRotation:function(){var bb=new ft;return function(bc){var bg=this.elements,bf=bc.elements,be=1/bb.setFromMatrixColumn(bc,0).length(),bd=1/bb.setFromMatrixColumn(bc,1).length();bc=1/bb.setFromMatrixColumn(bc,2).length();bg[0]=bf[0]*be;bg[1]=bf[1]*be;bg[2]=bf[2]*be;bg[4]=bf[4]*bd;bg[5]=bf[5]*bd;bg[6]=bf[6]*bd;bg[8]=bf[8]*bc;bg[9]=bf[9]*bc;bg[10]=bf[10]*bc;return this}}(),makeRotationFromEuler:function(cf){cf&&cf.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var ce=this.elements,cd=cf.x,cc=cf.y,cb=cf.z,bg=Math.cos(cd),cd=Math.sin(cd),bf=Math.cos(cc),cc=Math.sin(cc),be=Math.cos(cb),cb=Math.sin(cb);if("XYZ"===cf.order){var bd=bg*be;var bc=bg*cb;var bb=cd*be;cf=cd*cb;ce[0]=bf*be;ce[4]=-bf*cb;ce[8]=cc;ce[1]=bc+bb*cc;ce[5]=bd-cf*cc;ce[9]=-cd*bf;ce[2]=cf-bd*cc;ce[6]=bb+bc*cc;ce[10]=bg*bf}else{"YXZ"===cf.order?(bd=bf*be,bc=bf*cb,bb=cc*be,cf=cc*cb,ce[0]=bd+cf*cd,ce[4]=bb*cd-bc,ce[8]=bg*cc,ce[1]=bg*cb,ce[5]=bg*be,ce[9]=-cd,ce[2]=bc*cd-bb,ce[6]=cf+bd*cd,ce[10]=bg*bf):"ZXY"===cf.order?(bd=bf*be,bc=bf*cb,bb=cc*be,cf=cc*cb,ce[0]=bd-cf*cd,ce[4]=-bg*cb,ce[8]=bb+bc*cd,ce[1]=bc+bb*cd,ce[5]=bg*be,ce[9]=cf-bd*cd,ce[2]=-bg*cc,ce[6]=cd,ce[10]=bg*bf):"ZYX"===cf.order?(bd=bg*be,bc=bg*cb,bb=cd*be,cf=cd*cb,ce[0]=bf*be,ce[4]=bb*cc-bc,ce[8]=bd*cc+cf,ce[1]=bf*cb,ce[5]=cf*cc+bd,ce[9]=bc*cc-bb,ce[2]=-cc,ce[6]=cd*bf,ce[10]=bg*bf):"YZX"===cf.order?(bd=bg*bf,bc=bg*cc,bb=cd*bf,cf=cd*cc,ce[0]=bf*be,ce[4]=cf-bd*cb,ce[8]=bb*cb+bc,ce[1]=cb,ce[5]=bg*be,ce[9]=-cd*be,ce[2]=-cc*be,ce[6]=bc*cb+bb,ce[10]=bd-cf*cb):"XZY"===cf.order&&(bd=bg*bf,bc=bg*cc,bb=cd*bf,cf=cd*cc,ce[0]=bf*be,ce[4]=-cb,ce[8]=cc*be,ce[1]=bd*cb+cf,ce[5]=bg*be,ce[9]=bc*cb-bb,ce[2]=bb*cb-bc,ce[6]=cd*be,ce[10]=cf*cb+bd)}ce[3]=0;ce[7]=0;ce[11]=0;ce[12]=0;ce[13]=0;ce[14]=0;ce[15]=1;return this},makeRotationFromQuaternion:function(cf){var ce=this.elements,cd=cf._x,cc=cf._y,cb=cf._z,bg=cf._w,bf=cd+cd,be=cc+cc,bd=cb+cb;cf=cd*bf;var bc=cd*be,cd=cd*bd,bb=cc*be,cc=cc*bd,cb=cb*bd,bf=bg*bf,be=bg*be,bg=bg*bd;ce[0]=1-(bb+cb);ce[4]=bc-bg;ce[8]=cd+be;ce[1]=bc+bg;ce[5]=1-(cf+cb);ce[9]=cc-bf;ce[2]=cd-be;ce[6]=cc+bf;ce[10]=1-(cf+bb);ce[3]=0;ce[7]=0;ce[11]=0;ce[12]=0;ce[13]=0;ce[14]=0;ce[15]=1;return this},lookAt:function(){var bc=new ft,bb=new ft,bd=new ft;return function(cb,bg,bf){var be=this.elements;bd.subVectors(cb,bg);0===bd.lengthSq()&&(bd.z=1);bd.normalize();bc.crossVectors(bf,bd);0===bc.lengthSq()&&(1===Math.abs(bf.z)?bd.x+=0.0001:bd.z+=0.0001,bd.normalize(),bc.crossVectors(bf,bd));bc.normalize();bb.crossVectors(bd,bc);be[0]=bc.x;be[4]=bb.x;be[8]=bd.x;be[1]=bc.y;be[5]=bb.y;be[9]=bd.y;be[2]=bc.z;be[6]=bb.z;be[10]=bd.z;return this}}(),multiply:function(bc,bb){return void 0!==bb?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(bc,bb)):this.multiplyMatrices(this,bc)},premultiply:function(bb){return this.multiplyMatrices(bb,this)},multiplyMatrices:function(ff,fe){var fd=ff.elements,fc=fe.elements;fe=this.elements;ff=fd[0];var fb=fd[4],fa=fd[8],eg=fd[12],ef=fd[1],ee=fd[5],ed=fd[9],df=fd[13],ea=fd[2],ec=fd[6],dd=fd[10],eb=fd[14],da=fd[3],cd=fd[7],cb=fd[11],fd=fd[15],dg=fc[0],cc=fc[4],de=fc[8],cf=fc[12],ce=fc[1],bf=fc[5],db=fc[9],dc=fc[13],cg=fc[2],bd=fc[6],bg=fc[10],be=fc[14],fg=fc[3],bc=fc[7],bb=fc[11],fc=fc[15];fe[0]=ff*dg+fb*ce+fa*cg+eg*fg;fe[4]=ff*cc+fb*bf+fa*bd+eg*bc;fe[8]=ff*de+fb*db+fa*bg+eg*bb;fe[12]=ff*cf+fb*dc+fa*be+eg*fc;fe[1]=ef*dg+ee*ce+ed*cg+df*fg;fe[5]=ef*cc+ee*bf+ed*bd+df*bc;fe[9]=ef*de+ee*db+ed*bg+df*bb;fe[13]=ef*cf+ee*dc+ed*be+df*fc;fe[2]=ea*dg+ec*ce+dd*cg+eb*fg;fe[6]=ea*cc+ec*bf+dd*bd+eb*bc;fe[10]=ea*de+ec*db+dd*bg+eb*bb;fe[14]=ea*cf+ec*dc+dd*be+eb*fc;fe[3]=da*dg+cd*ce+cb*cg+fd*fg;fe[7]=da*cc+cd*bf+cb*bd+fd*bc;fe[11]=da*de+cd*db+cb*bg+fd*bb;fe[15]=da*cf+cd*dc+cb*be+fd*fc;return this},multiplyScalar:function(bc){var bb=this.elements;bb[0]*=bc;bb[4]*=bc;bb[8]*=bc;bb[12]*=bc;bb[1]*=bc;bb[5]*=bc;bb[9]*=bc;bb[13]*=bc;bb[2]*=bc;bb[6]*=bc;bb[10]*=bc;bb[14]*=bc;bb[3]*=bc;bb[7]*=bc;bb[11]*=bc;bb[15]*=bc;return this},applyToBufferAttribute:function(){var bb=new ft;return function(bc){for(var be=0,bd=bc.count;be<bd;be++){bb.x=bc.getX(be),bb.y=bc.getY(be),bb.z=bc.getZ(be),bb.applyMatrix4(this),bc.setXYZ(be,bb.x,bb.y,bb.z)}return bc}}(),determinant:function(){var da=this.elements,cg=da[0],cf=da[4],ce=da[8],cd=da[12],cc=da[1],cb=da[5],bg=da[9],bf=da[13],be=da[2],bb=da[6],bc=da[10],bd=da[14];return da[3]*(+cd*bg*bb-ce*bf*bb-cd*cb*bc+cf*bf*bc+ce*cb*bd-cf*bg*bd)+da[7]*(+cg*bg*bd-cg*bf*bc+cd*cc*bc-ce*cc*bd+ce*bf*be-cd*bg*be)+da[11]*(+cg*bf*bb-cg*cb*bd-cd*cc*bb+cf*cc*bd+cd*cb*be-cf*bf*be)+da[15]*(-ce*cb*be-cg*bg*bb+cg*cb*bc+ce*cc*bb-cf*cc*bc+cf*bg*be)},transpose:function(){var bc=this.elements;var bb=bc[1];bc[1]=bc[4];bc[4]=bb;bb=bc[2];bc[2]=bc[8];bc[8]=bb;bb=bc[6];bc[6]=bc[9];bc[9]=bb;bb=bc[3];bc[3]=bc[12];bc[12]=bb;bb=bc[7];bc[7]=bc[13];bc[13]=bb;bb=bc[11];bc[11]=bc[14];bc[14]=bb;return this},setPosition:function(bc){var bb=this.elements;bb[12]=bc.x;bb[13]=bc.y;bb[14]=bc.z;return this},getInverse:function(ed,ec){var eb=this.elements,ea=ed.elements;ed=ea[0];var dg=ea[1],df=ea[2],de=ea[3],dd=ea[4],dc=ea[5],db=ea[6],cd=ea[7],cf=ea[8],da=ea[9],cb=ea[10],cg=ea[11],bg=ea[12],bd=ea[13],bb=ea[14],ea=ea[15],ce=da*bb*cd-bd*cb*cd+bd*db*cg-dc*bb*cg-da*db*ea+dc*cb*ea,bc=bg*cb*cd-cf*bb*cd-bg*db*cg+dd*bb*cg+cf*db*ea-dd*cb*ea,cc=cf*bd*cd-bg*da*cd+bg*dc*cg-dd*bd*cg-cf*dc*ea+dd*da*ea,bf=bg*da*db-cf*bd*db-bg*dc*cb+dd*bd*cb+cf*dc*bb-dd*da*bb,be=ed*ce+dg*bc+df*cc+de*bf;if(0===be){if(!0===ec){throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0")}console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}ec=1/be;eb[0]=ce*ec;eb[1]=(bd*cb*de-da*bb*de-bd*df*cg+dg*bb*cg+da*df*ea-dg*cb*ea)*ec;eb[2]=(dc*bb*de-bd*db*de+bd*df*cd-dg*bb*cd-dc*df*ea+dg*db*ea)*ec;eb[3]=(da*db*de-dc*cb*de-da*df*cd+dg*cb*cd+dc*df*cg-dg*db*cg)*ec;eb[4]=bc*ec;eb[5]=(cf*bb*de-bg*cb*de+bg*df*cg-ed*bb*cg-cf*df*ea+ed*cb*ea)*ec;eb[6]=(bg*db*de-dd*bb*de-bg*df*cd+ed*bb*cd+dd*df*ea-ed*db*ea)*ec;eb[7]=(dd*cb*de-cf*db*de+cf*df*cd-ed*cb*cd-dd*df*cg+ed*db*cg)*ec;eb[8]=cc*ec;eb[9]=(bg*da*de-cf*bd*de-bg*dg*cg+ed*bd*cg+cf*dg*ea-ed*da*ea)*ec;eb[10]=(dd*bd*de-bg*dc*de+bg*dg*cd-ed*bd*cd-dd*dg*ea+ed*dc*ea)*ec;eb[11]=(cf*dc*de-dd*da*de-cf*dg*cd+ed*da*cd+dd*dg*cg-ed*dc*cg)*ec;eb[12]=bf*ec;eb[13]=(cf*bd*df-bg*da*df+bg*dg*cb-ed*bd*cb-cf*dg*bb+ed*da*bb)*ec;eb[14]=(bg*dc*df-dd*bd*df-bg*dg*db+ed*bd*db+dd*dg*bb-ed*dc*bb)*ec;eb[15]=(dd*da*df-cf*dc*df+cf*dg*db-ed*da*db-dd*dg*cb+ed*dc*cb)*ec;return this},scale:function(bc){var bb=this.elements,be=bc.x,bd=bc.y;bc=bc.z;bb[0]*=be;bb[4]*=bd;bb[8]*=bc;bb[1]*=be;bb[5]*=bd;bb[9]*=bc;bb[2]*=be;bb[6]*=bd;bb[10]*=bc;bb[3]*=be;bb[7]*=bd;bb[11]*=bc;return this},getMaxScaleOnAxis:function(){var bb=this.elements;return Math.sqrt(Math.max(bb[0]*bb[0]+bb[1]*bb[1]+bb[2]*bb[2],bb[4]*bb[4]+bb[5]*bb[5]+bb[6]*bb[6],bb[8]*bb[8]+bb[9]*bb[9]+bb[10]*bb[10]))},makeTranslation:function(bc,bb,bd){this.set(1,0,0,bc,0,1,0,bb,0,0,1,bd,0,0,0,1);return this},makeRotationX:function(bc){var bb=Math.cos(bc);bc=Math.sin(bc);this.set(1,0,0,0,0,bb,-bc,0,0,bc,bb,0,0,0,0,1);return this},makeRotationY:function(bc){var bb=Math.cos(bc);bc=Math.sin(bc);this.set(bb,0,bc,0,0,1,0,0,-bc,0,bb,0,0,0,0,1);return this},makeRotationZ:function(bc){var bb=Math.cos(bc);bc=Math.sin(bc);this.set(bb,-bc,0,0,bc,bb,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(bc,bb){var cc=Math.cos(bb);bb=Math.sin(bb);var cb=1-cc,bg=bc.x,bf=bc.y;bc=bc.z;var be=cb*bg,bd=cb*bf;this.set(be*bg+cc,be*bf-bb*bc,be*bc+bb*bf,0,be*bf+bb*bc,bd*bf+cc,bd*bc-bb*bg,0,be*bc-bb*bf,bd*bc+bb*bg,cb*bc*bc+cc,0,0,0,0,1);return this},makeScale:function(bc,bb,bd){this.set(bc,0,0,0,0,bb,0,0,0,0,bd,0,0,0,0,1);return this},makeShear:function(bc,bb,bd){this.set(1,bb,bd,0,bc,1,bd,0,bc,bb,1,0,0,0,0,1);return this},compose:function(bc,bb,bd){this.makeRotationFromQuaternion(bb);this.scale(bd);this.setPosition(bc);return this},decompose:function(){var bc=new ft,bb=new fN;return function(ce,cd,cc){var cb=this.elements,bg=bc.set(cb[0],cb[1],cb[2]).length(),bf=bc.set(cb[4],cb[5],cb[6]).length(),be=bc.set(cb[8],cb[9],cb[10]).length();0>this.determinant()&&(bg=-bg);ce.x=cb[12];ce.y=cb[13];ce.z=cb[14];bb.copy(this);ce=1/bg;var cb=1/bf,bd=1/be;bb.elements[0]*=ce;bb.elements[1]*=ce;bb.elements[2]*=ce;bb.elements[4]*=cb;bb.elements[5]*=cb;bb.elements[6]*=cb;bb.elements[8]*=bd;bb.elements[9]*=bd;bb.elements[10]*=bd;cd.setFromRotationMatrix(bb);cc.x=bg;cc.y=bf;cc.z=be;return this}}(),makePerspective:function(bc,bb,cb,bg,bf,be){void 0===be&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var bd=this.elements;bd[0]=2*bf/(bb-bc);bd[4]=0;bd[8]=(bb+bc)/(bb-bc);bd[12]=0;bd[1]=0;bd[5]=2*bf/(cb-bg);bd[9]=(cb+bg)/(cb-bg);bd[13]=0;bd[2]=0;bd[6]=0;bd[10]=-(be+bf)/(be-bf);bd[14]=-2*be*bf/(be-bf);bd[3]=0;bd[7]=0;bd[11]=-1;bd[15]=0;return this},makeOrthographic:function(ce,cd,cc,cb,bg,bf){var be=this.elements,bd=1/(cd-ce),bc=1/(cc-cb),bb=1/(bf-bg);be[0]=2*bd;be[4]=0;be[8]=0;be[12]=-((cd+ce)*bd);be[1]=0;be[5]=2*bc;be[9]=0;be[13]=-((cc+cb)*bc);be[2]=0;be[6]=0;be[10]=-2*bb;be[14]=-((bf+bg)*bb);be[3]=0;be[7]=0;be[11]=0;be[15]=1;return this},equals:function(bc){var bb=this.elements;bc=bc.elements;for(var bd=0;16>bd;bd++){if(bb[bd]!==bc[bd]){return !1}}return !0},fromArray:function(bc,bb){void 0===bb&&(bb=0);for(var bd=0;16>bd;bd++){this.elements[bd]=bc[bd+bb]}return this},toArray:function(bc,bb){void 0===bc&&(bc=[]);void 0===bb&&(bb=0);var bd=this.elements;bc[bb]=bd[0];bc[bb+1]=bd[1];bc[bb+2]=bd[2];bc[bb+3]=bd[3];bc[bb+4]=bd[4];bc[bb+5]=bd[5];bc[bb+6]=bd[6];bc[bb+7]=bd[7];bc[bb+8]=bd[8];bc[bb+9]=bd[9];bc[bb+10]=bd[10];bc[bb+11]=bd[11];bc[bb+12]=bd[12];bc[bb+13]=bd[13];bc[bb+14]=bd[14];bc[bb+15]=bd[15];return bc}});fY.prototype=Object.create(fO.prototype);fY.prototype.constructor=fY;fY.prototype.isDataTexture=!0;cO.prototype=Object.create(fO.prototype);cO.prototype.constructor=cO;cO.prototype.isCubeTexture=!0;Object.defineProperty(cO.prototype,"images",{get:function(){return this.image},set:function(bb){this.image=bb}});var a5=new fO,aU=new cO,gv=[],bS=[],bn=new Float32Array(16),bz=new Float32Array(9);f1.prototype.setValue=function(bc,bb){for(var bg=this.seq,bf=0,be=bg.length;bf!==be;++bf){var bd=bg[bf];bd.setValue(bc,bb[bd.id])}};var d9=/([\w\d_]+)(\])?(\[|\.)?/g;fA.prototype.setValue=function(bc,bb,bd){bb=this.map[bb];void 0!==bb&&bb.setValue(bc,bd,this.renderer)};fA.prototype.setOptional=function(bc,bb,bd){bb=bb[bd];void 0!==bb&&this.setValue(bc,bd,bb)};fA.upload=function(bc,bb,cc,cb){for(var bg=0,bf=bb.length;bg!==bf;++bg){var be=bb[bg],bd=cc[be.id];!1!==bd.needsUpdate&&be.setValue(bc,bd.value,cb)}};fA.seqWithValue=function(bc,bb){for(var bg=[],bf=0,be=bc.length;bf!==be;++bf){var bd=bc[bf];bd.id in bb&&bg.push(bd)}return bg};var bX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(fZ.prototype,{isColor:!0,r:1,g:1,b:1,set:function(bb){bb&&bb.isColor?this.copy(bb):"number"===typeof bb?this.setHex(bb):"string"===typeof bb&&this.setStyle(bb);return this},setScalar:function(bb){this.b=this.g=this.r=bb;return this},setHex:function(bb){bb=Math.floor(bb);this.r=(bb>>16&255)/255;this.g=(bb>>8&255)/255;this.b=(bb&255)/255;return this},setRGB:function(bc,bb,bd){this.r=bc;this.g=bb;this.b=bd;return this},setHSL:function(){function bb(bc,be,bd){0>bd&&(bd+=1);1<bd&&--bd;return bd<1/6?bc+6*(be-bc)*bd:0.5>bd?be:bd<2/3?bc+6*(be-bc)*(2/3-bd):bc}return function(bc,be,bd){bc=fK.euclideanModulo(bc,1);be=fK.clamp(be,0,1);bd=fK.clamp(bd,0,1);0===be?this.r=this.g=this.b=bd:(be=0.5>=bd?bd*(1+be):bd+be-bd*be,bd=2*bd-be,this.r=bb(bd,be,bc+1/3),this.g=bb(bd,be,bc),this.b=bb(bd,be,bc-1/3));return this}}(),setStyle:function(bc){function bb(cb){void 0!==cb&&1>parseFloat(cb)&&console.warn("THREE.Color: Alpha component of "+bc+" will be ignored.")}var bg;if(bg=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(bc)){var bf=bg[2];switch(bg[1]){case"rgb":case"rgba":if(bg=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(bf)){return this.r=Math.min(255,parseInt(bg[1],10))/255,this.g=Math.min(255,parseInt(bg[2],10))/255,this.b=Math.min(255,parseInt(bg[3],10))/255,bb(bg[5]),this}if(bg=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(bf)){return this.r=Math.min(100,parseInt(bg[1],10))/100,this.g=Math.min(100,parseInt(bg[2],10))/100,this.b=Math.min(100,parseInt(bg[3],10))/100,bb(bg[5]),this}break;case"hsl":case"hsla":if(bg=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(bf)){var bf=parseFloat(bg[1])/360,be=parseInt(bg[2],10)/100,bd=parseInt(bg[3],10)/100;bb(bg[5]);return this.setHSL(bf,be,bd)}}}else{if(bg=/^\#([A-Fa-f0-9]+)$/.exec(bc)){bg=bg[1];bf=bg.length;if(3===bf){return this.r=parseInt(bg.charAt(0)+bg.charAt(0),16)/255,this.g=parseInt(bg.charAt(1)+bg.charAt(1),16)/255,this.b=parseInt(bg.charAt(2)+bg.charAt(2),16)/255,this}if(6===bf){return this.r=parseInt(bg.charAt(0)+bg.charAt(1),16)/255,this.g=parseInt(bg.charAt(2)+bg.charAt(3),16)/255,this.b=parseInt(bg.charAt(4)+bg.charAt(5),16)/255,this}}}bc&&0<bc.length&&(bg=bX[bc],void 0!==bg?this.setHex(bg):console.warn("THREE.Color: Unknown color "+bc));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(bb){this.r=bb.r;this.g=bb.g;this.b=bb.b;return this},copyGammaToLinear:function(bc,bb){void 0===bb&&(bb=2);this.r=Math.pow(bc.r,bb);this.g=Math.pow(bc.g,bb);this.b=Math.pow(bc.b,bb);return this},copyLinearToGamma:function(bc,bb){void 0===bb&&(bb=2);bb=0<bb?1/bb:1;this.r=Math.pow(bc.r,bb);this.g=Math.pow(bc.g,bb);this.b=Math.pow(bc.b,bb);return this},convertGammaToLinear:function(){var bc=this.r,bb=this.g,bd=this.b;this.r=bc*bc;this.g=bb*bb;this.b=bd*bd;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(cd){cd=cd||{h:0,s:0,l:0};var cc=this.r,cb=this.g,bg=this.b,bf=Math.max(cc,cb,bg),be=Math.min(cc,cb,bg),bd,bc=(be+bf)/2;if(be===bf){be=bd=0}else{var bb=bf-be,be=0.5>=bc?bb/(bf+be):bb/(2-bf-be);switch(bf){case cc:bd=(cb-bg)/bb+(cb<bg?6:0);break;case cb:bd=(bg-cc)/bb+2;break;case bg:bd=(cc-cb)/bb+4}bd/=6}cd.h=bd;cd.s=be;cd.l=bc;return cd},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(bc,bb,be){var bd=this.getHSL();bd.h+=bc;bd.s+=bb;bd.l+=be;this.setHSL(bd.h,bd.s,bd.l);return this},add:function(bb){this.r+=bb.r;this.g+=bb.g;this.b+=bb.b;return this},addColors:function(bc,bb){this.r=bc.r+bb.r;this.g=bc.g+bb.g;this.b=bc.b+bb.b;return this},addScalar:function(bb){this.r+=bb;this.g+=bb;this.b+=bb;return this},sub:function(bb){this.r=Math.max(0,this.r-bb.r);this.g=Math.max(0,this.g-bb.g);this.b=Math.max(0,this.b-bb.b);return this},multiply:function(bb){this.r*=bb.r;this.g*=bb.g;this.b*=bb.b;return this},multiplyScalar:function(bb){this.r*=bb;this.g*=bb;this.b*=bb;return this},lerp:function(bc,bb){this.r+=(bc.r-this.r)*bb;this.g+=(bc.g-this.g)*bb;this.b+=(bc.b-this.b)*bb;return this},equals:function(bb){return bb.r===this.r&&bb.g===this.g&&bb.b===this.b},fromArray:function(bc,bb){void 0===bb&&(bb=0);this.r=bc[bb];this.g=bc[bb+1];this.b=bc[bb+2];return this},toArray:function(bc,bb){void 0===bc&&(bc=[]);void 0===bb&&(bb=0);bc[bb]=this.r;bc[bb+1]=this.g;bc[bb+2]=this.b;return bc},toJSON:function(){return this.getHex()}});var fP={common:{diffuse:{value:new fZ(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new fJ(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:0.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new fX(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:0.00025},fogNear:{value:1},fogFar:{value:2000},fogColor:{value:new fZ(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new fZ(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new fJ(0,0,1,1)}}},a9={merge:function(bc){for(var bb={},bf=0;bf<bc.length;bf++){var be=this.clone(bc[bf]),bd;for(bd in be){bb[bd]=be[bd]}}return bb},clone:function(bc){var bb={},bf;for(bf in bc){bb[bf]={};for(var be in bc[bf]){var bd=bc[bf][be];bd&&(bd.isColor||bd.isMatrix3||bd.isMatrix4||bd.isVector2||bd.isVector3||bd.isVector4||bd.isTexture)?bb[bf][be]=bd.clone():Array.isArray(bd)?bb[bf][be]=bd.slice():bb[bf][be]=bd}}return bb}},fI={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"},d5={basic:{uniforms:a9.merge([fP.common,fP.specularmap,fP.envmap,fP.aomap,fP.lightmap,fP.fog]),vertexShader:fI.meshbasic_vert,fragmentShader:fI.meshbasic_frag},lambert:{uniforms:a9.merge([fP.common,fP.specularmap,fP.envmap,fP.aomap,fP.lightmap,fP.emissivemap,fP.fog,fP.lights,{emissive:{value:new fZ(0)}}]),vertexShader:fI.meshlambert_vert,fragmentShader:fI.meshlambert_frag},phong:{uniforms:a9.merge([fP.common,fP.specularmap,fP.envmap,fP.aomap,fP.lightmap,fP.emissivemap,fP.bumpmap,fP.normalmap,fP.displacementmap,fP.gradientmap,fP.fog,fP.lights,{emissive:{value:new fZ(0)},specular:{value:new fZ(1118481)},shininess:{value:30}}]),vertexShader:fI.meshphong_vert,fragmentShader:fI.meshphong_frag},standard:{uniforms:a9.merge([fP.common,fP.envmap,fP.aomap,fP.lightmap,fP.emissivemap,fP.bumpmap,fP.normalmap,fP.displacementmap,fP.roughnessmap,fP.metalnessmap,fP.fog,fP.lights,{emissive:{value:new fZ(0)},roughness:{value:0.5},metalness:{value:0.5},envMapIntensity:{value:1}}]),vertexShader:fI.meshphysical_vert,fragmentShader:fI.meshphysical_frag},points:{uniforms:a9.merge([fP.points,fP.fog]),vertexShader:fI.points_vert,fragmentShader:fI.points_frag},dashed:{uniforms:a9.merge([fP.common,fP.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fI.linedashed_vert,fragmentShader:fI.linedashed_frag},depth:{uniforms:a9.merge([fP.common,fP.displacementmap]),vertexShader:fI.depth_vert,fragmentShader:fI.depth_frag},normal:{uniforms:a9.merge([fP.common,fP.bumpmap,fP.normalmap,fP.displacementmap,{opacity:{value:1}}]),vertexShader:fI.normal_vert,fragmentShader:fI.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fI.cube_vert,fragmentShader:fI.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fI.equirect_vert,fragmentShader:fI.equirect_frag},distanceRGBA:{uniforms:a9.merge([fP.common,fP.displacementmap,{referencePosition:{value:new ft},nearDistance:{value:1},farDistance:{value:1000}}]),vertexShader:fI.distanceRGBA_vert,fragmentShader:fI.distanceRGBA_frag},shadow:{uniforms:a9.merge([fP.lights,{color:{value:new fZ(0)},opacity:{value:1}}]),vertexShader:fI.shadow_vert,fragmentShader:fI.shadow_frag}};d5.physical={uniforms:a9.merge([d5.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:fI.meshphysical_vert,fragmentShader:fI.meshphysical_frag};Object.assign(d3.prototype,{set:function(bc,bb){this.min.copy(bc);this.max.copy(bb);return this},setFromPoints:function(bc){this.makeEmpty();for(var bb=0,bd=bc.length;bb<bd;bb++){this.expandByPoint(bc[bb])}return this},setFromCenterAndSize:function(){var bb=new fX;return function(bc,bd){bd=bb.copy(bd).multiplyScalar(0.5);this.min.copy(bc).sub(bd);this.max.copy(bc).add(bd);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.min.copy(bb.min);this.max.copy(bb.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(bb){bb=bb||new fX;return this.isEmpty()?bb.set(0,0):bb.addVectors(this.min,this.max).multiplyScalar(0.5)},getSize:function(bb){bb=bb||new fX;return this.isEmpty()?bb.set(0,0):bb.subVectors(this.max,this.min)},expandByPoint:function(bb){this.min.min(bb);this.max.max(bb);return this},expandByVector:function(bb){this.min.sub(bb);this.max.add(bb);return this},expandByScalar:function(bb){this.min.addScalar(-bb);this.max.addScalar(bb);return this},containsPoint:function(bb){return bb.x<this.min.x||bb.x>this.max.x||bb.y<this.min.y||bb.y>this.max.y?!1:!0},containsBox:function(bb){return this.min.x<=bb.min.x&&bb.max.x<=this.max.x&&this.min.y<=bb.min.y&&bb.max.y<=this.max.y},getParameter:function(bc,bb){return(bb||new fX).set((bc.x-this.min.x)/(this.max.x-this.min.x),(bc.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(bb){return bb.max.x<this.min.x||bb.min.x>this.max.x||bb.max.y<this.min.y||bb.min.y>this.max.y?!1:!0},clampPoint:function(bc,bb){return(bb||new fX).copy(bc).clamp(this.min,this.max)},distanceToPoint:function(){var bb=new fX;return function(bc){return bb.copy(bc).clamp(this.min,this.max).sub(bc).length()}}(),intersect:function(bb){this.min.max(bb.min);this.max.min(bb.max);return this},union:function(bb){this.min.min(bb.min);this.max.max(bb.max);return this},translate:function(bb){this.min.add(bb);this.max.add(bb);return this},equals:function(bb){return bb.min.equals(this.min)&&bb.max.equals(this.max)}});cH.prototype=Object.create(fO.prototype);cH.prototype.constructor=cH;var eP=0;Object.assign(fM.prototype,c1.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(bc){if(void 0!==bc){for(var bb in bc){var be=bc[bb];if(void 0===be){console.warn("THREE.Material: '"+bb+"' parameter is undefined.")}else{if("shading"===bb){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===be?!0:!1}else{var bd=this[bb];void 0===bd?console.warn("THREE."+this.type+": '"+bb+"' is not a property of this material."):bd&&bd.isColor?bd.set(be):bd&&bd.isVector3&&be&&be.isVector3?bd.copy(be):this[bb]="overdraw"===bb?Number(be):be}}}}},toJSON:function(bc){function bb(bg){var bf=[],cc;for(cc in bg){var cb=bg[cc];delete cb.metadata;bf.push(cb)}return bf}var be=void 0===bc;be&&(bc={textures:{},images:{}});var bd={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};bd.uuid=this.uuid;bd.type=this.type;""!==this.name&&(bd.name=this.name);this.color&&this.color.isColor&&(bd.color=this.color.getHex());void 0!==this.roughness&&(bd.roughness=this.roughness);void 0!==this.metalness&&(bd.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(bd.emissive=this.emissive.getHex());this.specular&&this.specular.isColor&&(bd.specular=this.specular.getHex());void 0!==this.shininess&&(bd.shininess=this.shininess);void 0!==this.clearCoat&&(bd.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(bd.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(bd.map=this.map.toJSON(bc).uuid);this.alphaMap&&this.alphaMap.isTexture&&(bd.alphaMap=this.alphaMap.toJSON(bc).uuid);this.lightMap&&this.lightMap.isTexture&&(bd.lightMap=this.lightMap.toJSON(bc).uuid);this.bumpMap&&this.bumpMap.isTexture&&(bd.bumpMap=this.bumpMap.toJSON(bc).uuid,bd.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(bd.normalMap=this.normalMap.toJSON(bc).uuid,bd.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(bd.displacementMap=this.displacementMap.toJSON(bc).uuid,bd.displacementScale=this.displacementScale,bd.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(bd.roughnessMap=this.roughnessMap.toJSON(bc).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(bd.metalnessMap=this.metalnessMap.toJSON(bc).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(bd.emissiveMap=this.emissiveMap.toJSON(bc).uuid);this.specularMap&&this.specularMap.isTexture&&(bd.specularMap=this.specularMap.toJSON(bc).uuid);this.envMap&&this.envMap.isTexture&&(bd.envMap=this.envMap.toJSON(bc).uuid,bd.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(bd.gradientMap=this.gradientMap.toJSON(bc).uuid);void 0!==this.size&&(bd.size=this.size);void 0!==this.sizeAttenuation&&(bd.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(bd.blending=this.blending);!0===this.flatShading&&(bd.flatShading=this.flatShading);0!==this.side&&(bd.side=this.side);0!==this.vertexColors&&(bd.vertexColors=this.vertexColors);1>this.opacity&&(bd.opacity=this.opacity);!0===this.transparent&&(bd.transparent=this.transparent);bd.depthFunc=this.depthFunc;bd.depthTest=this.depthTest;bd.depthWrite=this.depthWrite;!0===this.dithering&&(bd.dithering=!0);0<this.alphaTest&&(bd.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(bd.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(bd.wireframe=this.wireframe);1<this.wireframeLinewidth&&(bd.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(bd.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(bd.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(bd.morphTargets=!0);!0===this.skinning&&(bd.skinning=!0);!1===this.visible&&(bd.visible=!1);"{}"!==JSON.stringify(this.userData)&&(bd.userData=this.userData);be&&(be=bb(bc.textures),bc=bb(bc.images),0<be.length&&(bd.textures=be),0<bc.length&&(bd.images=bc));return bd},clone:function(){return(new this.constructor).copy(this)},copy:function(bc){this.name=bc.name;this.fog=bc.fog;this.lights=bc.lights;this.blending=bc.blending;this.side=bc.side;this.flatShading=bc.flatShading;this.vertexColors=bc.vertexColors;this.opacity=bc.opacity;this.transparent=bc.transparent;this.blendSrc=bc.blendSrc;this.blendDst=bc.blendDst;this.blendEquation=bc.blendEquation;this.blendSrcAlpha=bc.blendSrcAlpha;this.blendDstAlpha=bc.blendDstAlpha;this.blendEquationAlpha=bc.blendEquationAlpha;this.depthFunc=bc.depthFunc;this.depthTest=bc.depthTest;this.depthWrite=bc.depthWrite;this.colorWrite=bc.colorWrite;this.precision=bc.precision;this.polygonOffset=bc.polygonOffset;this.polygonOffsetFactor=bc.polygonOffsetFactor;this.polygonOffsetUnits=bc.polygonOffsetUnits;this.dithering=bc.dithering;this.alphaTest=bc.alphaTest;this.premultipliedAlpha=bc.premultipliedAlpha;this.overdraw=bc.overdraw;this.visible=bc.visible;this.userData=JSON.parse(JSON.stringify(bc.userData));this.clipShadows=bc.clipShadows;this.clipIntersection=bc.clipIntersection;bc=bc.clippingPlanes;var bb=null;if(null!==bc){for(var be=bc.length,bb=Array(be),bd=0;bd!==be;++bd){bb[bd]=bc[bd].clone()}}this.clippingPlanes=bb;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});gz.prototype=Object.create(fM.prototype);gz.prototype.constructor=gz;gz.prototype.isShaderMaterial=!0;gz.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.fragmentShader=bb.fragmentShader;this.vertexShader=bb.vertexShader;this.uniforms=a9.clone(bb.uniforms);this.defines=bb.defines;this.wireframe=bb.wireframe;this.wireframeLinewidth=bb.wireframeLinewidth;this.lights=bb.lights;this.clipping=bb.clipping;this.skinning=bb.skinning;this.morphTargets=bb.morphTargets;this.morphNormals=bb.morphNormals;this.extensions=bb.extensions;return this};gz.prototype.toJSON=function(bb){bb=fM.prototype.toJSON.call(this,bb);bb.uniforms=this.uniforms;bb.vertexShader=this.vertexShader;bb.fragmentShader=this.fragmentShader;return bb};cC.prototype=Object.create(fM.prototype);cC.prototype.constructor=cC;cC.prototype.isMeshDepthMaterial=!0;cC.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.depthPacking=bb.depthPacking;this.skinning=bb.skinning;this.morphTargets=bb.morphTargets;this.map=bb.map;this.alphaMap=bb.alphaMap;this.displacementMap=bb.displacementMap;this.displacementScale=bb.displacementScale;this.displacementBias=bb.displacementBias;this.wireframe=bb.wireframe;this.wireframeLinewidth=bb.wireframeLinewidth;return this};cq.prototype=Object.create(fM.prototype);cq.prototype.constructor=cq;cq.prototype.isMeshDistanceMaterial=!0;cq.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.referencePosition.copy(bb.referencePosition);this.nearDistance=bb.nearDistance;this.farDistance=bb.farDistance;this.skinning=bb.skinning;this.morphTargets=bb.morphTargets;this.map=bb.map;this.alphaMap=bb.alphaMap;this.displacementMap=bb.displacementMap;this.displacementScale=bb.displacementScale;this.displacementBias=bb.displacementBias;return this};Object.assign(ej.prototype,{isBox3:!0,set:function(bc,bb){this.min.copy(bc);this.max.copy(bb);return this},setFromArray:function(cg){for(var cf=Infinity,ce=Infinity,cd=Infinity,cc=-Infinity,cb=-Infinity,bg=-Infinity,bf=0,be=cg.length;bf<be;bf+=3){var bd=cg[bf],bb=cg[bf+1],bc=cg[bf+2];bd<cf&&(cf=bd);bb<ce&&(ce=bb);bc<cd&&(cd=bc);bd>cc&&(cc=bd);bb>cb&&(cb=bb);bc>bg&&(bg=bc)}this.min.set(cf,ce,cd);this.max.set(cc,cb,bg);return this},setFromBufferAttribute:function(cg){for(var cf=Infinity,ce=Infinity,cd=Infinity,cc=-Infinity,cb=-Infinity,bg=-Infinity,bf=0,be=cg.count;bf<be;bf++){var bd=cg.getX(bf),bb=cg.getY(bf),bc=cg.getZ(bf);bd<cf&&(cf=bd);bb<ce&&(ce=bb);bc<cd&&(cd=bc);bd>cc&&(cc=bd);bb>cb&&(cb=bb);bc>bg&&(bg=bc)}this.min.set(cf,ce,cd);this.max.set(cc,cb,bg);return this},setFromPoints:function(bc){this.makeEmpty();for(var bb=0,bd=bc.length;bb<bd;bb++){this.expandByPoint(bc[bb])}return this},setFromCenterAndSize:function(){var bb=new ft;return function(bc,bd){bd=bb.copy(bd).multiplyScalar(0.5);this.min.copy(bc).sub(bd);this.max.copy(bc).add(bd);return this}}(),setFromObject:function(bb){this.makeEmpty();return this.expandByObject(bb)},clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.min.copy(bb.min);this.max.copy(bb.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(bb){bb=bb||new ft;return this.isEmpty()?bb.set(0,0,0):bb.addVectors(this.min,this.max).multiplyScalar(0.5)},getSize:function(bb){bb=bb||new ft;return this.isEmpty()?bb.set(0,0,0):bb.subVectors(this.max,this.min)},expandByPoint:function(bb){this.min.min(bb);this.max.max(bb);return this},expandByVector:function(bb){this.min.sub(bb);this.max.add(bb);return this},expandByScalar:function(bb){this.min.addScalar(-bb);this.max.addScalar(bb);return this},expandByObject:function(){var bb=new ft;return function(bc){var bd=this;bc.updateMatrixWorld(!0);bc.traverse(function(be){var cb;var bg=be.geometry;if(void 0!==bg){if(bg.isGeometry){var bf=bg.vertices;bg=0;for(cb=bf.length;bg<cb;bg++){bb.copy(bf[bg]),bb.applyMatrix4(be.matrixWorld),bd.expandByPoint(bb)}}else{if(bg.isBufferGeometry&&(bf=bg.attributes.position,void 0!==bf)){for(bg=0,cb=bf.count;bg<cb;bg++){bb.fromBufferAttribute(bf,bg).applyMatrix4(be.matrixWorld),bd.expandByPoint(bb)}}}}});return this}}(),containsPoint:function(bb){return bb.x<this.min.x||bb.x>this.max.x||bb.y<this.min.y||bb.y>this.max.y||bb.z<this.min.z||bb.z>this.max.z?!1:!0},containsBox:function(bb){return this.min.x<=bb.min.x&&bb.max.x<=this.max.x&&this.min.y<=bb.min.y&&bb.max.y<=this.max.y&&this.min.z<=bb.min.z&&bb.max.z<=this.max.z},getParameter:function(bc,bb){return(bb||new ft).set((bc.x-this.min.x)/(this.max.x-this.min.x),(bc.y-this.min.y)/(this.max.y-this.min.y),(bc.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(bb){return bb.max.x<this.min.x||bb.min.x>this.max.x||bb.max.y<this.min.y||bb.min.y>this.max.y||bb.max.z<this.min.z||bb.min.z>this.max.z?!1:!0},intersectsSphere:function(){var bb=new ft;return function(bc){this.clampPoint(bc.center,bb);return bb.distanceToSquared(bc.center)<=bc.radius*bc.radius}}(),intersectsPlane:function(bc){if(0<bc.normal.x){var bb=bc.normal.x*this.min.x;var bd=bc.normal.x*this.max.x}else{bb=bc.normal.x*this.max.x,bd=bc.normal.x*this.min.x}0<bc.normal.y?(bb+=bc.normal.y*this.min.y,bd+=bc.normal.y*this.max.y):(bb+=bc.normal.y*this.max.y,bd+=bc.normal.y*this.min.y);0<bc.normal.z?(bb+=bc.normal.z*this.min.z,bd+=bc.normal.z*this.max.z):(bb+=bc.normal.z*this.max.z,bd+=bc.normal.z*this.min.z);return bb<=bc.constant&&bd>=bc.constant},clampPoint:function(bc,bb){return(bb||new ft).copy(bc).clamp(this.min,this.max)},distanceToPoint:function(){var bb=new ft;return function(bc){return bb.copy(bc).clamp(this.min,this.max).sub(bc).length()}}(),getBoundingSphere:function(){var bb=new ft;return function(bc){bc=bc||new br;this.getCenter(bc.center);bc.radius=0.5*this.getSize(bb).length();return bc}}(),intersect:function(bb){this.min.max(bb.min);this.max.min(bb.max);this.isEmpty()&&this.makeEmpty();return this},union:function(bb){this.min.min(bb.min);this.max.max(bb.max);return this},applyMatrix4:function(){var bb=[new ft,new ft,new ft,new ft,new ft,new ft,new ft,new ft];return function(bc){if(this.isEmpty()){return this}bb[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(bc);bb[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(bc);bb[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(bc);bb[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(bc);bb[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(bc);bb[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(bc);bb[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(bc);bb[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(bc);this.setFromPoints(bb);return this}}(),translate:function(bb){this.min.add(bb);this.max.add(bb);return this},equals:function(bb){return bb.min.equals(this.min)&&bb.max.equals(this.max)}});Object.assign(br.prototype,{set:function(bc,bb){this.center.copy(bc);this.radius=bb;return this},setFromPoints:function(){var bb=new ej;return function(bc,bg){var bf=this.center;void 0!==bg?bf.copy(bg):bb.setFromPoints(bc).getCenter(bf);for(var be=bg=0,bd=bc.length;be<bd;be++){bg=Math.max(bg,bf.distanceToSquared(bc[be]))}this.radius=Math.sqrt(bg);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.center.copy(bb.center);this.radius=bb.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(bb){return bb.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(bb){return bb.distanceTo(this.center)-this.radius},intersectsSphere:function(bc){var bb=this.radius+bc.radius;return bc.center.distanceToSquared(this.center)<=bb*bb},intersectsBox:function(bb){return bb.intersectsSphere(this)},intersectsPlane:function(bb){return Math.abs(bb.distanceToPoint(this.center))<=this.radius},clampPoint:function(bc,bb){var bd=this.center.distanceToSquared(bc);bb=bb||new ft;bb.copy(bc);bd>this.radius*this.radius&&(bb.sub(this.center).normalize(),bb.multiplyScalar(this.radius).add(this.center));return bb},getBoundingBox:function(bb){bb=bb||new ej;bb.set(this.center,this.center);bb.expandByScalar(this.radius);return bb},applyMatrix4:function(bb){this.center.applyMatrix4(bb);this.radius*=bb.getMaxScaleOnAxis();return this},translate:function(bb){this.center.add(bb);return this},equals:function(bb){return bb.center.equals(this.center)&&bb.radius===this.radius}});Object.assign(cl.prototype,{isMatrix3:!0,set:function(ce,cd,cc,cb,bg,bf,be,bd,bc){var bb=this.elements;bb[0]=ce;bb[1]=cb;bb[2]=be;bb[3]=cd;bb[4]=bg;bb[5]=bd;bb[6]=cc;bb[7]=bf;bb[8]=bc;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(bc){var bb=this.elements;bc=bc.elements;bb[0]=bc[0];bb[1]=bc[1];bb[2]=bc[2];bb[3]=bc[3];bb[4]=bc[4];bb[5]=bc[5];bb[6]=bc[6];bb[7]=bc[7];bb[8]=bc[8];return this},setFromMatrix4:function(bb){bb=bb.elements;this.set(bb[0],bb[4],bb[8],bb[1],bb[5],bb[9],bb[2],bb[6],bb[10]);return this},applyToBufferAttribute:function(){var bb=new ft;return function(bc){for(var be=0,bd=bc.count;be<bd;be++){bb.x=bc.getX(be),bb.y=bc.getY(be),bb.z=bc.getZ(be),bb.applyMatrix3(this),bc.setXYZ(be,bb.x,bb.y,bb.z)}return bc}}(),multiply:function(bb){return this.multiplyMatrices(this,bb)},premultiply:function(bb){return this.multiplyMatrices(bb,this)},multiplyMatrices:function(dg,df){var de=dg.elements,dd=df.elements;df=this.elements;dg=de[0];var dc=de[3],db=de[6],da=de[1],cg=de[4],cf=de[7],ce=de[2],bf=de[5],de=de[8],cb=dd[0],cd=dd[3],be=dd[6],cc=dd[1],bd=dd[4],bc=dd[7],bb=dd[2],bg=dd[5],dd=dd[8];df[0]=dg*cb+dc*cc+db*bb;df[3]=dg*cd+dc*bd+db*bg;df[6]=dg*be+dc*bc+db*dd;df[1]=da*cb+cg*cc+cf*bb;df[4]=da*cd+cg*bd+cf*bg;df[7]=da*be+cg*bc+cf*dd;df[2]=ce*cb+bf*cc+de*bb;df[5]=ce*cd+bf*bd+de*bg;df[8]=ce*be+bf*bc+de*dd;return this},multiplyScalar:function(bc){var bb=this.elements;bb[0]*=bc;bb[3]*=bc;bb[6]*=bc;bb[1]*=bc;bb[4]*=bc;bb[7]*=bc;bb[2]*=bc;bb[5]*=bc;bb[8]*=bc;return this},determinant:function(){var cd=this.elements,cc=cd[0],cb=cd[1],bg=cd[2],bf=cd[3],be=cd[4],bd=cd[5],bc=cd[6],bb=cd[7],cd=cd[8];return cc*be*cd-cc*bd*bb-cb*bf*cd+cb*bd*bc+bg*bf*bb-bg*be*bc},getInverse:function(dc,db){dc&&dc.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var da=dc.elements;dc=this.elements;var cg=da[0],cf=da[1],ce=da[2],cd=da[3],cc=da[4],cb=da[5],bg=da[6],bc=da[7],da=da[8],bd=da*cc-cb*bc,bf=cb*bg-da*cd,bb=bc*cd-cc*bg,be=cg*bd+cf*bf+ce*bb;if(0===be){if(!0===db){throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0")}console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}db=1/be;dc[0]=bd*db;dc[1]=(ce*bc-da*cf)*db;dc[2]=(cb*cf-ce*cc)*db;dc[3]=bf*db;dc[4]=(da*cg-ce*bg)*db;dc[5]=(ce*cd-cb*cg)*db;dc[6]=bb*db;dc[7]=(cf*bg-bc*cg)*db;dc[8]=(cc*cg-cf*cd)*db;return this},transpose:function(){var bc=this.elements;var bb=bc[1];bc[1]=bc[3];bc[3]=bb;bb=bc[2];bc[2]=bc[6];bc[6]=bb;bb=bc[5];bc[5]=bc[7];bc[7]=bb;return this},getNormalMatrix:function(bb){return this.setFromMatrix4(bb).getInverse(this).transpose()},transposeIntoArray:function(bc){var bb=this.elements;bc[0]=bb[0];bc[1]=bb[3];bc[2]=bb[6];bc[3]=bb[1];bc[4]=bb[4];bc[5]=bb[7];bc[6]=bb[2];bc[7]=bb[5];bc[8]=bb[8];return this},equals:function(bc){var bb=this.elements;bc=bc.elements;for(var bd=0;9>bd;bd++){if(bb[bd]!==bc[bd]){return !1}}return !0},fromArray:function(bc,bb){void 0===bb&&(bb=0);for(var bd=0;9>bd;bd++){this.elements[bd]=bc[bd+bb]}return this},toArray:function(bc,bb){void 0===bc&&(bc=[]);void 0===bb&&(bb=0);var bd=this.elements;bc[bb]=bd[0];bc[bb+1]=bd[1];bc[bb+2]=bd[2];bc[bb+3]=bd[3];bc[bb+4]=bd[4];bc[bb+5]=bd[5];bc[bb+6]=bd[6];bc[bb+7]=bd[7];bc[bb+8]=bd[8];return bc}});Object.assign(gh.prototype,{set:function(bc,bb){this.normal.copy(bc);this.constant=bb;return this},setComponents:function(bc,bb,be,bd){this.normal.set(bc,bb,be);this.constant=bd;return this},setFromNormalAndCoplanarPoint:function(bc,bb){this.normal.copy(bc);this.constant=-bb.dot(this.normal);return this},setFromCoplanarPoints:function(){var bc=new ft,bb=new ft;return function(bf,be,bd){be=bc.subVectors(bd,be).cross(bb.subVectors(bf,be)).normalize();this.setFromNormalAndCoplanarPoint(be,bf);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.normal.copy(bb.normal);this.constant=bb.constant;return this},normalize:function(){var bb=1/this.normal.length();this.normal.multiplyScalar(bb);this.constant*=bb;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(bb){return this.normal.dot(bb)+this.constant},distanceToSphere:function(bb){return this.distanceToPoint(bb.center)-bb.radius},projectPoint:function(bc,bb){return(bb||new ft).copy(this.normal).multiplyScalar(-this.distanceToPoint(bc)).add(bc)},intersectLine:function(){var bb=new ft;return function(bc,bf){bf=bf||new ft;var be=bc.delta(bb),bd=this.normal.dot(be);if(0===bd){if(0===this.distanceToPoint(bc.start)){return bf.copy(bc.start)}}else{if(bd=-(bc.start.dot(this.normal)+this.constant)/bd,!(0>bd||1<bd)){return bf.copy(be).multiplyScalar(bd).add(bc.start)}}}}(),intersectsLine:function(bc){var bb=this.distanceToPoint(bc.start);bc=this.distanceToPoint(bc.end);return 0>bb&&0<bc||0>bc&&0<bb},intersectsBox:function(bb){return bb.intersectsPlane(this)},intersectsSphere:function(bb){return bb.intersectsPlane(this)},coplanarPoint:function(bb){return(bb||new ft).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var bc=new ft,bb=new cl;return function(be,bd){bd=bd||bb.getNormalMatrix(be);be=this.coplanarPoint(bc).applyMatrix4(be);bd=this.normal.applyMatrix3(bd).normalize();this.constant=-be.dot(bd);return this}}(),translate:function(bb){this.constant-=bb.dot(this.normal);return this},equals:function(bb){return bb.normal.equals(this.normal)&&bb.constant===this.constant}});Object.assign(dG.prototype,{set:function(bc,bb,cb,bg,bf,be){var bd=this.planes;bd[0].copy(bc);bd[1].copy(bb);bd[2].copy(cb);bd[3].copy(bg);bd[4].copy(bf);bd[5].copy(be);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(bc){for(var bb=this.planes,bd=0;6>bd;bd++){bb[bd].copy(bc.planes[bd])}return this},setFromMatrix:function(dd){var db=this.planes,da=dd.elements;dd=da[0];var cg=da[1],cf=da[2],ce=da[3],cd=da[4],cc=da[5],cb=da[6],bg=da[7],bc=da[8],bd=da[9],bf=da[10],bb=da[11],be=da[12],de=da[13],dc=da[14],da=da[15];db[0].setComponents(ce-dd,bg-cd,bb-bc,da-be).normalize();db[1].setComponents(ce+dd,bg+cd,bb+bc,da+be).normalize();db[2].setComponents(ce+cg,bg+cc,bb+bd,da+de).normalize();db[3].setComponents(ce-cg,bg-cc,bb-bd,da-de).normalize();db[4].setComponents(ce-cf,bg-cb,bb-bf,da-dc).normalize();db[5].setComponents(ce+cf,bg+cb,bb+bf,da+dc).normalize();return this},intersectsObject:function(){var bb=new br;return function(bc){var bd=bc.geometry;null===bd.boundingSphere&&bd.computeBoundingSphere();bb.copy(bd.boundingSphere).applyMatrix4(bc.matrixWorld);return this.intersectsSphere(bb)}}(),intersectsSprite:function(){var bb=new br;return function(bc){bb.center.set(0,0,0);bb.radius=0.7071067811865476;bb.applyMatrix4(bc.matrixWorld);return this.intersectsSphere(bb)}}(),intersectsSphere:function(bc){var bb=this.planes,be=bc.center;bc=-bc.radius;for(var bd=0;6>bd;bd++){if(bb[bd].distanceToPoint(be)<bc){return !1}}return !0},intersectsBox:function(){var bc=new ft,bb=new ft;return function(cb){for(var bg=this.planes,bf=0;6>bf;bf++){var be=bg[bf];bc.x=0<be.normal.x?cb.min.x:cb.max.x;bb.x=0<be.normal.x?cb.max.x:cb.min.x;bc.y=0<be.normal.y?cb.min.y:cb.max.y;bb.y=0<be.normal.y?cb.max.y:cb.min.y;bc.z=0<be.normal.z?cb.min.z:cb.max.z;bb.z=0<be.normal.z?cb.max.z:cb.min.z;var bd=be.distanceToPoint(bc),be=be.distanceToPoint(bb);if(0>bd&&0>be){return !1}}return !0}}(),containsPoint:function(bc){for(var bb=this.planes,bd=0;6>bd;bd++){if(0>bb[bd].distanceToPoint(bc)){return !1}}return !0}});b9.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");b9.DefaultOrder="XYZ";Object.defineProperties(b9.prototype,{x:{get:function(){return this._x},set:function(bb){this._x=bb;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(bb){this._y=bb;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(bb){this._z=bb;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(bb){this._order=bb;this.onChangeCallback()}}});Object.assign(b9.prototype,{isEuler:!0,set:function(bc,bb,be,bd){this._x=bc;this._y=bb;this._z=be;this._order=bd||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(bb){this._x=bb._x;this._y=bb._y;this._z=bb._z;this._order=bb._order;this.onChangeCallback();return this},setFromRotationMatrix:function(cg,cf,ce){var cd=fK.clamp,cc=cg.elements;cg=cc[0];var cb=cc[4],bg=cc[8],bf=cc[1],be=cc[5],bd=cc[9],bb=cc[2],bc=cc[6],cc=cc[10];cf=cf||this._order;"XYZ"===cf?(this._y=Math.asin(cd(bg,-1,1)),0.99999>Math.abs(bg)?(this._x=Math.atan2(-bd,cc),this._z=Math.atan2(-cb,cg)):(this._x=Math.atan2(bc,be),this._z=0)):"YXZ"===cf?(this._x=Math.asin(-cd(bd,-1,1)),0.99999>Math.abs(bd)?(this._y=Math.atan2(bg,cc),this._z=Math.atan2(bf,be)):(this._y=Math.atan2(-bb,cg),this._z=0)):"ZXY"===cf?(this._x=Math.asin(cd(bc,-1,1)),0.99999>Math.abs(bc)?(this._y=Math.atan2(-bb,cc),this._z=Math.atan2(-cb,be)):(this._y=0,this._z=Math.atan2(bf,cg))):"ZYX"===cf?(this._y=Math.asin(-cd(bb,-1,1)),0.99999>Math.abs(bb)?(this._x=Math.atan2(bc,cc),this._z=Math.atan2(bf,cg)):(this._x=0,this._z=Math.atan2(-cb,be))):"YZX"===cf?(this._z=Math.asin(cd(bf,-1,1)),0.99999>Math.abs(bf)?(this._x=Math.atan2(-bd,be),this._y=Math.atan2(-bb,cg)):(this._x=0,this._y=Math.atan2(bg,cc))):"XZY"===cf?(this._z=Math.asin(-cd(cb,-1,1)),0.99999>Math.abs(cb)?(this._x=Math.atan2(bc,be),this._y=Math.atan2(bg,cg)):(this._x=Math.atan2(-bd,cc),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+cf);this._order=cf;if(!1!==ce){this.onChangeCallback()}return this},setFromQuaternion:function(){var bb=new fN;return function(bc,be,bd){bb.makeRotationFromQuaternion(bc);return this.setFromRotationMatrix(bb,be,bd)}}(),setFromVector3:function(bc,bb){return this.set(bc.x,bc.y,bc.z,bb||this._order)},reorder:function(){var bb=new d6;return function(bc){bb.setFromEuler(this);return this.setFromQuaternion(bb,bc)}}(),equals:function(bb){return bb._x===this._x&&bb._y===this._y&&bb._z===this._z&&bb._order===this._order},fromArray:function(bb){this._x=bb[0];this._y=bb[1];this._z=bb[2];void 0!==bb[3]&&(this._order=bb[3]);this.onChangeCallback();return this},toArray:function(bc,bb){void 0===bc&&(bc=[]);void 0===bb&&(bb=0);bc[bb]=this._x;bc[bb+1]=this._y;bc[bb+2]=this._z;bc[bb+3]=this._order;return bc},toVector3:function(bb){return bb?bb.set(this._x,this._y,this._z):new ft(this._x,this._y,this._z)},onChange:function(bb){this.onChangeCallback=bb;return this},onChangeCallback:function(){}});Object.assign(dX.prototype,{set:function(bb){this.mask=1<<bb|0},enable:function(bb){this.mask=this.mask|1<<bb|0},toggle:function(bb){this.mask^=1<<bb|0},disable:function(bb){this.mask&=~(1<<bb|0)},test:function(bb){return 0!==(this.mask&bb.mask)}});var eq=0;fs.DefaultUp=new ft(0,1,0);fs.DefaultMatrixAutoUpdate=!0;Object.assign(fs.prototype,c1.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(bb){this.matrix.multiplyMatrices(bb,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(bb){this.quaternion.premultiply(bb);return this},setRotationFromAxisAngle:function(bc,bb){this.quaternion.setFromAxisAngle(bc,bb)},setRotationFromEuler:function(bb){this.quaternion.setFromEuler(bb,!0)},setRotationFromMatrix:function(bb){this.quaternion.setFromRotationMatrix(bb)},setRotationFromQuaternion:function(bb){this.quaternion.copy(bb)},rotateOnAxis:function(){var bb=new d6;return function(bc,bd){bb.setFromAxisAngle(bc,bd);this.quaternion.multiply(bb);return this}}(),rotateX:function(){var bb=new ft(1,0,0);return function(bc){return this.rotateOnAxis(bb,bc)}}(),rotateY:function(){var bb=new ft(0,1,0);return function(bc){return this.rotateOnAxis(bb,bc)}}(),rotateZ:function(){var bb=new ft(0,0,1);return function(bc){return this.rotateOnAxis(bb,bc)}}(),translateOnAxis:function(){var bb=new ft;return function(bc,bd){bb.copy(bc).applyQuaternion(this.quaternion);this.position.add(bb.multiplyScalar(bd));return this}}(),translateX:function(){var bb=new ft(1,0,0);return function(bc){return this.translateOnAxis(bb,bc)}}(),translateY:function(){var bb=new ft(0,1,0);return function(bc){return this.translateOnAxis(bb,bc)}}(),translateZ:function(){var bb=new ft(0,0,1);return function(bc){return this.translateOnAxis(bb,bc)}}(),localToWorld:function(bb){return bb.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var bb=new fN;return function(bc){return bc.applyMatrix4(bb.getInverse(this.matrixWorld))}}(),lookAt:function(){var bb=new fN;return function(bc){this.isCamera?bb.lookAt(this.position,bc,this.up):bb.lookAt(bc,this.position,this.up);this.quaternion.setFromRotationMatrix(bb)}}(),add:function(bc){if(1<arguments.length){for(var bb=0;bb<arguments.length;bb++){this.add(arguments[bb])}return this}if(bc===this){return console.error("THREE.Object3D.add: object can't be added as a child of itself.",bc),this}bc&&bc.isObject3D?(null!==bc.parent&&bc.parent.remove(bc),bc.parent=this,bc.dispatchEvent({type:"added"}),this.children.push(bc)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",bc);return this},remove:function(bc){if(1<arguments.length){for(var bb=0;bb<arguments.length;bb++){this.remove(arguments[bb])}return this}bb=this.children.indexOf(bc);-1!==bb&&(bc.parent=null,bc.dispatchEvent({type:"removed"}),this.children.splice(bb,1));return this},getObjectById:function(bb){return this.getObjectByProperty("id",bb)},getObjectByName:function(bb){return this.getObjectByProperty("name",bb)},getObjectByProperty:function(bc,bb){if(this[bc]===bb){return this}for(var bf=0,be=this.children.length;bf<be;bf++){var bd=this.children[bf].getObjectByProperty(bc,bb);if(void 0!==bd){return bd}}},getWorldPosition:function(bb){bb=bb||new ft;this.updateMatrixWorld(!0);return bb.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var bc=new ft,bb=new ft;return function(bd){bd=bd||new d6;this.updateMatrixWorld(!0);this.matrixWorld.decompose(bc,bd,bb);return bd}}(),getWorldRotation:function(){var bb=new d6;return function(bc){bc=bc||new b9;this.getWorldQuaternion(bb);return bc.setFromQuaternion(bb,this.rotation.order,!1)}}(),getWorldScale:function(){var bc=new ft,bb=new d6;return function(bd){bd=bd||new ft;this.updateMatrixWorld(!0);this.matrixWorld.decompose(bc,bb,bd);return bd}}(),getWorldDirection:function(){var bb=new d6;return function(bc){bc=bc||new ft;this.getWorldQuaternion(bb);return bc.set(0,0,1).applyQuaternion(bb)}}(),raycast:function(){},traverse:function(bc){bc(this);for(var bb=this.children,be=0,bd=bb.length;be<bd;be++){bb[be].traverse(bc)}},traverseVisible:function(bc){if(!1!==this.visible){bc(this);for(var bb=this.children,be=0,bd=bb.length;be<bd;be++){bb[be].traverseVisible(bc)}}},traverseAncestors:function(bc){var bb=this.parent;null!==bb&&(bc(bb),bb.traverseAncestors(bc))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(bc){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||bc){null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,bc=!0}for(var bb=this.children,be=0,bd=bb.length;be<bd;be++){bb[be].updateMatrixWorld(bc)}},toJSON:function(cd){function cc(ce,cf){void 0===ce[cf.uuid]&&(ce[cf.uuid]=cf.toJSON(cd));return cf.uuid}function cb(cf){var ce=[],da;for(da in cf){var cg=cf[da];delete cg.metadata;ce.push(cg)}return ce}var bg=void 0===cd||""===cd,bf={};bg&&(cd={geometries:{},materials:{},textures:{},images:{}},bf.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var be={};be.uuid=this.uuid;be.type=this.type;""!==this.name&&(be.name=this.name);!0===this.castShadow&&(be.castShadow=!0);!0===this.receiveShadow&&(be.receiveShadow=!0);!1===this.visible&&(be.visible=!1);"{}"!==JSON.stringify(this.userData)&&(be.userData=this.userData);be.matrix=this.matrix.toArray();void 0!==this.geometry&&(be.geometry=cc(cd.geometries,this.geometry));if(void 0!==this.material){if(Array.isArray(this.material)){for(var bd=[],bc=0,bb=this.material.length;bc<bb;bc++){bd.push(cc(cd.materials,this.material[bc]))}be.material=bd}else{be.material=cc(cd.materials,this.material)}}if(0<this.children.length){for(be.children=[],bc=0;bc<this.children.length;bc++){be.children.push(this.children[bc].toJSON(cd).object)}}bg&&(bg=cb(cd.geometries),bd=cb(cd.materials),bc=cb(cd.textures),bb=cb(cd.images),0<bg.length&&(bf.geometries=bg),0<bd.length&&(bf.materials=bd),0<bc.length&&(bf.textures=bc),0<bb.length&&(bf.images=bb));bf.object=be;return bf},clone:function(bb){return(new this.constructor).copy(this,bb)},copy:function(bc,bb){void 0===bb&&(bb=!0);this.name=bc.name;this.up.copy(bc.up);this.position.copy(bc.position);this.quaternion.copy(bc.quaternion);this.scale.copy(bc.scale);this.matrix.copy(bc.matrix);this.matrixWorld.copy(bc.matrixWorld);this.matrixAutoUpdate=bc.matrixAutoUpdate;this.matrixWorldNeedsUpdate=bc.matrixWorldNeedsUpdate;this.layers.mask=bc.layers.mask;this.visible=bc.visible;this.castShadow=bc.castShadow;this.receiveShadow=bc.receiveShadow;this.frustumCulled=bc.frustumCulled;this.renderOrder=bc.renderOrder;this.userData=JSON.parse(JSON.stringify(bc.userData));if(!0===bb){for(bb=0;bb<bc.children.length;bb++){this.add(bc.children[bb].clone())}}return this}});eU.prototype=Object.assign(Object.create(fs.prototype),{constructor:eU,isCamera:!0,copy:function(bc,bb){fs.prototype.copy.call(this,bc,bb);this.matrixWorldInverse.copy(bc.matrixWorldInverse);this.projectionMatrix.copy(bc.projectionMatrix);return this},getWorldDirection:function(){var bb=new d6;return function(bc){bc=bc||new ft;this.getWorldQuaternion(bb);return bc.set(0,0,-1).applyQuaternion(bb)}}(),updateMatrixWorld:function(bb){fs.prototype.updateMatrixWorld.call(this,bb);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});a8.prototype=Object.assign(Object.create(eU.prototype),{constructor:a8,isOrthographicCamera:!0,copy:function(bc,bb){eU.prototype.copy.call(this,bc,bb);this.left=bc.left;this.right=bc.right;this.top=bc.top;this.bottom=bc.bottom;this.near=bc.near;this.far=bc.far;this.zoom=bc.zoom;this.view=null===bc.view?null:Object.assign({},bc.view);return this},setViewOffset:function(bc,bb,bg,bf,be,bd){this.view={fullWidth:bc,fullHeight:bb,offsetX:bg,offsetY:bf,width:be,height:bd};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var bc=(this.right-this.left)/(2*this.zoom),bb=(this.top-this.bottom)/(2*this.zoom),bg=(this.right+this.left)/2,bf=(this.top+this.bottom)/2,be=bg-bc,bg=bg+bc,bc=bf+bb,bb=bf-bb;if(null!==this.view){var bg=this.zoom/(this.view.width/this.view.fullWidth),bb=this.zoom/(this.view.height/this.view.fullHeight),bd=(this.right-this.left)/this.view.width,bf=(this.top-this.bottom)/this.view.height,be=be+this.view.offsetX/bg*bd,bg=be+this.view.width/bg*bd,bc=bc-this.view.offsetY/bb*bf,bb=bc-this.view.height/bb*bf}this.projectionMatrix.makeOrthographic(be,bg,bc,bb,this.near,this.far)},toJSON:function(bb){bb=fs.prototype.toJSON.call(this,bb);bb.object.zoom=this.zoom;bb.object.left=this.left;bb.object.right=this.right;bb.object.top=this.top;bb.object.bottom=this.bottom;bb.object.near=this.near;bb.object.far=this.far;null!==this.view&&(bb.object.view=Object.assign({},this.view));return bb}});dU.prototype=Object.assign(Object.create(eU.prototype),{constructor:dU,isPerspectiveCamera:!0,copy:function(bc,bb){eU.prototype.copy.call(this,bc,bb);this.fov=bc.fov;this.zoom=bc.zoom;this.near=bc.near;this.far=bc.far;this.focus=bc.focus;this.aspect=bc.aspect;this.view=null===bc.view?null:Object.assign({},bc.view);this.filmGauge=bc.filmGauge;this.filmOffset=bc.filmOffset;return this},setFocalLength:function(bb){bb=0.5*this.getFilmHeight()/bb;this.fov=2*fK.RAD2DEG*Math.atan(bb);this.updateProjectionMatrix()},getFocalLength:function(){var bb=Math.tan(0.5*fK.DEG2RAD*this.fov);return 0.5*this.getFilmHeight()/bb},getEffectiveFOV:function(){return 2*fK.RAD2DEG*Math.atan(Math.tan(0.5*fK.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(bc,bb,bg,bf,be,bd){this.aspect=bc/bb;this.view={fullWidth:bc,fullHeight:bb,offsetX:bg,offsetY:bf,width:be,height:bd};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var bc=this.near,bb=bc*Math.tan(0.5*fK.DEG2RAD*this.fov)/this.zoom,cc=2*bb,cb=this.aspect*cc,bg=-0.5*cb,bf=this.view;if(null!==bf){var be=bf.fullWidth,bd=bf.fullHeight,bg=bg+bf.offsetX*cb/be,bb=bb-bf.offsetY*cc/bd,cb=bf.width/be*cb,cc=bf.height/bd*cc}bf=this.filmOffset;0!==bf&&(bg+=bc*bf/this.getFilmWidth());this.projectionMatrix.makePerspective(bg,bg+cb,bb,bb-cc,bc,this.far)},toJSON:function(bb){bb=fs.prototype.toJSON.call(this,bb);bb.object.fov=this.fov;bb.object.zoom=this.zoom;bb.object.near=this.near;bb.object.far=this.far;bb.object.focus=this.focus;bb.object.aspect=this.aspect;null!==this.view&&(bb.object.view=Object.assign({},this.view));bb.object.filmGauge=this.filmGauge;bb.object.filmOffset=this.filmOffset;return bb}});Object.assign(d0.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(bc){this.a=bc.a;this.b=bc.b;this.c=bc.c;this.normal.copy(bc.normal);this.color.copy(bc.color);this.materialIndex=bc.materialIndex;for(var bb=0,bd=bc.vertexNormals.length;bb<bd;bb++){this.vertexNormals[bb]=bc.vertexNormals[bb].clone()}bb=0;for(bd=bc.vertexColors.length;bb<bd;bb++){this.vertexColors[bb]=bc.vertexColors[bb].clone()}return this}});var dL=0;Object.assign(fL.prototype,c1.prototype,{isGeometry:!0,applyMatrix:function(bc){for(var bb=(new cl).getNormalMatrix(bc),bg=0,bf=this.vertices.length;bg<bf;bg++){this.vertices[bg].applyMatrix4(bc)}bg=0;for(bf=this.faces.length;bg<bf;bg++){bc=this.faces[bg];bc.normal.applyMatrix3(bb).normalize();for(var be=0,bd=bc.vertexNormals.length;be<bd;be++){bc.vertexNormals[be].applyMatrix3(bb).normalize()}}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var bb=new fN;return function(bc){bb.makeRotationX(bc);this.applyMatrix(bb);return this}}(),rotateY:function(){var bb=new fN;return function(bc){bb.makeRotationY(bc);this.applyMatrix(bb);return this}}(),rotateZ:function(){var bb=new fN;return function(bc){bb.makeRotationZ(bc);this.applyMatrix(bb);return this}}(),translate:function(){var bb=new fN;return function(bc,be,bd){bb.makeTranslation(bc,be,bd);this.applyMatrix(bb);return this}}(),scale:function(){var bb=new fN;return function(bc,be,bd){bb.makeScale(bc,be,bd);this.applyMatrix(bb);return this}}(),lookAt:function(){var bb=new fs;return function(bc){bb.lookAt(bc);bb.updateMatrix();this.applyMatrix(bb.matrix)}}(),fromBufferGeometry:function(dc){function da(dg,df,ed,ec){var eb=void 0!==cc?[bc[dg].clone(),bc[df].clone(),bc[ed].clone()]:[],ea=void 0!==cb?[cg.colors[dg].clone(),cg.colors[df].clone(),cg.colors[ed].clone()]:[];ec=new d0(dg,df,ed,eb,ea,ec);cg.faces.push(ec);void 0!==bg&&cg.faceVertexUvs[0].push([bd[dg].clone(),bd[df].clone(),bd[ed].clone()]);void 0!==bf&&cg.faceVertexUvs[1].push([be[dg].clone(),be[df].clone(),be[ed].clone()])}var cg=this,cf=null!==dc.index?dc.index.array:void 0,ce=dc.attributes,cd=ce.position.array,cc=void 0!==ce.normal?ce.normal.array:void 0,cb=void 0!==ce.color?ce.color.array:void 0,bg=void 0!==ce.uv?ce.uv.array:void 0,bf=void 0!==ce.uv2?ce.uv2.array:void 0;void 0!==bf&&(this.faceVertexUvs[1]=[]);for(var bc=[],bd=[],be=[],bb=ce=0;ce<cd.length;ce+=3,bb+=2){cg.vertices.push(new ft(cd[ce],cd[ce+1],cd[ce+2])),void 0!==cc&&bc.push(new ft(cc[ce],cc[ce+1],cc[ce+2])),void 0!==cb&&cg.colors.push(new fZ(cb[ce],cb[ce+1],cb[ce+2])),void 0!==bg&&bd.push(new fX(bg[bb],bg[bb+1])),void 0!==bf&&be.push(new fX(bf[bb],bf[bb+1]))}var dd=dc.groups;if(0<dd.length){for(ce=0;ce<dd.length;ce++){for(var cd=dd[ce],de=cd.start,db=cd.count,bb=de,de=de+db;bb<de;bb+=3){void 0!==cf?da(cf[bb],cf[bb+1],cf[bb+2],cd.materialIndex):da(bb,bb+1,bb+2,cd.materialIndex)}}}else{if(void 0!==cf){for(ce=0;ce<cf.length;ce+=3){da(cf[ce],cf[ce+1],cf[ce+2])}}else{for(ce=0;ce<cd.length/3;ce+=3){da(ce,ce+1,ce+2)}}}this.computeFaceNormals();null!==dc.boundingBox&&(this.boundingBox=dc.boundingBox.clone());null!==dc.boundingSphere&&(this.boundingSphere=dc.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var bb=this.boundingBox.getCenter().negate();this.translate(bb.x,bb.y,bb.z);return bb},normalize:function(){this.computeBoundingSphere();var bc=this.boundingSphere.center,bb=this.boundingSphere.radius,bb=0===bb?1:1/bb,bd=new fN;bd.set(bb,0,0,-bb*bc.x,0,bb,0,-bb*bc.y,0,0,bb,-bb*bc.z,0,0,0,1);this.applyMatrix(bd);return this},computeFaceNormals:function(){for(var bc=new ft,bb=new ft,cb=0,bg=this.faces.length;cb<bg;cb++){var bf=this.faces[cb],be=this.vertices[bf.a],bd=this.vertices[bf.b];bc.subVectors(this.vertices[bf.c],bd);bb.subVectors(be,bd);bc.cross(bb);bc.normalize();bf.normal.copy(bc)}},computeVertexNormals:function(cd){void 0===cd&&(cd=!0);var cc;var cb=Array(this.vertices.length);var bg=0;for(cc=this.vertices.length;bg<cc;bg++){cb[bg]=new ft}if(cd){var bf=new ft,be=new ft;cd=0;for(bg=this.faces.length;cd<bg;cd++){cc=this.faces[cd];var bd=this.vertices[cc.a];var bc=this.vertices[cc.b];var bb=this.vertices[cc.c];bf.subVectors(bb,bc);be.subVectors(bd,bc);bf.cross(be);cb[cc.a].add(bf);cb[cc.b].add(bf);cb[cc.c].add(bf)}}else{for(this.computeFaceNormals(),cd=0,bg=this.faces.length;cd<bg;cd++){cc=this.faces[cd],cb[cc.a].add(cc.normal),cb[cc.b].add(cc.normal),cb[cc.c].add(cc.normal)}}bg=0;for(cc=this.vertices.length;bg<cc;bg++){cb[bg].normalize()}cd=0;for(bg=this.faces.length;cd<bg;cd++){cc=this.faces[cd],bd=cc.vertexNormals,3===bd.length?(bd[0].copy(cb[cc.a]),bd[1].copy(cb[cc.b]),bd[2].copy(cb[cc.c])):(bd[0]=cb[cc.a].clone(),bd[1]=cb[cc.b].clone(),bd[2]=cb[cc.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var bc;this.computeFaceNormals();var bb=0;for(bc=this.faces.length;bb<bc;bb++){var be=this.faces[bb];var bd=be.vertexNormals;3===bd.length?(bd[0].copy(be.normal),bd[1].copy(be.normal),bd[2].copy(be.normal)):(bd[0]=be.normal.clone(),bd[1]=be.normal.clone(),bd[2]=be.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var cd,cc;var cb=0;for(cc=this.faces.length;cb<cc;cb++){var bg=this.faces[cb];bg.__originalFaceNormal?bg.__originalFaceNormal.copy(bg.normal):bg.__originalFaceNormal=bg.normal.clone();bg.__originalVertexNormals||(bg.__originalVertexNormals=[]);var bf=0;for(cd=bg.vertexNormals.length;bf<cd;bf++){bg.__originalVertexNormals[bf]?bg.__originalVertexNormals[bf].copy(bg.vertexNormals[bf]):bg.__originalVertexNormals[bf]=bg.vertexNormals[bf].clone()}}var be=new fL;be.faces=this.faces;bf=0;for(cd=this.morphTargets.length;bf<cd;bf++){if(!this.morphNormals[bf]){this.morphNormals[bf]={};this.morphNormals[bf].faceNormals=[];this.morphNormals[bf].vertexNormals=[];bg=this.morphNormals[bf].faceNormals;var bd=this.morphNormals[bf].vertexNormals;cb=0;for(cc=this.faces.length;cb<cc;cb++){var bc=new ft;var bb={a:new ft,b:new ft,c:new ft};bg.push(bc);bd.push(bb)}}bd=this.morphNormals[bf];be.vertices=this.morphTargets[bf].vertices;be.computeFaceNormals();be.computeVertexNormals();cb=0;for(cc=this.faces.length;cb<cc;cb++){bg=this.faces[cb],bc=bd.faceNormals[cb],bb=bd.vertexNormals[cb],bc.copy(bg.normal),bb.a.copy(bg.vertexNormals[0]),bb.b.copy(bg.vertexNormals[1]),bb.c.copy(bg.vertexNormals[2])}}cb=0;for(cc=this.faces.length;cb<cc;cb++){bg=this.faces[cb],bg.normal=bg.__originalFaceNormal,bg.vertexNormals=bg.__originalVertexNormals}},computeLineDistances:function(){for(var bc=0,bb=this.vertices,be=0,bd=bb.length;be<bd;be++){0<be&&(bc+=bb[be].distanceTo(bb[be-1])),this.lineDistances[be]=bc}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ej);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new br);this.boundingSphere.setFromPoints(this.vertices)},merge:function(dc,db,da){if(dc&&dc.isGeometry){var cg,cf=this.vertices.length,ce=this.vertices,cd=dc.vertices,cc=this.faces,cb=dc.faces,bg=this.faceVertexUvs[0],bc=dc.faceVertexUvs[0],bd=this.colors,bf=dc.colors;void 0===da&&(da=0);void 0!==db&&(cg=(new cl).getNormalMatrix(db));dc=0;for(var bb=cd.length;dc<bb;dc++){var be=cd[dc].clone();void 0!==db&&be.applyMatrix4(db);ce.push(be)}dc=0;for(bb=bf.length;dc<bb;dc++){bd.push(bf[dc].clone())}dc=0;for(bb=cb.length;dc<bb;dc++){var cd=cb[dc],dd=cd.vertexNormals,bf=cd.vertexColors,bd=new d0(cd.a+cf,cd.b+cf,cd.c+cf);bd.normal.copy(cd.normal);void 0!==cg&&bd.normal.applyMatrix3(cg).normalize();db=0;for(ce=dd.length;db<ce;db++){be=dd[db].clone(),void 0!==cg&&be.applyMatrix3(cg).normalize(),bd.vertexNormals.push(be)}bd.color.copy(cd.color);db=0;for(ce=bf.length;db<ce;db++){be=bf[db],bd.vertexColors.push(be.clone())}bd.materialIndex=cd.materialIndex+da;cc.push(bd)}dc=0;for(bb=bc.length;dc<bb;dc++){if(da=bc[dc],cg=[],void 0!==da){db=0;for(ce=da.length;db<ce;db++){cg.push(da[db].clone())}bg.push(cg)}}}else{console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",dc)}},mergeMesh:function(bb){bb&&bb.isMesh?(bb.matrixAutoUpdate&&bb.updateMatrix(),this.merge(bb.geometry,bb.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",bb)},mergeVertices:function(){var bc={},bb=[],cb=[],bg=Math.pow(10,4),bf;var be=0;for(bf=this.vertices.length;be<bf;be++){var bd=this.vertices[be];bd=Math.round(bd.x*bg)+"_"+Math.round(bd.y*bg)+"_"+Math.round(bd.z*bg);void 0===bc[bd]?(bc[bd]=be,bb.push(this.vertices[be]),cb[be]=bb.length-1):cb[be]=cb[bc[bd]]}bc=[];be=0;for(bf=this.faces.length;be<bf;be++){for(bg=this.faces[be],bg.a=cb[bg.a],bg.b=cb[bg.b],bg.c=cb[bg.c],bg=[bg.a,bg.b,bg.c],bd=0;3>bd;bd++){if(bg[bd]===bg[(bd+1)%3]){bc.push(be);break}}}for(be=bc.length-1;0<=be;be--){for(bg=bc[be],this.faces.splice(bg,1),cb=0,bf=this.faceVertexUvs.length;cb<bf;cb++){this.faceVertexUvs[cb].splice(bg,1)}}be=this.vertices.length-bb.length;this.vertices=bb;return be},sortFacesByMaterialIndex:function(){for(var bc=this.faces,bb=bc.length,cc=0;cc<bb;cc++){bc[cc]._id=cc}bc.sort(function(ce,cd){return ce.materialIndex-cd.materialIndex});var cb=this.faceVertexUvs[0],bg=this.faceVertexUvs[1],bf,be;cb&&cb.length===bb&&(bf=[]);bg&&bg.length===bb&&(be=[]);for(cc=0;cc<bb;cc++){var bd=bc[cc]._id;bf&&bf.push(cb[bd]);be&&be.push(bg[bd])}bf&&(this.faceVertexUvs[0]=bf);be&&(this.faceVertexUvs[1]=be)},toJSON:function(){function eb(ed,ec,ee){return ee?ed|1<<ec:ed&~(1<<ec)}function ea(ed){var ec=ed.x.toString()+ed.y.toString()+ed.z.toString();if(void 0!==cg[ec]){return cg[ec]}cg[ec]=da.length/3;da.push(ed.x,ed.y,ed.z);return cg[ec]}function dg(ed){var ec=ed.r.toString()+ed.g.toString()+ed.b.toString();if(void 0!==cd[ec]){return cd[ec]}cd[ec]=cb.length;cb.push(ed.getHex());return cd[ec]}function df(ed){var ec=ed.x.toString()+ed.y.toString();if(void 0!==bf[ec]){return bf[ec]}bf[ec]=cf.length/2;cf.push(ed.x,ed.y);return bf[ec]}var de={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};de.uuid=this.uuid;de.type=this.type;""!==this.name&&(de.name=this.name);if(void 0!==this.parameters){var dd=this.parameters,dc;for(dc in dd){void 0!==dd[dc]&&(de[dc]=dd[dc])}return de}dd=[];for(dc=0;dc<this.vertices.length;dc++){var db=this.vertices[dc];dd.push(db.x,db.y,db.z)}var db=[],da=[],cg={},cb=[],cd={},cf=[],bf={};for(dc=0;dc<this.faces.length;dc++){var ce=this.faces[dc],be=void 0!==this.faceVertexUvs[0][dc],bd=0<ce.normal.length(),bb=0<ce.vertexNormals.length,cc=1!==ce.color.r||1!==ce.color.g||1!==ce.color.b,bc=0<ce.vertexColors.length,bg=0,bg=eb(bg,0,0),bg=eb(bg,1,!0),bg=eb(bg,2,!1),bg=eb(bg,3,be),bg=eb(bg,4,bd),bg=eb(bg,5,bb),bg=eb(bg,6,cc),bg=eb(bg,7,bc);db.push(bg);db.push(ce.a,ce.b,ce.c);db.push(ce.materialIndex);be&&(be=this.faceVertexUvs[0][dc],db.push(df(be[0]),df(be[1]),df(be[2])));bd&&db.push(ea(ce.normal));bb&&(bd=ce.vertexNormals,db.push(ea(bd[0]),ea(bd[1]),ea(bd[2])));cc&&db.push(dg(ce.color));bc&&(ce=ce.vertexColors,db.push(dg(ce[0]),dg(ce[1]),dg(ce[2])))}de.data={};de.data.vertices=dd;de.data.normals=da;0<cb.length&&(de.data.colors=cb);0<cf.length&&(de.data.uvs=[cf]);de.data.faces=db;return de},clone:function(){return(new fL).copy(this)},copy:function(ce){var cd,cc,cb;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=ce.name;var bg=ce.vertices;var bf=0;for(cd=bg.length;bf<cd;bf++){this.vertices.push(bg[bf].clone())}bg=ce.colors;bf=0;for(cd=bg.length;bf<cd;bf++){this.colors.push(bg[bf].clone())}bg=ce.faces;bf=0;for(cd=bg.length;bf<cd;bf++){this.faces.push(bg[bf].clone())}bf=0;for(cd=ce.faceVertexUvs.length;bf<cd;bf++){var be=ce.faceVertexUvs[bf];void 0===this.faceVertexUvs[bf]&&(this.faceVertexUvs[bf]=[]);bg=0;for(cc=be.length;bg<cc;bg++){var bd=be[bg],bc=[];var bb=0;for(cb=bd.length;bb<cb;bb++){bc.push(bd[bb].clone())}this.faceVertexUvs[bf].push(bc)}}bb=ce.morphTargets;bf=0;for(cd=bb.length;bf<cd;bf++){cb={};cb.name=bb[bf].name;if(void 0!==bb[bf].vertices){for(cb.vertices=[],bg=0,cc=bb[bf].vertices.length;bg<cc;bg++){cb.vertices.push(bb[bf].vertices[bg].clone())}}if(void 0!==bb[bf].normals){for(cb.normals=[],bg=0,cc=bb[bf].normals.length;bg<cc;bg++){cb.normals.push(bb[bf].normals[bg].clone())}}this.morphTargets.push(cb)}bb=ce.morphNormals;bf=0;for(cd=bb.length;bf<cd;bf++){cb={};if(void 0!==bb[bf].vertexNormals){for(cb.vertexNormals=[],bg=0,cc=bb[bf].vertexNormals.length;bg<cc;bg++){be=bb[bf].vertexNormals[bg],bd={},bd.a=be.a.clone(),bd.b=be.b.clone(),bd.c=be.c.clone(),cb.vertexNormals.push(bd)}}if(void 0!==bb[bf].faceNormals){for(cb.faceNormals=[],bg=0,cc=bb[bf].faceNormals.length;bg<cc;bg++){cb.faceNormals.push(bb[bf].faceNormals[bg].clone())}}this.morphNormals.push(cb)}bg=ce.skinWeights;bf=0;for(cd=bg.length;bf<cd;bf++){this.skinWeights.push(bg[bf].clone())}bg=ce.skinIndices;bf=0;for(cd=bg.length;bf<cd;bf++){this.skinIndices.push(bg[bf].clone())}bg=ce.lineDistances;bf=0;for(cd=bg.length;bf<cd;bf++){this.lineDistances.push(bg[bf])}bf=ce.boundingBox;null!==bf&&(this.boundingBox=bf.clone());bf=ce.boundingSphere;null!==bf&&(this.boundingSphere=bf.clone());this.elementsNeedUpdate=ce.elementsNeedUpdate;this.verticesNeedUpdate=ce.verticesNeedUpdate;this.uvsNeedUpdate=ce.uvsNeedUpdate;this.normalsNeedUpdate=ce.normalsNeedUpdate;this.colorsNeedUpdate=ce.colorsNeedUpdate;this.lineDistancesNeedUpdate=ce.lineDistancesNeedUpdate;this.groupsNeedUpdate=ce.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(fQ.prototype,"needsUpdate",{set:function(bb){!0===bb&&this.version++}});Object.assign(fQ.prototype,{isBufferAttribute:!0,setArray:function(bb){if(Array.isArray(bb)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=void 0!==bb?bb.length/this.itemSize:0;this.array=bb},setDynamic:function(bb){this.dynamic=bb;return this},copy:function(bb){this.array=new bb.array.constructor(bb.array);this.itemSize=bb.itemSize;this.count=bb.count;this.normalized=bb.normalized;this.dynamic=bb.dynamic;return this},copyAt:function(bc,bb,bf){bc*=this.itemSize;bf*=bb.itemSize;for(var be=0,bd=this.itemSize;be<bd;be++){this.array[bc+be]=bb.array[bf+be]}return this},copyArray:function(bb){this.array.set(bb);return this},copyColorsArray:function(bc){for(var bb=this.array,bg=0,bf=0,be=bc.length;bf<be;bf++){var bd=bc[bf];void 0===bd&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",bf),bd=new fZ);bb[bg++]=bd.r;bb[bg++]=bd.g;bb[bg++]=bd.b}return this},copyIndicesArray:function(bc){for(var bb=this.array,bg=0,bf=0,be=bc.length;bf<be;bf++){var bd=bc[bf];bb[bg++]=bd.a;bb[bg++]=bd.b;bb[bg++]=bd.c}return this},copyVector2sArray:function(bc){for(var bb=this.array,bg=0,bf=0,be=bc.length;bf<be;bf++){var bd=bc[bf];void 0===bd&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",bf),bd=new fX);bb[bg++]=bd.x;bb[bg++]=bd.y}return this},copyVector3sArray:function(bc){for(var bb=this.array,bg=0,bf=0,be=bc.length;bf<be;bf++){var bd=bc[bf];void 0===bd&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",bf),bd=new ft);bb[bg++]=bd.x;bb[bg++]=bd.y;bb[bg++]=bd.z}return this},copyVector4sArray:function(bc){for(var bb=this.array,bg=0,bf=0,be=bc.length;bf<be;bf++){var bd=bc[bf];void 0===bd&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",bf),bd=new fJ);bb[bg++]=bd.x;bb[bg++]=bd.y;bb[bg++]=bd.z;bb[bg++]=bd.w}return this},set:function(bc,bb){void 0===bb&&(bb=0);this.array.set(bc,bb);return this},getX:function(bb){return this.array[bb*this.itemSize]},setX:function(bc,bb){this.array[bc*this.itemSize]=bb;return this},getY:function(bb){return this.array[bb*this.itemSize+1]},setY:function(bc,bb){this.array[bc*this.itemSize+1]=bb;return this},getZ:function(bb){return this.array[bb*this.itemSize+2]},setZ:function(bc,bb){this.array[bc*this.itemSize+2]=bb;return this},getW:function(bb){return this.array[bb*this.itemSize+3]},setW:function(bc,bb){this.array[bc*this.itemSize+3]=bb;return this},setXY:function(bc,bb,bd){bc*=this.itemSize;this.array[bc+0]=bb;this.array[bc+1]=bd;return this},setXYZ:function(bc,bb,be,bd){bc*=this.itemSize;this.array[bc+0]=bb;this.array[bc+1]=be;this.array[bc+2]=bd;return this},setXYZW:function(bc,bb,bf,be,bd){bc*=this.itemSize;this.array[bc+0]=bb;this.array[bc+1]=bf;this.array[bc+2]=be;this.array[bc+3]=bd;return this},onUpload:function(bb){this.onUploadCallback=bb;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});cv.prototype=Object.create(fQ.prototype);cv.prototype.constructor=cv;cj.prototype=Object.create(fQ.prototype);cj.prototype.constructor=cj;b1.prototype=Object.create(fQ.prototype);b1.prototype.constructor=b1;bI.prototype=Object.create(fQ.prototype);bI.prototype.constructor=bI;fj.prototype=Object.create(fQ.prototype);fj.prototype.constructor=fj;bw.prototype=Object.create(fQ.prototype);bw.prototype.constructor=bw;e0.prototype=Object.create(fQ.prototype);e0.prototype.constructor=e0;fp.prototype=Object.create(fQ.prototype);fp.prototype.constructor=fp;bj.prototype=Object.create(fQ.prototype);bj.prototype.constructor=bj;Object.assign(e3.prototype,{computeGroups:function(bc){var bb=[],bg=void 0;bc=bc.faces;for(var bf=0;bf<bc.length;bf++){var be=bc[bf];if(be.materialIndex!==bg){bg=be.materialIndex;void 0!==bd&&(bd.count=3*bf-bd.start,bb.push(bd));var bd={start:3*bf,materialIndex:bg}}}void 0!==bd&&(bd.count=3*bf-bd.start,bb.push(bd));this.groups=bb},fromGeometry:function(ea){var dg=ea.faces,df=ea.vertices,de=ea.faceVertexUvs,dd=de[0]&&0<de[0].length,dc=de[1]&&0<de[1].length,db=ea.morphTargets,da=db.length;if(0<da){var cg=[];for(var cf=0;cf<da;cf++){cg[cf]=[]}this.morphTargets.position=cg}var bg=ea.morphNormals,cc=bg.length;if(0<cc){var ce=[];for(cf=0;cf<cc;cf++){ce[cf]=[]}this.morphTargets.normal=ce}for(var cd=ea.skinIndices,be=ea.skinWeights,bf=cd.length===df.length,bd=be.length===df.length,cf=0;cf<dg.length;cf++){var bb=dg[cf];this.vertices.push(df[bb.a],df[bb.b],df[bb.c]);var cb=bb.vertexNormals;3===cb.length?this.normals.push(cb[0],cb[1],cb[2]):(cb=bb.normal,this.normals.push(cb,cb,cb));cb=bb.vertexColors;3===cb.length?this.colors.push(cb[0],cb[1],cb[2]):(cb=bb.color,this.colors.push(cb,cb,cb));!0===dd&&(cb=de[0][cf],void 0!==cb?this.uvs.push(cb[0],cb[1],cb[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",cf),this.uvs.push(new fX,new fX,new fX)));!0===dc&&(cb=de[1][cf],void 0!==cb?this.uvs2.push(cb[0],cb[1],cb[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",cf),this.uvs2.push(new fX,new fX,new fX)));for(cb=0;cb<da;cb++){var bc=db[cb].vertices;cg[cb].push(bc[bb.a],bc[bb.b],bc[bb.c])}for(cb=0;cb<cc;cb++){bc=bg[cb].vertexNormals[cf],ce[cb].push(bc.a,bc.b,bc.c)}bf&&this.skinIndices.push(cd[bb.a],cd[bb.b],cd[bb.c]);bd&&this.skinWeights.push(be[bb.a],be[bb.b],be[bb.c])}this.computeGroups(ea);this.verticesNeedUpdate=ea.verticesNeedUpdate;this.normalsNeedUpdate=ea.normalsNeedUpdate;this.colorsNeedUpdate=ea.colorsNeedUpdate;this.uvsNeedUpdate=ea.uvsNeedUpdate;this.groupsNeedUpdate=ea.groupsNeedUpdate;return this}});fU.MaxIndex=65535;Object.assign(fU.prototype,c1.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(bb){Array.isArray(bb)?this.index=new (65535<dA(bb)?e0:fj)(bb,1):this.index=bb},addAttribute:function(bc,bb,bd){if(bb&&bb.isBufferAttribute||bb&&bb.isInterleavedBufferAttribute){if("index"===bc){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(bb)}else{return this.attributes[bc]=bb,this}}else{console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(bc,new fQ(bb,bd))}},getAttribute:function(bb){return this.attributes[bb]},removeAttribute:function(bb){delete this.attributes[bb];return this},addGroup:function(bc,bb,bd){this.groups.push({start:bc,count:bb,materialIndex:void 0!==bd?bd:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(bc,bb){this.drawRange.start=bc;this.drawRange.count=bb},applyMatrix:function(bc){var bb=this.attributes.position;void 0!==bb&&(bc.applyToBufferAttribute(bb),bb.needsUpdate=!0);bb=this.attributes.normal;void 0!==bb&&((new cl).getNormalMatrix(bc).applyToBufferAttribute(bb),bb.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var bb=new fN;return function(bc){bb.makeRotationX(bc);this.applyMatrix(bb);return this}}(),rotateY:function(){var bb=new fN;return function(bc){bb.makeRotationY(bc);this.applyMatrix(bb);return this}}(),rotateZ:function(){var bb=new fN;return function(bc){bb.makeRotationZ(bc);this.applyMatrix(bb);return this}}(),translate:function(){var bb=new fN;return function(bc,be,bd){bb.makeTranslation(bc,be,bd);this.applyMatrix(bb);return this}}(),scale:function(){var bb=new fN;return function(bc,be,bd){bb.makeScale(bc,be,bd);this.applyMatrix(bb);return this}}(),lookAt:function(){var bb=new fs;return function(bc){bb.lookAt(bc);bb.updateMatrix();this.applyMatrix(bb.matrix)}}(),center:function(){this.computeBoundingBox();var bb=this.boundingBox.getCenter().negate();this.translate(bb.x,bb.y,bb.z);return bb},setFromObject:function(bc){var bb=bc.geometry;if(bc.isPoints||bc.isLine){bc=new fp(3*bb.vertices.length,3);var bd=new fp(3*bb.colors.length,3);this.addAttribute("position",bc.copyVector3sArray(bb.vertices));this.addAttribute("color",bd.copyColorsArray(bb.colors));bb.lineDistances&&bb.lineDistances.length===bb.vertices.length&&(bc=new fp(bb.lineDistances.length,1),this.addAttribute("lineDistance",bc.copyArray(bb.lineDistances)));null!==bb.boundingSphere&&(this.boundingSphere=bb.boundingSphere.clone());null!==bb.boundingBox&&(this.boundingBox=bb.boundingBox.clone())}else{bc.isMesh&&bb&&bb.isGeometry&&this.fromGeometry(bb)}return this},updateFromObject:function(bc){var bb=bc.geometry;if(bc.isMesh){var bd=bb.__directGeometry;!0===bb.elementsNeedUpdate&&(bd=void 0,bb.elementsNeedUpdate=!1);if(void 0===bd){return this.fromGeometry(bb)}bd.verticesNeedUpdate=bb.verticesNeedUpdate;bd.normalsNeedUpdate=bb.normalsNeedUpdate;bd.colorsNeedUpdate=bb.colorsNeedUpdate;bd.uvsNeedUpdate=bb.uvsNeedUpdate;bd.groupsNeedUpdate=bb.groupsNeedUpdate;bb.verticesNeedUpdate=!1;bb.normalsNeedUpdate=!1;bb.colorsNeedUpdate=!1;bb.uvsNeedUpdate=!1;bb.groupsNeedUpdate=!1;bb=bd}!0===bb.verticesNeedUpdate&&(bd=this.attributes.position,void 0!==bd&&(bd.copyVector3sArray(bb.vertices),bd.needsUpdate=!0),bb.verticesNeedUpdate=!1);!0===bb.normalsNeedUpdate&&(bd=this.attributes.normal,void 0!==bd&&(bd.copyVector3sArray(bb.normals),bd.needsUpdate=!0),bb.normalsNeedUpdate=!1);!0===bb.colorsNeedUpdate&&(bd=this.attributes.color,void 0!==bd&&(bd.copyColorsArray(bb.colors),bd.needsUpdate=!0),bb.colorsNeedUpdate=!1);bb.uvsNeedUpdate&&(bd=this.attributes.uv,void 0!==bd&&(bd.copyVector2sArray(bb.uvs),bd.needsUpdate=!0),bb.uvsNeedUpdate=!1);bb.lineDistancesNeedUpdate&&(bd=this.attributes.lineDistance,void 0!==bd&&(bd.copyArray(bb.lineDistances),bd.needsUpdate=!0),bb.lineDistancesNeedUpdate=!1);bb.groupsNeedUpdate&&(bb.computeGroups(bc.geometry),this.groups=bb.groups,bb.groupsNeedUpdate=!1);return this},fromGeometry:function(bb){bb.__directGeometry=(new e3).fromGeometry(bb);return this.fromDirectGeometry(bb.__directGeometry)},fromDirectGeometry:function(bc){var bb=new Float32Array(3*bc.vertices.length);this.addAttribute("position",(new fQ(bb,3)).copyVector3sArray(bc.vertices));0<bc.normals.length&&(bb=new Float32Array(3*bc.normals.length),this.addAttribute("normal",(new fQ(bb,3)).copyVector3sArray(bc.normals)));0<bc.colors.length&&(bb=new Float32Array(3*bc.colors.length),this.addAttribute("color",(new fQ(bb,3)).copyColorsArray(bc.colors)));0<bc.uvs.length&&(bb=new Float32Array(2*bc.uvs.length),this.addAttribute("uv",(new fQ(bb,2)).copyVector2sArray(bc.uvs)));0<bc.uvs2.length&&(bb=new Float32Array(2*bc.uvs2.length),this.addAttribute("uv2",(new fQ(bb,2)).copyVector2sArray(bc.uvs2)));0<bc.indices.length&&(bb=new (65535<dA(bc.indices)?Uint32Array:Uint16Array)(3*bc.indices.length),this.setIndex((new fQ(bb,1)).copyIndicesArray(bc.indices)));this.groups=bc.groups;for(var cc in bc.morphTargets){for(var bb=[],cb=bc.morphTargets[cc],bg=0,bf=cb.length;bg<bf;bg++){var be=cb[bg],bd=new fp(3*be.length,3);bb.push(bd.copyVector3sArray(be))}this.morphAttributes[cc]=bb}0<bc.skinIndices.length&&(cc=new fp(4*bc.skinIndices.length,4),this.addAttribute("skinIndex",cc.copyVector4sArray(bc.skinIndices)));0<bc.skinWeights.length&&(cc=new fp(4*bc.skinWeights.length,4),this.addAttribute("skinWeight",cc.copyVector4sArray(bc.skinWeights)));null!==bc.boundingSphere&&(this.boundingSphere=bc.boundingSphere.clone());null!==bc.boundingBox&&(this.boundingBox=bc.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ej);var bb=this.attributes.position;void 0!==bb?this.boundingBox.setFromBufferAttribute(bb):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var bc=new ej,bb=new ft;return function(){null===this.boundingSphere&&(this.boundingSphere=new br);var cb=this.attributes.position;if(cb){var bg=this.boundingSphere.center;bc.setFromBufferAttribute(cb);bc.getCenter(bg);for(var bf=0,be=0,bd=cb.count;be<bd;be++){bb.x=cb.getX(be),bb.y=cb.getY(be),bb.z=cb.getZ(be),bf=Math.max(bf,bg.distanceToSquared(bb))}this.boundingSphere.radius=Math.sqrt(bf);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var dc=this.index,da=this.attributes,cg=this.groups;if(da.position){var cf=da.position.array;if(void 0===da.normal){this.addAttribute("normal",new fQ(new Float32Array(cf.length),3))}else{for(var ce=da.normal.array,cd=0,cc=ce.length;cd<cc;cd++){ce[cd]=0}}var ce=da.normal.array,cb=new ft,bg=new ft,bf=new ft,bc=new ft,bd=new ft;if(dc){dc=dc.array;0===cg.length&&this.addGroup(0,dc.length);for(var be=0,bb=cg.length;be<bb;++be){cd=cg[be];cc=cd.start;var dd=cd.count;cd=cc;for(cc+=dd;cd<cc;cd+=3){dd=3*dc[cd+0];var de=3*dc[cd+1];var db=3*dc[cd+2];cb.fromArray(cf,dd);bg.fromArray(cf,de);bf.fromArray(cf,db);bc.subVectors(bf,bg);bd.subVectors(cb,bg);bc.cross(bd);ce[dd]+=bc.x;ce[dd+1]+=bc.y;ce[dd+2]+=bc.z;ce[de]+=bc.x;ce[de+1]+=bc.y;ce[de+2]+=bc.z;ce[db]+=bc.x;ce[db+1]+=bc.y;ce[db+2]+=bc.z}}}else{for(cd=0,cc=cf.length;cd<cc;cd+=9){cb.fromArray(cf,cd),bg.fromArray(cf,cd+3),bf.fromArray(cf,cd+6),bc.subVectors(bf,bg),bd.subVectors(cb,bg),bc.cross(bd),ce[cd]=bc.x,ce[cd+1]=bc.y,ce[cd+2]=bc.z,ce[cd+3]=bc.x,ce[cd+4]=bc.y,ce[cd+5]=bc.z,ce[cd+6]=bc.x,ce[cd+7]=bc.y,ce[cd+8]=bc.z}}this.normalizeNormals();da.normal.needsUpdate=!0}},merge:function(bc,bb){if(bc&&bc.isBufferGeometry){void 0===bb&&(bb=0);var cc=this.attributes,cb;for(cb in cc){if(void 0!==bc.attributes[cb]){for(var bg=cc[cb].array,bf=bc.attributes[cb],be=bf.array,bd=0,bf=bf.itemSize*bb;bd<be.length;bd++,bf++){bg[bf]=be[bd]}}}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",bc)},normalizeNormals:function(){var bb=new ft;return function(){for(var bc=this.attributes.normal,be=0,bd=bc.count;be<bd;be++){bb.x=bc.getX(be),bb.y=bc.getY(be),bb.z=bc.getZ(be),bb.normalize(),bc.setXYZ(be,bb.x,bb.y,bb.z)}}}(),toNonIndexed:function(){if(null===this.index){return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this}var cg=new fU,cf=this.index.array,ce=this.attributes,cd;for(cd in ce){for(var cc=ce[cd],cb=cc.array,cc=cc.itemSize,bg=new cb.constructor(cf.length*cc),bf,be=0,bd=0,bb=cf.length;bd<bb;bd++){bf=cf[bd]*cc;for(var bc=0;bc<cc;bc++){bg[be++]=cb[bf++]}}cg.addAttribute(cd,new fQ(bg,cc))}return cg},toJSON:function(){var bc={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};bc.uuid=this.uuid;bc.type=this.type;""!==this.name&&(bc.name=this.name);if(void 0!==this.parameters){var bb=this.parameters;for(var bf in bb){void 0!==bb[bf]&&(bc[bf]=bb[bf])}return bc}bc.data={attributes:{}};var be=this.index;null!==be&&(bb=Array.prototype.slice.call(be.array),bc.data.index={type:be.array.constructor.name,array:bb});be=this.attributes;for(bf in be){var bd=be[bf];bb=Array.prototype.slice.call(bd.array);bc.data.attributes[bf]={itemSize:bd.itemSize,type:bd.array.constructor.name,array:bb,normalized:bd.normalized}}bf=this.groups;0<bf.length&&(bc.data.groups=JSON.parse(JSON.stringify(bf)));bf=this.boundingSphere;null!==bf&&(bc.data.boundingSphere={center:bf.center.toArray(),radius:bf.radius});return bc},clone:function(){return(new fU).copy(this)},copy:function(bc){var bb;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=bc.name;var cb=bc.index;null!==cb&&this.setIndex(cb.clone());cb=bc.attributes;for(bd in cb){this.addAttribute(bd,cb[bd].clone())}var bg=bc.morphAttributes;for(bd in bg){var bf=[],be=bg[bd];cb=0;for(bb=be.length;cb<bb;cb++){bf.push(be[cb].clone())}this.morphAttributes[bd]=bf}var bd=bc.groups;cb=0;for(bb=bd.length;cb<bb;cb++){bg=bd[cb],this.addGroup(bg.start,bg.count,bg.materialIndex)}bd=bc.boundingBox;null!==bd&&(this.boundingBox=bd.clone());bd=bc.boundingSphere;null!==bd&&(this.boundingSphere=bd.clone());this.drawRange.start=bc.drawRange.start;this.drawRange.count=bc.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});aX.prototype=Object.create(fL.prototype);aX.prototype.constructor=aX;eN.prototype=Object.create(fU.prototype);eN.prototype.constructor=eN;a2.prototype=Object.create(fL.prototype);a2.prototype.constructor=a2;eB.prototype=Object.create(fU.prototype);eB.prototype.constructor=eB;bK.prototype=Object.create(fM.prototype);bK.prototype.constructor=bK;bK.prototype.isMeshBasicMaterial=!0;bK.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.color.copy(bb.color);this.map=bb.map;this.lightMap=bb.lightMap;this.lightMapIntensity=bb.lightMapIntensity;this.aoMap=bb.aoMap;this.aoMapIntensity=bb.aoMapIntensity;this.specularMap=bb.specularMap;this.alphaMap=bb.alphaMap;this.envMap=bb.envMap;this.combine=bb.combine;this.reflectivity=bb.reflectivity;this.refractionRatio=bb.refractionRatio;this.wireframe=bb.wireframe;this.wireframeLinewidth=bb.wireframeLinewidth;this.wireframeLinecap=bb.wireframeLinecap;this.wireframeLinejoin=bb.wireframeLinejoin;this.skinning=bb.skinning;this.morphTargets=bb.morphTargets;return this};Object.assign(ep.prototype,{set:function(bc,bb){this.origin.copy(bc);this.direction.copy(bb);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.origin.copy(bb.origin);this.direction.copy(bb.direction);return this},at:function(bc,bb){return(bb||new ft).copy(this.direction).multiplyScalar(bc).add(this.origin)},lookAt:function(bb){this.direction.copy(bb).sub(this.origin).normalize();return this},recast:function(){var bb=new ft;return function(bc){this.origin.copy(this.at(bc,bb));return this}}(),closestPointToPoint:function(bc,bb){bb=bb||new ft;bb.subVectors(bc,this.origin);bc=bb.dot(this.direction);return 0>bc?bb.copy(this.origin):bb.copy(this.direction).multiplyScalar(bc).add(this.origin)},distanceToPoint:function(bb){return Math.sqrt(this.distanceSqToPoint(bb))},distanceSqToPoint:function(){var bb=new ft;return function(bc){var bd=bb.subVectors(bc,this.origin).dot(this.direction);if(0>bd){return this.origin.distanceToSquared(bc)}bb.copy(this.direction).multiplyScalar(bd).add(this.origin);return bb.distanceToSquared(bc)}}(),distanceSqToSegment:function(){var bc=new ft,bb=new ft,bd=new ft;return function(da,cg,cf,ce){bc.copy(da).add(cg).multiplyScalar(0.5);bb.copy(cg).sub(da).normalize();bd.copy(this.origin).sub(bc);var cd=0.5*da.distanceTo(cg),cc=-this.direction.dot(bb),cb=bd.dot(this.direction),be=-bd.dot(bb),bg=bd.lengthSq(),db=Math.abs(1-cc*cc);if(0<db){da=cc*be-cb;cg=cc*cb-be;var bf=cd*db;0<=da?cg>=-bf?cg<=bf?(cd=1/db,da*=cd,cg*=cd,cc=da*(da+cc*cg+2*cb)+cg*(cc*da+cg+2*be)+bg):(cg=cd,da=Math.max(0,-(cc*cg+cb)),cc=-da*da+cg*(cg+2*be)+bg):(cg=-cd,da=Math.max(0,-(cc*cg+cb)),cc=-da*da+cg*(cg+2*be)+bg):cg<=-bf?(da=Math.max(0,-(-cc*cd+cb)),cg=0<da?-cd:Math.min(Math.max(-cd,-be),cd),cc=-da*da+cg*(cg+2*be)+bg):cg<=bf?(da=0,cg=Math.min(Math.max(-cd,-be),cd),cc=cg*(cg+2*be)+bg):(da=Math.max(0,-(cc*cd+cb)),cg=0<da?cd:Math.min(Math.max(-cd,-be),cd),cc=-da*da+cg*(cg+2*be)+bg)}else{cg=0<cc?-cd:cd,da=Math.max(0,-(cc*cg+cb)),cc=-da*da+cg*(cg+2*be)+bg}cf&&cf.copy(this.direction).multiplyScalar(da).add(this.origin);ce&&ce.copy(bb).multiplyScalar(cg).add(bc);return cc}}(),intersectSphere:function(){var bb=new ft;return function(bc,bf){bb.subVectors(bc.center,this.origin);var be=bb.dot(this.direction),bd=bb.dot(bb)-be*be;bc=bc.radius*bc.radius;if(bd>bc){return null}bc=Math.sqrt(bc-bd);bd=be-bc;be+=bc;return 0>bd&&0>be?null:0>bd?this.at(be,bf):this.at(bd,bf)}}(),intersectsSphere:function(bb){return this.distanceToPoint(bb.center)<=bb.radius},distanceToPlane:function(bc){var bb=bc.normal.dot(this.direction);if(0===bb){return 0===bc.distanceToPoint(this.origin)?0:null}bc=-(this.origin.dot(bc.normal)+bc.constant)/bb;return 0<=bc?bc:null},intersectPlane:function(bc,bb){bc=this.distanceToPlane(bc);return null===bc?null:this.at(bc,bb)},intersectsPlane:function(bc){var bb=bc.distanceToPoint(this.origin);return 0===bb||0>bc.normal.dot(this.direction)*bb?!0:!1},intersectBox:function(bc,bb){var cc=1/this.direction.x;var cb=1/this.direction.y;var bg=1/this.direction.z,bf=this.origin;if(0<=cc){var be=(bc.min.x-bf.x)*cc;cc*=bc.max.x-bf.x}else{be=(bc.max.x-bf.x)*cc,cc*=bc.min.x-bf.x}if(0<=cb){var bd=(bc.min.y-bf.y)*cb;cb*=bc.max.y-bf.y}else{bd=(bc.max.y-bf.y)*cb,cb*=bc.min.y-bf.y}if(be>cb||bd>cc){return null}if(bd>be||be!==be){be=bd}if(cb<cc||cc!==cc){cc=cb}0<=bg?(bd=(bc.min.z-bf.z)*bg,bc=(bc.max.z-bf.z)*bg):(bd=(bc.max.z-bf.z)*bg,bc=(bc.min.z-bf.z)*bg);if(be>bc||bd>cc){return null}if(bd>be||be!==be){be=bd}if(bc<cc||cc!==cc){cc=bc}return 0>cc?null:this.at(0<=be?be:cc,bb)},intersectsBox:function(){var bb=new ft;return function(bc){return null!==this.intersectBox(bc,bb)}}(),intersectTriangle:function(){var bc=new ft,bb=new ft,be=new ft,bd=new ft;return function(cd,cc,cb,bg,bf){bb.subVectors(cc,cd);be.subVectors(cb,cd);bd.crossVectors(bb,be);cc=this.direction.dot(bd);if(0<cc){if(bg){return null}bg=1}else{if(0>cc){bg=-1,cc=-cc}else{return null}}bc.subVectors(this.origin,cd);cd=bg*this.direction.dot(be.crossVectors(bc,be));if(0>cd){return null}cb=bg*this.direction.dot(bb.cross(bc));if(0>cb||cd+cb>cc){return null}cd=-bg*bc.dot(bd);return 0>cd?null:this.at(cd/cc,bf)}}(),applyMatrix4:function(bb){this.origin.applyMatrix4(bb);this.direction.transformDirection(bb);return this},equals:function(bb){return bb.origin.equals(this.origin)&&bb.direction.equals(this.direction)}});Object.assign(aL.prototype,{set:function(bc,bb){this.start.copy(bc);this.end.copy(bb);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.start.copy(bb.start);this.end.copy(bb.end);return this},getCenter:function(bb){return(bb||new ft).addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(bb){return(bb||new ft).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(bc,bb){bb=bb||new ft;return this.delta(bb).multiplyScalar(bc).add(this.start)},closestPointToPointParameter:function(){var bc=new ft,bb=new ft;return function(be,bd){bc.subVectors(be,this.start);bb.subVectors(this.end,this.start);be=bb.dot(bb);be=bb.dot(bc)/be;bd&&(be=fK.clamp(be,0,1));return be}}(),closestPointToPoint:function(bc,bb,bd){bc=this.closestPointToPointParameter(bc,bb);bd=bd||new ft;return this.delta(bd).multiplyScalar(bc).add(this.start)},applyMatrix4:function(bb){this.start.applyMatrix4(bb);this.end.applyMatrix4(bb);return this},equals:function(bb){return bb.start.equals(this.start)&&bb.end.equals(this.end)}});Object.assign(dO,{normal:function(){var bb=new ft;return function(bc,bf,be,bd){bd=bd||new ft;bd.subVectors(be,bf);bb.subVectors(bc,bf);bd.cross(bb);bc=bd.lengthSq();return 0<bc?bd.multiplyScalar(1/Math.sqrt(bc)):bd.set(0,0,0)}}(),barycoordFromPoint:function(){var bc=new ft,bb=new ft,bd=new ft;return function(ce,cd,cc,cb,bg){bc.subVectors(cb,cd);bb.subVectors(cc,cd);bd.subVectors(ce,cd);ce=bc.dot(bc);cd=bc.dot(bb);cc=bc.dot(bd);var bf=bb.dot(bb);cb=bb.dot(bd);var be=ce*bf-cd*cd;bg=bg||new ft;if(0===be){return bg.set(-2,-1,-1)}be=1/be;bf=(bf*cc-cd*cb)*be;ce=(ce*cb-cd*cc)*be;return bg.set(1-bf-ce,ce,bf)}}(),containsPoint:function(){var bb=new ft;return function(bc,bf,be,bd){bc=dO.barycoordFromPoint(bc,bf,be,bd,bb);return 0<=bc.x&&0<=bc.y&&1>=bc.x+bc.y}}()});Object.assign(dO.prototype,{set:function(bc,bb,bd){this.a.copy(bc);this.b.copy(bb);this.c.copy(bd);return this},setFromPointsAndIndices:function(bc,bb,be,bd){this.a.copy(bc[bb]);this.b.copy(bc[be]);this.c.copy(bc[bd]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.a.copy(bb.a);this.b.copy(bb.b);this.c.copy(bb.c);return this},area:function(){var bc=new ft,bb=new ft;return function(){bc.subVectors(this.c,this.b);bb.subVectors(this.a,this.b);return 0.5*bc.cross(bb).length()}}(),midpoint:function(bb){return(bb||new ft).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(bb){return dO.normal(this.a,this.b,this.c,bb)},plane:function(bb){return(bb||new gh).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(bc,bb){return dO.barycoordFromPoint(bc,this.a,this.b,this.c,bb)},containsPoint:function(bb){return dO.containsPoint(bb,this.a,this.b,this.c)},closestPointToPoint:function(){var bc=new gh,bb=[new aL,new aL,new aL],be=new ft,bd=new ft;return function(cc,cb){cb=cb||new ft;var bg=Infinity;bc.setFromCoplanarPoints(this.a,this.b,this.c);bc.projectPoint(cc,be);if(!0===this.containsPoint(be)){cb.copy(be)}else{for(bb[0].set(this.a,this.b),bb[1].set(this.b,this.c),bb[2].set(this.c,this.a),cc=0;cc<bb.length;cc++){bb[cc].closestPointToPoint(be,!0,bd);var bf=be.distanceToSquared(bd);bf<bg&&(bg=bf,cb.copy(bd))}}return cb}}(),equals:function(bb){return bb.a.equals(this.a)&&bb.b.equals(this.b)&&bb.c.equals(this.c)}});eO.prototype=Object.assign(Object.create(fs.prototype),{constructor:eO,isMesh:!0,setDrawMode:function(bb){this.drawMode=bb},copy:function(bb){fs.prototype.copy.call(this,bb);this.drawMode=bb.drawMode;return this},updateMorphTargets:function(){var bc=this.geometry;if(bc.isBufferGeometry){bc=bc.morphAttributes;var bb=Object.keys(bc);if(0<bb.length){var be=bc[bb[0]];if(void 0!==be){for(this.morphTargetInfluences=[],this.morphTargetDictionary={},bc=0,bb=be.length;bc<bb;bc++){var bd=be[bc].name||String(bc);this.morphTargetInfluences.push(0);this.morphTargetDictionary[bd]=bc}}}}else{if(be=bc.morphTargets,void 0!==be&&0<be.length){for(this.morphTargetInfluences=[],this.morphTargetDictionary={},bc=0,bb=be.length;bc<bb;bc++){bd=be[bc].name||String(bc),this.morphTargetInfluences.push(0),this.morphTargetDictionary[bd]=bc}}}},raycast:function(){function df(ea,dg,ef,ee,ed,ec,eb){dO.barycoordFromPoint(ea,dg,ef,ee,be);ed.multiplyScalar(be.x);ec.multiplyScalar(be.y);eb.multiplyScalar(be.z);ed.add(ec).add(eb);return ed.clone()}function de(ea,dg,eg,ef,ee,ed,ec,eb){if(null===(1===dg.side?ef.intersectTriangle(ec,ed,ee,!0,eb):ef.intersectTriangle(ee,ed,ec,2!==dg.side,eb))){return null}bb.copy(eb);bb.applyMatrix4(ea.matrixWorld);dg=eg.ray.origin.distanceTo(bb);return dg<eg.near||dg>eg.far?null:{distance:dg,point:bb.clone(),object:ea}}function dd(eg,ef,ee,ec,ea,eb,dg,ed){cg.fromBufferAttribute(ec,eb);cf.fromBufferAttribute(ec,dg);ce.fromBufferAttribute(ec,ed);if(eg=de(eg,eg.material,ef,ee,cg,cf,ce,bc)){ea&&(bf.fromBufferAttribute(ea,eb),bg.fromBufferAttribute(ea,dg),bd.fromBufferAttribute(ea,ed),eg.uv=df(bc,cg,cf,ce,bf,bg,bd)),eg.face=new d0(eb,dg,ed,dO.normal(cg,cf,ce)),eg.faceIndex=eb}return eg}var dc=new fN,db=new ep,da=new br,cg=new ft,cf=new ft,ce=new ft,cd=new ft,cb=new ft,cc=new ft,bf=new fX,bg=new fX,bd=new fX,be=new ft,bc=new ft,bb=new ft;return function(gf,gg){var gb=this.geometry,fd=this.material,ge=this.matrixWorld;if(void 0!==fd&&(null===gb.boundingSphere&&gb.computeBoundingSphere(),da.copy(gb.boundingSphere),da.applyMatrix4(ge),!1!==gf.ray.intersectsSphere(da)&&(dc.getInverse(ge),db.copy(gf.ray).applyMatrix4(dc),null===gb.boundingBox||!1!==db.intersectsBox(gb.boundingBox)))){var ff;if(gb.isBufferGeometry){var fd=gb.index,fe=gb.attributes.position,ge=gb.attributes.uv,fb;if(null!==fd){var gc=0;for(fb=fd.count;gc<fb;gc+=3){gb=fd.getX(gc);var gd=fd.getX(gc+1);var fc=fd.getX(gc+2);if(ff=dd(this,gf,db,fe,ge,gb,gd,fc)){ff.faceIndex=Math.floor(gc/3),gg.push(ff)}}}else{for(gc=0,fb=fe.count;gc<fb;gc+=3){if(gb=gc,gd=gc+1,fc=gc+2,ff=dd(this,gf,db,fe,ge,gb,gd,fc)){ff.index=gb,gg.push(ff)}}}}else{if(gb.isGeometry){var ge=Array.isArray(fd);gc=gb.vertices;fb=gb.faces;gd=gb.faceVertexUvs[0];0<gd.length&&(fe=gd);for(var fg=0,eg=fb.length;fg<eg;fg++){var ef=fb[fg];ff=ge?fd[ef.materialIndex]:fd;if(void 0!==ff){gd=gc[ef.a];fc=gc[ef.b];var dg=gc[ef.c];if(!0===ff.morphTargets){var fa=gb.morphTargets,eb=this.morphTargetInfluences;cg.set(0,0,0);cf.set(0,0,0);ce.set(0,0,0);for(var ed=0,ec=fa.length;ed<ec;ed++){var ea=eb[ed];if(0!==ea){var ee=fa[ed].vertices;cg.addScaledVector(cd.subVectors(ee[ef.a],gd),ea);cf.addScaledVector(cb.subVectors(ee[ef.b],fc),ea);ce.addScaledVector(cc.subVectors(ee[ef.c],dg),ea)}}cg.add(gd);cf.add(fc);ce.add(dg);gd=cg;fc=cf;dg=ce}if(ff=de(this,ff,gf,db,gd,fc,dg,bc)){fe&&fe[fg]&&(fa=fe[fg],bf.copy(fa[0]),bg.copy(fa[1]),bd.copy(fa[2]),ff.uv=df(bc,gd,fc,dg,bf,bg,bd)),ff.face=ef,ff.faceIndex=fg,gg.push(ff)}}}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});var ek=0;di.prototype=Object.assign(Object.create(dU.prototype),{constructor:di,isArrayCamera:!0});gt.prototype.isFogExp2=!0;gt.prototype.clone=function(){return new gt(this.color.getHex(),this.density)};gt.prototype.toJSON=function(bb){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};f4.prototype.isFog=!0;f4.prototype.clone=function(){return new f4(this.color.getHex(),this.near,this.far)};f4.prototype.toJSON=function(bb){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};cY.prototype=Object.assign(Object.create(fs.prototype),{constructor:cY,copy:function(bc,bb){fs.prototype.copy.call(this,bc,bb);null!==bc.background&&(this.background=bc.background.clone());null!==bc.fog&&(this.fog=bc.fog.clone());null!==bc.overrideMaterial&&(this.overrideMaterial=bc.overrideMaterial.clone());this.autoUpdate=bc.autoUpdate;this.matrixAutoUpdate=bc.matrixAutoUpdate;return this},toJSON:function(bc){var bb=fs.prototype.toJSON.call(this,bc);null!==this.background&&(bb.object.background=this.background.toJSON(bc));null!==this.fog&&(bb.object.fog=this.fog.toJSON());return bb}});bN.prototype=Object.assign(Object.create(fs.prototype),{constructor:bN,isLensFlare:!0,copy:function(bc){fs.prototype.copy.call(this,bc);this.positionScreen.copy(bc.positionScreen);this.customUpdateCallback=bc.customUpdateCallback;for(var bb=0,bd=bc.lensFlares.length;bb<bd;bb++){this.lensFlares.push(bc.lensFlares[bb])}return this},add:function(bc,bb,bg,bf,be,bd){void 0===bb&&(bb=-1);void 0===bg&&(bg=0);void 0===bd&&(bd=1);void 0===be&&(be=new fZ(16777215));void 0===bf&&(bf=1);bg=Math.min(bg,Math.max(0,bg));this.lensFlares.push({texture:bc,size:bb,distance:bg,x:0,y:0,z:0,scale:1,rotation:0,opacity:bd,color:be,blending:bf})},updateLensFlares:function(){var bc,bb=this.lensFlares.length,bf=2*-this.positionScreen.x,be=2*-this.positionScreen.y;for(bc=0;bc<bb;bc++){var bd=this.lensFlares[bc];bd.x=this.positionScreen.x+bf*bd.distance;bd.y=this.positionScreen.y+be*bd.distance;bd.wantedRotation=bd.x*Math.PI*0.25;bd.rotation+=0.25*(bd.wantedRotation-bd.rotation)}}});bQ.prototype=Object.create(fM.prototype);bQ.prototype.constructor=bQ;bQ.prototype.isSpriteMaterial=!0;bQ.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.color.copy(bb.color);this.map=bb.map;this.rotation=bb.rotation;return this};aF.prototype=Object.assign(Object.create(fs.prototype),{constructor:aF,isSprite:!0,raycast:function(){var bc=new ft,bb=new ft,bd=new ft;return function(bg,bf){bb.setFromMatrixPosition(this.matrixWorld);bg.ray.closestPointToPoint(bb,bc);bd.setFromMatrixScale(this.matrixWorld);var be=bd.x*bd.y/4;bb.distanceToSquared(bc)>be||(be=bg.ray.origin.distanceTo(bc),be<bg.near||be>bg.far||bf.push({distance:be,point:bc.clone(),face:null,object:this}))}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});gx.prototype=Object.assign(Object.create(fs.prototype),{constructor:gx,copy:function(bc){fs.prototype.copy.call(this,bc,!1);bc=bc.levels;for(var bb=0,be=bc.length;bb<be;bb++){var bd=bc[bb];this.addLevel(bd.object.clone(),bd.distance)}return this},addLevel:function(bc,bb){void 0===bb&&(bb=0);bb=Math.abs(bb);for(var be=this.levels,bd=0;bd<be.length&&!(bb<be[bd].distance);bd++){}be.splice(bd,0,{distance:bb,object:bc});this.add(bc)},getObjectForDistance:function(bc){for(var bb=this.levels,be=1,bd=bb.length;be<bd&&!(bc<bb[be].distance);be++){}return bb[be-1].object},raycast:function(){var bb=new ft;return function(bc,be){bb.setFromMatrixPosition(this.matrixWorld);var bd=bc.ray.origin.distanceTo(bb);this.getObjectForDistance(bd).raycast(bc,be)}}(),update:function(){var bc=new ft,bb=new ft;return function(bg){var bf=this.levels;if(1<bf.length){bc.setFromMatrixPosition(bg.matrixWorld);bb.setFromMatrixPosition(this.matrixWorld);bg=bc.distanceTo(bb);bf[0].object.visible=!0;for(var be=1,bd=bf.length;be<bd;be++){if(bg>=bf[be].distance){bf[be-1].object.visible=!1,bf[be].object.visible=!0}else{break}}for(;be<bd;be++){bf[be].object.visible=!1}}}}(),toJSON:function(bc){bc=fs.prototype.toJSON.call(this,bc);bc.object.levels=[];for(var bb=this.levels,bf=0,be=bb.length;bf<be;bf++){var bd=bb[bf];bc.object.levels.push({object:bd.object.uuid,distance:bd.distance})}return bc}});Object.assign(f9.prototype,{calculateInverses:function(){this.boneInverses=[];for(var bc=0,bb=this.bones.length;bc<bb;bc++){var bd=new fN;this.bones[bc]&&bd.getInverse(this.bones[bc].matrixWorld);this.boneInverses.push(bd)}},pose:function(){var bc,bb;var bd=0;for(bb=this.bones.length;bd<bb;bd++){(bc=this.bones[bd])&&bc.matrixWorld.getInverse(this.boneInverses[bd])}bd=0;for(bb=this.bones.length;bd<bb;bd++){if(bc=this.bones[bd]){bc.parent&&bc.parent.isBone?(bc.matrix.getInverse(bc.parent.matrixWorld),bc.matrix.multiply(bc.matrixWorld)):bc.matrix.copy(bc.matrixWorld),bc.matrix.decompose(bc.position,bc.quaternion,bc.scale)}}},update:function(){var bc=new fN,bb=new fN;return function(){for(var cc=this.bones,cb=this.boneInverses,bg=this.boneMatrices,bf=this.boneTexture,be=0,bd=cc.length;be<bd;be++){bc.multiplyMatrices(cc[be]?cc[be].matrixWorld:bb,cb[be]),bc.toArray(bg,16*be)}void 0!==bf&&(bf.needsUpdate=!0)}}(),clone:function(){return new f9(this.bones,this.boneInverses)}});cG.prototype=Object.assign(Object.create(fs.prototype),{constructor:cG,isBone:!0});cu.prototype=Object.assign(Object.create(eO.prototype),{constructor:cu,isSkinnedMesh:!0,initBones:function(){var bc=[],bb;if(this.geometry&&void 0!==this.geometry.bones){var bf=0;for(bb=this.geometry.bones.length;bf<bb;bf++){var be=this.geometry.bones[bf];var bd=new cG;bc.push(bd);bd.name=be.name;bd.position.fromArray(be.pos);bd.quaternion.fromArray(be.rotq);void 0!==be.scl&&bd.scale.fromArray(be.scl)}bf=0;for(bb=this.geometry.bones.length;bf<bb;bf++){be=this.geometry.bones[bf],-1!==be.parent&&null!==be.parent&&void 0!==bc[be.parent]?bc[be.parent].add(bc[bf]):this.add(bc[bf])}}this.updateMatrixWorld(!0);return bc},bind:function(bc,bb){this.skeleton=bc;void 0===bb&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),bb=this.matrixWorld);this.bindMatrix.copy(bb);this.bindMatrixInverse.getInverse(bb)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var bc;if(this.geometry&&this.geometry.isGeometry){for(bc=0;bc<this.geometry.skinWeights.length;bc++){var bb=this.geometry.skinWeights[bc];var be=1/bb.lengthManhattan();Infinity!==be?bb.multiplyScalar(be):bb.set(1,0,0,0)}}else{if(this.geometry&&this.geometry.isBufferGeometry){var bb=new fJ,bd=this.geometry.attributes.skinWeight;for(bc=0;bc<bd.count;bc++){bb.x=bd.getX(bc),bb.y=bd.getY(bc),bb.z=bd.getZ(bc),bb.w=bd.getW(bc),be=1/bb.lengthManhattan(),Infinity!==be?bb.multiplyScalar(be):bb.set(1,0,0,0),bd.setXYZW(bc,bb.x,bb.y,bb.z,bb.w)}}}},updateMatrixWorld:function(bb){eO.prototype.updateMatrixWorld.call(this,bb);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});fH.prototype=Object.create(fM.prototype);fH.prototype.constructor=fH;fH.prototype.isLineBasicMaterial=!0;fH.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.color.copy(bb.color);this.linewidth=bb.linewidth;this.linecap=bb.linecap;this.linejoin=bb.linejoin;return this};b3.prototype=Object.assign(Object.create(fs.prototype),{constructor:b3,isLine:!0,raycast:function(){var bc=new fN,bb=new ep,bd=new br;return function(da,cg){var cf=da.linePrecision,cf=cf*cf,ce=this.geometry,cd=this.matrixWorld;null===ce.boundingSphere&&ce.computeBoundingSphere();bd.copy(ce.boundingSphere);bd.applyMatrix4(cd);if(!1!==da.ray.intersectsSphere(bd)){bc.getInverse(cd);bb.copy(da.ray).applyMatrix4(bc);var cc=new ft,cb=new ft,cd=new ft,bf=new ft,bg=this&&this.isLineSegments?2:1;if(ce.isBufferGeometry){var dd=ce.index;var be=ce.attributes.position.array;if(null!==dd){for(var db=dd.array,ce=0,dc=db.length-1;ce<dc;ce+=bg){dd=db[ce+1],cc.fromArray(be,3*db[ce]),cb.fromArray(be,3*dd),dd=bb.distanceSqToSegment(cc,cb,bf,cd),dd>cf||(bf.applyMatrix4(this.matrixWorld),dd=da.ray.origin.distanceTo(bf),dd<da.near||dd>da.far||cg.push({distance:dd,point:cd.clone().applyMatrix4(this.matrixWorld),index:ce,face:null,faceIndex:null,object:this}))}}else{for(ce=0,dc=be.length/3-1;ce<dc;ce+=bg){cc.fromArray(be,3*ce),cb.fromArray(be,3*ce+3),dd=bb.distanceSqToSegment(cc,cb,bf,cd),dd>cf||(bf.applyMatrix4(this.matrixWorld),dd=da.ray.origin.distanceTo(bf),dd<da.near||dd>da.far||cg.push({distance:dd,point:cd.clone().applyMatrix4(this.matrixWorld),index:ce,face:null,faceIndex:null,object:this}))}}}else{if(ce.isGeometry){for(cc=ce.vertices,cb=cc.length,ce=0;ce<cb-1;ce+=bg){dd=bb.distanceSqToSegment(cc[ce],cc[ce+1],bf,cd),dd>cf||(bf.applyMatrix4(this.matrixWorld),dd=da.ray.origin.distanceTo(bf),dd<da.near||dd>da.far||cg.push({distance:dd,point:cd.clone().applyMatrix4(this.matrixWorld),index:ce,face:null,faceIndex:null,object:this}))}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});fG.prototype=Object.assign(Object.create(b3.prototype),{constructor:fG,isLineSegments:!0});ci.prototype=Object.assign(Object.create(b3.prototype),{constructor:ci,isLineLoop:!0});dl.prototype=Object.create(fM.prototype);dl.prototype.constructor=dl;dl.prototype.isPointsMaterial=!0;dl.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.color.copy(bb.color);this.map=bb.map;this.size=bb.size;this.sizeAttenuation=bb.sizeAttenuation;return this};fE.prototype=Object.assign(Object.create(fs.prototype),{constructor:fE,isPoints:!0,raycast:function(){var bc=new fN,bb=new ep,bd=new br;return function(da,cg){function cf(dd,dg){var df=bb.distanceSqToPoint(dd);if(df<bf){dd=bb.closestPointToPoint(dd);dd.applyMatrix4(cc);var de=da.ray.origin.distanceTo(dd);de<da.near||de>da.far||cg.push({distance:de,distanceToRay:Math.sqrt(df),point:dd.clone(),index:dg,face:null,object:ce})}}var ce=this,cd=this.geometry,cc=this.matrixWorld,cb=da.params.Points.threshold;null===cd.boundingSphere&&cd.computeBoundingSphere();bd.copy(cd.boundingSphere);bd.applyMatrix4(cc);bd.radius+=cb;if(!1!==da.ray.intersectsSphere(bd)){bc.getInverse(cc);bb.copy(da.ray).applyMatrix4(bc);var cb=cb/((this.scale.x+this.scale.y+this.scale.z)/3),bf=cb*cb,cb=new ft;if(cd.isBufferGeometry){var bg=cd.index,cd=cd.attributes.position.array;if(null!==bg){for(var dc=bg.array,bg=0,be=dc.length;bg<be;bg++){var db=dc[bg];cb.fromArray(cd,3*db);cf(cb,db)}}else{for(bg=0,dc=cd.length/3;bg<dc;bg++){cb.fromArray(cd,3*bg),cf(cb,bg)}}}else{for(cb=cd.vertices,bg=0,dc=cb.length;bg<dc;bg++){cf(cb[bg],bg)}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});bU.prototype=Object.assign(Object.create(fs.prototype),{constructor:bU});b0.prototype=Object.create(fO.prototype);b0.prototype.constructor=b0;fq.prototype=Object.create(fO.prototype);fq.prototype.constructor=fq;fq.prototype.isCompressedTexture=!0;bB.prototype=Object.create(fO.prototype);bB.prototype.constructor=bB;bB.prototype.isDepthTexture=!0;e6.prototype=Object.create(fU.prototype);e6.prototype.constructor=e6;bp.prototype=Object.create(fL.prototype);bp.prototype.constructor=bp;eT.prototype=Object.create(fU.prototype);eT.prototype.constructor=eT;a7.prototype=Object.create(fL.prototype);a7.prototype.constructor=a7;bl.prototype=Object.create(fU.prototype);bl.prototype.constructor=bl;aW.prototype=Object.create(fL.prototype);aW.prototype.constructor=aW;eG.prototype=Object.create(bl.prototype);eG.prototype.constructor=eG;aK.prototype=Object.create(fL.prototype);aK.prototype.constructor=aK;dT.prototype=Object.create(bl.prototype);dT.prototype.constructor=dT;aB.prototype=Object.create(fL.prototype);aB.prototype.constructor=aB;eu.prototype=Object.create(bl.prototype);eu.prototype.constructor=eu;gs.prototype=Object.create(fL.prototype);gs.prototype.constructor=gs;ei.prototype=Object.create(bl.prototype);ei.prototype.constructor=ei;f3.prototype=Object.create(fL.prototype);f3.prototype.constructor=f3;dZ.prototype=Object.create(fU.prototype);dZ.prototype.constructor=dZ;fD.prototype=Object.create(fL.prototype);fD.prototype.constructor=fD;dN.prototype=Object.create(fU.prototype);dN.prototype.constructor=dN;fo.prototype=Object.create(fL.prototype);fo.prototype.constructor=fo;dC.prototype=Object.create(fU.prototype);dC.prototype.constructor=dC;var aM={area:function(bc){for(var bb=bc.length,bf=0,be=bb-1,bd=0;bd<bb;be=bd++){bf+=bc[be].x*bc[bd].y-bc[bd].x*bc[be].y}return 0.5*bf},triangulate:function(){return function(fc,fb){var fa=fc.length;if(3>fa){return null}var eg=[],ef=[],ee=[],ed;if(0<aM.area(fc)){for(ed=0;ed<fa;ed++){ef[ed]=ed}}else{for(ed=0;ed<fa;ed++){ef[ed]=fa-1-ed}}var ec=2*fa;for(ed=fa-1;2<fa;){if(0>=ec--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}var eb=ed;fa<=eb&&(eb=0);ed=eb+1;fa<=ed&&(ed=0);var ea=ed+1;fa<=ea&&(ea=0);fc:{var dg;var de=fc[ef[eb]].x;var cg=fc[ef[eb]].y;var df=fc[ef[ed]].x;var cd=fc[ef[ed]].y;var cf=fc[ef[ea]].x;var cb=fc[ef[ea]].y;if(0>=(df-de)*(cb-cg)-(cd-cg)*(cf-de)){var bg=!1}else{var dd=cf-df;var cc=cb-cd;var dc=de-cf;var be=cg-cb;var da=df-de;bg=cd-cg;for(dg=0;dg<fa;dg++){var db=fc[ef[dg]].x;var ce=fc[ef[dg]].y;if(!(db===de&&ce===cg||db===df&&ce===cd||db===cf&&ce===cb)){var bd=db-de;var bc=ce-cg;var bb=db-df;var bf=ce-cd;db-=cf;ce-=cb;bf=dd*bf-cc*bb;bc=da*bc-bg*bd;db=dc*ce-be*db;if(bf>=-Number.EPSILON&&db>=-Number.EPSILON&&bc>=-Number.EPSILON){bg=!1;break fc}}}bg=!0}}if(bg){eg.push([fc[ef[eb]],fc[ef[ed]],fc[ef[ea]]]);ee.push([ef[eb],ef[ed],ef[ea]]);eb=ed;for(ea=ed+1;ea<fa;eb++,ea++){ef[eb]=ef[ea]}fa--;ec=2*fa}}return fb?ee:eg}}(),triangulateShape:function(cf,ce){function cd(da){var cg=da.length;2<cg&&da[cg-1].equals(da[0])&&da.pop()}function cc(da,cg,db){return da.x!==cg.x?da.x<cg.x?da.x<=db.x&&db.x<=cg.x:cg.x<=db.x&&db.x<=da.x:da.y<cg.y?da.y<=db.y&&db.y<=cg.y:cg.y<=db.y&&db.y<=da.y}function cb(ee,ed,ec,eb,ea){var dg=ed.x-ee.x,df=ed.y-ee.y,de=eb.x-ec.x,dd=eb.y-ec.y,dc=ee.x-ec.x,cg=ee.y-ec.y,da=df*de-dg*dd,db=df*dc-dg*cg;if(Math.abs(da)>Number.EPSILON){if(0<da){if(0>db||db>da){return[]}de=dd*dc-de*cg;if(0>de||de>da){return[]}}else{if(0<db||db<da){return[]}de=dd*dc-de*cg;if(0<de||de<da){return[]}}if(0===de){return !ea||0!==db&&db!==da?[ee]:[]}if(de===da){return !ea||0!==db&&db!==da?[ed]:[]}if(0===db){return[ec]}if(db===da){return[eb]}ea=de/da;return[{x:ee.x+ea*dg,y:ee.y+ea*df}]}if(0!==db||dd*dc!==de*cg){return[]}df=0===dg&&0===df;de=0===de&&0===dd;if(df&&de){return ee.x!==ec.x||ee.y!==ec.y?[]:[ee]}if(df){return cc(ec,eb,ee)?[ee]:[]}if(de){return cc(ee,ed,ec)?[ec]:[]}0!==dg?(ee.x<ed.x?(dg=ee,de=ee.x,df=ed,ee=ed.x):(dg=ed,de=ed.x,df=ee,ee=ee.x),ec.x<eb.x?(ed=ec,da=ec.x,dd=eb,ec=eb.x):(ed=eb,da=eb.x,dd=ec,ec=ec.x)):(ee.y<ed.y?(dg=ee,de=ee.y,df=ed,ee=ed.y):(dg=ed,de=ed.y,df=ee,ee=ee.y),ec.y<eb.y?(ed=ec,da=ec.y,dd=eb,ec=eb.y):(ed=eb,da=eb.y,dd=ec,ec=ec.y));return de<=da?ee<da?[]:ee===da?ea?[]:[ed]:ee<=ec?[ed,df]:[ed,dd]:de>ec?[]:de===ec?ea?[]:[dg]:ee<=ec?[dg,df]:[dg,dd]}function bg(da,cg,df,de){var dd=cg.x-da.x,dc=cg.y-da.y;cg=df.x-da.x;df=df.y-da.y;var db=de.x-da.x;de=de.y-da.y;da=dd*df-dc*cg;dd=dd*de-dc*db;return Math.abs(da)>Number.EPSILON?(cg=db*df-de*cg,0<da?0<=dd&&0<=cg:0<=dd||0<=cg):0<dd}cd(cf);ce.forEach(cd);var bf,be={},bd=cf.concat();var bc=0;for(bf=ce.length;bc<bf;bc++){Array.prototype.push.apply(bd,ce[bc])}bc=0;for(bf=bd.length;bc<bf;bc++){var bb=bd[bc].x+":"+bd[bc].y;void 0!==be[bb]&&console.warn("THREE.ShapeUtils: Duplicate point",bb,bc);be[bb]=bc}bc=function(fc,fb){function fa(fe,fd){var gb=ee.length-1,fg=fe-1;0>fg&&(fg=gb);var ff=fe+1;ff>gb&&(ff=0);gb=bg(ee[fe],ee[fg],ee[ff],dd[fd]);if(!gb){return !1}gb=dd.length-1;fg=fd-1;0>fg&&(fg=gb);ff=fd+1;ff>gb&&(ff=0);return(gb=bg(dd[fd],dd[fg],dd[ff],ee[fe]))?!0:!1}function eg(fe,fd){var fg;for(fg=0;fg<ee.length;fg++){var ff=fg+1;ff%=ee.length;ff=cb(fe,fd,ee[fg],ee[ff],!0);if(0<ff.length){return !0}}return !1}function ef(fd,gc){var gb,fg;for(gb=0;gb<ed.length;gb++){var ff=fb[ed[gb]];for(fg=0;fg<ff.length;fg++){var fe=fg+1;fe%=ff.length;fe=cb(fd,gc,ff[fg],ff[fe],!0);if(0<fe.length){return !0}}}return !1}var ee=fc.concat(),ed=[],ec,eb;fc=[];var df,dg=0;for(ec=fb.length;dg<ec;dg++){ed.push(dg)}var ea=0;for(var dc=2*ed.length;0<ed.length;){dc--;if(0>dc){console.log('THREE.ShapeUtils: Infinite Loop! Holes left:" + indepHoles.length + ", Probably Hole outside Shape!');break}for(eb=ea;eb<ee.length;eb++){var da=ee[eb];ec=-1;for(dg=0;dg<ed.length;dg++){var cg=ed[dg];var de=da.x+":"+da.y+":"+cg;if(void 0===fc[de]){var dd=fb[cg];for(df=0;df<dd.length;df++){if(cg=dd[df],fa(eb,df)&&!eg(da,cg)&&!ef(da,cg)){ec=df;ed.splice(dg,1);ea=ee.slice(0,eb+1);cg=ee.slice(eb);df=dd.slice(ec);var db=dd.slice(0,ec+1);ee=ea.concat(df).concat(db).concat(cg);ea=eb;break}}if(0<=ec){break}fc[de]=!0}}if(0<=ec){break}}}return ee}(cf,ce);bd=aM.triangulate(bc,!1);bc=0;for(bf=bd.length;bc<bf;bc++){for(ce=bd[bc],cf=0;3>cf;cf++){bb=ce[cf].x+":"+ce[cf].y,bb=be[bb],void 0!==bb&&(ce[cf]=bb)}}return bd.concat()},isClockWise:function(bb){return 0>aM.area(bb)}};cU.prototype=Object.create(fL.prototype);cU.prototype.constructor=cU;aY.prototype=Object.create(fU.prototype);aY.prototype.constructor=aY;aY.prototype.getArrays=function(){var bc=this.getAttribute("position"),bc=bc?Array.prototype.slice.call(bc.array):[],bb=this.getAttribute("uv"),bb=bb?Array.prototype.slice.call(bb.array):[],bd=this.index,bd=bd?Array.prototype.slice.call(bd.array):[];return{position:bc,uv:bb,index:bd}};aY.prototype.addShapeList=function(bc,bb){var be=bc.length;bb.arrays=this.getArrays();for(var bd=0;bd<be;bd++){this.addShape(bc[bd],bb)}this.setIndex(bb.arrays.index);this.addAttribute("position",new fp(bb.arrays.position,3));this.addAttribute("uv",new fp(bb.arrays.uv,2))};aY.prototype.addShape=function(gM,gL){function gK(ea,da,fa){da||console.error("THREE.ExtrudeGeometry: vec does not exist");return da.clone().multiplyScalar(fa).add(ea)}function gJ(gT,gS,gR){var gQ=gT.x-gS.x;var gP=gT.y-gS.y;var gO=gR.x-gT.x;var gN=gR.y-gT.y,fa=gQ*gQ+gP*gP;if(Math.abs(gQ*gN-gP*gO)>Number.EPSILON){var ea=Math.sqrt(fa),da=Math.sqrt(gO*gO+gN*gN),fa=gS.x-gP/ea;gS=gS.y+gQ/ea;gN=((gR.x-gN/da-fa)*gN-(gR.y+gO/da-gS)*gO)/(gQ*gN-gP*gO);gO=fa+gQ*gN-gT.x;gQ=gS+gP*gN-gT.y;gP=gO*gO+gQ*gQ;if(2>=gP){return new fX(gO,gQ)}gP=Math.sqrt(gP/2)}else{gT=!1,gQ>Number.EPSILON?gO>Number.EPSILON&&(gT=!0):gQ<-Number.EPSILON?gO<-Number.EPSILON&&(gT=!0):Math.sign(gP)===Math.sign(gN)&&(gT=!0),gT?(gO=-gP,gP=Math.sqrt(fa)):(gO=gQ,gQ=gP,gP=Math.sqrt(fa/2))}return new fX(gO/gP,gQ/gP)}function gI(gT,gS){for(eb=gT.length;0<=--eb;){var gR=eb;var gQ=eb-1;0>gQ&&(gQ=gT.length-1);var gP,gO=fg+2*ff;for(gP=0;gP<gO;gP++){var gN=be*gP,fa=be*(gP+1),da=gS+gQ+gN,ea=gS+gQ+fa,fa=gS+gR+fa;gF(gS+gR+gN);gF(da);gF(fa);gF(da);gF(ea);gF(fa);gN=gg.length/3;gN=ec.generateSideWallUV(ce,gg,gN-6,gN-3,gN-2,gN-1);gE(gN[0]);gE(gN[1]);gE(gN[3]);gE(gN[1]);gE(gN[2]);gE(gN[3])}}}function gH(ea,da,fa){ge.push(ea);ge.push(da);ge.push(fa)}function gG(ea,da,fa){gF(ea);gF(da);gF(fa);ea=gg.length/3;ea=ec.generateTopUV(ce,gg,ea-3,ea-2,ea-1);gE(ea[0]);gE(ea[1]);gE(ea[2])}function gF(da){gf.push(gg.length/3);gg.push(ge[3*da+0]);gg.push(ge[3*da+1]);gg.push(ge[3*da+2])}function gE(da){gd.push(da.x);gd.push(da.y)}var gD=gL.arrays?gL.arrays:this.getArrays(),gg=gD.position,gf=gD.index,gd=gD.uv,ge=[],gD=void 0!==gL.amount?gL.amount:100,gb=void 0!==gL.bevelThickness?gL.bevelThickness:6,gc=void 0!==gL.bevelSize?gL.bevelSize:gb-2,ff=void 0!==gL.bevelSegments?gL.bevelSegments:3,fe=void 0!==gL.bevelEnabled?gL.bevelEnabled:!0,ef=void 0!==gL.curveSegments?gL.curveSegments:12,fg=void 0!==gL.steps?gL.steps:1,ee=gL.extrudePath,ed=!1,ec=void 0!==gL.UVGenerator?gL.UVGenerator:cU.WorldUVGenerator;if(ee){var df=ee.getSpacedPoints(fg);ed=!0;fe=!1;var de=void 0!==gL.frames?gL.frames:ee.computeFrenetFrames(fg,!1);var db=new ft;var cf=new ft;var cg=new ft}fe||(gc=gb=ff=0);var dg,ce=this,ef=gM.extractPoints(ef);gM=ef.shape;var dc=ef.holes;if(!aM.isClockWise(gM)){gM=gM.reverse();var dd=0;for(dg=dc.length;dd<dg;dd++){var cc=dc[dd];aM.isClockWise(cc)&&(dc[dd]=cc.reverse())}}var bg=aM.triangulateShape(gM,dc),bf=gM;dd=0;for(dg=dc.length;dd<dg;dd++){cc=dc[dd],gM=gM.concat(cc)}var bd,be=gM.length,cd,fb=bg.length,ef=[],eb=0;var cb=bf.length;var fc=cb-1;for(bd=eb+1;eb<cb;eb++,fc++,bd++){fc===cb&&(fc=0),bd===cb&&(bd=0),ef[eb]=gJ(bf[eb],bf[fc],bf[bd])}var ee=[],bb=ef.concat();dd=0;for(dg=dc.length;dd<dg;dd++){cc=dc[dd];var eg=[];eb=0;cb=cc.length;fc=cb-1;for(bd=eb+1;eb<cb;eb++,fc++,bd++){fc===cb&&(fc=0),bd===cb&&(bd=0),eg[eb]=gJ(cc[eb],cc[fc],cc[bd])}ee.push(eg);bb=bb.concat(eg)}for(fc=0;fc<ff;fc++){cb=fc/ff;var fd=gb*Math.cos(cb*Math.PI/2);bd=gc*Math.sin(cb*Math.PI/2);eb=0;for(cb=bf.length;eb<cb;eb++){var bc=gK(bf[eb],ef[eb],bd);gH(bc.x,bc.y,-fd)}dd=0;for(dg=dc.length;dd<dg;dd++){for(cc=dc[dd],eg=ee[dd],eb=0,cb=cc.length;eb<cb;eb++){bc=gK(cc[eb],eg[eb],bd),gH(bc.x,bc.y,-fd)}}}bd=gc;for(eb=0;eb<be;eb++){bc=fe?gK(gM[eb],bb[eb],bd):gM[eb],ed?(cf.copy(de.normals[0]).multiplyScalar(bc.x),db.copy(de.binormals[0]).multiplyScalar(bc.y),cg.copy(df[0]).add(cf).add(db),gH(cg.x,cg.y,cg.z)):gH(bc.x,bc.y,0)}for(cb=1;cb<=fg;cb++){for(eb=0;eb<be;eb++){bc=fe?gK(gM[eb],bb[eb],bd):gM[eb],ed?(cf.copy(de.normals[cb]).multiplyScalar(bc.x),db.copy(de.binormals[cb]).multiplyScalar(bc.y),cg.copy(df[cb]).add(cf).add(db),gH(cg.x,cg.y,cg.z)):gH(bc.x,bc.y,gD/fg*cb)}}for(fc=ff-1;0<=fc;fc--){cb=fc/ff;fd=gb*Math.cos(cb*Math.PI/2);bd=gc*Math.sin(cb*Math.PI/2);eb=0;for(cb=bf.length;eb<cb;eb++){bc=gK(bf[eb],ef[eb],bd),gH(bc.x,bc.y,gD+fd)}dd=0;for(dg=dc.length;dd<dg;dd++){for(cc=dc[dd],eg=ee[dd],eb=0,cb=cc.length;eb<cb;eb++){bc=gK(cc[eb],eg[eb],bd),ed?gH(bc.x,bc.y+df[fg-1].y,df[fg-1].x+fd):gH(bc.x,bc.y,gD+fd)}}}(function(){var da=gg.length/3;if(fe){var ea=0*be;for(eb=0;eb<fb;eb++){cd=bg[eb],gG(cd[2]+ea,cd[1]+ea,cd[0]+ea)}ea=be*(fg+2*ff);for(eb=0;eb<fb;eb++){cd=bg[eb],gG(cd[0]+ea,cd[1]+ea,cd[2]+ea)}}else{for(eb=0;eb<fb;eb++){cd=bg[eb],gG(cd[2],cd[1],cd[0])}for(eb=0;eb<fb;eb++){cd=bg[eb],gG(cd[0]+be*fg,cd[1]+be*fg,cd[2]+be*fg)}}ce.addGroup(da,gg.length/3-da,void 0!==gL.material?gL.material:0)})();(function(){var da=gg.length/3,ea=0;gI(bf,ea);ea+=bf.length;dd=0;for(dg=dc.length;dd<dg;dd++){cc=dc[dd],gI(cc,ea),ea+=cc.length}ce.addGroup(da,gg.length/3-da,void 0!==gL.extrudeMaterial?gL.extrudeMaterial:1)})();gL.arrays||(this.setIndex(gf),this.addAttribute("position",new fp(gg,3)),this.addAttribute("uv",new fp(gL.arrays.uv,2)))};cU.WorldUVGenerator={generateTopUV:function(bc,bb,bg,bf,be){bc=bb[3*bf];bf=bb[3*bf+1];var bd=bb[3*be];be=bb[3*be+1];return[new fX(bb[3*bg],bb[3*bg+1]),new fX(bc,bf),new fX(bd,be)]},generateSideWallUV:function(da,cg,cf,ce,cd,cc){da=cg[3*cf];var cb=cg[3*cf+1];cf=cg[3*cf+2];var bg=cg[3*ce],bf=cg[3*ce+1];ce=cg[3*ce+2];var be=cg[3*cd],bd=cg[3*cd+1];cd=cg[3*cd+2];var bb=cg[3*cc],bc=cg[3*cc+1];cg=cg[3*cc+2];return 0.01>Math.abs(cb-bf)?[new fX(da,1-cf),new fX(bg,1-ce),new fX(be,1-cd),new fX(bb,1-cg)]:[new fX(cb,1-cf),new fX(bf,1-ce),new fX(bd,1-cd),new fX(bc,1-cg)]}};e5.prototype=Object.create(fL.prototype);e5.prototype.constructor=e5;dr.prototype=Object.create(aY.prototype);dr.prototype.constructor=dr;eS.prototype=Object.create(fL.prototype);eS.prototype.constructor=eS;dI.prototype=Object.create(fU.prototype);dI.prototype.constructor=dI;eF.prototype=Object.create(fL.prototype);eF.prototype.constructor=eF;c6.prototype=Object.create(fU.prototype);c6.prototype.constructor=c6;et.prototype=Object.create(fL.prototype);et.prototype.constructor=et;cN.prototype=Object.create(fU.prototype);cN.prototype.constructor=cN;cB.prototype=Object.create(fL.prototype);cB.prototype.constructor=cB;cp.prototype=Object.create(fU.prototype);cp.prototype.constructor=cp;b8.prototype=Object.create(fU.prototype);b8.prototype.constructor=b8;dx.prototype=Object.create(fL.prototype);dx.prototype.constructor=dx;ds.prototype=Object.create(fU.prototype);ds.prototype.constructor=ds;eh.prototype=Object.create(dx.prototype);eh.prototype.constructor=eh;dY.prototype=Object.create(ds.prototype);dY.prototype.constructor=dY;dM.prototype=Object.create(fL.prototype);dM.prototype.constructor=dM;bP.prototype=Object.create(fU.prototype);bP.prototype.constructor=bP;var fr=Object.freeze({WireframeGeometry:e6,ParametricGeometry:bp,ParametricBufferGeometry:eT,TetrahedronGeometry:aW,TetrahedronBufferGeometry:eG,OctahedronGeometry:aK,OctahedronBufferGeometry:dT,IcosahedronGeometry:aB,IcosahedronBufferGeometry:eu,DodecahedronGeometry:gs,DodecahedronBufferGeometry:ei,PolyhedronGeometry:a7,PolyhedronBufferGeometry:bl,TubeGeometry:f3,TubeBufferGeometry:dZ,TorusKnotGeometry:fD,TorusKnotBufferGeometry:dN,TorusGeometry:fo,TorusBufferGeometry:dC,TextGeometry:e5,TextBufferGeometry:dr,SphereGeometry:eS,SphereBufferGeometry:dI,RingGeometry:eF,RingBufferGeometry:c6,PlaneGeometry:a2,PlaneBufferGeometry:eB,LatheGeometry:et,LatheBufferGeometry:cN,ShapeGeometry:cB,ShapeBufferGeometry:cp,ExtrudeGeometry:cU,ExtrudeBufferGeometry:aY,EdgesGeometry:b8,ConeGeometry:eh,ConeBufferGeometry:dY,CylinderGeometry:dx,CylinderBufferGeometry:ds,CircleGeometry:dM,CircleBufferGeometry:bP,BoxGeometry:aX,BoxBufferGeometry:eN});cT.prototype=Object.create(fM.prototype);cT.prototype.constructor=cT;cT.prototype.isShadowMaterial=!0;gm.prototype=Object.create(gz.prototype);gm.prototype.constructor=gm;gm.prototype.isRawShaderMaterial=!0;eH.prototype=Object.create(fM.prototype);eH.prototype.constructor=eH;eH.prototype.isMeshStandardMaterial=!0;eH.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.defines={STANDARD:""};this.color.copy(bb.color);this.roughness=bb.roughness;this.metalness=bb.metalness;this.map=bb.map;this.lightMap=bb.lightMap;this.lightMapIntensity=bb.lightMapIntensity;this.aoMap=bb.aoMap;this.aoMapIntensity=bb.aoMapIntensity;this.emissive.copy(bb.emissive);this.emissiveMap=bb.emissiveMap;this.emissiveIntensity=bb.emissiveIntensity;this.bumpMap=bb.bumpMap;this.bumpScale=bb.bumpScale;this.normalMap=bb.normalMap;this.normalScale.copy(bb.normalScale);this.displacementMap=bb.displacementMap;this.displacementScale=bb.displacementScale;this.displacementBias=bb.displacementBias;this.roughnessMap=bb.roughnessMap;this.metalnessMap=bb.metalnessMap;this.alphaMap=bb.alphaMap;this.envMap=bb.envMap;this.envMapIntensity=bb.envMapIntensity;this.refractionRatio=bb.refractionRatio;this.wireframe=bb.wireframe;this.wireframeLinewidth=bb.wireframeLinewidth;this.wireframeLinecap=bb.wireframeLinecap;this.wireframeLinejoin=bb.wireframeLinejoin;this.skinning=bb.skinning;this.morphTargets=bb.morphTargets;this.morphNormals=bb.morphNormals;return this};dk.prototype=Object.create(eH.prototype);dk.prototype.constructor=dk;dk.prototype.isMeshPhysicalMaterial=!0;dk.prototype.copy=function(bb){eH.prototype.copy.call(this,bb);this.defines={PHYSICAL:""};this.reflectivity=bb.reflectivity;this.clearCoat=bb.clearCoat;this.clearCoatRoughness=bb.clearCoatRoughness;return this};bW.prototype=Object.create(fM.prototype);bW.prototype.constructor=bW;bW.prototype.isMeshPhongMaterial=!0;bW.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.color.copy(bb.color);this.specular.copy(bb.specular);this.shininess=bb.shininess;this.map=bb.map;this.lightMap=bb.lightMap;this.lightMapIntensity=bb.lightMapIntensity;this.aoMap=bb.aoMap;this.aoMapIntensity=bb.aoMapIntensity;this.emissive.copy(bb.emissive);this.emissiveMap=bb.emissiveMap;this.emissiveIntensity=bb.emissiveIntensity;this.bumpMap=bb.bumpMap;this.bumpScale=bb.bumpScale;this.normalMap=bb.normalMap;this.normalScale.copy(bb.normalScale);this.displacementMap=bb.displacementMap;this.displacementScale=bb.displacementScale;this.displacementBias=bb.displacementBias;this.specularMap=bb.specularMap;this.alphaMap=bb.alphaMap;this.envMap=bb.envMap;this.combine=bb.combine;this.reflectivity=bb.reflectivity;this.refractionRatio=bb.refractionRatio;this.wireframe=bb.wireframe;this.wireframeLinewidth=bb.wireframeLinewidth;this.wireframeLinecap=bb.wireframeLinecap;this.wireframeLinejoin=bb.wireframeLinejoin;this.skinning=bb.skinning;this.morphTargets=bb.morphTargets;this.morphNormals=bb.morphNormals;return this};c0.prototype=Object.create(bW.prototype);c0.prototype.constructor=c0;c0.prototype.isMeshToonMaterial=!0;c0.prototype.copy=function(bb){bW.prototype.copy.call(this,bb);this.gradientMap=bb.gradientMap;return this};cI.prototype=Object.create(fM.prototype);cI.prototype.constructor=cI;cI.prototype.isMeshNormalMaterial=!0;cI.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.bumpMap=bb.bumpMap;this.bumpScale=bb.bumpScale;this.normalMap=bb.normalMap;this.normalScale.copy(bb.normalScale);this.displacementMap=bb.displacementMap;this.displacementScale=bb.displacementScale;this.displacementBias=bb.displacementBias;this.wireframe=bb.wireframe;this.wireframeLinewidth=bb.wireframeLinewidth;this.skinning=bb.skinning;this.morphTargets=bb.morphTargets;this.morphNormals=bb.morphNormals;return this};cw.prototype=Object.create(fM.prototype);cw.prototype.constructor=cw;cw.prototype.isMeshLambertMaterial=!0;cw.prototype.copy=function(bb){fM.prototype.copy.call(this,bb);this.color.copy(bb.color);this.map=bb.map;this.lightMap=bb.lightMap;this.lightMapIntensity=bb.lightMapIntensity;this.aoMap=bb.aoMap;this.aoMapIntensity=bb.aoMapIntensity;this.emissive.copy(bb.emissive);this.emissiveMap=bb.emissiveMap;this.emissiveIntensity=bb.emissiveIntensity;this.specularMap=bb.specularMap;this.alphaMap=bb.alphaMap;this.envMap=bb.envMap;this.combine=bb.combine;this.reflectivity=bb.reflectivity;this.refractionRatio=bb.refractionRatio;this.wireframe=bb.wireframe;this.wireframeLinewidth=bb.wireframeLinewidth;this.wireframeLinecap=bb.wireframeLinecap;this.wireframeLinejoin=bb.wireframeLinejoin;this.skinning=bb.skinning;this.morphTargets=bb.morphTargets;this.morphNormals=bb.morphNormals;return this};ck.prototype=Object.create(fH.prototype);ck.prototype.constructor=ck;ck.prototype.isLineDashedMaterial=!0;ck.prototype.copy=function(bb){fH.prototype.copy.call(this,bb);this.scale=bb.scale;this.dashSize=bb.dashSize;this.gapSize=bb.gapSize;return this};var bE=Object.freeze({ShadowMaterial:cT,SpriteMaterial:bQ,RawShaderMaterial:gm,ShaderMaterial:gz,PointsMaterial:dl,MeshPhysicalMaterial:dk,MeshStandardMaterial:eH,MeshPhongMaterial:bW,MeshToonMaterial:c0,MeshNormalMaterial:cI,MeshLambertMaterial:cw,MeshDepthMaterial:cC,MeshDistanceMaterial:cq,MeshBasicMaterial:bK,LineDashedMaterial:ck,LineBasicMaterial:fH,Material:fM}),en={enabled:!1,files:{},add:function(bc,bb){!1!==this.enabled&&(this.files[bc]=bb)},get:function(bb){if(!1!==this.enabled){return this.files[bb]}},remove:function(bb){delete this.files[bb]},clear:function(){this.files={}}},cJ=new cR;Object.assign(f5.prototype,{load:function(db,da,cg,cf){void 0===db&&(db="");void 0!==this.path&&(db=this.path+db);var ce=this,cd=en.get(db);if(void 0!==cd){return ce.manager.itemStart(db),setTimeout(function(){da&&da(cd);ce.manager.itemEnd(db)},0),cd}var cc=db.match(/^data:(.*?)(;base64)?,(.*)$/);if(cc){var cb=cc[1],bg=!!cc[2],cc=cc[3],cc=window.decodeURIComponent(cc);bg&&(cc=window.atob(cc));try{var bf=(this.responseType||"").toLowerCase();switch(bf){case"arraybuffer":case"blob":var be=new ArrayBuffer(cc.length);for(var bc=new Uint8Array(be),bg=0;bg<cc.length;bg++){bc[bg]=cc.charCodeAt(bg)}"blob"===bf&&(be=new Blob([be],{type:cb}));break;case"document":be=(new DOMParser).parseFromString(cc,cb);break;case"json":be=JSON.parse(cc);break;default:be=cc}window.setTimeout(function(){da&&da(be);ce.manager.itemEnd(db)},0)}catch(bb){window.setTimeout(function(){cf&&cf(bb);ce.manager.itemEnd(db);ce.manager.itemError(db)},0)}}else{var bd=new XMLHttpRequest;bd.open("GET",db,!0);bd.addEventListener("load",function(dd){var dc=dd.target.response;en.add(db,dc);200===this.status?(da&&da(dc),ce.manager.itemEnd(db)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),da&&da(dc),ce.manager.itemEnd(db)):(cf&&cf(dd),ce.manager.itemEnd(db),ce.manager.itemError(db))},!1);void 0!==cg&&bd.addEventListener("progress",function(dc){cg(dc)},!1);bd.addEventListener("error",function(dc){cf&&cf(dc);ce.manager.itemEnd(db);ce.manager.itemError(db)},!1);void 0!==this.responseType&&(bd.responseType=this.responseType);void 0!==this.withCredentials&&(bd.withCredentials=this.withCredentials);bd.overrideMimeType&&bd.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(cb in this.requestHeader){bd.setRequestHeader(cb,this.requestHeader[cb])}bd.send(null)}ce.manager.itemStart(db);return bd},setPath:function(bb){this.path=bb;return this},setResponseType:function(bb){this.responseType=bb;return this},setWithCredentials:function(bb){this.withCredentials=bb;return this},setMimeType:function(bb){this.mimeType=bb;return this},setRequestHeader:function(bb){this.requestHeader=bb;return this}});Object.assign(dK.prototype,{load:function(cg,cf,ce,cd){function cc(da){bd.load(cg[da],function(db){db=bg._parser(db,!0);bf[da]={width:db.width,height:db.height,format:db.format,mipmaps:db.mipmaps};cb+=1;6===cb&&(1===db.mipmapCount&&(be.minFilter=1006),be.format=db.format,be.needsUpdate=!0,cf&&cf(be))},ce,cd)}var cb,bg=this,bf=[],be=new fq;be.image=bf;var bd=new f5(this.manager);bd.setPath(this.path);bd.setResponseType("arraybuffer");if(Array.isArray(cg)){for(var bc=cb=0,bb=cg.length;bc<bb;++bc){cc(bc)}}else{bd.load(cg,function(da){da=bg._parser(da,!0);if(da.isCubemap){for(var dd=da.mipmaps.length/da.mipmapCount,dc=0;dc<dd;dc++){bf[dc]={mipmaps:[]};for(var db=0;db<da.mipmapCount;db++){bf[dc].mipmaps.push(da.mipmaps[dc*da.mipmapCount+db]),bf[dc].format=da.format,bf[dc].width=da.width,bf[dc].height=da.height}}}else{be.image.width=da.width,be.image.height=da.height,be.mipmaps=da.mipmaps}1===da.mipmapCount&&(be.minFilter=1006);be.format=da.format;be.needsUpdate=!0;cf&&cf(be)},ce,cd)}return be},setPath:function(bb){this.path=bb;return this}});Object.assign(gk.prototype,{load:function(bc,bb,cb,bg){var bf=this,be=new fY,bd=new f5(this.manager);bd.setResponseType("arraybuffer");bd.load(bc,function(cc){if(cc=bf._parser(cc)){void 0!==cc.image?be.image=cc.image:void 0!==cc.data&&(be.image.width=cc.width,be.image.height=cc.height,be.image.data=cc.data),be.wrapS=void 0!==cc.wrapS?cc.wrapS:1001,be.wrapT=void 0!==cc.wrapT?cc.wrapT:1001,be.magFilter=void 0!==cc.magFilter?cc.magFilter:1006,be.minFilter=void 0!==cc.minFilter?cc.minFilter:1008,be.anisotropy=void 0!==cc.anisotropy?cc.anisotropy:1,void 0!==cc.format&&(be.format=cc.format),void 0!==cc.type&&(be.type=cc.type),void 0!==cc.mipmaps&&(be.mipmaps=cc.mipmaps),1===cc.mipmapCount&&(be.minFilter=1006),be.needsUpdate=!0,bb&&bb(be,cc)}},cb,bg);return be}});Object.assign(dB.prototype,{crossOrigin:"Anonymous",load:function(bc,bb,bg,bf){void 0===bc&&(bc="");void 0!==this.path&&(bc=this.path+bc);var be=this,bd=en.get(bc);if(void 0!==bd){return be.manager.itemStart(bc),setTimeout(function(){bb&&bb(bd);be.manager.itemEnd(bc)},0),bd}bg=document.createElementNS("http://www.w3.org/1999/xhtml","img");bg.addEventListener("load",function(){en.add(bc,this);bb&&bb(this);be.manager.itemEnd(bc)},!1);bg.addEventListener("error",function(cb){bf&&bf(cb);be.manager.itemEnd(bc);be.manager.itemError(bc)},!1);"data:"!==bc.substr(0,5)&&void 0!==this.crossOrigin&&(bg.crossOrigin=this.crossOrigin);be.manager.itemStart(bc);bg.src=bc;return bg},setCrossOrigin:function(bb){this.crossOrigin=bb;return this},setPath:function(bb){this.path=bb;return this}});Object.assign(fT.prototype,{crossOrigin:"Anonymous",load:function(bc,bb,cc,cb){function bg(cd){be.load(bc[cd],function(ce){bf.images[cd]=ce;bd++;6===bd&&(bf.needsUpdate=!0,bb&&bb(bf))},void 0,cb)}var bf=new cO,be=new dB(this.manager);be.setCrossOrigin(this.crossOrigin);be.setPath(this.path);var bd=0;for(cc=0;cc<bc.length;++cc){bg(cc)}return bf},setCrossOrigin:function(bb){this.crossOrigin=bb;return this},setPath:function(bb){this.path=bb;return this}});Object.assign(bH.prototype,{crossOrigin:"Anonymous",load:function(bc,bb,bg,bf){var be=new dB(this.manager);be.setCrossOrigin(this.crossOrigin);be.setPath(this.path);var bd=new fO;bd.image=be.load(bc,function(){var cb=0<bc.search(/\.(jpg|jpeg)$/)||0===bc.search(/^data\:image\/jpeg/);bd.format=cb?1022:1023;bd.needsUpdate=!0;void 0!==bb&&bb(bd)},bg,bf);return bd},setCrossOrigin:function(bb){this.crossOrigin=bb;return this},setPath:function(bb){this.path=bb;return this}});go.prototype=Object.assign(Object.create(fs.prototype),{constructor:go,isLight:!0,copy:function(bb){fs.prototype.copy.call(this,bb);this.color.copy(bb.color);this.intensity=bb.intensity;return this},toJSON:function(bb){bb=fs.prototype.toJSON.call(this,bb);bb.object.color=this.color.getHex();bb.object.intensity=this.intensity;void 0!==this.groundColor&&(bb.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(bb.object.distance=this.distance);void 0!==this.angle&&(bb.object.angle=this.angle);void 0!==this.decay&&(bb.object.decay=this.decay);void 0!==this.penumbra&&(bb.object.penumbra=this.penumbra);void 0!==this.shadow&&(bb.object.shadow=this.shadow.toJSON());return bb}});bv.prototype=Object.assign(Object.create(go.prototype),{constructor:bv,isHemisphereLight:!0,copy:function(bb){go.prototype.copy.call(this,bb);this.groundColor.copy(bb.groundColor);return this}});Object.assign(b2.prototype,{copy:function(bb){this.camera=bb.camera.clone();this.bias=bb.bias;this.radius=bb.radius;this.mapSize.copy(bb.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var bb={};0!==this.bias&&(bb.bias=this.bias);1!==this.radius&&(bb.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y){bb.mapSize=this.mapSize.toArray()}bb.camera=this.camera.toJSON(!1).object;delete bb.camera.matrix;return bb}});bi.prototype=Object.assign(Object.create(b2.prototype),{constructor:bi,isSpotLightShadow:!0,update:function(bc){var bb=this.camera,be=2*fK.RAD2DEG*bc.angle,bd=this.mapSize.width/this.mapSize.height;bc=bc.distance||bb.far;if(be!==bb.fov||bd!==bb.aspect||bc!==bb.far){bb.fov=be,bb.aspect=bd,bb.far=bc,bb.updateProjectionMatrix()}}});a1.prototype=Object.assign(Object.create(go.prototype),{constructor:a1,isSpotLight:!0,copy:function(bb){go.prototype.copy.call(this,bb);this.distance=bb.distance;this.angle=bb.angle;this.penumbra=bb.penumbra;this.decay=bb.decay;this.target=bb.target.clone();this.shadow=bb.shadow.clone();return this}});aP.prototype=Object.assign(Object.create(go.prototype),{constructor:aP,isPointLight:!0,copy:function(bb){go.prototype.copy.call(this,bb);this.distance=bb.distance;this.decay=bb.decay;this.shadow=bb.shadow.clone();return this}});aE.prototype=Object.assign(Object.create(b2.prototype),{constructor:aE});gw.prototype=Object.assign(Object.create(go.prototype),{constructor:gw,isDirectionalLight:!0,copy:function(bb){go.prototype.copy.call(this,bb);this.target=bb.target.clone();this.shadow=bb.shadow.clone();return this}});f8.prototype=Object.assign(Object.create(go.prototype),{constructor:f8,isAmbientLight:!0});bT.prototype=Object.assign(Object.create(go.prototype),{constructor:bT,isRectAreaLight:!0,copy:function(bb){go.prototype.copy.call(this,bb);this.width=bb.width;this.height=bb.height;return this},toJSON:function(bb){bb=go.prototype.toJSON.call(this,bb);bb.object.width=this.width;bb.object.height=this.height;return bb}});var e1={arraySlice:function(bc,bb,bd){return e1.isTypedArray(bc)?new bc.constructor(bc.subarray(bb,void 0!==bd?bd:bc.length)):bc.slice(bb,bd)},convertArray:function(bc,bb,bd){return !bc||!bd&&bc.constructor===bb?bc:"number"===typeof bb.BYTES_PER_ELEMENT?new bb(bc):Array.prototype.slice.call(bc)},isTypedArray:function(bb){return ArrayBuffer.isView(bb)&&!(bb instanceof DataView)},getKeyframeOrder:function(bc){for(var bb=bc.length,be=Array(bb),bd=0;bd!==bb;++bd){be[bd]=bd}be.sort(function(bf,bg){return bc[bf]-bc[bg]});return be},sortedArray:function(cd,cc,cb){for(var bg=cd.length,bf=new cd.constructor(bg),be=0,bd=0;bd!==bg;++be){for(var bc=cb[be]*cc,bb=0;bb!==cc;++bb){bf[bd++]=cd[bc+bb]}}return bf},flattenJSON:function(bc,bb,cb,bg){for(var bf=1,be=bc[0];void 0!==be&&void 0===be[bg];){be=bc[bf++]}if(void 0!==be){var bd=be[bg];if(void 0!==bd){if(Array.isArray(bd)){do{bd=be[bg],void 0!==bd&&(bb.push(be.time),cb.push.apply(cb,bd)),be=bc[bf++]}while(void 0!==be)}else{if(void 0!==bd.toArray){do{bd=be[bg],void 0!==bd&&(bb.push(be.time),bd.toArray(cb,cb.length)),be=bc[bf++]}while(void 0!==be)}else{do{bd=be[bg],void 0!==bd&&(bb.push(be.time),cb.push(bd)),be=bc[bf++]}while(void 0!==be)}}}}}};Object.assign(aS.prototype,{evaluate:function(bc){var bb=this.parameterPositions,bg=this._cachedIndex,bf=bb[bg],be=bb[bg-1];bc:{bb:{bg:{bf:if(!(bc<bf)){for(var bd=bg+2;;){if(void 0===bf){if(bc<be){break bf}this._cachedIndex=bg=bb.length;return this.afterEnd_(bg-1,bc,be)}if(bg===bd){break}be=bf;bf=bb[++bg];if(bc<bf){break bb}}bf=bb.length;break bg}if(bc>=be){break bc}else{bd=bb[1];bc<bd&&(bg=2,be=bd);for(bd=bg-2;;){if(void 0===be){return this._cachedIndex=0,this.beforeStart_(0,bc,bf)}if(bg===bd){break}bf=be;be=bb[--bg-1];if(bc>=be){break bb}}bf=bg;bg=0}}for(;bg<bf;){be=bg+bf>>>1,bc<bb[be]?bf=be:bg=be+1}bf=bb[bg];be=bb[bg-1];if(void 0===be){return this._cachedIndex=0,this.beforeStart_(0,bc,bf)}if(void 0===bf){return this._cachedIndex=bg=bb.length,this.afterEnd_(bg-1,be,bc)}}this._cachedIndex=bg;this.intervalChanged_(bg,be,bf)}return this.interpolate_(bg,be,bc,bf)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(bc){var bb=this.resultBuffer,bf=this.sampleValues,be=this.valueSize;bc*=be;for(var bd=0;bd!==be;++bd){bb[bd]=bf[bc+bd]}return bb},interpolate_:function(bc,bb,be,bd){throw Error("call to abstract method")},intervalChanged_:function(bc,bb,bd){}});Object.assign(aS.prototype,{beforeStart_:aS.prototype.copySampleValue_,afterEnd_:aS.prototype.copySampleValue_});bA.prototype=Object.assign(Object.create(aS.prototype),{constructor:bA,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(bc,bb,cc){var cb=this.parameterPositions,bg=bc-2,bf=bc+1,be=cb[bg],bd=cb[bf];if(void 0===be){switch(this.getSettings_().endingStart){case 2401:bg=bc;be=2*bb-cc;break;case 2402:bg=cb.length-2;be=bb+cb[bg]-cb[bg+1];break;default:bg=bc,be=cc}}if(void 0===bd){switch(this.getSettings_().endingEnd){case 2401:bf=bc;bd=2*cc-bb;break;case 2402:bf=1;bd=cc+cb[1]-cb[0];break;default:bf=bc-1,bd=bb}}bc=0.5*(cc-bb);cb=this.valueSize;this._weightPrev=bc/(bb-be);this._weightNext=bc/(bd-cc);this._offsetPrev=bg*cb;this._offsetNext=bf*cb},interpolate_:function(da,cg,cf,ce){var cd=this.resultBuffer,cc=this.sampleValues,cb=this.valueSize;da*=cb;var bg=da-cb,bf=this._offsetPrev,be=this._offsetNext,bd=this._weightPrev,bb=this._weightNext,bc=(cf-cg)/(ce-cg);cf=bc*bc;ce=cf*bc;cg=-bd*ce+2*bd*cf-bd*bc;bd=(1+bd)*ce+(-1.5-2*bd)*cf+(-0.5+bd)*bc+1;bc=(-1-bb)*ce+(1.5+bb)*cf+0.5*bc;bb=bb*ce-bb*cf;for(cf=0;cf!==cb;++cf){cd[cf]=cg*cc[bf+cf]+bd*cc[bg+cf]+bc*cc[da+cf]+bb*cc[be+cf]}return cd}});dq.prototype=Object.assign(Object.create(aS.prototype),{constructor:dq,interpolate_:function(bc,bb,cc,cb){var bg=this.resultBuffer,bf=this.sampleValues,be=this.valueSize;bc*=be;var bd=bc-be;bb=(cc-bb)/(cb-bb);cc=1-bb;for(cb=0;cb!==be;++cb){bg[cb]=bf[bd+cb]*cc+bf[bc+cb]*bb}return bg}});bo.prototype=Object.assign(Object.create(aS.prototype),{constructor:bo,interpolate_:function(bc,bb,be,bd){return this.copySampleValue_(bc-1)}});var gn={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(bb){return new bo(this.times,this.values,this.getValueSize(),bb)},InterpolantFactoryMethodLinear:function(bb){return new dq(this.times,this.values,this.getValueSize(),bb)},InterpolantFactoryMethodSmooth:function(bb){return new bA(this.times,this.values,this.getValueSize(),bb)},setInterpolation:function(bc){switch(bc){case 2300:var bb=this.InterpolantFactoryMethodDiscrete;break;case 2301:bb=this.InterpolantFactoryMethodLinear;break;case 2302:bb=this.InterpolantFactoryMethodSmooth}if(void 0===bb){bb="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(bc!==this.DefaultInterpolation){this.setInterpolation(this.DefaultInterpolation)}else{throw Error(bb)}}console.warn("THREE.KeyframeTrackPrototype:",bb)}else{this.createInterpolant=bb}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(bc){if(0!==bc){for(var bb=this.times,be=0,bd=bb.length;be!==bd;++be){bb[be]+=bc}}return this},scale:function(bc){if(1!==bc){for(var bb=this.times,be=0,bd=bb.length;be!==bd;++be){bb[be]*=bc}}return this},trim:function(bc,bb){for(var bg=this.times,bf=bg.length,be=0,bd=bf-1;be!==bf&&bg[be]<bc;){++be}for(;-1!==bd&&bg[bd]>bb;){--bd}++bd;if(0!==be||bd!==bf){be>=bd&&(bd=Math.max(bd,1),be=bd-1),bc=this.getValueSize(),this.times=e1.arraySlice(bg,be,bd),this.values=e1.arraySlice(this.values,be*bc,bd*bc)}return this},validate:function(){var bc=!0,bb=this.getValueSize();0!==bb-Math.floor(bb)&&(console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this),bc=!1);var cb=this.times,bb=this.values,bg=cb.length;0===bg&&(console.error("THREE.KeyframeTrackPrototype: Track is empty.",this),bc=!1);for(var bf=null,be=0;be!==bg;be++){var bd=cb[be];if("number"===typeof bd&&isNaN(bd)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,be,bd);bc=!1;break}if(null!==bf&&bf>bd){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,be,bd,bf);bc=!1;break}bf=bd}if(void 0!==bb&&e1.isTypedArray(bb)){for(be=0,cb=bb.length;be!==cb;++be){if(bg=bb[be],isNaN(bg)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,be,bg);bc=!1;break}}}return bc},optimize:function(){for(var da,cg,cf=this.times,ce=this.values,cd=this.getValueSize(),cc=2302===this.getInterpolation(),cb=1,bg=cf.length-1,bf=1;bf<bg;++bf){da=!1;var be=cf[bf];if(be!==cf[bf+1]&&(1!==bf||be!==be[0])){if(cc){da=!0}else{cg=bf*cd;for(var bd=cg-cd,bb=cg+cd,be=0;be!==cd;++be){var bc=ce[cg+be];if(bc!==ce[bd+be]||bc!==ce[bb+be]){da=!0;break}}}}if(da){if(bf!==cb){for(cf[cb]=cf[bf],cg=bf*cd,da=cb*cd,be=0;be!==cd;++be){ce[da+be]=ce[cg+be]}}++cb}}if(0<bg){cf[cb]=cf[bg];cg=bg*cd;da=cb*cd;for(be=0;be!==cd;++be){ce[da+be]=ce[cg+be]}++cb}cb!==cf.length&&(this.times=e1.arraySlice(cf,0,cb),this.values=e1.arraySlice(ce,0,cb*cd));return this}};fW.prototype=Object.assign(Object.create(gn),{constructor:fW,ValueTypeName:"vector"});a6.prototype=Object.assign(Object.create(aS.prototype),{constructor:a6,interpolate_:function(bc,bb,cb,bg){var bf=this.resultBuffer,be=this.sampleValues,bd=this.valueSize;bc*=bd;bb=(cb-bb)/(bg-bb);for(cb=bc+bd;bc!==cb;bc+=4){d6.slerpFlat(bf,0,be,bc-bd,be,bc,bb)}return bf}});c5.prototype=Object.assign(Object.create(gn),{constructor:c5,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(bb){return new a6(this.times,this.values,this.getValueSize(),bb)},InterpolantFactoryMethodSmooth:void 0});fz.prototype=Object.assign(Object.create(gn),{constructor:fz,ValueTypeName:"number"});aV.prototype=Object.assign(Object.create(gn),{constructor:aV,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});aJ.prototype=Object.assign(Object.create(gn),{constructor:aJ,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});gC.prototype=Object.assign(Object.create(gn),{constructor:gC,ValueTypeName:"color"});bx.prototype=gn;gn.constructor=bx;Object.assign(bx,{parse:function(bc){if(void 0===bc.type){throw Error("track type undefined, can not parse")}var bb=bx._getTrackTypeForValueTypeName(bc.type);if(void 0===bc.times){var be=[],bd=[];e1.flattenJSON(bc.keys,be,bd,"value");bc.times=be;bc.values=bd}return void 0!==bb.parse?bb.parse(bc):new bb(bc.name,bc.times,bc.values,bc.interpolation)},toJSON:function(bc){var bb=bc.constructor;if(void 0!==bb.toJSON){bb=bb.toJSON(bc)}else{var bb={name:bc.name,times:e1.convertArray(bc.times,Array),values:e1.convertArray(bc.values,Array)},bd=bc.getInterpolation();bd!==bc.DefaultInterpolation&&(bb.interpolation=bd)}bb.type=bc.ValueTypeName;return bb},_getTrackTypeForValueTypeName:function(bb){switch(bb.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return fz;case"vector":case"vector2":case"vector3":case"vector4":return fW;case"color":return gC;case"quaternion":return c5;case"bool":case"boolean":return aJ;case"string":return aV}throw Error("Unsupported typeName: "+bb)}});Object.assign(bD,{parse:function(bc){for(var bb=[],bg=bc.tracks,bf=1/(bc.fps||1),be=0,bd=bg.length;be!==bd;++be){bb.push(bx.parse(bg[be]).scale(bf))}return new bD(bc.name,bc.duration,bb)},toJSON:function(bc){var bb=[],bf=bc.tracks;bc={name:bc.name,duration:bc.duration,tracks:bb};for(var be=0,bd=bf.length;be!==bd;++be){bb.push(bx.toJSON(bf[be]))}return bc},CreateFromMorphTargetSequence:function(ce,cd,cc,cb){for(var bg=cd.length,bf=[],be=0;be<bg;be++){var bd=[],bc=[];bd.push((be+bg-1)%bg,be,(be+1)%bg);bc.push(0,1,0);var bb=e1.getKeyframeOrder(bd),bd=e1.sortedArray(bd,1,bb),bc=e1.sortedArray(bc,1,bb);cb||0!==bd[0]||(bd.push(bg),bc.push(bc[0]));bf.push((new fz(".morphTargetInfluences["+cd[be].name+"]",bd,bc)).scale(1/cc))}return new bD(ce,-1,bf)},findByName:function(bc,bb){var bd=bc;Array.isArray(bc)||(bd=bc.geometry&&bc.geometry.animations||bc.animations);for(bc=0;bc<bd.length;bc++){if(bd[bc].name===bb){return bd[bc]}}return null},CreateClipsFromMorphTargetSequences:function(ce,cd,cc){for(var cb,bg={},bf=/^([\w-]*?)([\d]+)$/,be=0,bd=ce.length;be<bd;be++){var bc=ce[be],bb=bc.name.match(bf);bb&&1<bb.length&&(cb=bb[1],(bb=bg[cb])||(bg[cb]=bb=[]),bb.push(bc))}ce=[];for(cb in bg){ce.push(bD.CreateFromMorphTargetSequence(cb,bg[cb],cd,cc))}return ce},parseAnimation:function(db,da){if(!db){return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null}var cg=function(de,dd,ec,eb,ea){if(0!==ec.length){var dg=[],df=[];e1.flattenJSON(ec,dg,df,eb);0!==dg.length&&ea.push(new de(dd,dg,df))}},cf=[],ce=db.name||"default",cd=db.length||-1,cc=db.fps||30;db=db.hierarchy||[];for(var cb=0;cb<db.length;cb++){var bg=db[cb].keys;if(bg&&0!==bg.length){if(bg[0].morphTargets){for(var cd={},bf=0;bf<bg.length;bf++){if(bg[bf].morphTargets){for(var be=0;be<bg[bf].morphTargets.length;be++){cd[bg[bf].morphTargets[be]]=-1}}}for(var bc in cd){for(var bd=[],bb=[],be=0;be!==bg[bf].morphTargets.length;++be){var dc=bg[bf];bd.push(dc.time);bb.push(dc.morphTarget===bc?1:0)}cf.push(new fz(".morphTargetInfluence["+bc+"]",bd,bb))}cd=cd.length*(cc||1)}else{bf=".bones["+da[cb].name+"]",cg(fW,bf+".position",bg,"pos",cf),cg(c5,bf+".quaternion",bg,"rot",cf),cg(fW,bf+".scale",bg,"scl",cf)}}}return 0===cf.length?null:new bD(ce,cd,cf)}});Object.assign(bD.prototype,{resetDuration:function(){for(var bc=0,bb=0,be=this.tracks.length;bb!==be;++bb){var bd=this.tracks[bb],bc=Math.max(bc,bd.times[bd.times.length-1])}this.duration=bc},trim:function(){for(var bb=0;bb<this.tracks.length;bb++){this.tracks[bb].trim(0,this.duration)}return this},optimize:function(){for(var bb=0;bb<this.tracks.length;bb++){this.tracks[bb].optimize()}return this}});Object.assign(gr.prototype,{load:function(bc,bb,bf,be){var bd=this;(new f5(bd.manager)).load(bc,function(bg){bb(bd.parse(JSON.parse(bg)))},bf,be)},setTextures:function(bb){this.textures=bb},parse:function(bc){function bb(bg){void 0===bf[bg]&&console.warn("THREE.MaterialLoader: Undefined texture",bg);return bf[bg]}var bf=this.textures,be=new bE[bc.type];void 0!==bc.uuid&&(be.uuid=bc.uuid);void 0!==bc.name&&(be.name=bc.name);void 0!==bc.color&&be.color.setHex(bc.color);void 0!==bc.roughness&&(be.roughness=bc.roughness);void 0!==bc.metalness&&(be.metalness=bc.metalness);void 0!==bc.emissive&&be.emissive.setHex(bc.emissive);void 0!==bc.specular&&be.specular.setHex(bc.specular);void 0!==bc.shininess&&(be.shininess=bc.shininess);void 0!==bc.clearCoat&&(be.clearCoat=bc.clearCoat);void 0!==bc.clearCoatRoughness&&(be.clearCoatRoughness=bc.clearCoatRoughness);void 0!==bc.uniforms&&(be.uniforms=bc.uniforms);void 0!==bc.vertexShader&&(be.vertexShader=bc.vertexShader);void 0!==bc.fragmentShader&&(be.fragmentShader=bc.fragmentShader);void 0!==bc.vertexColors&&(be.vertexColors=bc.vertexColors);void 0!==bc.fog&&(be.fog=bc.fog);void 0!==bc.flatShading&&(be.flatShading=bc.flatShading);void 0!==bc.blending&&(be.blending=bc.blending);void 0!==bc.side&&(be.side=bc.side);void 0!==bc.opacity&&(be.opacity=bc.opacity);void 0!==bc.transparent&&(be.transparent=bc.transparent);void 0!==bc.alphaTest&&(be.alphaTest=bc.alphaTest);void 0!==bc.depthTest&&(be.depthTest=bc.depthTest);void 0!==bc.depthWrite&&(be.depthWrite=bc.depthWrite);void 0!==bc.colorWrite&&(be.colorWrite=bc.colorWrite);void 0!==bc.wireframe&&(be.wireframe=bc.wireframe);void 0!==bc.wireframeLinewidth&&(be.wireframeLinewidth=bc.wireframeLinewidth);void 0!==bc.wireframeLinecap&&(be.wireframeLinecap=bc.wireframeLinecap);void 0!==bc.wireframeLinejoin&&(be.wireframeLinejoin=bc.wireframeLinejoin);void 0!==bc.skinning&&(be.skinning=bc.skinning);void 0!==bc.morphTargets&&(be.morphTargets=bc.morphTargets);void 0!==bc.dithering&&(be.dithering=bc.dithering);void 0!==bc.visible&&(be.visible=bc.visible);void 0!==bc.userData&&(be.userData=bc.userData);void 0!==bc.shading&&(be.flatShading=1===bc.shading);void 0!==bc.size&&(be.size=bc.size);void 0!==bc.sizeAttenuation&&(be.sizeAttenuation=bc.sizeAttenuation);void 0!==bc.map&&(be.map=bb(bc.map));void 0!==bc.alphaMap&&(be.alphaMap=bb(bc.alphaMap),be.transparent=!0);void 0!==bc.bumpMap&&(be.bumpMap=bb(bc.bumpMap));void 0!==bc.bumpScale&&(be.bumpScale=bc.bumpScale);void 0!==bc.normalMap&&(be.normalMap=bb(bc.normalMap));if(void 0!==bc.normalScale){var bd=bc.normalScale;!1===Array.isArray(bd)&&(bd=[bd,bd]);be.normalScale=(new fX).fromArray(bd)}void 0!==bc.displacementMap&&(be.displacementMap=bb(bc.displacementMap));void 0!==bc.displacementScale&&(be.displacementScale=bc.displacementScale);void 0!==bc.displacementBias&&(be.displacementBias=bc.displacementBias);void 0!==bc.roughnessMap&&(be.roughnessMap=bb(bc.roughnessMap));void 0!==bc.metalnessMap&&(be.metalnessMap=bb(bc.metalnessMap));void 0!==bc.emissiveMap&&(be.emissiveMap=bb(bc.emissiveMap));void 0!==bc.emissiveIntensity&&(be.emissiveIntensity=bc.emissiveIntensity);void 0!==bc.specularMap&&(be.specularMap=bb(bc.specularMap));void 0!==bc.envMap&&(be.envMap=bb(bc.envMap));void 0!==bc.reflectivity&&(be.reflectivity=bc.reflectivity);void 0!==bc.lightMap&&(be.lightMap=bb(bc.lightMap));void 0!==bc.lightMapIntensity&&(be.lightMapIntensity=bc.lightMapIntensity);void 0!==bc.aoMap&&(be.aoMap=bb(bc.aoMap));void 0!==bc.aoMapIntensity&&(be.aoMapIntensity=bc.aoMapIntensity);void 0!==bc.gradientMap&&(be.gradientMap=bb(bc.gradientMap));return be}});Object.assign(fx.prototype,{load:function(bc,bb,bf,be){var bd=this;(new f5(bd.manager)).load(bc,function(bg){bb(bd.parse(JSON.parse(bg)))},bf,be)},parse:function(bc){var bb=new fU;var bg=bc.data.index;void 0!==bg&&(bg=new el[bg.type](bg.array),bb.setIndex(new fQ(bg,1)));var bf=bc.data.attributes;for(bd in bf){var be=bf[bd];bg=new el[be.type](be.array);bb.addAttribute(bd,new fQ(bg,be.itemSize,be.normalized))}var bd=bc.data.groups||bc.data.drawcalls||bc.data.offsets;if(void 0!==bd){for(bg=0,bf=bd.length;bg!==bf;++bg){be=bd[bg],bb.addGroup(be.start,be.count,be.materialIndex)}}bc=bc.data.boundingSphere;void 0!==bc&&(bd=new ft,void 0!==bc.center&&bd.fromArray(bc.center),bb.boundingSphere=new br(bd,bc.radius));return bb}});var el={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};fi.Handlers={handlers:[],add:function(bc,bb){this.handlers.push(bc,bb)},get:function(bc){for(var bb=this.handlers,bf=0,be=bb.length;bf<be;bf+=2){var bd=bb[bf+1];if(bb[bf].test(bc)){return bd}}return null}};Object.assign(fi.prototype,{crossOrigin:void 0,extractUrlBase:function(bb){bb=bb.split("/");if(1===bb.length){return"./"}bb.pop();return bb.join("/")+"/"},initMaterials:function(bc,bb,bf){for(var be=[],bd=0;bd<bc.length;++bd){be[bd]=this.createMaterial(bc[bd],bb,bf)}return be},createMaterial:function(){var bc={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},bb=new fZ,be=new bH,bd=new gr;return function(cg,ce,cd){function cc(dc,da,df,de,dd){dc=ce+dc;var db=fi.Handlers.get(dc);null!==db?dc=db.load(dc):(be.setCrossOrigin(cd),dc=be.load(dc));void 0!==da&&(dc.repeat.fromArray(da),1!==da[0]&&(dc.wrapS=1000),1!==da[1]&&(dc.wrapT=1000));void 0!==df&&dc.offset.fromArray(df);void 0!==de&&("repeat"===de[0]&&(dc.wrapS=1000),"mirror"===de[0]&&(dc.wrapS=1002),"repeat"===de[1]&&(dc.wrapT=1000),"mirror"===de[1]&&(dc.wrapT=1002));void 0!==dd&&(dc.anisotropy=dd);da=fK.generateUUID();cb[da]=dc;return da}var cb={},bg={uuid:fK.generateUUID(),type:"MeshLambertMaterial"},bf;for(bf in cg){var cf=cg[bf];switch(bf){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":bg.name=cf;break;case"blending":bg.blending=bc[cf];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",bf,"is no longer supported.");break;case"colorDiffuse":bg.color=bb.fromArray(cf).getHex();break;case"colorSpecular":bg.specular=bb.fromArray(cf).getHex();break;case"colorEmissive":bg.emissive=bb.fromArray(cf).getHex();break;case"specularCoef":bg.shininess=cf;break;case"shading":"basic"===cf.toLowerCase()&&(bg.type="MeshBasicMaterial");"phong"===cf.toLowerCase()&&(bg.type="MeshPhongMaterial");"standard"===cf.toLowerCase()&&(bg.type="MeshStandardMaterial");break;case"mapDiffuse":bg.map=cc(cf,cg.mapDiffuseRepeat,cg.mapDiffuseOffset,cg.mapDiffuseWrap,cg.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":bg.emissiveMap=cc(cf,cg.mapEmissiveRepeat,cg.mapEmissiveOffset,cg.mapEmissiveWrap,cg.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":bg.lightMap=cc(cf,cg.mapLightRepeat,cg.mapLightOffset,cg.mapLightWrap,cg.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":bg.aoMap=cc(cf,cg.mapAORepeat,cg.mapAOOffset,cg.mapAOWrap,cg.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":bg.bumpMap=cc(cf,cg.mapBumpRepeat,cg.mapBumpOffset,cg.mapBumpWrap,cg.mapBumpAnisotropy);break;case"mapBumpScale":bg.bumpScale=cf;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":bg.normalMap=cc(cf,cg.mapNormalRepeat,cg.mapNormalOffset,cg.mapNormalWrap,cg.mapNormalAnisotropy);break;case"mapNormalFactor":bg.normalScale=[cf,cf];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":bg.specularMap=cc(cf,cg.mapSpecularRepeat,cg.mapSpecularOffset,cg.mapSpecularWrap,cg.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":bg.metalnessMap=cc(cf,cg.mapMetalnessRepeat,cg.mapMetalnessOffset,cg.mapMetalnessWrap,cg.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":bg.roughnessMap=cc(cf,cg.mapRoughnessRepeat,cg.mapRoughnessOffset,cg.mapRoughnessWrap,cg.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":bg.alphaMap=cc(cf,cg.mapAlphaRepeat,cg.mapAlphaOffset,cg.mapAlphaWrap,cg.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":bg.side=1;break;case"doubleSided":bg.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");bg.opacity=cf;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":bg[bf]=cf;break;case"vertexColors":!0===cf&&(bg.vertexColors=2);"face"===cf&&(bg.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",bf,cf)}}"MeshBasicMaterial"===bg.type&&delete bg.emissive;"MeshPhongMaterial"!==bg.type&&delete bg.specular;1>bg.opacity&&(bg.transparent=!0);bd.setTextures(cb);return bd.parse(bg)}}()});Object.assign(e9.prototype,{load:function(bc,bb,cb,bg){var bf=this,be=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:fi.prototype.extractUrlBase(bc),bd=new f5(this.manager);bd.setWithCredentials(this.withCredentials);bd.load(bc,function(cd){cd=JSON.parse(cd);var cc=cd.metadata;if(void 0!==cc&&(cc=cc.type,void 0!==cc)){if("object"===cc.toLowerCase()){console.error("THREE.JSONLoader: "+bc+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===cc.toLowerCase()){console.error("THREE.JSONLoader: "+bc+" should be loaded with THREE.SceneLoader instead.");return}}cd=bf.parse(cd,be);bb(cd.geometry,cd.materials)},cb,bg)},setTexturePath:function(bb){this.texturePath=bb},parse:function(){return function(ec,eb){void 0!==ec.data&&(ec=ec.data);ec.scale=void 0!==ec.scale?1/ec.scale:1;var ea=new fL,dg=ec,df,de,dd,dc=dg.faces;var db=dg.vertices;var da=dg.normals,cg=dg.colors;var cf=dg.scale;var cc=0;if(void 0!==dg.uvs){for(df=0;df<dg.uvs.length;df++){dg.uvs[df].length&&cc++}for(df=0;df<cc;df++){ea.faceVertexUvs[df]=[]}}var cd=0;for(dd=db.length;cd<dd;){df=new ft,df.x=db[cd++]*cf,df.y=db[cd++]*cf,df.z=db[cd++]*cf,ea.vertices.push(df)}cd=0;for(dd=dc.length;cd<dd;){db=dc[cd++];var bg=db&1;var cb=db&2;df=db&8;var bd=db&16;var bc=db&32;cf=db&64;db&=128;if(bg){bg=new d0;bg.a=dc[cd];bg.b=dc[cd+1];bg.c=dc[cd+3];var bf=new d0;bf.a=dc[cd+1];bf.b=dc[cd+2];bf.c=dc[cd+3];cd+=4;cb&&(cb=dc[cd++],bg.materialIndex=cb,bf.materialIndex=cb);cb=ea.faces.length;if(df){for(df=0;df<cc;df++){var bb=dg.uvs[df];ea.faceVertexUvs[df][cb]=[];ea.faceVertexUvs[df][cb+1]=[];for(de=0;4>de;de++){var ce=dc[cd++];var be=bb[2*ce];ce=bb[2*ce+1];be=new fX(be,ce);2!==de&&ea.faceVertexUvs[df][cb].push(be);0!==de&&ea.faceVertexUvs[df][cb+1].push(be)}}}bd&&(bd=3*dc[cd++],bg.normal.set(da[bd++],da[bd++],da[bd]),bf.normal.copy(bg.normal));if(bc){for(df=0;4>df;df++){bd=3*dc[cd++],bc=new ft(da[bd++],da[bd++],da[bd]),2!==df&&bg.vertexNormals.push(bc),0!==df&&bf.vertexNormals.push(bc)}}cf&&(cf=dc[cd++],cf=cg[cf],bg.color.setHex(cf),bf.color.setHex(cf));if(db){for(df=0;4>df;df++){cf=dc[cd++],cf=cg[cf],2!==df&&bg.vertexColors.push(new fZ(cf)),0!==df&&bf.vertexColors.push(new fZ(cf))}}ea.faces.push(bg);ea.faces.push(bf)}else{bg=new d0;bg.a=dc[cd++];bg.b=dc[cd++];bg.c=dc[cd++];cb&&(cb=dc[cd++],bg.materialIndex=cb);cb=ea.faces.length;if(df){for(df=0;df<cc;df++){for(bb=dg.uvs[df],ea.faceVertexUvs[df][cb]=[],de=0;3>de;de++){ce=dc[cd++],be=bb[2*ce],ce=bb[2*ce+1],be=new fX(be,ce),ea.faceVertexUvs[df][cb].push(be)}}}bd&&(bd=3*dc[cd++],bg.normal.set(da[bd++],da[bd++],da[bd]));if(bc){for(df=0;3>df;df++){bd=3*dc[cd++],bc=new ft(da[bd++],da[bd++],da[bd]),bg.vertexNormals.push(bc)}}cf&&(cf=dc[cd++],bg.color.setHex(cg[cf]));if(db){for(df=0;3>df;df++){cf=dc[cd++],bg.vertexColors.push(new fZ(cg[cf]))}}ea.faces.push(bg)}}dg=ec;cd=void 0!==dg.influencesPerVertex?dg.influencesPerVertex:2;if(dg.skinWeights){for(dd=0,dc=dg.skinWeights.length;dd<dc;dd+=cd){ea.skinWeights.push(new fJ(dg.skinWeights[dd],1<cd?dg.skinWeights[dd+1]:0,2<cd?dg.skinWeights[dd+2]:0,3<cd?dg.skinWeights[dd+3]:0))}}if(dg.skinIndices){for(dd=0,dc=dg.skinIndices.length;dd<dc;dd+=cd){ea.skinIndices.push(new fJ(dg.skinIndices[dd],1<cd?dg.skinIndices[dd+1]:0,2<cd?dg.skinIndices[dd+2]:0,3<cd?dg.skinIndices[dd+3]:0))}}ea.bones=dg.bones;ea.bones&&0<ea.bones.length&&(ea.skinWeights.length!==ea.skinIndices.length||ea.skinIndices.length!==ea.vertices.length)&&console.warn("When skinning, number of vertices ("+ea.vertices.length+"), skinIndices ("+ea.skinIndices.length+"), and skinWeights ("+ea.skinWeights.length+") should match.");dd=ec;dc=dd.scale;if(void 0!==dd.morphTargets){for(dg=0,cd=dd.morphTargets.length;dg<cd;dg++){for(ea.morphTargets[dg]={},ea.morphTargets[dg].name=dd.morphTargets[dg].name,ea.morphTargets[dg].vertices=[],da=ea.morphTargets[dg].vertices,cg=dd.morphTargets[dg].vertices,cc=0,db=cg.length;cc<db;cc+=3){cf=new ft,cf.x=cg[cc]*dc,cf.y=cg[cc+1]*dc,cf.z=cg[cc+2]*dc,da.push(cf)}}}if(void 0!==dd.morphColors&&0<dd.morphColors.length){for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),dc=ea.faces,dd=dd.morphColors[0].colors,dg=0,cd=dc.length;dg<cd;dg++){dc[dg].color.fromArray(dd,3*dg)}}dd=ec;dg=[];cd=[];void 0!==dd.animation&&cd.push(dd.animation);void 0!==dd.animations&&(dd.animations.length?cd=cd.concat(dd.animations):cd.push(dd.animations));for(dd=0;dd<cd.length;dd++){(dc=bD.parseAnimation(cd[dd],ea.bones))&&dg.push(dc)}ea.morphTargets&&(cd=bD.CreateClipsFromMorphTargetSequences(ea.morphTargets,10),dg=dg.concat(cd));0<dg.length&&(ea.animations=dg);ea.computeFaceNormals();ea.computeBoundingSphere();if(void 0===ec.materials||0===ec.materials.length){return{geometry:ea}}ec=fi.prototype.initMaterials(ec.materials,eb,this.crossOrigin);return{geometry:ea,materials:ec}}}()});Object.assign(dz.prototype,{load:function(bc,bb,bf,be){""===this.texturePath&&(this.texturePath=bc.substring(0,bc.lastIndexOf("/")+1));var bd=this;(new f5(bd.manager)).load(bc,function(cc){var cb=null;try{cb=JSON.parse(cc)}catch(bg){void 0!==be&&be(bg);console.error("THREE:ObjectLoader: Can't parse "+bc+".",bg.message);return}cc=cb.metadata;void 0===cc||void 0===cc.type||"geometry"===cc.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+bc+". Use THREE.JSONLoader instead."):bd.parse(cb,bb)},bf,be)},setTexturePath:function(bb){this.texturePath=bb},setCrossOrigin:function(bb){this.crossOrigin=bb},parse:function(bc,bb){var bf=this.parseGeometries(bc.geometries),be=this.parseImages(bc.images,function(){void 0!==bb&&bb(bd)}),be=this.parseTextures(bc.textures,be),be=this.parseMaterials(bc.materials,be),bd=this.parseObject(bc.object,bf,be);bc.animations&&(bd.animations=this.parseAnimations(bc.animations));void 0!==bc.images&&0!==bc.images.length||void 0===bb||bb(bd);return bd},parseGeometries:function(bc){var bb={};if(void 0!==bc){for(var cc=new e9,cb=new fx,bg=0,bf=bc.length;bg<bf;bg++){var be=bc[bg];switch(be.type){case"PlaneGeometry":case"PlaneBufferGeometry":var bd=new fr[be.type](be.width,be.height,be.widthSegments,be.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":bd=new fr[be.type](be.width,be.height,be.depth,be.widthSegments,be.heightSegments,be.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":bd=new fr[be.type](be.radius,be.segments,be.thetaStart,be.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":bd=new fr[be.type](be.radiusTop,be.radiusBottom,be.height,be.radialSegments,be.heightSegments,be.openEnded,be.thetaStart,be.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":bd=new fr[be.type](be.radius,be.height,be.radialSegments,be.heightSegments,be.openEnded,be.thetaStart,be.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":bd=new fr[be.type](be.radius,be.widthSegments,be.heightSegments,be.phiStart,be.phiLength,be.thetaStart,be.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":bd=new fr[be.type](be.radius,be.detail);break;case"RingGeometry":case"RingBufferGeometry":bd=new fr[be.type](be.innerRadius,be.outerRadius,be.thetaSegments,be.phiSegments,be.thetaStart,be.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":bd=new fr[be.type](be.radius,be.tube,be.radialSegments,be.tubularSegments,be.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":bd=new fr[be.type](be.radius,be.tube,be.tubularSegments,be.radialSegments,be.p,be.q);break;case"LatheGeometry":case"LatheBufferGeometry":bd=new fr[be.type](be.points,be.segments,be.phiStart,be.phiLength);break;case"BufferGeometry":bd=cb.parse(be);break;case"Geometry":bd=cc.parse(be,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+be.type+'"');continue}bd.uuid=be.uuid;void 0!==be.name&&(bd.name=be.name);bb[be.uuid]=bd}}return bb},parseMaterials:function(bc,bb){var cc={};if(void 0!==bc){var cb=new gr;cb.setTextures(bb);bb=0;for(var bg=bc.length;bb<bg;bb++){var bf=bc[bb];if("MultiMaterial"===bf.type){for(var be=[],bd=0;bd<bf.materials.length;bd++){be.push(cb.parse(bf.materials[bd]))}cc[bf.uuid]=be}else{cc[bf.uuid]=cb.parse(bf)}}}return cc},parseAnimations:function(bc){for(var bb=[],be=0;be<bc.length;be++){var bd=bD.parse(bc[be]);bb.push(bd)}return bb},parseImages:function(cd,cc){function cb(ce){bg.manager.itemStart(ce);return be.load(ce,function(){bg.manager.itemEnd(ce)},void 0,function(){bg.manager.itemEnd(ce);bg.manager.itemError(ce)})}var bg=this,bf={};if(void 0!==cd&&0<cd.length){cc=new cR(cc);var be=new dB(cc);be.setCrossOrigin(this.crossOrigin);cc=0;for(var bd=cd.length;cc<bd;cc++){var bc=cd[cc],bb=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(bc.url)?bc.url:bg.texturePath+bc.url;bf[bc.uuid]=cb(bb)}}return bf},parseTextures:function(bc,bb){function cc(ce,cd){if("number"===typeof ce){return ce}console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ce);return cd[ce]}var cb={};if(void 0!==bc){for(var bg=0,bf=bc.length;bg<bf;bg++){var be=bc[bg];void 0===be.image&&console.warn('THREE.ObjectLoader: No "image" specified for',be.uuid);void 0===bb[be.image]&&console.warn("THREE.ObjectLoader: Undefined image",be.image);var bd=new fO(bb[be.image]);bd.needsUpdate=!0;bd.uuid=be.uuid;void 0!==be.name&&(bd.name=be.name);void 0!==be.mapping&&(bd.mapping=cc(be.mapping,bs));void 0!==be.offset&&bd.offset.fromArray(be.offset);void 0!==be.repeat&&bd.repeat.fromArray(be.repeat);void 0!==be.wrap&&(bd.wrapS=cc(be.wrap[0],dQ),bd.wrapT=cc(be.wrap[1],dQ));void 0!==be.minFilter&&(bd.minFilter=cc(be.minFilter,dE));void 0!==be.magFilter&&(bd.magFilter=cc(be.magFilter,dE));void 0!==be.anisotropy&&(bd.anisotropy=be.anisotropy);void 0!==be.flipY&&(bd.flipY=be.flipY);cb[be.uuid]=bd}}return cb},parseObject:function(){var bb=new fN;return function(ce,cd,cc){function cb(cf){void 0===cd[cf]&&console.warn("THREE.ObjectLoader: Undefined geometry",cf);return cd[cf]}function bg(cg){if(void 0!==cg){if(Array.isArray(cg)){for(var cf=[],dc=0,db=cg.length;dc<db;dc++){var da=cg[dc];void 0===cc[da]&&console.warn("THREE.ObjectLoader: Undefined material",da);cf.push(cc[da])}return cf}void 0===cc[cg]&&console.warn("THREE.ObjectLoader: Undefined material",cg);return cc[cg]}}switch(ce.type){case"Scene":var bf=new cY;void 0!==ce.background&&Number.isInteger(ce.background)&&(bf.background=new fZ(ce.background));void 0!==ce.fog&&("Fog"===ce.fog.type?bf.fog=new f4(ce.fog.color,ce.fog.near,ce.fog.far):"FogExp2"===ce.fog.type&&(bf.fog=new gt(ce.fog.color,ce.fog.density)));break;case"PerspectiveCamera":bf=new dU(ce.fov,ce.aspect,ce.near,ce.far);void 0!==ce.focus&&(bf.focus=ce.focus);void 0!==ce.zoom&&(bf.zoom=ce.zoom);void 0!==ce.filmGauge&&(bf.filmGauge=ce.filmGauge);void 0!==ce.filmOffset&&(bf.filmOffset=ce.filmOffset);void 0!==ce.view&&(bf.view=Object.assign({},ce.view));break;case"OrthographicCamera":bf=new a8(ce.left,ce.right,ce.top,ce.bottom,ce.near,ce.far);break;case"AmbientLight":bf=new f8(ce.color,ce.intensity);break;case"DirectionalLight":bf=new gw(ce.color,ce.intensity);break;case"PointLight":bf=new aP(ce.color,ce.intensity,ce.distance,ce.decay);break;case"RectAreaLight":bf=new bT(ce.color,ce.intensity,ce.width,ce.height);break;case"SpotLight":bf=new a1(ce.color,ce.intensity,ce.distance,ce.angle,ce.penumbra,ce.decay);break;case"HemisphereLight":bf=new bv(ce.color,ce.groundColor,ce.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":bf=cb(ce.geometry);var be=bg(ce.material);bf=bf.bones&&0<bf.bones.length?new cu(bf,be):new eO(bf,be);break;case"LOD":bf=new gx;break;case"Line":bf=new b3(cb(ce.geometry),bg(ce.material),ce.mode);break;case"LineLoop":bf=new ci(cb(ce.geometry),bg(ce.material));break;case"LineSegments":bf=new fG(cb(ce.geometry),bg(ce.material));break;case"PointCloud":case"Points":bf=new fE(cb(ce.geometry),bg(ce.material));break;case"Sprite":bf=new aF(bg(ce.material));break;case"Group":bf=new bU;break;default:bf=new fs}bf.uuid=ce.uuid;void 0!==ce.name&&(bf.name=ce.name);void 0!==ce.matrix?(bb.fromArray(ce.matrix),bb.decompose(bf.position,bf.quaternion,bf.scale)):(void 0!==ce.position&&bf.position.fromArray(ce.position),void 0!==ce.rotation&&bf.rotation.fromArray(ce.rotation),void 0!==ce.quaternion&&bf.quaternion.fromArray(ce.quaternion),void 0!==ce.scale&&bf.scale.fromArray(ce.scale));void 0!==ce.castShadow&&(bf.castShadow=ce.castShadow);void 0!==ce.receiveShadow&&(bf.receiveShadow=ce.receiveShadow);ce.shadow&&(void 0!==ce.shadow.bias&&(bf.shadow.bias=ce.shadow.bias),void 0!==ce.shadow.radius&&(bf.shadow.radius=ce.shadow.radius),void 0!==ce.shadow.mapSize&&bf.shadow.mapSize.fromArray(ce.shadow.mapSize),void 0!==ce.shadow.camera&&(bf.shadow.camera=this.parseObject(ce.shadow.camera)));void 0!==ce.visible&&(bf.visible=ce.visible);void 0!==ce.userData&&(bf.userData=ce.userData);if(void 0!==ce.children){for(var be=ce.children,bd=0;bd<be.length;bd++){bf.add(this.parseObject(be[bd],cd,cc))}}if("LOD"===ce.type){for(ce=ce.levels,be=0;be<ce.length;be++){var bd=ce[be],bc=bf.getObjectByProperty("uuid",bd.object);void 0!==bc&&bf.addLevel(bc,bd.distance)}}return bf}}()});var bs={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},dQ={RepeatWrapping:1000,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},dE={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};Object.assign(cx.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(bb){bb=this.getUtoTmapping(bb);return this.getPoint(bb)},getPoints:function(bc){void 0===bc&&(bc=5);for(var bb=[],bd=0;bd<=bc;bd++){bb.push(this.getPoint(bd/bc))}return bb},getSpacedPoints:function(bc){void 0===bc&&(bc=5);for(var bb=[],bd=0;bd<=bc;bd++){bb.push(this.getPointAt(bd/bc))}return bb},getLength:function(){var bb=this.getLengths();return bb[bb.length-1]},getLengths:function(bc){void 0===bc&&(bc=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===bc+1&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=!1;var bb=[],bg=this.getPoint(0),bf,be=0;bb.push(0);for(bf=1;bf<=bc;bf++){var bd=this.getPoint(bf/bc);be+=bd.distanceTo(bg);bb.push(be);bg=bd}return this.cacheArcLengths=bb},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(bc,bb){var cb=this.getLengths(),bg=cb.length;bb=bb?bb:bc*cb[bg-1];for(var bf=0,be=bg-1,bd;bf<=be;){if(bc=Math.floor(bf+(be-bf)/2),bd=cb[bc]-bb,0>bd){bf=bc+1}else{if(0<bd){be=bc-1}else{be=bc;break}}}bc=be;if(cb[bc]===bb){return bc/(bg-1)}bf=cb[bc];return(bc+(bb-bf)/(cb[bc+1]-bf))/(bg-1)},getTangent:function(bc){var bb=bc-0.0001;bc+=0.0001;0>bb&&(bb=0);1<bc&&(bc=1);bb=this.getPoint(bb);return this.getPoint(bc).clone().sub(bb).normalize()},getTangentAt:function(bb){bb=this.getUtoTmapping(bb);return this.getTangent(bb)},computeFrenetFrames:function(cg,cf){var ce=new ft,cd=[],cc=[],cb=[],bg=new ft,bf=new fN,be;for(be=0;be<=cg;be++){var bd=be/cg;cd[be]=this.getTangentAt(bd);cd[be].normalize()}cc[0]=new ft;cb[0]=new ft;be=Number.MAX_VALUE;bd=Math.abs(cd[0].x);var bc=Math.abs(cd[0].y),bb=Math.abs(cd[0].z);bd<=be&&(be=bd,ce.set(1,0,0));bc<=be&&(be=bc,ce.set(0,1,0));bb<=be&&ce.set(0,0,1);bg.crossVectors(cd[0],ce).normalize();cc[0].crossVectors(cd[0],bg);cb[0].crossVectors(cd[0],cc[0]);for(be=1;be<=cg;be++){cc[be]=cc[be-1].clone(),cb[be]=cb[be-1].clone(),bg.crossVectors(cd[be-1],cd[be]),bg.length()>Number.EPSILON&&(bg.normalize(),ce=Math.acos(fK.clamp(cd[be-1].dot(cd[be]),-1,1)),cc[be].applyMatrix4(bf.makeRotationAxis(bg,ce))),cb[be].crossVectors(cd[be],cc[be])}if(!0===cf){for(ce=Math.acos(fK.clamp(cc[0].dot(cc[cg]),-1,1)),ce/=cg,0<cd[0].dot(bg.crossVectors(cc[0],cc[cg]))&&(ce=-ce),be=1;be<=cg;be++){cc[be].applyMatrix4(bf.makeRotationAxis(cd[be],ce*be)),cb[be].crossVectors(cd[be],cc[be])}}return{tangents:cd,normals:cc,binormals:cb}}});ev.prototype=Object.create(cx.prototype);ev.prototype.constructor=ev;ev.prototype.isLineCurve=!0;ev.prototype.getPoint=function(bc){if(1===bc){return this.v2.clone()}var bb=this.v2.clone().sub(this.v1);bb.multiplyScalar(bc).add(this.v1);return bb};ev.prototype.getPointAt=function(bb){return this.getPoint(bb)};ev.prototype.getTangent=function(bb){return this.v2.clone().sub(this.v1).normalize()};cM.prototype=Object.assign(Object.create(cx.prototype),{constructor:cM,add:function(bb){this.curves.push(bb)},closePath:function(){var bc=this.curves[0].getPoint(0),bb=this.curves[this.curves.length-1].getPoint(1);bc.equals(bb)||this.curves.push(new ev(bb,bc))},getPoint:function(bc){var bb=bc*this.getLength(),bd=this.getCurveLengths();for(bc=0;bc<bd.length;){if(bd[bc]>=bb){return bb=bd[bc]-bb,bc=this.curves[bc],bd=bc.getLength(),bc.getPointAt(0===bd?0:1-bb/bd)}bc++}return null},getLength:function(){var bb=this.getCurveLengths();return bb[bb.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length){return this.cacheLengths}for(var bc=[],bb=0,be=0,bd=this.curves.length;be<bd;be++){bb+=this.curves[be].getLength(),bc.push(bb)}return this.cacheLengths=bc},getSpacedPoints:function(bc){void 0===bc&&(bc=40);for(var bb=[],bd=0;bd<=bc;bd++){bb.push(this.getPoint(bd/bc))}this.autoClose&&bb.push(bb[0]);return bb},getPoints:function(bc){bc=bc||12;for(var bb=[],cc,cb=0,bg=this.curves;cb<bg.length;cb++){for(var bf=bg[cb],bf=bf.getPoints(bf&&bf.isEllipseCurve?2*bc:bf&&bf.isLineCurve?1:bf&&bf.isSplineCurve?bc*bf.points.length:bc),be=0;be<bf.length;be++){var bd=bf[be];cc&&cc.equals(bd)||(bb.push(bd),cc=bd)}}this.autoClose&&1<bb.length&&!bb[bb.length-1].equals(bb[0])&&bb.push(bb[0]);return bb},createPointsGeometry:function(bb){bb=this.getPoints(bb);return this.createGeometry(bb)},createSpacedPointsGeometry:function(bb){bb=this.getSpacedPoints(bb);return this.createGeometry(bb)},createGeometry:function(bc){for(var bb=new fL,bf=0,be=bc.length;bf<be;bf++){var bd=bc[bf];bb.vertices.push(new ft(bd.x,bd.y,bd.z||0))}return bb}});c7.prototype=Object.create(cx.prototype);c7.prototype.constructor=c7;c7.prototype.isEllipseCurve=!0;c7.prototype.getPoint=function(bc){for(var bb=2*Math.PI,bf=this.aEndAngle-this.aStartAngle,be=Math.abs(bf)<Number.EPSILON;0>bf;){bf+=bb}for(;bf>bb;){bf-=bb}bf<Number.EPSILON&&(bf=be?0:bb);!0!==this.aClockwise||be||(bf=bf===bb?-bb:bf-bb);bb=this.aStartAngle+bc*bf;bc=this.aX+this.xRadius*Math.cos(bb);var bd=this.aY+this.yRadius*Math.sin(bb);0!==this.aRotation&&(bb=Math.cos(this.aRotation),bf=Math.sin(this.aRotation),be=bc-this.aX,bd-=this.aY,bc=be*bb-bd*bf+this.aX,bd=be*bf+bd*bb+this.aY);return new fX(bc,bd)};aR.prototype=Object.create(cx.prototype);aR.prototype.constructor=aR;aR.prototype.isSplineCurve=!0;aR.prototype.getPoint=function(bc){var bb=this.points,bg=(bb.length-1)*bc;bc=Math.floor(bg);var bg=bg-bc,bf=bb[0===bc?bc:bc-1],be=bb[bc],bd=bb[bc>bb.length-2?bb.length-1:bc+1],bb=bb[bc>bb.length-3?bb.length-1:bc+2];return new fX(dn(bg,bf.x,be.x,bd.x,bb.x),dn(bg,bf.y,be.y,bd.y,bb.y))};eZ.prototype=Object.create(cx.prototype);eZ.prototype.constructor=eZ;eZ.prototype.getPoint=function(bc){var bb=this.v0,bf=this.v1,be=this.v2,bd=this.v3;return new fX(a3(bc,bb.x,bf.x,be.x,bd.x),a3(bc,bb.y,bf.y,be.y,bd.y))};eM.prototype=Object.create(cx.prototype);eM.prototype.constructor=eM;eM.prototype.getPoint=function(bc){var bb=this.v0,be=this.v1,bd=this.v2;return new fX(bk(bc,bb.x,be.x,bd.x),bk(bc,bb.y,be.y,bd.y))};var bh=Object.assign(Object.create(cM.prototype),{fromPoints:function(bc){this.moveTo(bc[0].x,bc[0].y);for(var bb=1,bd=bc.length;bb<bd;bb++){this.lineTo(bc[bb].x,bc[bb].y)}},moveTo:function(bc,bb){this.currentPoint.set(bc,bb)},lineTo:function(bc,bb){var bd=new ev(this.currentPoint.clone(),new fX(bc,bb));this.curves.push(bd);this.currentPoint.set(bc,bb)},quadraticCurveTo:function(bc,bb,be,bd){bc=new eM(this.currentPoint.clone(),new fX(bc,bb),new fX(be,bd));this.curves.push(bc);this.currentPoint.set(be,bd)},bezierCurveTo:function(bc,bb,bg,bf,be,bd){bc=new eZ(this.currentPoint.clone(),new fX(bc,bb),new fX(bg,bf),new fX(be,bd));this.curves.push(bc);this.currentPoint.set(be,bd)},splineThru:function(bc){var bb=[this.currentPoint.clone()].concat(bc),bb=new aR(bb);this.curves.push(bb);this.currentPoint.copy(bc[bc.length-1])},arc:function(bc,bb,bg,bf,be,bd){this.absarc(bc+this.currentPoint.x,bb+this.currentPoint.y,bg,bf,be,bd)},absarc:function(bc,bb,bg,bf,be,bd){this.absellipse(bc,bb,bg,bg,bf,be,bd)},ellipse:function(bc,bb,cc,cb,bg,bf,be,bd){this.absellipse(bc+this.currentPoint.x,bb+this.currentPoint.y,cc,cb,bg,bf,be,bd)},absellipse:function(bc,bb,cc,cb,bg,bf,be,bd){bc=new c7(bc,bb,cc,cb,bg,bf,be,bd);0<this.curves.length&&(bb=bc.getPoint(0),bb.equals(this.currentPoint)||this.lineTo(bb.x,bb.y));this.curves.push(bc);bc=bc.getPoint(1);this.currentPoint.copy(bc)}});cA.prototype=bh;bh.constructor=cA;aG.prototype=Object.assign(Object.create(bh),{constructor:aG,getPointsHoles:function(bc){for(var bb=[],be=0,bd=this.holes.length;be<bd;be++){bb[be]=this.holes[be].getPoints(bc)}return bb},extractAllPoints:function(bb){return{shape:this.getPoints(bb),holes:this.getPointsHoles(bb)}},extractPoints:function(bb){return this.extractAllPoints(bb)}});Object.assign(eX.prototype,{moveTo:function(bc,bb){this.currentPath=new cA;this.subPaths.push(this.currentPath);this.currentPath.moveTo(bc,bb)},lineTo:function(bc,bb){this.currentPath.lineTo(bc,bb)},quadraticCurveTo:function(bc,bb,be,bd){this.currentPath.quadraticCurveTo(bc,bb,be,bd)},bezierCurveTo:function(bc,bb,bg,bf,be,bd){this.currentPath.bezierCurveTo(bc,bb,bg,bf,be,bd)},splineThru:function(bb){this.currentPath.splineThru(bb)},toShapes:function(db,da){function cg(df){for(var de=[],ec=0,eb=df.length;ec<eb;ec++){var ea=df[ec],dg=new aG;dg.curves=ea.curves;de.push(dg)}return de}function cf(eg,ef){for(var ee=ef.length,ed=!1,ec=ee-1,eb=0;eb<ee;ec=eb++){var ea=ef[ec],dg=ef[eb],df=dg.x-ea.x,de=dg.y-ea.y;if(Math.abs(de)>Number.EPSILON){if(0>de&&(ea=ef[eb],df=-df,dg=ef[ec],de=-de),!(eg.y<ea.y||eg.y>dg.y)){if(eg.y===ea.y){if(eg.x===ea.x){return !0}}else{ec=de*(eg.x-ea.x)-df*(eg.y-ea.y);if(0===ec){return !0}0>ec||(ed=!ed)}}}else{if(eg.y===ea.y&&(dg.x<=eg.x&&eg.x<=ea.x||ea.x<=eg.x&&eg.x<=dg.x)){return !0}}}return ed}var ce=aM.isClockWise,cd=this.subPaths;if(0===cd.length){return[]}if(!0===da){return cg(cd)}da=[];if(1===cd.length){var cc=cd[0];var cb=new aG;cb.curves=cc.curves;da.push(cb);return da}var bg=!ce(cd[0].getPoints()),bg=db?!bg:bg;cb=[];var bf=[],be=[],bc=0;bf[bc]=void 0;be[bc]=[];for(var bd=0,bb=cd.length;bd<bb;bd++){cc=cd[bd];var dc=cc.getPoints();var dd=ce(dc);(dd=db?!dd:dd)?(!bg&&bf[bc]&&bc++,bf[bc]={s:new aG,p:dc},bf[bc].s.curves=cc.curves,bg&&bc++,be[bc]=[]):be[bc].push({h:cc,p:dc[0]})}if(!bf[0]){return cg(cd)}if(1<bf.length){bd=!1;db=[];ce=0;for(cd=bf.length;ce<cd;ce++){cb[ce]=[]}ce=0;for(cd=bf.length;ce<cd;ce++){for(cc=be[ce],dd=0;dd<cc.length;dd++){bg=cc[dd];bc=!0;for(dc=0;dc<bf.length;dc++){cf(bg.p,bf[dc].p)&&(ce!==dc&&db.push({froms:ce,tos:dc,hole:dd}),bc?(bc=!1,cb[dc].push(bg)):bd=!0)}bc&&cb[ce].push(bg)}}0<db.length&&(bd||(be=cb))}bd=0;for(ce=bf.length;bd<ce;bd++){for(cb=bf[bd].s,da.push(cb),db=be[bd],cd=0,cc=db.length;cd<cc;cd++){cb.holes.push(db[cd].h)}}return da}});Object.assign(eK.prototype,{isFont:!0,generateShapes:function(fb,fa,eg){void 0===fa&&(fa=100);void 0===eg&&(eg=4);var ef=this.data;fb=String(fb).split("");var ee=fa/ef.resolution,ed=(ef.boundingBox.yMax-ef.boundingBox.yMin+ef.underlineThickness)*ee,ec=0,eb=0;fa=[];for(var ea=0;ea<fb.length;ea++){var dg=fb[ea];if("\n"===dg){ec=0,eb-=ed}else{var df;var dd=ee;var de=ec,db=eb;if(dg=ef.glyphs[dg]||ef.glyphs["?"]){var cd=new eX,cf=[];if(dg.o){for(var cb=dg._cachedOutline||(dg._cachedOutline=dg.o.split(" ")),cc=0,bg=cb.length;cc<bg;){switch(cb[cc++]){case"m":var da=cb[cc++]*dd+de;var dc=cb[cc++]*dd+db;cd.moveTo(da,dc);break;case"l":da=cb[cc++]*dd+de;dc=cb[cc++]*dd+db;cd.lineTo(da,dc);break;case"q":var cg=cb[cc++]*dd+de;var ce=cb[cc++]*dd+db;var bf=cb[cc++]*dd+de;var be=cb[cc++]*dd+db;cd.quadraticCurveTo(bf,be,cg,ce);if(df=cf[cf.length-1]){var bc=df.x;df=df.y;for(var bd=1;bd<=eg;bd++){var bb=bd/eg;bk(bb,bc,bf,cg);bk(bb,df,be,ce)}}break;case"b":if(cg=cb[cc++]*dd+de,ce=cb[cc++]*dd+db,bf=cb[cc++]*dd+de,be=cb[cc++]*dd+db,da=cb[cc++]*dd+de,dc=cb[cc++]*dd+db,cd.bezierCurveTo(bf,be,da,dc,cg,ce),df=cf[cf.length-1]){for(bc=df.x,df=df.y,bd=1;bd<=eg;bd++){bb=bd/eg,a3(bb,bc,bf,da,cg),a3(bb,df,be,dc,ce)}}}}}dd={offsetX:dg.ha*dd,path:cd}}else{dd=void 0}ec+=dd.offsetX;fa.push(dd.path)}}eg=[];ef=0;for(fb=fa.length;ef<fb;ef++){Array.prototype.push.apply(eg,fa[ef].toShapes())}return eg}});Object.assign(c3.prototype,{load:function(bc,bb,bf,be){var bd=this;(new f5(this.manager)).load(bc,function(bg){try{var cc=JSON.parse(bg)}catch(cb){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),cc=JSON.parse(bg.substring(65,bg.length-2))}bg=bd.parse(cc);bb&&bb(bg)},bf,be)},parse:function(bb){return new eK(bb)}});var eE,d2={getContext:function(){void 0===eE&&(eE=new (window.AudioContext||window.webkitAudioContext));return eE},setContext:function(bb){eE=bb}};Object.assign(ey.prototype,{load:function(bc,bb,bf,be){var bd=new f5(this.manager);bd.setResponseType("arraybuffer");bd.load(bc,function(bg){d2.getContext().decodeAudioData(bg,function(cb){bb(cb)})},bf,be)}});Object.assign(cL.prototype,{update:function(){var ce,cd,cc,cb,bg,bf,be,bd,bc=new fN,bb=new fN;return function(cf){if(ce!==this||cd!==cf.focus||cc!==cf.fov||cb!==cf.aspect*this.aspect||bg!==cf.near||bf!==cf.far||be!==cf.zoom||bd!==this.eyeSep){ce=this;cd=cf.focus;cc=cf.fov;cb=cf.aspect*this.aspect;bg=cf.near;bf=cf.far;be=cf.zoom;var dc=cf.projectionMatrix.clone();bd=this.eyeSep/2;var db=bd*bg/cd,dd=bg*Math.tan(fK.DEG2RAD*cc*0.5)/be;bb.elements[12]=-bd;bc.elements[12]=bd;var cg=-dd*cb+db;var da=dd*cb+db;dc.elements[0]=2*bg/(da-cg);dc.elements[8]=(da+cg)/(da-cg);this.cameraL.projectionMatrix.copy(dc);cg=-dd*cb-db;da=dd*cb-db;dc.elements[0]=2*bg/(da-cg);dc.elements[8]=(da+cg)/(da-cg);this.cameraR.projectionMatrix.copy(dc)}this.cameraL.matrixWorld.copy(cf.matrixWorld).multiply(bb);this.cameraR.matrixWorld.copy(cf.matrixWorld).multiply(bc)}}()});co.prototype=Object.create(fs.prototype);co.prototype.constructor=co;em.prototype=Object.assign(Object.create(fs.prototype),{constructor:em,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(bb){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=bb;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(bb){this.gain.gain.value=bb},updateMatrixWorld:function(){var bc=new ft,bb=new d6,be=new ft,bd=new ft;return function(bg){fs.prototype.updateMatrixWorld.call(this,bg);bg=this.context.listener;var bf=this.up;this.matrixWorld.decompose(bc,bb,be);bd.set(0,0,-1).applyQuaternion(bb);bg.positionX?(bg.positionX.setValueAtTime(bc.x,this.context.currentTime),bg.positionY.setValueAtTime(bc.y,this.context.currentTime),bg.positionZ.setValueAtTime(bc.z,this.context.currentTime),bg.forwardX.setValueAtTime(bd.x,this.context.currentTime),bg.forwardY.setValueAtTime(bd.y,this.context.currentTime),bg.forwardZ.setValueAtTime(bd.z,this.context.currentTime),bg.upX.setValueAtTime(bf.x,this.context.currentTime),bg.upY.setValueAtTime(bf.y,this.context.currentTime),bg.upZ.setValueAtTime(bf.z,this.context.currentTime)):(bg.setPosition(bc.x,bc.y,bc.z),bg.setOrientation(bd.x,bd.y,bd.z,bf.x,bf.y,bf.z))}}()});eA.prototype=Object.assign(Object.create(fs.prototype),{constructor:eA,getOutput:function(){return this.gain},setNodeSource:function(bb){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=bb;this.connect();return this},setBuffer:function(bb){this.buffer=bb;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying){console.warn("THREE.Audio: Audio is already playing.")}else{if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.")}else{var bb=this.context.createBufferSource();bb.buffer=this.buffer;bb.loop=this.loop;bb.onended=this.onEnded.bind(this);bb.playbackRate.setValueAtTime(this.playbackRate,this.startTime);bb.start(0,this.startTime);this.isPlaying=!0;this.source=bb;return this.connect()}}},pause:function(){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.")}else{return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this}},stop:function(){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.")}else{return this.source.stop(),this.startTime=0,this.isPlaying=!1,this}},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var bc=1,bb=this.filters.length;bc<bb;bc++){this.filters[bc-1].connect(this.filters[bc])}this.filters[this.filters.length-1].connect(this.getOutput())}else{this.source.connect(this.getOutput())}return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var bc=1,bb=this.filters.length;bc<bb;bc++){this.filters[bc-1].disconnect(this.filters[bc])}this.filters[this.filters.length-1].disconnect(this.getOutput())}else{this.source.disconnect(this.getOutput())}return this},getFilters:function(){return this.filters},setFilters:function(bb){bb||(bb=[]);!0===this.isPlaying?(this.disconnect(),this.filters=bb,this.connect()):this.filters=bb;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(bb){return this.setFilters(bb?[bb]:[])},setPlaybackRate:function(bb){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.")}else{return this.playbackRate=bb,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this}},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return !1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(bb){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.")}else{return this.loop=bb,!0===this.isPlaying&&(this.source.loop=this.loop),this}},getVolume:function(){return this.gain.gain.value},setVolume:function(bb){this.gain.gain.value=bb;return this}});dR.prototype=Object.assign(Object.create(eA.prototype),{constructor:dR,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(bb){this.panner.refDistance=bb},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(bb){this.panner.rolloffFactor=bb},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(bb){this.panner.distanceModel=bb},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(bb){this.panner.maxDistance=bb},updateMatrixWorld:function(){var bb=new ft;return function(bc){fs.prototype.updateMatrixWorld.call(this,bc);bb.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(bb.x,bb.y,bb.z)}}()});Object.assign(dF.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var bc=0,bb=this.getFrequencyData(),bd=0;bd<bb.length;bd++){bc+=bb[bd]}return bc/bb.length}});Object.assign(dv.prototype,{accumulate:function(bc,bb){var bf=this.buffer,be=this.valueSize;bc=bc*be+be;var bd=this.cumulativeWeight;if(0===bd){for(bd=0;bd!==be;++bd){bf[bc+bd]=bf[bd]}bd=bb}else{bd+=bb,this._mixBufferRegion(bf,bc,0,bb/bd,be)}this.cumulativeWeight=bd},apply:function(bc){var bb=this.valueSize,bg=this.buffer;bc=bc*bb+bb;var bf=this.cumulativeWeight,be=this.binding;this.cumulativeWeight=0;1>bf&&this._mixBufferRegion(bg,bc,3*bb,1-bf,bb);for(var bf=bb,bd=bb+bb;bf!==bd;++bf){if(bg[bf]!==bg[bf+bb]){be.setValue(bg,bc);break}}},saveOriginalState:function(){var bc=this.buffer,bb=this.valueSize,be=3*bb;this.binding.getValue(bc,be);for(var bd=bb;bd!==be;++bd){bc[bd]=bc[be+bd%bb]}this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(bc,bb,bf,be,bd){if(0.5<=be){for(be=0;be!==bd;++be){bc[bb+be]=bc[bf+be]}}},_slerp:function(bc,bb,be,bd){d6.slerpFlat(bc,bb,bc,bb,bc,be,bd)},_lerp:function(bc,bb,cc,cb,bg){for(var bf=1-cb,be=0;be!==bg;++be){var bd=bb+be;bc[bd]=bc[bd]*bf+bc[cc+be]*cb}}});Object.assign(cz.prototype,{getValue:function(bc,bb){this.bind();var bd=this._bindings[this._targetGroup.nCachedObjects_];void 0!==bd&&bd.getValue(bc,bb)},setValue:function(bc,bb){for(var bf=this._bindings,be=this._targetGroup.nCachedObjects_,bd=bf.length;be!==bd;++be){bf[be].setValue(bc,bb)}},bind:function(){for(var bc=this._bindings,bb=this._targetGroup.nCachedObjects_,bd=bc.length;bb!==bd;++bb){bc[bb].bind()}},unbind:function(){for(var bc=this._bindings,bb=this._targetGroup.nCachedObjects_,bd=bc.length;bb!==bd;++bb){bc[bb].unbind()}}});Object.assign(fk,{Composite:cz,create:function(bc,bb,bd){return bc&&bc.isAnimationObjectGroup?new fk.Composite(bc,bb,bd):new fk(bc,bb,bd)},sanitizeNodeName:function(bb){return bb.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var bc=new RegExp("^"+/((?:[\w-]+[\/:])*)/.source+/([\w-\.]+)?/.source+/(?:\.([\w-]+)(?:\[(.+)\])?)?/.source+/\.([\w-]+)(?:\[(.+)\])?/.source+"$"),bb=["material","materials","bones"];return function(bg){var bf=bc.exec(bg);if(!bf){throw Error("PropertyBinding: Cannot parse trackName: "+bg)}var bf={nodeName:bf[2],objectName:bf[3],objectIndex:bf[4],propertyName:bf[5],propertyIndex:bf[6]},be=bf.nodeName&&bf.nodeName.lastIndexOf(".");if(void 0!==be&&-1!==be){var bd=bf.nodeName.substring(be+1);-1!==bb.indexOf(bd)&&(bf.nodeName=bf.nodeName.substring(0,be),bf.objectName=bd)}if(null===bf.propertyName||0===bf.propertyName.length){throw Error("PropertyBinding: can not parse propertyName from trackName: "+bg)}return bf}}(),findNode:function(bc,bb){if(!bb||""===bb||"root"===bb||"."===bb||-1===bb||bb===bc.name||bb===bc.uuid){return bc}if(bc.skeleton){var be=function(bf){for(var cb=0;cb<bf.bones.length;cb++){var bg=bf.bones[cb];if(bg.name===bb){return bg}}return null}(bc.skeleton);if(be){return be}}if(bc.children){var bd=function(bf){for(var cb=0;cb<bf.length;cb++){var bg=bf[cb];if(bg.name===bb||bg.uuid===bb||(bg=bd(bg.children))){return bg}}return null};if(bc=bd(bc.children)){return bc}}return null}});Object.assign(fk.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(bc,bb){bc[bb]=this.node[this.propertyName]},function(bc,bb){for(var bf=this.resolvedProperty,be=0,bd=bf.length;be!==bd;++be){bc[bb++]=bf[be]}},function(bc,bb){bc[bb]=this.resolvedProperty[this.propertyIndex]},function(bc,bb){this.resolvedProperty.toArray(bc,bb)}],SetterByBindingTypeAndVersioning:[[function(bc,bb){this.node[this.propertyName]=bc[bb]},function(bc,bb){this.node[this.propertyName]=bc[bb];this.targetObject.needsUpdate=!0},function(bc,bb){this.node[this.propertyName]=bc[bb];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(bc,bb){for(var bf=this.resolvedProperty,be=0,bd=bf.length;be!==bd;++be){bf[be]=bc[bb++]}},function(bc,bb){for(var bf=this.resolvedProperty,be=0,bd=bf.length;be!==bd;++be){bf[be]=bc[bb++]}this.targetObject.needsUpdate=!0},function(bc,bb){for(var bf=this.resolvedProperty,be=0,bd=bf.length;be!==bd;++be){bf[be]=bc[bb++]}this.targetObject.matrixWorldNeedsUpdate=!0}],[function(bc,bb){this.resolvedProperty[this.propertyIndex]=bc[bb]},function(bc,bb){this.resolvedProperty[this.propertyIndex]=bc[bb];this.targetObject.needsUpdate=!0},function(bc,bb){this.resolvedProperty[this.propertyIndex]=bc[bb];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(bc,bb){this.resolvedProperty.fromArray(bc,bb)},function(bc,bb){this.resolvedProperty.fromArray(bc,bb);this.targetObject.needsUpdate=!0},function(bc,bb){this.resolvedProperty.fromArray(bc,bb);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(bc,bb){this.bind();this.getValue(bc,bb)},setValue:function(bc,bb){this.bind();this.setValue(bc,bb)},bind:function(){var bc=this.node,bb=this.parsedPath,bg=bb.objectName,bf=bb.propertyName,be=bb.propertyIndex;bc||(this.node=bc=fk.findNode(this.rootNode,bb.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(bc){if(bg){var bd=bb.objectIndex;switch(bg){case"materials":if(!bc.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!bc.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}bc=bc.material.materials;break;case"bones":if(!bc.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}bc=bc.skeleton.bones;for(bg=0;bg<bc.length;bg++){if(bc[bg].name===bd){bd=bg;break}}break;default:if(void 0===bc[bg]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}bc=bc[bg]}if(void 0!==bd){if(void 0===bc[bd]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,bc);return}bc=bc[bd]}}bd=bc[bf];if(void 0===bd){console.error("THREE.PropertyBinding: Trying to update property for track: "+bb.nodeName+"."+bf+" but it wasn't found.",bc)}else{bb=this.Versioning.None;void 0!==bc.needsUpdate?(bb=this.Versioning.NeedsUpdate,this.targetObject=bc):void 0!==bc.matrixWorldNeedsUpdate&&(bb=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=bc);bg=this.BindingType.Direct;if(void 0!==be){if("morphTargetInfluences"===bf){if(!bc.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(bc.geometry.isBufferGeometry){if(!bc.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(bg=0;bg<this.node.geometry.morphAttributes.position.length;bg++){if(bc.geometry.morphAttributes.position[bg].name===be){be=bg;break}}}else{if(!bc.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(bg=0;bg<this.node.geometry.morphTargets.length;bg++){if(bc.geometry.morphTargets[bg].name===be){be=bg;break}}}}bg=this.BindingType.ArrayElement;this.resolvedProperty=bd;this.propertyIndex=be}else{void 0!==bd.fromArray&&void 0!==bd.toArray?(bg=this.BindingType.HasFromToArray,this.resolvedProperty=bd):Array.isArray(bd)?(bg=this.BindingType.EntireArray,this.resolvedProperty=bd):this.propertyName=bf}this.getValue=this.GetterByBindingType[bg];this.setValue=this.SetterByBindingTypeAndVersioning[bg][bb]}}else{console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(fk.prototype,{_getValue_unbound:fk.prototype.getValue,_setValue_unbound:fk.prototype.setValue});Object.assign(cn.prototype,{isAnimationObjectGroup:!0,add:function(df){for(var de=this._objects,dd=de.length,dc=this.nCachedObjects_,db=this._indicesByUUID,da=this._paths,cg=this._parsedPaths,cf=this._bindings,ce=cf.length,cd=0,cc=arguments.length;cd!==cc;++cd){var bg=arguments[cd],cb=bg.uuid,bf=db[cb];if(void 0===bf){bf=dd++;db[cb]=bf;de.push(bg);for(var cb=0,bd=ce;cb!==bd;++cb){cf[cb].push(new fk(bg,da[cb],cg[cb]))}}else{if(bf<dc){var be=--dc,bd=de[be];db[bd.uuid]=bf;de[bf]=bd;db[cb]=be;de[be]=bg;cb=0;for(bd=ce;cb!==bd;++cb){var bc=cf[cb],bb=bc[bf];bc[bf]=bc[be];void 0===bb&&(bb=new fk(bg,da[cb],cg[cb]));bc[be]=bb}}else{void 0!==de[bf]&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}}}this.nCachedObjects_=dc},remove:function(db){for(var da=this._objects,cg=this.nCachedObjects_,cf=this._indicesByUUID,ce=this._bindings,cd=ce.length,cc=0,cb=arguments.length;cc!==cb;++cc){var bg=arguments[cc],bf=bg.uuid,be=cf[bf];if(void 0!==be&&be>=cg){var bc=cg++,bd=da[bc];cf[bd.uuid]=be;da[be]=bd;cf[bf]=bc;da[bc]=bg;bg=0;for(bf=cd;bg!==bf;++bg){var bd=ce[bg],bb=bd[be];bd[be]=bd[bc];bd[bc]=bb}}}this.nCachedObjects_=cg},uncache:function(db){for(var da,cg,cf=this._objects,ce=cf.length,cd=this.nCachedObjects_,cc=this._indicesByUUID,cb=this._bindings,bg=cb.length,bf=0,be=arguments.length;bf!==be;++bf){cg=arguments[bf].uuid;var bc=cc[cg];if(void 0!==bc){if(delete cc[cg],bc<cd){var bd=--cd,bb=cf[bd];cg=--ce;da=cf[cg];cc[bb.uuid]=bc;cf[bc]=bb;cc[da.uuid]=bd;cf[bd]=da;cf.pop();for(var bb=0,dc=bg;bb!==dc;++bb){da=cb[bb];var dd=da[cg];da[bc]=da[bd];da[bd]=dd;da.pop()}}else{for(cg=--ce,da=cf[cg],cc[da.uuid]=bc,cf[bc]=da,cf.pop(),bb=0,dc=bg;bb!==dc;++bb){da=cb[bb],da[bc]=da[cg],da.pop()}}}}this.nCachedObjects_=cd},subscribe_:function(ce,cd){var cc=this._bindingsIndicesByPath,cb=cc[ce],bg=this._bindings;if(void 0!==cb){return bg[cb]}var bf=this._paths,be=this._parsedPaths,bd=this._objects,bc=this.nCachedObjects_,bb=Array(bd.length),cb=bg.length;cc[ce]=cb;bf.push(ce);be.push(cd);bg.push(bb);cc=bc;for(cb=bd.length;cc!==cb;++cc){bb[cc]=new fk(bd[cc],ce,cd)}return bb},unsubscribe_:function(bc){var bb=this._bindingsIndicesByPath,cc=bb[bc];if(void 0!==cc){var cb=this._paths,bg=this._parsedPaths,bf=this._bindings,be=bf.length-1,bd=bf[be];bb[bc[be]]=cc;bf[cc]=bd;bf.pop();bg[cc]=bg[be];bg.pop();cb[cc]=cb[be];cb.pop()}}});Object.assign(b5.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(bb){this._startTime=bb;return this},setLoop:function(bc,bb){this.loop=bc;this.repetitions=bb;return this},setEffectiveWeight:function(bb){this.weight=bb;this._effectiveWeight=this.enabled?bb:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(bb){return this._scheduleFading(bb,0,1)},fadeOut:function(bb){return this._scheduleFading(bb,1,0)},crossFadeFrom:function(bc,bb,bf){bc.fadeOut(bb);this.fadeIn(bb);if(bf){bf=this._clip.duration;var be=bc._clip.duration,bd=bf/be;bc.warp(1,be/bf,bb);this.warp(bd,1,bb)}return this},crossFadeTo:function(bc,bb,bd){return bc.crossFadeFrom(this,bb,bd)},stopFading:function(){var bb=this._weightInterpolant;null!==bb&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(bb));return this},setEffectiveTimeScale:function(bb){this.timeScale=bb;this._effectiveTimeScale=this.paused?0:bb;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(bb){this.timeScale=this._clip.duration/bb;return this.stopWarping()},syncWith:function(bb){this.time=bb.time;this.timeScale=bb.timeScale;return this.stopWarping()},halt:function(bb){return this.warp(this._effectiveTimeScale,0,bb)},warp:function(bc,bb,cb){var bg=this._mixer,bf=bg.time,be=this._timeScaleInterpolant,bd=this.timeScale;null===be&&(this._timeScaleInterpolant=be=bg._lendControlInterpolant());bg=be.parameterPositions;be=be.sampleValues;bg[0]=bf;bg[1]=bf+cb;be[0]=bc/bd;be[1]=bb/bd;return this},stopWarping:function(){var bb=this._timeScaleInterpolant;null!==bb&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(bb));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(bc,bb,cb,bg){if(this.enabled){var bf=this._startTime;if(null!==bf){bb=(bc-bf)*cb;if(0>bb||0===cb){return}this._startTime=null;bb*=cb}bb*=this._updateTimeScale(bc);cb=this._updateTime(bb);bc=this._updateWeight(bc);if(0<bc){bb=this._interpolants;for(var bf=this._propertyBindings,be=0,bd=bb.length;be!==bd;++be){bb[be].evaluate(cb),bf[be].accumulate(bg,bc)}}}else{this._updateWeight(bc)}},_updateWeight:function(bc){var bb=0;if(this.enabled){var bb=this.weight,be=this._weightInterpolant;if(null!==be){var bd=be.evaluate(bc)[0],bb=bb*bd;bc>be.parameterPositions[1]&&(this.stopFading(),0===bd&&(this.enabled=!1))}}return this._effectiveWeight=bb},_updateTimeScale:function(bc){var bb=0;if(!this.paused){var bb=this.timeScale,be=this._timeScaleInterpolant;if(null!==be){var bd=be.evaluate(bc)[0],bb=bb*bd;bc>be.parameterPositions[1]&&(this.stopWarping(),0===bb?this.paused=!0:this.timeScale=bb)}}return this._effectiveTimeScale=bb},_updateTime:function(bc){var bb=this.time+bc;if(0===bc){return bb}var cb=this._clip.duration,bg=this.loop,bf=this._loopCount;if(2200===bg){bc:{if(-1===bf&&(this._loopCount=0,this._setEndings(!0,!0,!1)),bb>=cb){bb=cb}else{if(0>bb){bb=0}else{break bc}}this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>bc?-1:1})}}else{bg=2202===bg;-1===bf&&(0<=bc?(bf=0,this._setEndings(!0,0===this.repetitions,bg)):this._setEndings(0===this.repetitions,!0,bg));if(bb>=cb||0>bb){var be=Math.floor(bb/cb),bb=bb-cb*be,bf=bf+Math.abs(be),bd=this.repetitions-bf;0>bd?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,bb=0<bc?cb:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<bc?1:-1})):(0===bd?(bc=0>bc,this._setEndings(bc,!bc,bg)):this._setEndings(!1,!1,bg),this._loopCount=bf,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:be}))}if(bg&&1===(bf&1)){return this.time=bb,cb-bb}}return this.time=bb},_setEndings:function(bc,bb,be){var bd=this._interpolantSettings;be?(bd.endingStart=2401,bd.endingEnd=2401):(bd.endingStart=bc?this.zeroSlopeAtStart?2401:2400:2402,bd.endingEnd=bb?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(bc,bb,bg){var bf=this._mixer,be=bf.time,bd=this._weightInterpolant;null===bd&&(this._weightInterpolant=bd=bf._lendControlInterpolant());bf=bd.parameterPositions;bd=bd.sampleValues;bf[0]=be;bd[0]=bb;bf[1]=be+bc;bd[1]=bg;return this}});Object.assign(bM.prototype,c1.prototype,{_bindAction:function(cg,cf){var ce=cg._localRoot||this._root,cd=cg._clip.tracks,cc=cd.length,cb=cg._propertyBindings;cg=cg._interpolants;var bg=ce.uuid,bf=this._bindingsByRootAndName,be=bf[bg];void 0===be&&(be={},bf[bg]=be);for(bf=0;bf!==cc;++bf){var bd=cd[bf],bc=bd.name,bb=be[bc];if(void 0===bb){bb=cb[bf];if(void 0!==bb){null===bb._cacheIndex&&(++bb.referenceCount,this._addInactiveBinding(bb,bg,bc));continue}bb=new dv(fk.create(ce,bc,cf&&cf._propertyBindings[bf].binding.parsedPath),bd.ValueTypeName,bd.getValueSize());++bb.referenceCount;this._addInactiveBinding(bb,bg,bc)}cb[bf]=bb;cg[bf].resultBuffer=bb.buffer}},_activateAction:function(bc){if(!this._isActiveAction(bc)){if(null===bc._cacheIndex){var bb=(bc._localRoot||this._root).uuid,bf=bc._clip.uuid,be=this._actionsByClip[bf];this._bindAction(bc,be&&be.knownActions[0]);this._addInactiveAction(bc,bf,bb)}bb=bc._propertyBindings;bf=0;for(be=bb.length;bf!==be;++bf){var bd=bb[bf];0===bd.useCount++&&(this._lendBinding(bd),bd.saveOriginalState())}this._lendAction(bc)}},_deactivateAction:function(bc){if(this._isActiveAction(bc)){for(var bb=bc._propertyBindings,bf=0,be=bb.length;bf!==be;++bf){var bd=bb[bf];0===--bd.useCount&&(bd.restoreOriginalState(),this._takeBackBinding(bd))}this._takeBackAction(bc)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0},_isActiveAction:function(bb){bb=bb._cacheIndex;return null!==bb&&bb<this._nActiveActions},_addInactiveAction:function(bc,bb,bg){var bf=this._actions,be=this._actionsByClip,bd=be[bb];void 0===bd?(bd={knownActions:[bc],actionByRoot:{}},bc._byClipCacheIndex=0,be[bb]=bd):(bb=bd.knownActions,bc._byClipCacheIndex=bb.length,bb.push(bc));bc._cacheIndex=bf.length;bf.push(bc);bd.actionByRoot[bg]=bc},_removeInactiveAction:function(bc){var bb=this._actions,cb=bb[bb.length-1],bg=bc._cacheIndex;cb._cacheIndex=bg;bb[bg]=cb;bb.pop();bc._cacheIndex=null;var bb=bc._clip.uuid,cb=this._actionsByClip,bg=cb[bb],bf=bg.knownActions,be=bf[bf.length-1],bd=bc._byClipCacheIndex;be._byClipCacheIndex=bd;bf[bd]=be;bf.pop();bc._byClipCacheIndex=null;delete bg.actionByRoot[(bc._localRoot||this._root).uuid];0===bf.length&&delete cb[bb];this._removeInactiveBindingsForAction(bc)},_removeInactiveBindingsForAction:function(bc){bc=bc._propertyBindings;for(var bb=0,be=bc.length;bb!==be;++bb){var bd=bc[bb];0===--bd.referenceCount&&this._removeInactiveBinding(bd)}},_lendAction:function(bc){var bb=this._actions,bf=bc._cacheIndex,be=this._nActiveActions++,bd=bb[be];bc._cacheIndex=be;bb[be]=bc;bd._cacheIndex=bf;bb[bf]=bd},_takeBackAction:function(bc){var bb=this._actions,bf=bc._cacheIndex,be=--this._nActiveActions,bd=bb[be];bc._cacheIndex=be;bb[be]=bc;bd._cacheIndex=bf;bb[bf]=bd},_addInactiveBinding:function(bc,bb,bg){var bf=this._bindingsByRootAndName,be=bf[bb],bd=this._bindings;void 0===be&&(be={},bf[bb]=be);be[bg]=bc;bc._cacheIndex=bd.length;bd.push(bc)},_removeInactiveBinding:function(bc){var bb=this._bindings,cc=bc.binding,cb=cc.rootNode.uuid,cc=cc.path,bg=this._bindingsByRootAndName,bf=bg[cb],be=bb[bb.length-1];bc=bc._cacheIndex;be._cacheIndex=bc;bb[bc]=be;bb.pop();delete bf[cc];bc:{for(var bd in bf){break bc}delete bg[cb]}},_lendBinding:function(bc){var bb=this._bindings,bf=bc._cacheIndex,be=this._nActiveBindings++,bd=bb[be];bc._cacheIndex=be;bb[be]=bc;bd._cacheIndex=bf;bb[bf]=bd},_takeBackBinding:function(bc){var bb=this._bindings,bf=bc._cacheIndex,be=--this._nActiveBindings,bd=bb[be];bc._cacheIndex=be;bb[be]=bc;bd._cacheIndex=bf;bb[bf]=bd},_lendControlInterpolant:function(){var bc=this._controlInterpolants,bb=this._nActiveControlInterpolants++,bd=bc[bb];void 0===bd&&(bd=new dq(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),bd.__cacheIndex=bb,bc[bb]=bd);return bd},_takeBackControlInterpolant:function(bc){var bb=this._controlInterpolants,bf=bc.__cacheIndex,be=--this._nActiveControlInterpolants,bd=bb[be];bc.__cacheIndex=be;bb[be]=bc;bd.__cacheIndex=bf;bb[bf]=bd},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(bc,bb){var bg=bb||this._root,bf=bg.uuid,bg="string"===typeof bc?bD.findByName(bg,bc):bc;bc=null!==bg?bg.uuid:bc;var be=this._actionsByClip[bc],bd=null;if(void 0!==be){bd=be.actionByRoot[bf];if(void 0!==bd){return bd}bd=be.knownActions[0];null===bg&&(bg=bd._clip)}if(null===bg){return null}bb=new b5(this,bg,bb);this._bindAction(bb,bd);this._addInactiveAction(bb,bc,bf);return bb},existingAction:function(bc,bb){var bd=bb||this._root;bb=bd.uuid;bd="string"===typeof bc?bD.findByName(bd,bc):bc;bc=this._actionsByClip[bd?bd.uuid:bc];return void 0!==bc?bc.actionByRoot[bb]||null:null},stopAllAction:function(){for(var bc=this._actions,bb=this._nActiveActions,bf=this._bindings,be=this._nActiveBindings,bd=this._nActiveBindings=this._nActiveActions=0;bd!==bb;++bd){bc[bd].reset()}for(bd=0;bd!==be;++bd){bf[bd].useCount=0}return this},update:function(bc){bc*=this.timeScale;for(var bb=this._actions,cb=this._nActiveActions,bg=this.time+=bc,bf=Math.sign(bc),be=this._accuIndex^=1,bd=0;bd!==cb;++bd){bb[bd]._update(bg,bc,bf,be)}bc=this._bindings;bb=this._nActiveBindings;for(bd=0;bd!==bb;++bd){bc[bd].apply(be)}return this},getRoot:function(){return this._root},uncacheClip:function(cd){var cc=this._actions;cd=cd.uuid;var cb=this._actionsByClip,bg=cb[cd];if(void 0!==bg){for(var bg=bg.knownActions,bf=0,be=bg.length;bf!==be;++bf){var bd=bg[bf];this._deactivateAction(bd);var bc=bd._cacheIndex,bb=cc[cc.length-1];bd._cacheIndex=null;bd._byClipCacheIndex=null;bb._cacheIndex=bc;cc[bc]=bb;cc.pop();this._removeInactiveBindingsForAction(bd)}delete cb[cd]}},uncacheRoot:function(bc){bc=bc.uuid;var bb=this._actionsByClip;for(be in bb){var bf=bb[be].actionByRoot[bc];void 0!==bf&&(this._deactivateAction(bf),this._removeInactiveAction(bf))}var be=this._bindingsByRootAndName[bc];if(void 0!==be){for(var bd in be){bc=be[bd],bc.restoreOriginalState(),this._removeInactiveBinding(bc)}}},uncacheAction:function(bc,bb){bc=this.existingAction(bc,bb);null!==bc&&(this._deactivateAction(bc),this._removeInactiveAction(bc))}});f2.prototype.clone=function(){return new f2(void 0===this.value.clone?this.value:this.value.clone())};dh.prototype=Object.assign(Object.create(fU.prototype),{constructor:dh,isInstancedBufferGeometry:!0,addGroup:function(bc,bb,bd){this.groups.push({start:bc,count:bb,materialIndex:bd})},copy:function(bc){var bb=bc.index;null!==bb&&this.setIndex(bb.clone());var bb=bc.attributes;for(be in bb){this.addAttribute(be,bb[be].clone())}bc=bc.groups;var be=0;for(bb=bc.length;be<bb;be++){var bd=bc[be];this.addGroup(bd.start,bd.count,bd.materialIndex)}return this}});Object.defineProperties(cX.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(cX.prototype,{isInterleavedBufferAttribute:!0,setX:function(bc,bb){this.data.array[bc*this.data.stride+this.offset]=bb;return this},setY:function(bc,bb){this.data.array[bc*this.data.stride+this.offset+1]=bb;return this},setZ:function(bc,bb){this.data.array[bc*this.data.stride+this.offset+2]=bb;return this},setW:function(bc,bb){this.data.array[bc*this.data.stride+this.offset+3]=bb;return this},getX:function(bb){return this.data.array[bb*this.data.stride+this.offset]},getY:function(bb){return this.data.array[bb*this.data.stride+this.offset+1]},getZ:function(bb){return this.data.array[bb*this.data.stride+this.offset+2]},getW:function(bb){return this.data.array[bb*this.data.stride+this.offset+3]},setXY:function(bc,bb,bd){bc=bc*this.data.stride+this.offset;this.data.array[bc+0]=bb;this.data.array[bc+1]=bd;return this},setXYZ:function(bc,bb,be,bd){bc=bc*this.data.stride+this.offset;this.data.array[bc+0]=bb;this.data.array[bc+1]=be;this.data.array[bc+2]=bd;return this},setXYZW:function(bc,bb,bf,be,bd){bc=bc*this.data.stride+this.offset;this.data.array[bc+0]=bb;this.data.array[bc+1]=bf;this.data.array[bc+2]=be;this.data.array[bc+3]=bd;return this}});Object.defineProperty(eo.prototype,"needsUpdate",{set:function(bb){!0===bb&&this.version++}});Object.assign(eo.prototype,{isInterleavedBuffer:!0,setArray:function(bb){if(Array.isArray(bb)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=void 0!==bb?bb.length/this.stride:0;this.array=bb},setDynamic:function(bb){this.dynamic=bb;return this},copy:function(bb){this.array=new bb.array.constructor(bb.array);this.count=bb.count;this.stride=bb.stride;this.dynamic=bb.dynamic;return this},copyAt:function(bc,bb,bf){bc*=this.stride;bf*=bb.stride;for(var be=0,bd=this.stride;be<bd;be++){this.array[bc+be]=bb.array[bf+be]}return this},set:function(bc,bb){void 0===bb&&(bb=0);this.array.set(bc,bb);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(bb){this.onUploadCallback=bb;return this}});cF.prototype=Object.assign(Object.create(eo.prototype),{constructor:cF,isInstancedInterleavedBuffer:!0,copy:function(bb){eo.prototype.copy.call(this,bb);this.meshPerAttribute=bb.meshPerAttribute;return this}});ct.prototype=Object.assign(Object.create(fQ.prototype),{constructor:ct,isInstancedBufferAttribute:!0,copy:function(bb){fQ.prototype.copy.call(this,bb);this.meshPerAttribute=bb.meshPerAttribute;return this}});Object.assign(cQ.prototype,{linePrecision:1,set:function(bc,bb){this.ray.set(bc,bb)},setFromCamera:function(bc,bb){bb&&bb.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(bb.matrixWorld),this.ray.direction.set(bc.x,bc.y,0.5).unproject(bb).sub(this.ray.origin).normalize()):bb&&bb.isOrthographicCamera?(this.ray.origin.set(bc.x,bc.y,(bb.near+bb.far)/(bb.near-bb.far)).unproject(bb),this.ray.direction.set(0,0,-1).transformDirection(bb.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(bc,bb){var bd=[];ch(bc,this,bd,bb);bd.sort(gj);return bd},intersectObjects:function(bc,bb){var bf=[];if(!1===Array.isArray(bc)){return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),bf}for(var be=0,bd=bc.length;be<bd;be++){ch(bc[be],this,bf,bb)}bf.sort(gj);return bf}});Object.assign(fS.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var bc=0;if(this.autoStart&&!this.running){return this.start(),0}if(this.running){var bb=("undefined"===typeof performance?Date:performance).now(),bc=(bb-this.oldTime)/1000;this.oldTime=bb;this.elapsedTime+=bc}return bc}});Object.assign(fw.prototype,{set:function(bc,bb,bd){this.radius=bc;this.phi=bb;this.theta=bd;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.radius=bb.radius;this.phi=bb.phi;this.theta=bb.theta;return this},makeSafe:function(){this.phi=Math.max(0.000001,Math.min(Math.PI-0.000001,this.phi));return this},setFromVector3:function(bb){this.radius=bb.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(bb.x,bb.z),this.phi=Math.acos(fK.clamp(bb.y/this.radius,-1,1)));return this}});Object.assign(e8.prototype,{set:function(bc,bb,bd){this.radius=bc;this.theta=bb;this.y=bd;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(bb){this.radius=bb.radius;this.theta=bb.theta;this.y=bb.y;return this},setFromVector3:function(bb){this.radius=Math.sqrt(bb.x*bb.x+bb.z*bb.z);this.theta=Math.atan2(bb.x,bb.z);this.y=bb.y;return this}});b7.prototype=Object.create(fs.prototype);b7.prototype.constructor=b7;b7.prototype.isImmediateRenderObject=!0;bO.prototype=Object.create(fG.prototype);bO.prototype.constructor=bO;bO.prototype.update=function(){var bc=new ft,bb=new ft,bd=new cl;return function(){var da,cg=["a","b","c"];this.object.updateMatrixWorld(!0);bd.getNormalMatrix(this.object.matrixWorld);var cf=this.object.matrixWorld,ce=this.geometry.attributes.position;if((da=this.object.geometry)&&da.isGeometry){for(var cd=da.vertices,cc=da.faces,cb=da=0,bg=cc.length;cb<bg;cb++){for(var bf=cc[cb],dc=0,be=bf.vertexNormals.length;dc<be;dc++){var db=bf.vertexNormals[dc];bc.copy(cd[bf[cg[dc]]]).applyMatrix4(cf);bb.copy(db).applyMatrix3(bd).normalize().multiplyScalar(this.size).add(bc);ce.setXYZ(da,bc.x,bc.y,bc.z);da+=1;ce.setXYZ(da,bb.x,bb.y,bb.z);da+=1}}}else{if(da&&da.isBufferGeometry){for(cg=da.attributes.position,cd=da.attributes.normal,dc=da=0,be=cg.count;dc<be;dc++){bc.set(cg.getX(dc),cg.getY(dc),cg.getZ(dc)).applyMatrix4(cf),bb.set(cd.getX(dc),cd.getY(dc),cd.getZ(dc)),bb.applyMatrix3(bd).normalize().multiplyScalar(this.size).add(bc),ce.setXYZ(da,bc.x,bc.y,bc.z),da+=1,ce.setXYZ(da,bb.x,bb.y,bb.z),da+=1}}}ce.needsUpdate=!0}}();d4.prototype=Object.create(fs.prototype);d4.prototype.constructor=d4;d4.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};d4.prototype.update=function(){var bc=new ft,bb=new ft;return function(){this.light.updateMatrixWorld();var be=this.light.distance?this.light.distance:1000,bd=be*Math.tan(this.light.angle);this.cone.scale.set(bd,bd,be);bc.setFromMatrixPosition(this.light.matrixWorld);bb.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(bb.sub(bc));void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();dS.prototype=Object.create(fG.prototype);dS.prototype.constructor=dS;dS.prototype.onBeforeRender=function(){var bc=new ft,bb=new fN,bd=new fN;return function(){var cd=this.bones,cc=this.geometry,cb=cc.getAttribute("position");bd.getInverse(this.root.matrixWorld);for(var bg=0,bf=0;bg<cd.length;bg++){var be=cd[bg];be.parent&&be.parent.isBone&&(bb.multiplyMatrices(bd,be.matrixWorld),bc.setFromMatrixPosition(bb),cb.setXYZ(bf,bc.x,bc.y,bc.z),bb.multiplyMatrices(bd,be.parent.matrixWorld),bc.setFromMatrixPosition(bb),cb.setXYZ(bf+1,bc.x,bc.y,bc.z),bf+=2)}cc.getAttribute("position").needsUpdate=!0}}();dH.prototype=Object.create(eO.prototype);dH.prototype.constructor=dH;dH.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};dH.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};dw.prototype=Object.create(fs.prototype);dw.prototype.constructor=dw;dw.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};dw.prototype.update=function(){var bc=0.5*this.light.width,bb=0.5*this.light.height,be=this.line.geometry.attributes.position,bd=be.array;bd[0]=bc;bd[1]=-bb;bd[2]=0;bd[3]=bc;bd[4]=bb;bd[5]=0;bd[6]=-bc;bd[7]=bb;bd[8]=0;bd[9]=-bc;bd[10]=-bb;bd[11]=0;bd[12]=bc;bd[13]=-bb;bd[14]=0;be.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};dj.prototype=Object.create(fs.prototype);dj.prototype.constructor=dj;dj.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};dj.prototype.update=function(){var bc=new ft,bb=new fZ,bd=new fZ;return function(){var cc=this.children[0];if(void 0!==this.color){this.material.color.set(this.color)}else{var cb=cc.geometry.getAttribute("color");bb.copy(this.light.color);bd.copy(this.light.groundColor);for(var bg=0,bf=cb.count;bg<bf;bg++){var be=bg<bf/2?bb:bd;cb.setXYZ(bg,be.r,be.g,be.b)}cb.needsUpdate=!0}cc.lookAt(bc.setFromMatrixPosition(this.light.matrixWorld).negate())}}();cS.prototype=Object.create(fG.prototype);cS.prototype.constructor=cS;fC.prototype=Object.create(fG.prototype);fC.prototype.constructor=fC;gl.prototype=Object.create(fG.prototype);gl.prototype.constructor=gl;gl.prototype.update=function(){var bc=new ft,bb=new ft,bd=new cl;return function(){this.object.updateMatrixWorld(!0);bd.getNormalMatrix(this.object.matrixWorld);for(var cg=this.object.matrixWorld,cf=this.geometry.attributes.position,ce=this.object.geometry,cd=ce.vertices,ce=ce.faces,cc=0,cb=0,bg=ce.length;cb<bg;cb++){var bf=ce[cb],be=bf.normal;bc.copy(cd[bf.a]).add(cd[bf.b]).add(cd[bf.c]).divideScalar(3).applyMatrix4(cg);bb.copy(be).applyMatrix3(bd).normalize().multiplyScalar(this.size).add(bc);cf.setXYZ(cc,bc.x,bc.y,bc.z);cc+=1;cf.setXYZ(cc,bb.x,bb.y,bb.z);cc+=1}cf.needsUpdate=!0}}();cZ.prototype=Object.create(fs.prototype);cZ.prototype.constructor=cZ;cZ.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};cZ.prototype.update=function(){var bc=new ft,bb=new ft,bd=new ft;return function(){bc.setFromMatrixPosition(this.light.matrixWorld);bb.setFromMatrixPosition(this.light.target.matrixWorld);bd.subVectors(bb,bc);this.lightPlane.lookAt(bd);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(bd);this.targetLine.scale.z=bd.length()}}();fV.prototype=Object.create(fG.prototype);fV.prototype.constructor=fV;fV.prototype.update=function(){function bc(bg,cd,cc,cb){be.set(cd,cc,cb).unproject(bd);bg=bf[bg];if(void 0!==bg){for(cd=bb.getAttribute("position"),cc=0,cb=bg.length;cc<cb;cc++){cd.setXYZ(bg[cc],be.x,be.y,be.z)}}}var bb,bf,be=new ft,bd=new eU;return function(){bb=this.geometry;bf=this.pointMap;bd.projectionMatrix.copy(this.camera.projectionMatrix);bc("c",0,0,-1);bc("t",0,0,1);bc("n1",-1,-1,-1);bc("n2",1,-1,-1);bc("n3",-1,1,-1);bc("n4",1,1,-1);bc("f1",-1,-1,1);bc("f2",1,-1,1);bc("f3",-1,1,1);bc("f4",1,1,1);bc("u1",0.7,1.1,-1);bc("u2",-0.7,1.1,-1);bc("u3",0,2,-1);bc("cf1",-1,0,1);bc("cf2",1,0,1);bc("cf3",0,-1,1);bc("cf4",0,1,1);bc("cn1",-1,0,-1);bc("cn2",1,0,-1);bc("cn3",0,-1,-1);bc("cn4",0,1,-1);bb.getAttribute("position").needsUpdate=!0}}();gy.prototype=Object.create(fG.prototype);gy.prototype.constructor=gy;gy.prototype.update=function(){var bb=new ej;return function(bc){void 0!==bc&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&bb.setFromObject(this.object);if(!bb.isEmpty()){bc=bb.min;var bf=bb.max,be=this.geometry.attributes.position,bd=be.array;bd[0]=bf.x;bd[1]=bf.y;bd[2]=bf.z;bd[3]=bc.x;bd[4]=bf.y;bd[5]=bf.z;bd[6]=bc.x;bd[7]=bc.y;bd[8]=bf.z;bd[9]=bf.x;bd[10]=bc.y;bd[11]=bf.z;bd[12]=bf.x;bd[13]=bf.y;bd[14]=bc.z;bd[15]=bc.x;bd[16]=bf.y;bd[17]=bc.z;bd[18]=bc.x;bd[19]=bc.y;bd[20]=bc.z;bd[21]=bf.x;bd[22]=bc.y;bd[23]=bc.z;be.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();gy.prototype.setFromObject=function(bb){this.object=bb;this.update();return this};fy.prototype=Object.create(fG.prototype);fy.prototype.constructor=fy;fy.prototype.onBeforeRender=function(){var bb=this.box;bb.isEmpty()||(bb.getCenter(this.position),bb.getSize(this.scale),this.scale.multiplyScalar(0.5))};fh.prototype=Object.create(b3.prototype);fh.prototype.constructor=fh;fh.prototype.onBeforeRender=function(){var bb=-this.plane.constant;1e-8>Math.abs(bb)&&(bb=1e-8);this.scale.set(0.5*this.size,0.5*this.size,bb);this.lookAt(this.plane.normal);this.updateMatrixWorld()};var fn,bZ;ga.prototype=Object.create(fs.prototype);ga.prototype.constructor=ga;ga.prototype.setDirection=function(){var bc=new ft,bb;return function(bd){0.99999<bd.y?this.quaternion.set(0,0,0,1):-0.99999>bd.y?this.quaternion.set(1,0,0,0):(bc.set(bd.z,0,-bd.x).normalize(),bb=Math.acos(bd.y),this.quaternion.setFromAxisAngle(bc,bb))}}();ga.prototype.setLength=function(bc,bb,bd){void 0===bb&&(bb=0.2*bc);void 0===bd&&(bd=0.2*bb);this.line.scale.set(1,Math.max(0,bc-bb),1);this.line.updateMatrix();this.cone.scale.set(bd,bb,bd);this.cone.position.y=bc;this.cone.updateMatrix()};ga.prototype.setColor=function(bb){this.line.material.color.copy(bb);this.cone.material.color.copy(bb)};e4.prototype=Object.create(fG.prototype);e4.prototype.constructor=e4;var es=new ft,a0=new bG,aO=new bG,aD=new bG;fF.prototype=Object.create(cx.prototype);fF.prototype.constructor=fF;fF.prototype.getPoint=function(bc){var bb=this.points,cc=bb.length;bc*=cc-(this.closed?0:1);var cb=Math.floor(bc);bc-=cb;this.closed?cb+=0<cb?0:(Math.floor(Math.abs(cb)/bb.length)+1)*bb.length:0===bc&&cb===cc-1&&(cb=cc-2,bc=1);if(this.closed||0<cb){var bg=bb[(cb-1)%cc]}else{es.subVectors(bb[0],bb[1]).add(bb[0]),bg=es}var bf=bb[cb%cc];var be=bb[(cb+1)%cc];this.closed||cb+2<cc?bb=bb[(cb+2)%cc]:(es.subVectors(bb[cc-1],bb[cc-2]).add(bb[cc-1]),bb=es);if(void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var bd="chordal"===this.type?0.5:0.25,cc=Math.pow(bg.distanceToSquared(bf),bd),cb=Math.pow(bf.distanceToSquared(be),bd),bd=Math.pow(be.distanceToSquared(bb),bd);0.0001>cb&&(cb=1);0.0001>cc&&(cc=cb);0.0001>bd&&(bd=cb);a0.initNonuniformCatmullRom(bg.x,bf.x,be.x,bb.x,cc,cb,bd);aO.initNonuniformCatmullRom(bg.y,bf.y,be.y,bb.y,cc,cb,bd);aD.initNonuniformCatmullRom(bg.z,bf.z,be.z,bb.z,cc,cb,bd)}else{"catmullrom"===this.type&&(cc=void 0!==this.tension?this.tension:0.5,a0.initCatmullRom(bg.x,bf.x,be.x,bb.x,cc),aO.initCatmullRom(bg.y,bf.y,be.y,bb.y,cc),aD.initCatmullRom(bg.z,bf.z,be.z,bb.z,cc))}return new ft(a0.calc(bc),aO.calc(bc),aD.calc(bc))};eY.prototype=Object.create(cx.prototype);eY.prototype.constructor=eY;eY.prototype.getPoint=function(bc){var bb=this.v0,bf=this.v1,be=this.v2,bd=this.v3;return new ft(a3(bc,bb.x,bf.x,be.x,bd.x),a3(bc,bb.y,bf.y,be.y,bd.y),a3(bc,bb.z,bf.z,be.z,bd.z))};eL.prototype=Object.create(cx.prototype);eL.prototype.constructor=eL;eL.prototype.getPoint=function(bc){var bb=this.v0,be=this.v1,bd=this.v2;return new ft(bk(bc,bb.x,be.x,bd.x),bk(bc,bb.y,be.y,bd.y),bk(bc,bb.z,be.z,bd.z))};ez.prototype=Object.create(cx.prototype);ez.prototype.constructor=ez;ez.prototype.getPoint=function(bc){if(1===bc){return this.v2.clone()}var bb=new ft;bb.subVectors(this.v2,this.v1);bb.multiplyScalar(bc);bb.add(this.v1);return bb};eR.prototype=Object.create(c7.prototype);eR.prototype.constructor=eR;cx.create=function(bc,bb){console.log("THREE.Curve.create() has been deprecated");bc.prototype=Object.create(cx.prototype);bc.prototype.constructor=bc;bc.prototype.getPoint=bb;return bc};eJ.prototype=Object.create(fF.prototype);ex.prototype=Object.create(fF.prototype);bu.prototype=Object.create(fF.prototype);Object.assign(bu.prototype,{initFromArray:function(bb){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(bb){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(bb){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});cS.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};dS.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(d3.prototype,{center:function(bb){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(bb)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(bb){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(bb)},size:function(bb){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(bb)}});Object.assign(ej.prototype,{center:function(bb){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(bb)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(bb){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(bb)},isIntersectionSphere:function(bb){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(bb)},size:function(bb){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(bb)}});aL.prototype.center=function(bb){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(bb)};fK.random16=function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");return Math.random()};Object.assign(cl.prototype,{flattenToArrayOffset:function(bc,bb){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(bc,bb)},multiplyVector3:function(bb){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return bb.applyMatrix3(this)},multiplyVector3Array:function(bb){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(bc,bb,bd){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(bc)},applyToVector3Array:function(bc,bb,bd){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(fN.prototype,{extractPosition:function(bb){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(bb)},flattenToArrayOffset:function(bc,bb){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(bc,bb)},getPosition:function(){var bb;return function(){void 0===bb&&(bb=new ft);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return bb.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(bb){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(bb)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(bb){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return bb.applyMatrix4(this)},multiplyVector4:function(bb){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return bb.applyMatrix4(this)},multiplyVector3Array:function(bb){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(bb){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");bb.transformDirection(this)},crossVector:function(bb){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return bb.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(bc,bb,bd){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(bc)},applyToVector3Array:function(bc,bb,bd){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(bc,bb,bg,bf,be,bd){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(bc,bb,bf,bg,be,bd)}});gh.prototype.isIntersectionLine=function(bb){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(bb)};d6.prototype.multiplyVector3=function(bb){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return bb.applyQuaternion(this)};Object.assign(ep.prototype,{isIntersectionBox:function(bb){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(bb)},isIntersectionPlane:function(bb){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(bb)},isIntersectionSphere:function(bb){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(bb)}});Object.assign(aG.prototype,{extrude:function(bb){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new cU(this,bb)},makeGeometry:function(bb){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new cB(this,bb)}});Object.assign(fX.prototype,{fromAttribute:function(bc,bb,bd){console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(bc,bb,bd)}});Object.assign(ft.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(bb){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(bb)},getScaleFromMatrix:function(bb){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(bb)},getColumnFromMatrix:function(bc,bb){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(bb,bc)},applyProjection:function(bb){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(bb)},fromAttribute:function(bc,bb,bd){console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(bc,bb,bd)}});Object.assign(fJ.prototype,{fromAttribute:function(bc,bb,bd){console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(bc,bb,bd)}});fL.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(fs.prototype,{getChildByName:function(bb){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(bb)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(bc,bb){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(bb,bc)}});Object.defineProperties(fs.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(bb){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=bb}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(gx.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(f9.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(cx.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(bb){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=bb}});dU.prototype.setLens=function(bc,bb){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==bb&&(this.filmGauge=bb);this.setFocalLength(bc)};Object.defineProperties(go.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(bb){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=bb}},shadowCameraLeft:{set:function(bb){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=bb}},shadowCameraRight:{set:function(bb){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=bb}},shadowCameraTop:{set:function(bb){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=bb}},shadowCameraBottom:{set:function(bb){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=bb}},shadowCameraNear:{set:function(bb){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=bb}},shadowCameraFar:{set:function(bb){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=bb}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(bb){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=bb}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(bb){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=bb}},shadowMapHeight:{set:function(bb){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=bb}}});Object.defineProperties(fQ.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}}});Object.assign(fU.prototype,{addIndex:function(bb){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(bb)},addDrawCall:function(bc,bb,bd){void 0!==bd&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(bc,bb)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(fU.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.defineProperties(f2.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(fM.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new fZ}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(bb){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===bb}}});Object.defineProperties(bW.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return !1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(gz.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(bb){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=bb}}});Object.assign(b6.prototype,{getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(bb){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(bb)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});Object.defineProperties(b6.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(bb){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=bb}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(bb){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=bb}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(bb){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");this.shadowMap.cullFace=bb}}});Object.defineProperties(fm.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(bb){bb=1!==bb;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+bb+".");this.renderReverseSided=bb}}});Object.defineProperties(bV.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(bb){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=bb}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(bb){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=bb}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(bb){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=bb}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(bb){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=bb}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(bb){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=bb}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(bb){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=bb}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(bb){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=bb}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(bb){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=bb}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(bb){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=bb}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(bb){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=bb}}});eA.prototype.load=function(bc){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var bb=this;(new ey).load(bc,function(bd){bb.setBuffer(bd)});return this};dF.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};co.prototype.updateCubeMap=function(bc,bb){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(bc,bb)};fu.WebGLRenderTargetCube=bC;fu.WebGLRenderTarget=bV;fu.WebGLRenderer=b6;fu.ShaderLib=d5;fu.UniformsLib=fP;fu.UniformsUtils=a9;fu.ShaderChunk=fI;fu.FogExp2=gt;fu.Fog=f4;fu.Scene=cY;fu.LensFlare=bN;fu.Sprite=aF;fu.LOD=gx;fu.SkinnedMesh=cu;fu.Skeleton=f9;fu.Bone=cG;fu.Mesh=eO;fu.LineSegments=fG;fu.LineLoop=ci;fu.Line=b3;fu.Points=fE;fu.Group=bU;fu.VideoTexture=b0;fu.DataTexture=fY;fu.CompressedTexture=fq;fu.CubeTexture=cO;fu.CanvasTexture=cH;fu.DepthTexture=bB;fu.Texture=fO;fu.CompressedTextureLoader=dK;fu.DataTextureLoader=gk;fu.CubeTextureLoader=fT;fu.TextureLoader=bH;fu.ObjectLoader=dz;fu.MaterialLoader=gr;fu.BufferGeometryLoader=fx;fu.DefaultLoadingManager=cJ;fu.LoadingManager=cR;fu.JSONLoader=e9;fu.ImageLoader=dB;fu.FontLoader=c3;fu.FileLoader=f5;fu.Loader=fi;fu.Cache=en;fu.AudioLoader=ey;fu.SpotLightShadow=bi;fu.SpotLight=a1;fu.PointLight=aP;fu.RectAreaLight=bT;fu.HemisphereLight=bv;fu.DirectionalLightShadow=aE;fu.DirectionalLight=gw;fu.AmbientLight=f8;fu.LightShadow=b2;fu.Light=go;fu.StereoCamera=cL;fu.PerspectiveCamera=dU;fu.OrthographicCamera=a8;fu.CubeCamera=co;fu.ArrayCamera=di;fu.Camera=eU;fu.AudioListener=em;fu.PositionalAudio=dR;fu.AudioContext=d2;fu.AudioAnalyser=dF;fu.Audio=eA;fu.VectorKeyframeTrack=fW;fu.StringKeyframeTrack=aV;fu.QuaternionKeyframeTrack=c5;fu.NumberKeyframeTrack=fz;fu.ColorKeyframeTrack=gC;fu.BooleanKeyframeTrack=aJ;fu.PropertyMixer=dv;fu.PropertyBinding=fk;fu.KeyframeTrack=bx;fu.AnimationUtils=e1;fu.AnimationObjectGroup=cn;fu.AnimationMixer=bM;fu.AnimationClip=bD;fu.Uniform=f2;fu.InstancedBufferGeometry=dh;fu.BufferGeometry=fU;fu.GeometryIdCount=function(){return dL++};fu.Geometry=fL;fu.InterleavedBufferAttribute=cX;fu.InstancedInterleavedBuffer=cF;fu.InterleavedBuffer=eo;fu.InstancedBufferAttribute=ct;fu.Face3=d0;fu.Object3D=fs;fu.Raycaster=cQ;fu.Layers=dX;fu.EventDispatcher=c1;fu.Clock=fS;fu.QuaternionLinearInterpolant=a6;fu.LinearInterpolant=dq;fu.DiscreteInterpolant=bo;fu.CubicInterpolant=bA;fu.Interpolant=aS;fu.Triangle=dO;fu.Math=fK;fu.Spherical=fw;fu.Cylindrical=e8;fu.Plane=gh;fu.Frustum=dG;fu.Sphere=br;fu.Ray=ep;fu.Matrix4=fN;fu.Matrix3=cl;fu.Box3=ej;fu.Box2=d3;fu.Line3=aL;fu.Euler=b9;fu.Vector4=fJ;fu.Vector3=ft;fu.Vector2=fX;fu.Quaternion=d6;fu.Color=fZ;fu.ImmediateRenderObject=b7;fu.VertexNormalsHelper=bO;fu.SpotLightHelper=d4;fu.SkeletonHelper=dS;fu.PointLightHelper=dH;fu.RectAreaLightHelper=dw;fu.HemisphereLightHelper=dj;fu.GridHelper=cS;fu.PolarGridHelper=fC;fu.FaceNormalsHelper=gl;fu.DirectionalLightHelper=cZ;fu.CameraHelper=fV;fu.BoxHelper=gy;fu.Box3Helper=fy;fu.PlaneHelper=fh;fu.ArrowHelper=ga;fu.AxisHelper=e4;fu.CatmullRomCurve3=fF;fu.CubicBezierCurve3=eY;fu.QuadraticBezierCurve3=eL;fu.LineCurve3=ez;fu.ArcCurve=eR;fu.EllipseCurve=c7;fu.SplineCurve=aR;fu.CubicBezierCurve=eZ;fu.QuadraticBezierCurve=eM;fu.LineCurve=ev;fu.Shape=aG;fu.Path=cA;fu.ShapePath=eX;fu.Font=eK;fu.CurvePath=cM;fu.Curve=cx;fu.ShapeUtils=aM;fu.SceneUtils={createMultiMaterialObject:function(bc,bb){for(var bf=new bU,be=0,bd=bb.length;be<bd;be++){bf.add(new eO(bc,bb[be]))}return bf},detach:function(bc,bb,bd){bc.applyMatrix(bb.matrixWorld);bb.remove(bc);bd.add(bc)},attach:function(bc,bb,bd){bc.applyMatrix((new fN).getInverse(bd.matrixWorld));bb.remove(bc);bd.add(bc)}};fu.WebGLUtils=dW;fu.WireframeGeometry=e6;fu.ParametricGeometry=bp;fu.ParametricBufferGeometry=eT;fu.TetrahedronGeometry=aW;fu.TetrahedronBufferGeometry=eG;fu.OctahedronGeometry=aK;fu.OctahedronBufferGeometry=dT;fu.IcosahedronGeometry=aB;fu.IcosahedronBufferGeometry=eu;fu.DodecahedronGeometry=gs;fu.DodecahedronBufferGeometry=ei;fu.PolyhedronGeometry=a7;fu.PolyhedronBufferGeometry=bl;fu.TubeGeometry=f3;fu.TubeBufferGeometry=dZ;fu.TorusKnotGeometry=fD;fu.TorusKnotBufferGeometry=dN;fu.TorusGeometry=fo;fu.TorusBufferGeometry=dC;fu.TextGeometry=e5;fu.TextBufferGeometry=dr;fu.SphereGeometry=eS;fu.SphereBufferGeometry=dI;fu.RingGeometry=eF;fu.RingBufferGeometry=c6;fu.PlaneGeometry=a2;fu.PlaneBufferGeometry=eB;fu.LatheGeometry=et;fu.LatheBufferGeometry=cN;fu.ShapeGeometry=cB;fu.ShapeBufferGeometry=cp;fu.ExtrudeGeometry=cU;fu.ExtrudeBufferGeometry=aY;fu.EdgesGeometry=b8;fu.ConeGeometry=eh;fu.ConeBufferGeometry=dY;fu.CylinderGeometry=dx;fu.CylinderBufferGeometry=ds;fu.CircleGeometry=dM;fu.CircleBufferGeometry=bP;fu.BoxGeometry=aX;fu.BoxBufferGeometry=eN;fu.ShadowMaterial=cT;fu.SpriteMaterial=bQ;fu.RawShaderMaterial=gm;fu.ShaderMaterial=gz;fu.PointsMaterial=dl;fu.MeshPhysicalMaterial=dk;fu.MeshStandardMaterial=eH;fu.MeshPhongMaterial=bW;fu.MeshToonMaterial=c0;fu.MeshNormalMaterial=cI;fu.MeshLambertMaterial=cw;fu.MeshDepthMaterial=cC;fu.MeshDistanceMaterial=cq;fu.MeshBasicMaterial=bK;fu.LineDashedMaterial=ck;fu.LineBasicMaterial=fH;fu.Material=fM;fu.Float64BufferAttribute=bj;fu.Float32BufferAttribute=fp;fu.Uint32BufferAttribute=e0;fu.Int32BufferAttribute=bw;fu.Uint16BufferAttribute=fj;fu.Int16BufferAttribute=bI;fu.Uint8ClampedBufferAttribute=b1;fu.Uint8BufferAttribute=cj;fu.Int8BufferAttribute=cv;fu.BufferAttribute=fQ;fu.REVISION="87";fu.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};fu.CullFaceNone=0;fu.CullFaceBack=1;fu.CullFaceFront=2;fu.CullFaceFrontBack=3;fu.FrontFaceDirectionCW=0;fu.FrontFaceDirectionCCW=1;fu.BasicShadowMap=0;fu.PCFShadowMap=1;fu.PCFSoftShadowMap=2;fu.FrontSide=0;fu.BackSide=1;fu.DoubleSide=2;fu.FlatShading=1;fu.SmoothShading=2;fu.NoColors=0;fu.FaceColors=1;fu.VertexColors=2;fu.NoBlending=0;fu.NormalBlending=1;fu.AdditiveBlending=2;fu.SubtractiveBlending=3;fu.MultiplyBlending=4;fu.CustomBlending=5;fu.AddEquation=100;fu.SubtractEquation=101;fu.ReverseSubtractEquation=102;fu.MinEquation=103;fu.MaxEquation=104;fu.ZeroFactor=200;fu.OneFactor=201;fu.SrcColorFactor=202;fu.OneMinusSrcColorFactor=203;fu.SrcAlphaFactor=204;fu.OneMinusSrcAlphaFactor=205;fu.DstAlphaFactor=206;fu.OneMinusDstAlphaFactor=207;fu.DstColorFactor=208;fu.OneMinusDstColorFactor=209;fu.SrcAlphaSaturateFactor=210;fu.NeverDepth=0;fu.AlwaysDepth=1;fu.LessDepth=2;fu.LessEqualDepth=3;fu.EqualDepth=4;fu.GreaterEqualDepth=5;fu.GreaterDepth=6;fu.NotEqualDepth=7;fu.MultiplyOperation=0;fu.MixOperation=1;fu.AddOperation=2;fu.NoToneMapping=0;fu.LinearToneMapping=1;fu.ReinhardToneMapping=2;fu.Uncharted2ToneMapping=3;fu.CineonToneMapping=4;fu.UVMapping=300;fu.CubeReflectionMapping=301;fu.CubeRefractionMapping=302;fu.EquirectangularReflectionMapping=303;fu.EquirectangularRefractionMapping=304;fu.SphericalReflectionMapping=305;fu.CubeUVReflectionMapping=306;fu.CubeUVRefractionMapping=307;fu.RepeatWrapping=1000;fu.ClampToEdgeWrapping=1001;fu.MirroredRepeatWrapping=1002;fu.NearestFilter=1003;fu.NearestMipMapNearestFilter=1004;fu.NearestMipMapLinearFilter=1005;fu.LinearFilter=1006;fu.LinearMipMapNearestFilter=1007;fu.LinearMipMapLinearFilter=1008;fu.UnsignedByteType=1009;fu.ByteType=1010;fu.ShortType=1011;fu.UnsignedShortType=1012;fu.IntType=1013;fu.UnsignedIntType=1014;fu.FloatType=1015;fu.HalfFloatType=1016;fu.UnsignedShort4444Type=1017;fu.UnsignedShort5551Type=1018;fu.UnsignedShort565Type=1019;fu.UnsignedInt248Type=1020;fu.AlphaFormat=1021;fu.RGBFormat=1022;fu.RGBAFormat=1023;fu.LuminanceFormat=1024;fu.LuminanceAlphaFormat=1025;fu.RGBEFormat=1023;fu.DepthFormat=1026;fu.DepthStencilFormat=1027;fu.RGB_S3TC_DXT1_Format=2001;fu.RGBA_S3TC_DXT1_Format=2002;fu.RGBA_S3TC_DXT3_Format=2003;fu.RGBA_S3TC_DXT5_Format=2004;fu.RGB_PVRTC_4BPPV1_Format=2100;fu.RGB_PVRTC_2BPPV1_Format=2101;fu.RGBA_PVRTC_4BPPV1_Format=2102;fu.RGBA_PVRTC_2BPPV1_Format=2103;fu.RGB_ETC1_Format=2151;fu.LoopOnce=2200;fu.LoopRepeat=2201;fu.LoopPingPong=2202;fu.InterpolateDiscrete=2300;fu.InterpolateLinear=2301;fu.InterpolateSmooth=2302;fu.ZeroCurvatureEnding=2400;fu.ZeroSlopeEnding=2401;fu.WrapAroundEnding=2402;fu.TrianglesDrawMode=0;fu.TriangleStripDrawMode=1;fu.TriangleFanDrawMode=2;fu.LinearEncoding=3000;fu.sRGBEncoding=3001;fu.GammaEncoding=3007;fu.RGBEEncoding=3002;fu.LogLuvEncoding=3003;fu.RGBM7Encoding=3004;fu.RGBM16Encoding=3005;fu.RGBDEncoding=3006;fu.BasicDepthPacking=3200;fu.RGBADepthPacking=3201;fu.CubeGeometry=aX;fu.Face4=function(bc,bb,cb,bg,bf,be,bd){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new d0(bc,bb,cb,bf,be,bd)};fu.LineStrip=0;fu.LinePieces=1;fu.MeshFaceMaterial=function(bb){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return bb};fu.MultiMaterial=function(bb){void 0===bb&&(bb=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");bb.isMultiMaterial=!0;bb.materials=bb;bb.clone=function(){return bb.slice()};return bb};fu.PointCloud=function(bc,bb){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new fE(bc,bb)};fu.Particle=function(bb){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new aF(bb)};fu.ParticleSystem=function(bc,bb){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new fE(bc,bb)};fu.PointCloudMaterial=function(bb){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new dl(bb)};fu.ParticleBasicMaterial=function(bb){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new dl(bb)};fu.ParticleSystemMaterial=function(bb){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new dl(bb)};fu.Vertex=function(bc,bb,bd){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new ft(bc,bb,bd)};fu.DynamicBufferAttribute=function(bc,bb){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new fQ(bc,bb)).setDynamic(!0)};fu.Int8Attribute=function(bc,bb){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new cv(bc,bb)};fu.Uint8Attribute=function(bc,bb){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new cj(bc,bb)};fu.Uint8ClampedAttribute=function(bc,bb){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new b1(bc,bb)};fu.Int16Attribute=function(bc,bb){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new bI(bc,bb)};fu.Uint16Attribute=function(bc,bb){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new fj(bc,bb)};fu.Int32Attribute=function(bc,bb){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new bw(bc,bb)};fu.Uint32Attribute=function(bc,bb){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new e0(bc,bb)};fu.Float32Attribute=function(bc,bb){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new fp(bc,bb)};fu.Float64Attribute=function(bc,bb){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new bj(bc,bb)};fu.ClosedSplineCurve3=eJ;fu.SplineCurve3=ex;fu.Spline=bu;fu.BoundingBoxHelper=function(bc,bb){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new gy(bc,bb)};fu.EdgesHelper=function(bc,bb){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new fG(new b8(bc.geometry),new fH({color:void 0!==bb?bb:16777215}))};fu.WireframeHelper=function(bc,bb){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new fG(new e6(bc.geometry),new fH({color:void 0!==bb?bb:16777215}))};fu.XHRLoader=function(bb){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new f5(bb)};fu.BinaryTextureLoader=function(bb){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new gk(bb)};fu.GeometryUtils={merge:function(bc,bb,be){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(bb.isMesh){bb.matrixAutoUpdate&&bb.updateMatrix();var bd=bb.matrix;bb=bb.geometry}bc.merge(bb,bd,be)},center:function(bb){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return bb.center()}};fu.ImageUtils={crossOrigin:void 0,loadTexture:function(bc,bb,bf,be){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var bd=new bH;bd.setCrossOrigin(this.crossOrigin);bc=bd.load(bc,bf,void 0,be);bb&&(bc.mapping=bb);return bc},loadTextureCube:function(bc,bb,bf,be){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var bd=new fT;bd.setCrossOrigin(this.crossOrigin);bc=bd.load(bc,bf,void 0,be);bb&&(bc.mapping=bb);return bc},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};fu.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(bc,bb){console.warn("THREE.Projector: .projectVector() is now vector.project().");bc.project(bb)};this.unprojectVector=function(bc,bb){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");bc.unproject(bb)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};fu.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};Object.defineProperty(fu,"__esModule",{value:!0})})}catch(ay){if(window.console&&console.log){console.log("Failed to load three.min.js:",ay)}}function ar(aC){var aB=aC.getExtension("WEBGL_lose_context")||aC.getExtension("WEBKIT_WEBGL_lose_context")||aC.getExtension("MOZ_WEBGL_lose_context");if(aB!=null){aB.loseContext()}}var av={};function aA(){var a3=[];var be=[];var aY=10;var aR=document.createElement("canvas");var a8=new az.Scene();var a1=new az.PerspectiveCamera(75,(aR.width/aR.height),0.1,1000);var a5=new az.HemisphereLight(16777147,526368,1);a8.add(a5);var aP=new az.SpotLight(16777215);aP.position.set(100,1000,100);aP.castShadow=true;aP.shadow.mapSize.width=1024;aP.shadow.mapSize.height=1024;aP.shadow.camera.near=500;aP.shadow.camera.far=4000;aP.shadow.camera.fov=30;a8.add(aP);var bd=new az.AmbientLight(16777215,0.015);a8.add(bd);var bc=new az.WebGLRenderer({canvas:aR,antialias:true,alpha:true});bc.setSize(aR.width,aR.height);bc.setClearColor(16777215,1);var aB=new az.SphereGeometry(1,1,1);for(var bh=0;bh<aB.faces.length;bh++){aB.faces[bh].color.setHex(bh*31000*16777215)}var ba=new az.MeshBasicMaterial({color:16777215,vertexColors:az.FaceColors});var a2=new az.Mesh(aB,ba);a8.add(a2);var aU=new az.BoxGeometry(1,1,1);for(var bh=0;bh<aU.faces.length;bh++){aU.faces[bh].color.setHex(bh*5000*16777215)}var aL=new az.BoxGeometry(1,1,1);for(var bh=0;bh<aL.faces.length;bh++){aL.faces[bh].color.setHex(bh*7000*100000*16777215)}var aK=new az.BoxGeometry(1,1,1);for(var bh=0;bh<aK.faces.length;bh++){aK.faces[bh].color.setHex(bh*11000*16777215)}var aI=new az.BoxGeometry(1,1,1);for(var bh=0;bh<aI.faces.length;bh++){aI.faces[bh].color.setHex(bh*13000*16777215)}var aG=new az.BoxGeometry(1,1,1);for(var bh=0;bh<aG.faces.length;bh++){aG.faces[bh].color.setHex(bh*17000*16777215)}var aE=new az.BoxGeometry(1,1,1);for(var bh=0;bh<aE.faces.length;bh++){aE.faces[bh].color.setHex(bh*19000*16777215)}var aC=new az.BoxGeometry(1,1,1);for(var bh=0;bh<aC.faces.length;bh++){aC.faces[bh].color.setHex(bh*23000*16777215)}var bg=new az.MeshLambertMaterial({color:16777215,vertexColors:az.FaceColors});var a0=new az.MeshLambertMaterial({color:16777215,vertexColors:az.FaceColors});var aZ=new az.MeshLambertMaterial({color:16777215,vertexColors:az.FaceColors});var aX=new az.MeshLambertMaterial({color:16777215,vertexColors:az.FaceColors});var aW=new az.MeshLambertMaterial({color:16777215,vertexColors:az.FaceColors});var aV=new az.MeshLambertMaterial({color:16777215,vertexColors:az.FaceColors});var aT=new az.MeshLambertMaterial({color:16777215,vertexColors:az.FaceColors});var aD=new az.Mesh(aU,bg);var aO=new az.Mesh(aL,a0);var aN=new az.Mesh(aK,aZ);var aM=new az.Mesh(aI,aX);var aJ=new az.Mesh(aG,aW);var aH=new az.Mesh(aE,aV);var aF=new az.Mesh(aC,aT);a8.add(aD);a8.add(aO);a8.add(aN);a8.add(aM);a8.add(aJ);a8.add(aH);a8.add(aF);aD.position.x=3;aO.position.x=-3;aN.position.y=3;aM.position.y=-3;aJ.position.set(-2,2,0);aH.position.set(-2,-2,0);aF.position.set(2,-2,0);a2.position.set(2,2,0);var bj=new az.TorusBufferGeometry(2,0.5,16,100);var a7=new az.MeshLambertMaterial({color:16776960});var aQ=new az.Mesh(bj,a7);a8.add(aQ);var bi=new az.TorusKnotBufferGeometry(1,0.25,100,15);var a6=new az.MeshLambertMaterial({color:16776686});var bf=new az.Mesh(bi,a6);a8.add(bf);a1.position.z=5;a8.fog=new az.FogExp2(13421772,0.015);var a9;function aS(){if(!a9){a9=Date.now();return 0}else{var bk=(Date.now()-a9)/1000;a9=Date.now();return(1/bk)}}var a4=0;function bb(){var bl=aS();if(a4>0){a3.push(bl)}if(a4===aY){av.fps=a3;av.fpsData=a3.join("")+" fps for"+a4+" frames";av.fingerprintDigest=L.x64.hash128(be.join(""));return}aD.rotation.x+=(0.005*180)/Math.PI;aD.rotation.y+=(0.005*180)/Math.PI;aD.rotation.z+=(0.005*180)/Math.PI;aO.rotation.x+=(0.005*180)/Math.PI;aO.rotation.y+=(0.005*180)/Math.PI;aO.rotation.z-=(0.005*180)/Math.PI;aN.rotation.x+=(0.005*180)/Math.PI;aN.rotation.y-=(0.005*180)/Math.PI;aN.rotation.z+=(0.005*180)/Math.PI;aM.rotation.x+=(0.005*180)/Math.PI;aM.rotation.y-=(0.005*180)/Math.PI;aM.rotation.z-=(0.005*180)/Math.PI;aJ.rotation.x-=(0.005*180)/Math.PI;aJ.rotation.y+=(0.005*180)/Math.PI;aJ.rotation.z+=(0.005*180)/Math.PI;aH.rotation.x-=(0.005*180)/Math.PI;aH.rotation.y+=(0.005*180)/Math.PI;aH.rotation.z-=(0.005*180)/Math.PI;aF.rotation.x-=(0.005*180)/Math.PI;aF.rotation.y-=(0.005*180)/Math.PI;aF.rotation.z+=(0.005*180)/Math.PI;a2.rotation.x-=(0.005*180)/Math.PI;a2.rotation.y-=(0.005*100)/Math.PI;a2.rotation.z-=(0.005*100)/Math.PI;aQ.rotation.x+=(0.005*180)/Math.PI;aQ.rotation.y+=(0.005*180)/Math.PI;bf.rotation.x+=(0.005*180)/Math.PI;bf.rotation.y+=(0.005*100)/Math.PI;bf.rotation.z+=(0.005*100)/Math.PI;bc.render(a8,a1);if(a4<aY){var bk=aR.toDataURL();be.push(bk);a4++;requestAnimationFrame(bb)}}requestAnimationFrame(bb)}function at(){try{aA()}catch(aB){}}e.push(function(aC,aD){if(!aD.shouldFingerprintCanvas()){return}var aB=av.fingerprintDigest;if(null==aB){return}aC.wglextfp=aB});if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(aB){if(!window.IaDfp.shouldFingerprintCanvas()){return}at()})}})();var ap=["v","cnvfp","wglfp","wglvrfp","wglextfp"];var aq="0";S.push(function(au,az){if(!az.shouldFingerprintCanvas()){return}var aw={};for(var ax=0;ax<e.length;ax++){try{e[ax](aw,az)}catch(at){}}aw.v=aq;var ar=[];for(var ax=0;ax<ap.length;ax++){var av=ap[ax];var ay=aw[av];if(ay){ar.push(av+":"+ay)}}au.push("gfxfp="+ar.join(","))})})();function I(){var ar="fpua="+g("")+"&fpsc="+K("")+"&fpsw="+ae("")+"&fppi="+ao("")+"&fptz="+G("")+"&fpln="+T("")+"&fpcp="+U("")+"&fpvc="+F()+"&fpvs="+ak;var ap=[""];for(var aq=0;aq<S.length;aq++){try{S[aq](ap,b)}catch(e){}}if(ap.length>1){ar+=ap.join("&")}return ar}var ah={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(aq){var e="";var ay,aw,au,ax,av,at,ar;var ap=0;aq=ah._utf8_encode(aq);while(ap<aq.length){ay=aq.charCodeAt(ap++);aw=aq.charCodeAt(ap++);au=aq.charCodeAt(ap++);ax=ay>>2;av=((ay&3)<<4)|(aw>>4);at=((aw&15)<<2)|(au>>6);ar=au&63;if(isNaN(aw)){at=ar=64}else{if(isNaN(au)){ar=64}}e=e+this._keyStr.charAt(ax)+this._keyStr.charAt(av)+this._keyStr.charAt(at)+this._keyStr.charAt(ar)}return e},_utf8_encode:function(ap){ap=ap.replace(/\r\n/g,"\n");var e="";for(var ar=0;ar<ap.length;ar++){var aq=ap.charCodeAt(ar);if(aq<128){e+=String.fromCharCode(aq)}else{if((aq>127)&&(aq<2048)){e+=String.fromCharCode((aq>>6)|192);e+=String.fromCharCode((aq&63)|128)}else{e+=String.fromCharCode((aq>>12)|224);e+=String.fromCharCode(((aq>>6)&63)|128);e+=String.fromCharCode((aq&63)|128)}}}return e}};function a(at){function ar(aN,aM){var aL=(aN<<aM)|(aN>>>(32-aM));return aL}function aF(aO){var aN="";var aL;var aP;var aM;for(aL=0;aL<=6;aL+=2){aP=(aO>>>(aL*4+4))&15;aM=(aO>>>(aL*4))&15;aN+=aP.toString(16)+aM.toString(16)}return aN}function aH(aO){var aN="";var aM;var aL;for(aM=7;aM>=0;aM--){aL=(aO>>>(aM*4))&15;aN+=aL.toString(16)}return aN}function ap(aM){aM=aM.replace(/\r\n/g,"\n");var aL="";for(var aO=0;aO<aM.length;aO++){var aN=aM.charCodeAt(aO);if(aN<128){aL+=String.fromCharCode(aN)}else{if((aN>127)&&(aN<2048)){aL+=String.fromCharCode((aN>>6)|192);aL+=String.fromCharCode((aN&63)|128)}else{aL+=String.fromCharCode((aN>>12)|224);aL+=String.fromCharCode(((aN>>6)&63)|128);aL+=String.fromCharCode((aN&63)|128)}}}return aL}var aw;var aJ,aI;var aq=new Array(80);var aA=1732584193;var ay=4023233417;var ax=2562383102;var av=271733878;var au=3285377520;var aG,aE,aD,aC,aB;var aK;at=ap(at);var e=at.length;var az=new Array();for(aJ=0;aJ<e-3;aJ+=4){aI=at.charCodeAt(aJ)<<24|at.charCodeAt(aJ+1)<<16|at.charCodeAt(aJ+2)<<8|at.charCodeAt(aJ+3);az.push(aI)}switch(e%4){case 0:aJ=2147483648;break;case 1:aJ=at.charCodeAt(e-1)<<24|8388608;break;case 2:aJ=at.charCodeAt(e-2)<<24|at.charCodeAt(e-1)<<16|32768;break;case 3:aJ=at.charCodeAt(e-3)<<24|at.charCodeAt(e-2)<<16|at.charCodeAt(e-1)<<8|128;break}az.push(aJ);while((az.length%16)!=14){az.push(0)}az.push(e>>>29);az.push((e<<3)&4294967295);for(aw=0;aw<az.length;aw+=16){for(aJ=0;aJ<16;aJ++){aq[aJ]=az[aw+aJ]}for(aJ=16;aJ<=79;aJ++){aq[aJ]=ar(aq[aJ-3]^aq[aJ-8]^aq[aJ-14]^aq[aJ-16],1)}aG=aA;aE=ay;aD=ax;aC=av;aB=au;for(aJ=0;aJ<=19;aJ++){aK=(ar(aG,5)+((aE&aD)|(~aE&aC))+aB+aq[aJ]+1518500249)&4294967295;aB=aC;aC=aD;aD=ar(aE,30);aE=aG;aG=aK}for(aJ=20;aJ<=39;aJ++){aK=(ar(aG,5)+(aE^aD^aC)+aB+aq[aJ]+1859775393)&4294967295;aB=aC;aC=aD;aD=ar(aE,30);aE=aG;aG=aK}for(aJ=40;aJ<=59;aJ++){aK=(ar(aG,5)+((aE&aD)|(aE&aC)|(aD&aC))+aB+aq[aJ]+2400959708)&4294967295;aB=aC;aC=aD;aD=ar(aE,30);aE=aG;aG=aK}for(aJ=60;aJ<=79;aJ++){aK=(ar(aG,5)+(aE^aD^aC)+aB+aq[aJ]+3395469782)&4294967295;aB=aC;aC=aD;aD=ar(aE,30);aE=aG;aG=aK}aA=(aA+aG)&4294967295;ay=(ay+aE)&4294967295;ax=(ax+aD)&4294967295;av=(av+aC)&4294967295;au=(au+aB)&4294967295}var aK=aH(aA)+aH(ay)+aH(ax)+aH(av)+aH(au);return aK.toLowerCase()}var f=(function(){var ar={},au=window,at=au.document,aq="localStorage",ap="globalStorage",av;ar.set=function(aw,ax){};ar.get=function(aw){};ar.remove=function(aw){};ar.clear=function(){};if(aq in au&&au[aq]){av=au[aq];ar.set=function(aw,ax){av.setItem(aw,ax)};ar.get=function(aw){return av.getItem(aw)};ar.remove=function(aw){av.removeItem(aw)};ar.clear=function(){av.clear()}}else{if(ap in au&&au[ap]){av=au[ap][au.location.hostname];ar.set=function(aw,ax){av[aw]=ax};ar.get=function(aw){return av[aw]&&av[aw].value};ar.remove=function(aw){delete av[aw]};ar.clear=function(){for(var aw in av){delete av[aw]}}}else{if(at.documentElement.addBehavior){function e(){if(av){return av}av=at.body.appendChild(at.createElement("div"));av.style.display="none";av.addBehavior("#default#userData");av.load(aq);return av}ar.set=function(aw,ax){var ay=e();ay.setAttribute(aw,ax);ay.save(aq)};ar.get=function(aw){var ax=e();return ax.getAttribute(aw)};ar.remove=function(aw){var ax=e();ax.removeAttribute(aw);ax.save(aq)};ar.clear=function(){var az=e();var ax=az.XMLDocument.documentElement.attributes;az.load(aq);for(var ay=0,aw;aw=ax[ay];ay++){az.removeAttribute(aw.name)}az.save(aq)}}}}return ar})();function M(ap,e){return Math.floor(Math.random()*(e-ap+1)+ap)}function R(){var aq=new Date();var e=aq.getTime();var ap=M(10,99);return ap+""+e}function x(aq,at,e,aw,ar,av){var ap=new Date();ap.setTime(ap.getTime());if(e){e=e*1000*60*60*24}var au=new Date(ap.getTime()+(e));document.cookie=aq+"="+escape(at)+((e)?";expires="+au.toGMTString():"")+((aw)?";path="+aw:"")+((ar)?";domain="+ar:"")+((av)?";secure":"")}function t(e){var au=document.cookie.split(";");var ap="";var ar="";var at="";var aq=false;for(i=0;i<au.length;i++){ap=au[i].split("=");ar=ap[0].replace(/^\s+|\s+$/g,"");if(ar==e){aq=true;if(ap.length>1){at=unescape(ap[1].replace(/^\s+|\s+$/g,""))}return at;break}ap=null;ar=""}if(!aq){return null}}function m(){return new V(P,ac,null,af,-1)}function q(){return new V(N,ac,aj,af,1)}function E(){if(null==s||""==s){return new V()}function ap(aq,ar){x(aq,ar,730,"/",s,"")}function e(aq){x(aq,"",-365,"/",s,"")}return new V(O,t,ap,e,0)}function p(aq){var ap=(unescape(encodeURIComponent(aq)));var ar="";for(i=0;i<ap.length;i++){var e=ap.charCodeAt(i);var at=e^85;ar=ar+String.fromCharCode(at)}if(window.btoa){return ab+window.btoa(ar)}else{return ab+ah.encode(ar)}}function an(){var ap=m();var ar=[ap,q(),E()];ar.sort(V.Comparator);var e=ar[0].getValue();if(null!==e){if(!ar[0].hasTimestamp()){ar[0].setValue(e)}for(var aq=1;aq<ar.length;aq++){ar[aq].setValue(e)}ap.remove()}return e}function ad(){var e=an();var ap=t(J);return I()+"&fpts="+(ap==null?"":ap)+"&fptg="+(e==null?"":e)+(s?"&parentDomain="+s:"")}function k(){if(b.enhancedFingerprintExcludeBrowserList===null||b.enhancedFingerprintExcludeBrowserList==="undefined"){return false}var ar=b.enhancedFingerprintExcludeBrowserList.trim().split(",");for(var aq=0,e=ar.length;aq<e;aq++){var ap=ar[aq].split(":");if(ap.length!==2){continue}if(o.browserMatches(o.browser,o.version,ap[0].trim(),ap[1].trim())){return true}}return false}function H(){return b.enhancedFingerprint&&!b.doesBrowserDiscourageCanvasFingerprinting()}r.readFingerprint=function(){return p(ad())};r.setParentDomain=function(e){s=e||"";O=N+"_"+s};r.writeTag=function(e,ar){if(e==null){return}if(ar){var aq=[q(),E()];for(var ap=0;ap<aq.length;ap++){aq[ap].setValue(e)}x(J,R(),"365","/","","")}};r.writeTagId=function(e){f.set(A,e);if(s){var ap=A+"_"+s;x(ap,e,"365","/",s,"")}};r.setDataToStorage=aj;r.getDataFromStorage=ac;r.removeDataFromStorage=af;r.setEnhancedFingerprint=function(e){if(e===undefined){e=y}b.enhancedFingerprint=!!e};r.setEnhancedFingerprintExcludeBrowserList=function(e){if(e===undefined){e=Q}b.enhancedFingerprintExcludeBrowserList=e};r.shouldFingerprintCanvas=b.shouldFingerprintCanvas;r.removeIaData=function(){x(J,"",-365,"/","","");if(s){x(N+"_"+s,"",-365,"/",s,"");x(N+"_"+s+"_timestamp_","",-365,"/",s,"");x(A+"_"+s,"",-365,"/",s,"")}f.remove(N);f.remove(A);f.remove(N+"_timestamp_")};return r})();